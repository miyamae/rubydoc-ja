<!DOCTYPE html>
<html lang="ja-JP">
<head>

<meta name="robots" content="noindex">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../../../style.css">
<link rel="stylesheet" href="../../../syntax-highlight.css">
<link rel="icon" type="image/png" href="../../../rurema.png">

<title>CSV.open (Ruby 2.6.10 リファレンスマニュアル)</title>
<meta name="description" content="このメソッドは [[c:IO]] オブジェクトをオープンして [[c:CSV]] でラップします。
これは CSV ファイルを書くための主要なインターフェイスとして使うことを意図しています。">
<script src="../../../script.js"></script>
</head>
<body>


<header>
  <nav>
    <ol class="inline-breadcrumb-list">
      <li>
        <a href="../../../doc/index.html">Ruby 2.6.10 リファレンスマニュアル</a>
      </li>
      <li>
        <a href="../../../library/index.html">ライブラリ一覧</a>
      </li>
      <li>
        <a href="../../../library/csv.html">csvライブラリ</a>
      </li>
      <li>
        <a href="../../../class/-c-s-v.html">CSVクラス</a>
      </li>
      <li>
        open 
      </li>
    </ol>
  </nav>

<h1>singleton method CSV.open</h1>
</header>

<main>
<dl class="methodlist">

<dt class="method-heading" id="S_OPEN"><code>open(filename, mode = &quot;rb&quot;, options = Hash.new) {|csv| ... } -&gt; nil</code><span class="permalink">[<a href="../../../method/-c-s-v/s/open.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.6.10/CSV.html#method-c-open">rdoc</a>]</span></dt>
<dt class="method-heading"><code>open(filename, mode = &quot;rb&quot;, options = Hash.new) -&gt; CSV</code></dt>
<dt class="method-heading"><code>open(filename, options = Hash.new) {|csv| ... } -&gt; nil</code></dt>
<dt class="method-heading"><code>open(filename, options = Hash.new) -&gt; CSV</code></dt>
<dd class="method-description">
<p>
このメソッドは <a href="../../../class/-i-o.html">IO</a> オブジェクトをオープンして <a href="../../../class/-c-s-v.html">CSV</a> でラップします。これは CSV ファイルを書くための主要なインターフェイスとして使うことを意図しています。
</p>
<p>
このメソッドは <a href="../../../method/-i-o/s/open.html">IO.open</a> と同じように動きます。ブロックが与えられた場合はブロックに <a href="../../../class/-c-s-v.html">CSV</a> オブジェクトを渡し、ブロック終了時にそれをクローズします。ブロックが与えられなかった場合は <a href="../../../class/-c-s-v.html">CSV</a> オブジェクトを返します。
</p>
<p>
データが <a href="../../../method/-encoding/s/default_external.html">Encoding.default_external</a> と異なる場合は、mode にエンコーディングを指定する文字列を埋め込まなければなりません。データをどのように解析するか決定するために CSV ライブラリはユーザが mode に指定したエンコーディングをチェックします。&quot;rb:UTF-32BE:UTF-8&quot; のように mode を指定すると UTF-32BE のデータを読み込んでUTF-8 に変換してから解析します。
</p>
<p>
また &quot;rb:BOM|UTF-8&quot; のように mode を指定すると BOM を自動的に取り除きます。
</p>
<p>
CSV オブジェクトは多くのメソッドを <a href="../../../class/-i-o.html">IO</a> や <a href="../../../class/-file.html">File</a> に委譲します。
</p>
<ul>
<li><a href="../../../method/-i-o/i/binmode.html">IO#binmode</a></li>
<li><a href="../../../method/-i-o/i/binmode=3f.html">IO#binmode?</a></li>
<li><a href="../../../method/-i-o/i/close.html">IO#close</a></li>
<li><a href="../../../method/-i-o/i/close_read.html">IO#close_read</a></li>
<li><a href="../../../method/-i-o/i/close_write.html">IO#close_write</a></li>
<li><a href="../../../method/-i-o/i/closed=3f.html">IO#closed?</a></li>
<li><a href="../../../method/-i-o/i/eof.html">IO#eof</a></li>
<li><a href="../../../method/-i-o/i/eof=3f.html">IO#eof?</a></li>
<li><a href="../../../method/-i-o/i/external_encoding.html">IO#external_encoding</a></li>
<li><a href="../../../method/-i-o/i/fcntl.html">IO#fcntl</a></li>
<li><a href="../../../method/-i-o/i/fileno.html">IO#fileno</a></li>
<li><a href="../../../method/-file/i/flock.html">File#flock</a></li>
<li><a href="../../../method/-i-o/i/flush.html">IO#flush</a></li>
<li><a href="../../../method/-i-o/i/fsync.html">IO#fsync</a></li>
<li><a href="../../../method/-i-o/i/internal_encoding.html">IO#internal_encoding</a></li>
<li><a href="../../../method/-i-o/i/ioctl.html">IO#ioctl</a></li>
<li><a href="../../../method/-i-o/i/isatty.html">IO#isatty</a></li>
<li><a href="../../../method/-file/i/path.html">File#path</a></li>
<li><a href="../../../method/-i-o/i/pid.html">IO#pid</a></li>
<li><a href="../../../method/-i-o/i/pos.html">IO#pos</a></li>
<li><a href="../../../method/-i-o/i/pos=3d.html">IO#pos=</a></li>
<li><a href="../../../method/-i-o/i/reopen.html">IO#reopen</a></li>
<li><a href="../../../method/-i-o/i/seek.html">IO#seek</a></li>
<li><a href="../../../method/-i-o/i/stat.html">IO#stat</a></li>
<li><a href="../../../method/-string-i-o/i/string.html">StringIO#string</a></li>
<li><a href="../../../method/-i-o/i/sync.html">IO#sync</a></li>
<li><a href="../../../method/-i-o/i/sync=3d.html">IO#sync=</a></li>
<li><a href="../../../method/-i-o/i/tell.html">IO#tell</a></li>
<li><a href="../../../method/-i-o/i/to_i.html">IO#to_i</a></li>
<li><a href="../../../method/-i-o/i/to_io.html">IO#to_io</a></li>
<li><a href="../../../method/-file/i/truncate.html">File#truncate</a></li>
<li><a href="../../../method/-i-o/i/tty=3f.html">IO#tty?</a></li>
</ul>
<dl>
<dt class='method-param'>[PARAM] filename:</dt>
<dd>
ファイル名を指定します。
</dd>
<dt class='method-param'>[PARAM] mode:</dt>
<dd>
<a href="../../../method/-i-o/s/open.html">IO.open</a> に指定できるものと同じものを指定できます。
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
<a href="../../../method/-c-s-v/s/new.html">CSV.new</a> のオプションと同じオプションを指定できます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例 読み取り・ブロック指定なし</span>
<code>
<span class="nb">require</span> <span class="s2">"</span><span class="s2">csv</span><span class="s2">"</span>

<span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">"</span><span class="s2">test.csv</span><span class="s2">"</span>, <span class="no">&lt;&lt;CSV</span><span class="p">)</span>
<span class="sh">id,first name,last name,age
1,taro,tanaka,20
2,jiro,suzuki,18
3,ami,sato,19
4,yumi,adachi,21
</span><span class="no">CSV
</span>csv <span class="o">=</span> <span class="no">CSV</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">test.csv</span><span class="s2">"</span>, <span class="ss">headers:</span> <span class="k">true</span><span class="p">)</span>
csv<span class="p">.</span><span class="nf">class</span> <span class="c1"># =&gt; CSV
</span>csv<span class="p">.</span><span class="nf">first</span> <span class="c1"># =&gt; #&lt;CSV::Row &quot;id&quot;:&quot;1&quot; &quot;first name&quot;:&quot;taro&quot; &quot;last name&quot;:&quot;tanaka&quot; &quot;age&quot;:&quot;20&quot;&gt;
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">例 読み取り・ブロック指定あり</span>
<code>
<span class="nb">require</span> <span class="s2">"</span><span class="s2">csv</span><span class="s2">"</span>

users <span class="o">=</span><span class="no">&lt;&lt;-EOS</span>
<span class="sh">id,first name,last name,age
1,taro,tanaka,20
2,jiro,suzuki,18
3,ami,sato,19
4,yumi,adachi,21
</span><span class="no">EOS
</span>
<span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">"</span><span class="s2">test.csv</span><span class="s2">"</span>, users<span class="p">)</span>
<span class="no">CSV</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">test.csv</span><span class="s2">"</span>, <span class="ss">headers:</span> <span class="k">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span>csv<span class="o">|</span>
  csv<span class="p">.</span><span class="nf">class</span> <span class="c1"># =&gt; CSV
</span>  csv<span class="p">.</span><span class="nf">first</span> <span class="c1"># =&gt; #&lt;CSV::Row &quot;id&quot;:&quot;1&quot; &quot;first name&quot;:&quot;taro&quot; &quot;last name&quot;:&quot;tanaka&quot; &quot;age&quot;:&quot;20&quot;&gt;
</span><span class="k">end</span>
</code></pre>
<pre class="highlight ruby">
<span class="caption">例 書き込み・ブロック指定あり</span>
<code>
<span class="nb">require</span> <span class="s2">"</span><span class="s2">csv</span><span class="s2">"</span>

<span class="no">CSV</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">test.csv</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span>csv<span class="o">|</span>
  csv <span class="o">&lt;&lt;</span> <span class="p">[</span><span class="s2">"</span><span class="s2">id</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">first name</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">last name</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">age</span><span class="s2">"</span><span class="p">]</span>
  csv <span class="o">&lt;&lt;</span> <span class="p">[</span><span class="s2">"</span><span class="s2">1</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">taro</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">tanaka</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">20</span><span class="s2">"</span><span class="p">]</span>
  csv <span class="o">&lt;&lt;</span> <span class="p">[</span><span class="s2">"</span><span class="s2">2</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">jiro</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">suzuki</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">18</span><span class="s2">"</span><span class="p">]</span>
  csv <span class="o">&lt;&lt;</span> <span class="p">[</span><span class="s2">"</span><span class="s2">3</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">ami</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">sato</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">19</span><span class="s2">"</span><span class="p">]</span>
  csv <span class="o">&lt;&lt;</span> <span class="p">[</span><span class="s2">"</span><span class="s2">4</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">yumi</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">adachi</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">21</span><span class="s2">"</span><span class="p">]</span>
<span class="k">end</span>
<span class="nb">print</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="s2">"</span><span class="s2">test.csv</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># =&gt; id,first name,last name,age
</span><span class="c1">#    1,taro,tanaka,20
</span><span class="c1">#    2,jiro,suzuki,18
</span><span class="c1">#    3,ami,sato,19
</span><span class="c1">#    4,yumi,adachi,21
</span></code></pre>
<p>
[SEE_ALSO] <a href="../../../method/-c-s-v/s/new.html">CSV.new</a>, <a href="../../../method/-i-o/s/open.html">IO.open</a>
</p>
</dd>


</dl>
</main>

<footer id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>

  <a href="https://github.com/rurema/doctree/issues/new" id="feedback-link">フィードバックを送る</a>
  
  <script>if (window.URLSearchParams) { document.getElementById("feedback-link").search = new URLSearchParams({'body': document.location}); }</script>
</footer>
</body>
</html>
