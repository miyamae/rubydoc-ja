<!DOCTYPE html>
<html lang="ja-JP">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="ja-JP">
  <link rel="stylesheet" type="text/css" href="../style.css">
  <link rel="icon" type="image/png" href="../rurema.png">
  
  <title>class OpenSSL::PKey::EC (Ruby 1.9.3)</title>
</head>
<body>

<p>
<a href="../doc/index.html">Ruby 1.9.3 リファレンスマニュアル</a>
&gt; <a href="../library/index.html">ライブラリ一覧</a>
&gt; <a href="../library/openssl.html">opensslライブラリ</a>
&gt; OpenSSL::PKey::ECクラス
</p>


<h1>class OpenSSL::PKey::EC</h1>
<p>


クラスの継承リスト: OpenSSL::PKey::EC

      &lt; <a href="../class/-open-s-s-l=3a=3a-p-key=3a=3a-p-key.html">OpenSSL::PKey::PKey</a>
      

      &lt; <a href="../class/-object.html">Object</a>
      

      &lt; <a href="../class/-kernel.html">Kernel</a>
      

      &lt; <a href="../class/-basic-object.html">BasicObject</a>
      







</p>

<h2>要約</h2>
<p>
EC(Ellicptic Curve,楕円曲線)暗号鍵のクラスです。
</p>
<p>
このクラスのメソッドについてより詳しく知りたい場合は openssl のドキュメント
の対応する関数の項を見てください。
</p>



<h2>目次</h2>
<dl>

<dt>特異メソッド</dt>
<dd>

<a href="#S_BUILTIN_CURVES">builtin_curves</a>

<a href="#S_NEW">new</a>

</dd>

<dt>インスタンスメソッド</dt>
<dd>

<a href="#I_CHECK_KEY">check_key</a>

<a href="#I_DH_COMPUTE_KEY">dh_compute_key</a>

<a href="#I_DSA_SIGN_ASN1">dsa_sign_asn1</a>

<a href="#I_DSA_VERIFY_ASN1">dsa_verify_asn1</a>

<a href="#I_GENERATE_KEY">generate_key</a>

<a href="#I_GROUP">group</a>

<a href="#I_GROUP--3D">group=</a>

<a href="#I_PRIVATE_KEY">private_key</a>

<a href="#I_PRIVATE_KEY--3D">private_key=</a>

<a href="#I_PRIVATE_KEY--3F">private_key?</a>

<a href="#I_PUBLIC_KEY">public_key</a>

<a href="#I_PUBLIC_KEY--3D">public_key=</a>

<a href="#I_PUBLIC_KEY--3F">public_key?</a>

<a href="#I_TO_DER">to_der</a>

<a href="#I_TO_PEM">to_pem</a>

<a href="#I_TO_TEXT">to_text</a>

</dd>

<dt>定数</dt>
<dd>

<a href="#C_-N-A-M-E-D_-C-U-R-V-E">NAMED_CURVE</a>

</dd>

</dl>


<h2>特異メソッド</h2>
<dl>

<dt class="method-heading" id="S_BUILTIN_CURVES"><code>builtin_curves -&gt; [[String, String]]</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/s/builtin_curves.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-c-builtin_curves">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
組み込みの曲線の名前と、それに対する説明を文字列の配列ペアの配列で返します。
</p>
<p>
例:
</p>
<pre>
OpenSSL::PKey::EC.builtin_curves
# =&gt; [[&quot;secp112r1&quot;, &quot;SECG/WTLS curve over a 112 bit prime field&quot;],
#     [&quot;secp112r2&quot;, &quot;SECG curve over a 112 bit prime field&quot;],
#     [&quot;secp128r1&quot;, &quot;SECG curve over a 128 bit prime field&quot;],
#     [&quot;secp128r2&quot;, &quot;SECG curve over a 128 bit prime field&quot;],
#     ... ]
</pre>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c=3a=3a-group/s/new.html">OpenSSL::PKey::EC::Group.new</a>
</p>
</dd>


<dt class="method-heading" id="S_NEW"><code>new -&gt; OpenSSL::PKey::EC</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/s/new.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-c-new">rdoc</a>]</span></dt>
<dt class="method-heading"><code>new(obj) -&gt; OpenSSL::PKey::EC</code></dt>
<dd class="method-description">
<p>
OpenSSL::PKey::EC オブジェクトを生成します。
</p>
<p>
引数の種類や内容によって異なる挙動をします。
</p>
<p>
引数なしの場合は、空の EC オブジェクトを生成します。
これにはパラメータ(曲線から定義される群)も鍵対も含まれていません。
</p>
<p>
引数が OpenSSL::PKey::EC オブジェクトである場合には、
そのオブジェクトのコピーを返します。
</p>
<p>
引数が <a href="../class/-open-s-s-l=3a=3a-p-key=3a=3a-e-c=3a=3a-group.html">OpenSSL::PKey::EC::Group</a> のオブジェクトである場合には、
それを群として設定されます。鍵対は含まれません。
</p>
<p>
引数が DER 形式もしくは PEM 形式の文字列である場合は、その内容を
読み込んで EC オブジェクトを出力します。その内容によって
鍵対の両方、もしくは公開鍵のみ含まれています。
</p>
<p>
引数が曲線の名前の文字列である場合には、その曲線で定義される
群がパラメータとして設定されます。鍵対は含まれません。
</p>
<dl>
<dt class='method-param'>[PARAM] obj:</dt>
<dd>
ECオブジェクトの生成元(EC オブジェクト or EC::Group オブジェクト
or 文字列)
</dd>
<dt>[EXCEPTION] OpenSSL::PKey::EC::ECError:</dt>
<dd>
オブジェクトの生成に失敗した場合に発生します
</dd>
</dl>
</dd>


</dl>

<h2>インスタンスメソッド</h2>
<dl>

<dt class="method-heading" id="I_CHECK_KEY"><code>check_key -&gt; true</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/check_key.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-check_key">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
パラメータと鍵対をチェックします。
</p>
<p>
なんらかの意味で鍵対に問題がある場合には例外 ECError を発生します。
</p>
<dl>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
鍵に問題がある場合に発生します
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_DH_COMPUTE_KEY"><code>dh_compute_key(pubkey) -&gt; String</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/dh_compute_key.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-dh_compute_key">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自分の秘密鍵と相手の公開鍵から ECDH によって鍵文字列を計算し、返します。
</p>
<p>
相手の公開鍵は <a href="../class/-open-s-s-l=3a=3a-p-key=3a=3a-e-c=3a=3a-point.html">OpenSSL::PKey::EC::Point</a> オブジェクトである必要があります。
</p>
<dl>
<dt class='method-param'>[PARAM] pubkey:</dt>
<dd>
相手の公開鍵
</dd>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
鍵交換に失敗した場合に発生します
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_DSA_SIGN_ASN1"><code>dsa_sign_asn1(data) -&gt; String</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/dsa_sign_asn1.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-dsa_sign_asn1">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
秘密鍵を用い、data に ECDSA で署名します。
</p>
<p>
結果は文字列として返します。
</p>
<p>
data のダイジェストを取る処理はこのメソッドに含まれていません。
自身で適当なダイジェストを取る必要があります。
</p>
<dl>
<dt class='method-param'>[PARAM] data:</dt>
<dd>
署名対象のデータ(文字列)
</dd>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
EC オブジェクトが秘密鍵を保持していない場合、
もしくは署名に失敗した場合に発生します
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/dsa_verify_asn1.html">OpenSSL::PKey::EC#dsa_verify_asn1</a>
</p>
</dd>


<dt class="method-heading" id="I_DSA_VERIFY_ASN1"><code>dsa_verify_asn1(data, sig) -&gt; bool</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/dsa_verify_asn1.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-dsa_verify_asn1">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
公開鍵を用い、署名を ECDSA で検証します。
</p>
<p>
data のダイジェストを取る処理はこのメソッドに含まれていません。
自身で適当なダイジェストを取る必要があります。
</p>
<p>
検証に成功した場合は true を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] data:</dt>
<dd>
署名対象のデータ(文字列)
</dd>
<dt class='method-param'>[PARAM] sig:</dt>
<dd>
署名データ(文字列)
</dd>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
署名の検証時にエラーが生じた場合に発生します
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/dsa_sign_asn1.html">OpenSSL::PKey::EC#dsa_sign_asn1</a>
</p>
</dd>


<dt class="method-heading" id="I_GENERATE_KEY"><code>generate_key -&gt; self</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/generate_key.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-generate_key">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
鍵ペアを乱数で生成します。
</p>
<dl>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
鍵ペアの生成に失敗した場合に発生します
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_GROUP"><code>group -&gt; OpenSSL::PKey::EC::Group</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/group.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-group">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
鍵パラメータとなる群を表すオブジェクトを返します。
</p>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/group=3d.html">OpenSSL::PKey::EC#group=</a>
</p>
</dd>


<dt class="method-heading" id="I_GROUP--3D"><code>group=(gr)</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/group=3d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-group-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
鍵パラメータとなる群を表すオブジェクトを設定します。
</p>
<p>
通常このメソッドで値を変更することはありません。
よく考えて必要な場合のみ利用してください。
</p>
<dl>
<dt class='method-param'>[PARAM] gr:</dt>
<dd>
設定する <a href="../class/-open-s-s-l=3a=3a-p-key=3a=3a-e-c=3a=3a-group.html">OpenSSL::PKey::EC::Group</a> オブジェクト
</dd>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
Group オブジェクトの設定に失敗した場合に発生します
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/group.html">OpenSSL::PKey::EC#group</a>
</p>
</dd>


<dt class="method-heading" id="I_PRIVATE_KEY"><code>private_key -&gt; OpenSSL::BN|nil</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/private_key.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-private_key">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
秘密鍵となる整数を返します。
</p>
<p>
鍵が設定されていない場合は nil を返します。
</p>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/private_key=3d.html">OpenSSL::PKey::EC#private_key=</a>
</p>
</dd>


<dt class="method-heading" id="I_PRIVATE_KEY--3D"><code>private_key=(privkey)</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/private_key=3d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-private_key-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
秘密鍵となる整数を設定します。
</p>
<p>
nil を渡すことで EC オブジェクトが公開鍵のみを持つ状態に変更できます。
</p>
<dl>
<dt class='method-param'>[PARAM] privkey:</dt>
<dd>
設定する秘密鍵(<a href="../class/-open-s-s-l=3a=3a-b-n.html">OpenSSL::BN</a> オブジェクト)
</dd>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
秘密鍵の設定に失敗した場合に発生します
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/private_key.html">OpenSSL::PKey::EC#private_key</a>
</p>
</dd>


<dt class="method-heading" id="I_PRIVATE_KEY--3F"><code>private_key? -&gt; bool</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/private_key=3f.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-private_key-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
EC オブジェクトが秘密鍵を保持していれば真を返します。
</p>
</dd>


<dt class="method-heading" id="I_PUBLIC_KEY"><code>public_key -&gt; OpenSSL::PKey::EC::Point|nil</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/public_key.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-public_key">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
公開鍵となる楕円曲線上の点を表すオブジェクトを返します。
</p>
<p>
鍵が設定されていない場合は nil を返します。
</p>
<dl>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
公開鍵の取得時にエラーが生じた場合に発生します
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/public_key=3d.html">OpenSSL::PKey::EC#public_key=</a>
</p>
</dd>


<dt class="method-heading" id="I_PUBLIC_KEY--3D"><code>public_key=(pubkey)</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/public_key=3d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-public_key-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
公開鍵となる楕円曲線上の点を表すオブジェクトを設定します。
</p>
<p>
通常このメソッドで値を変更することはありません。
よく考えて必要な場合のみ利用してください。
</p>
<dl>
<dt class='method-param'>[PARAM] pubkey:</dt>
<dd>
公開鍵となる <a href="../class/-open-s-s-l=3a=3a-p-key=3a=3a-e-c=3a=3a-point.html">OpenSSL::PKey::EC::Point</a> オブジェクト
</dd>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
公開鍵の設定時にエラーが生じた場合に発生します
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/public_key.html">OpenSSL::PKey::EC#public_key</a>
</p>
</dd>


<dt class="method-heading" id="I_PUBLIC_KEY--3F"><code>public_key? -&gt; bool</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/public_key=3f.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-public_key-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
EC オブジェクトが公開鍵を保持していれば真を返します。
</p>
<p>
<a href="../class/-open-s-s-l=3a=3a-p-key=3a=3a-r-s-a.html">OpenSSL::PKey::RSA</a> や <a href="../class/-open-s-s-l=3a=3a-p-key=3a=3a-d-s-a.html">OpenSSL::PKey::DSA</a> と
異なり、EC オブジェクトが公開鍵を含まない場合が存在します。
例えば、<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/s/new.html">OpenSSL::PKey::EC.new</a> でパラメータとなる群のみを
指定して EC オブジェクトを作った場合は、公開鍵も秘密鍵も
保持していません。この場合 <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/generate_key.html">OpenSSL::PKey::EC#generate_key</a> で
鍵を生成するまで、その状態のままです。
</p>
<p>
このメソッドを呼ぶ前に <a href="../class/-open-s-s-l=3a=3a-random.html">OpenSSL::Random</a> の各モジュール関数に
よって乱数が適切に初期化されている必要があります。
</p>
</dd>


<dt class="method-heading" id="I_TO_DER"><code>to_der -&gt; String</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/to_der.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-to_der">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
鍵を DER 形式の文字列に変換します。
</p>
<dl>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
文字列への変換に失敗した場合に発生します。
公開鍵が含まれていない場合や、鍵が妥当でない場合などに失敗します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_TO_PEM"><code>to_pem -&gt; String</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/to_pem.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-to_pem">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
鍵を PEM 形式の文字列に変換します。
</p>
<p>
現在の仕様では <a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-r-s-a/i/to_pem.html">OpenSSL::PKey::RSA#to_pem</a> のように
出力をパスフレーズで暗号化することはできません。
</p>
<dl>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
文字列への変換に失敗した場合に発生します。
公開鍵が含まれていない場合や、鍵が妥当でない場合などに失敗します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_TO_TEXT"><code>to_text -&gt; String</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/i/to_text.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-i-to_text">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
鍵を人間が読める形式に変換します。
</p>
<dl>
<dt>[EXCEPTION] OpenSSL::PKey::ECError:</dt>
<dd>
文字列への変換に失敗した場合に発生します。
公開鍵が含まれていない場合や、鍵が妥当でない場合などに失敗します。
</dd>
</dl>
</dd>


</dl>

<h2>定数</h2>
<dl>

<dt class="method-heading" id="C_-N-A-M-E-D_-C-U-R-V-E"><code>NAMED_CURVE -&gt; Integer</code><span class="permalink">[<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c/c/-n-a-m-e-d_-c-u-r-v-e.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.3/OpenSSL/PKey/EC.html#method-c-NAMED_CURVE">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
その群が名前を持つ曲線から定義されていることを意味するフラグです。
</p>
<p>
<a href="../method/-open-s-s-l=3a=3a-p-key=3a=3a-e-c=3a=3a-group/i/asn1_flag=3d.html">OpenSSL::PKey::EC::Group#asn1_flag=</a> で利用されます。
</p>
</dd>


</dl>



<div id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>
</div>
</body>
</html>
