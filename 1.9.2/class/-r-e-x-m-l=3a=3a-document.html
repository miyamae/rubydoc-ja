<!DOCTYPE html>
<html lang="ja-JP">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="ja-JP">
  <link rel="stylesheet" type="text/css" href="../style.css">
  <link rel="icon" type="image/png" href="../rurema.png">
  
  <title>class REXML::Document (Ruby 1.9.2)</title>
</head>
<body>

<p>
<a href="../doc/index.html">Ruby 1.9.2 リファレンスマニュアル</a>
&gt; <a href="../library/index.html">ライブラリ一覧</a>
&gt; <a href="../library/rexml=2fdocument.html">rexml/documentライブラリ</a>
&gt; REXML::Documentクラス
</p>


<h1>class REXML::Document</h1>
<p>


クラスの継承リスト: REXML::Document

      &lt; <a href="../class/-r-e-x-m-l=3a=3a-element.html">REXML::Element</a>
      

      &lt; <a href="../class/-r-e-x-m-l=3a=3a-namespace.html">REXML::Namespace</a>
      

      &lt; <a href="../class/-r-e-x-m-l=3a=3a-x-m-l-tokens.html">REXML::XMLTokens</a>
      

      &lt; <a href="../class/-r-e-x-m-l=3a=3a-parent.html">REXML::Parent</a>
      

      &lt; <a href="../class/-enumerable.html">Enumerable</a>
      

      &lt; <a href="../class/-r-e-x-m-l=3a=3a-child.html">REXML::Child</a>
      

      &lt; <a href="../class/-r-e-x-m-l=3a=3a-node.html">REXML::Node</a>
      

      &lt; <a href="../class/-object.html">Object</a>
      

      &lt; <a href="../class/-kernel.html">Kernel</a>
      

      &lt; <a href="../class/-basic-object.html">BasicObject</a>
      







</p>

<h2>要約</h2>
<p>
XMLの完全な文書(ドキュメント)を表すクラス。
</p>
<p>
XML処理命令(Processing Instruction, PI)、
DTD(文書型定義、Document Type Definition)、
などを含んでいます。
ドキュメントは直下の子ノードをただ一つ持っています(rootと呼び、
<a href="../method/-r-e-x-m-l=3a=3a-document/i/root.html">REXML::Document#root</a> でアクセスできます)。
2つ目の要素を(<a href="../method/-r-e-x-m-l=3a=3a-element/i/add_element.html">REXML::Element#add_element</a>などで)追加しようとすると
例外(<a href="../class/-runtime-error.html">RuntimeError</a>)が発生します。
</p>



<h2>目次</h2>
<dl>

<dt>特異メソッド</dt>
<dd>

<a href="#S_ENTITY_EXPANSION_LIMIT">entity_expansion_limit</a>

<a href="#S_ENTITY_EXPANSION_LIMIT--3D">entity_expansion_limit=</a>

<a href="#S_NEW">new</a>

<a href="#S_PARSE_STREAM">parse_stream</a>

</dd>

<dt>インスタンスメソッド</dt>
<dd>

<a href="#I_--3C--3C"><<</a>

<a href="#I_--3C--3C">add</a>

<a href="#I_CLONE">clone</a>

<a href="#I_DOCTYPE">doctype</a>

<a href="#I_ENCODING">encoding</a>

<a href="#I_EXPANDED_NAME">expanded_name</a>

<a href="#I_EXPANDED_NAME">name</a>

<a href="#I_NODE_TYPE">node_type</a>

<a href="#I_ROOT">root</a>

<a href="#I_STAND_ALONE--3F">stand_alone?</a>

<a href="#I_VERSION">version</a>

<a href="#I_WRITE">write</a>

<a href="#I_XML_DECL">xml_decl</a>

</dd>

<dt>定数</dt>
<dd>

<a href="#C_-D-E-C-L-A-R-A-T-I-O-N">DECLARATION</a>

</dd>

</dl>


<h2>特異メソッド</h2>
<dl>

<dt class="method-heading" id="S_ENTITY_EXPANSION_LIMIT"><code>entity_expansion_limit -&gt; Integer</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/s/entity_expansion_limit.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-c-entity_expansion_limit">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
実体参照の展開回数の上限を返します。
</p>
<p>
XML 文書(<a href="../class/-r-e-x-m-l=3a=3a-document.html">REXML::Document</a>)ごとの展開回数がこの値を越えると
例外を発生させ、処理を中断します。
</p>
<p>
実体参照の展開処理を使った DoS 攻撃に対抗するための
仕組みです。
</p>
<p>
デフォルトは 10000 です。
</p>
<p>
[SEE_ALSO] <a href="../method/-r-e-x-m-l=3a=3a-document/s/entity_expansion_limit=3d.html">REXML::Document.entity_expansion_limit=</a>
</p>
</dd>


<dt class="method-heading" id="S_ENTITY_EXPANSION_LIMIT--3D"><code>entity_expansion_limit=(val)</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/s/entity_expansion_limit=3d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-c-entity_expansion_limit-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
実体参照の展開回数の上限を指定します。
</p>
<p>
XML 文書(<a href="../class/-r-e-x-m-l=3a=3a-document.html">REXML::Document</a>)ごとの展開回数がこの値を越えると
例外を発生させ、処理を中断します。
</p>
<p>
デフォルトは 10000 です。
</p>
<dl>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
設定する上限値(整数)
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-r-e-x-m-l=3a=3a-document/s/entity_expansion_limit.html">REXML::Document.entity_expansion_limit</a>
</p>
</dd>


<dt class="method-heading" id="S_NEW"><code>new(source = nil, context = {}) -&gt; REXML::Document</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/s/new.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-c-new">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Document オブジェクトを生成します。
</p>
<p>
source には <a href="../class/-string.html">String</a>、<a href="../class/-i-o.html">IO</a>、<a href="../class/-r-e-x-m-l=3a=3a-document.html">REXML::Document</a> のいずかが
指定できます。 REXML::Document を指定すると
コンテキストと要素、属性が複製されます。
文字列の場合はそれを XML と見なしてパースします。
IOの場合は、XML文書を読み出してパースします。
</p>
<p>
context で「コンテキスト」を指定します。テキストノードの空白や
特殊文字の取り扱いを <a href="../class/-hash.html">Hash</a> で指定します。
以下の <a href="../class/-symbol.html">Symbol</a> をハッシュのキーとして使います。
</p>
<dl>
<dt>:respect_whitespace</dt>
<dd>
<p>
空白を考慮して欲しい要素の名前の集合を文字列の配列で指定します。
また、すべての要素で空白を考慮して欲しい場合には
:all を指定します。
デフォルト値は :all です。
<a href="../method/-r-e-x-m-l=3a=3a-element/i/whitespace.html">REXML::Element#whitespace</a> も参照してください。
</p>
</dd>
<dt>:compress_whitespace</dt>
<dd>
<p>
空白を無視して欲しい要素の名前の集合を文字列の配列で指定します。
この指定は :respect_whitespace での指定を上書きします。
すべての要素で空白を無視して欲しい場合には
:all を指定します。
<a href="../method/-r-e-x-m-l=3a=3a-element/i/whitespace.html">REXML::Element#whitespace</a> も参照してください。
</p>
</dd>
<dt>:ignore_whitespace_nodes</dt>
<dd>
<p>
空白のみからなるノードを無視して欲しい要素の名前の集合を
文字列の配列で指定します。
すべての要素で無視して欲しい場合は :all を指定します。
これが設定された場合、空白のみからなる text node は追加されません。
<a href="../method/-r-e-x-m-l=3a=3a-element/i/ignore_whitespace_nodes.html">REXML::Element#ignore_whitespace_nodes</a> も参照してください。
</p>
</dd>
<dt>:raw</dt>
<dd>
<p>
raw mode で取り扱いをして欲しい要素の名前の集合を
文字列の配列で指定します。
すべてのノードを raw mode で取り扱って欲しい場合は :all を指定します。
raw mode においては、text 中の特殊文字は一切変換されません。
<a href="../method/-r-e-x-m-l=3a=3a-element/i/raw.html">REXML::Element#raw</a> も参照してください。
</p>
</dd>
</dl>
<dl>
<dt class='method-param'>[PARAM] source:</dt>
<dd>
XML文書(文字列, IO)もしくは REXML::Document オブジェクト
</dd>
<dt class='method-param'>[PARAM] context:</dt>
<dd>
コンテキスト
</dd>
<dt>[EXCEPTION] REXML::ParseException:</dt>
<dd>
XML文書のパースに失敗した場合に発生します
</dd>
<dt>[EXCEPTION] REXML::UndefinedNamespaceException:</dt>
<dd>
XML文書のパース中に、定義されていない名前空間
が現れた場合に発生します
</dd>
</dl>
</dd>


<dt class="method-heading" id="S_PARSE_STREAM"><code>parse_stream(source, listener) -&gt; ()</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/s/parse_stream.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-c-parse_stream">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
XML文書を source から読み込み、パースした結果を
listener にコールバックで伝えます。
</p>
<p>
このメソッドは
</p>
<pre>
Parsers::StreamParser.new( source, listener ).parse
</pre>
<p>
と同じ挙動をします。
</p>
<p>
コールバックの詳しい仕組みなどについては <a href="../class/-r-e-x-m-l=3a=3a-parsers=3a=3a-stream-parser.html">REXML::Parsers::StreamParser</a>
および <a href="../class/-r-e-x-m-l=3a=3a-stream-listener.html">REXML::StreamListener</a> を参照してください。
</p>
<dl>
<dt class='method-param'>[PARAM] source:</dt>
<dd>
入力(文字列、IO、IO互換オブジェクト(StringIOなど))
</dd>
<dt class='method-param'>[PARAM] listner:</dt>
<dd>
コールバックオブジェクト
</dd>
</dl>
</dd>


</dl>

<h2>インスタンスメソッド</h2>
<dl>

<dt class="method-heading" id="I_--3C--3C"><code>add(child) -&gt; ()</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/=3c=3c.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-3C-3C">rdoc</a>]</span></dt>
<dt class="method-heading"><code>self &lt;&lt; child -&gt; ()</code></dt>
<dd class="method-description">
<p>
子ノードを追加します。
</p>
<p>
追加できるものは
</p>
<ul>
<li>XML宣言(<a href="../class/-r-e-x-m-l=3a=3a-x-m-l-decl.html">REXML::XMLDecl</a>)</li>
<li>DTD(<a href="../class/-r-e-x-m-l=3a=3a-doc-type.html">REXML::DocType</a>)</li>
<li>ルート要素</li>
</ul>
<p>
のいずれかです。
</p>
</dd>


<dt class="method-heading" id="I_CLONE"><code>clone -&gt; REXML::Document</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/clone.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-clone">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self を複製します。
</p>
<p>
<a href="../method/-r-e-x-m-l=3a=3a-document/s/new.html">REXML::Document.new</a>(self) と同じです。
</p>
</dd>


<dt class="method-heading" id="I_DOCTYPE"><code>doctype -&gt; REXML::DocType | nil</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/doctype.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-doctype">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文書の DTD を返します。
</p>
<p>
文書が DTD を持たない場合は nil を返します。
</p>
</dd>


<dt class="method-heading" id="I_ENCODING"><code>encoding -&gt; String</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/encoding.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-encoding">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
XML 宣言に含まれている XML 文書のエンコーディングを返します。
</p>
<p>
文書が XML 宣言を持たない場合はデフォルトの値
(<a href="../method/-r-e-x-m-l=3a=3a-x-m-l-decl/s/default.html">REXML::XMLDecl.default</a>で宣言されているもの)を返します。
</p>
<h4 >例</h4>
<pre>
require 'rexml/document'
doc = REXML::Document.new(&lt;&lt;EOS)
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;e /&gt;
EOS
doc.encoding # =&gt; &quot;UTF-8&quot;
</pre>
</dd>


<dt class="method-heading" id="I_EXPANDED_NAME"><code>expanded_name -&gt; String</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/expanded_name.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-expanded_name">rdoc</a>]</span></dt>
<dt class="method-heading"><code>name -&gt; String</code></dt>
<dd class="method-description">
<p>
&quot;&quot;(空文字列)を返します。
</p>
<p>
XMLの仕様上、このオブジェクトはexpanded name名前を持ちえません。
</p>
</dd>


<dt class="method-heading" id="I_NODE_TYPE"><code>node_type -&gt; Symbol</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/node_type.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-node_type">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
シンボル :document を返します。
</p>
</dd>


<dt class="method-heading" id="I_ROOT"><code>root -&gt; REXML::Element | nil</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/root.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-root">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文書のルート要素を返します。
</p>
<p>
文書がルート要素を持たない場合は nil を返します。
</p>
</dd>


<dt class="method-heading" id="I_STAND_ALONE--3F"><code>stand_alone? -&gt; String</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/stand_alone=3f.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-stand_alone-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
XML 宣言の standalone の値を文字列で返します。
</p>
<h4 >例</h4>
<pre>
require 'rexml/document'
doc = REXML::Document.new(&lt;&lt;EOS)
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;e /&gt;
EOS
doc.stand_alone? # =&gt; &quot;yes&quot;
</pre>
</dd>


<dt class="method-heading" id="I_VERSION"><code>version -&gt; String</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/version.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-version">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
XML 宣言に含まれている XML 文書のバージョンを返します。
</p>
<p>
文書が XML 宣言を持たない場合はデフォルトの値
(<a href="../method/-r-e-x-m-l=3a=3a-x-m-l-decl/s/default.html">REXML::XMLDecl.default</a>で宣言されているもの)を返します。
</p>
<h4 >例</h4>
<pre>
require 'rexml/document'
doc = REXML::Document.new(&lt;&lt;EOS)
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;e /&gt;
EOS
doc.version # =&gt; &quot;1.0&quot;
</pre>
</dd>


<dt class="method-heading" id="I_WRITE"><code>write(output = $stdout, indent = -1, transitive = false, ie_hack = false) -&gt; ()</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/write.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-write">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
output に XML 文書を出力します。
</p>
<p>
XML宣言、DTD、処理命令を(もしあるならば)含む文書を出力します。
</p>
<p>
注意すべき点として、
元の XML 文書が XML宣言を含んでいなくとも
出力される XML はデフォルトの XML 宣言を含んでいるべきであるが、
REXML は明示しない限り(つまりXML宣言を <a href="../method/-r-e-x-m-l=3a=3a-document/i/add.html">REXML::Document#add</a> で
追加しない限り)
それをしない、ということである。XML-RPCのような利用法では
ネットワークバンドを少しでも節約する必要があるためである。
</p>
<dl>
<dt class='method-param'>[PARAM] output:</dt>
<dd>
出力先(<a href="../class/-i-o.html">IO</a> のように &lt;&lt; で書き込めるオブジェクト)
</dd>
<dt class='method-param'>[PARAM] indent:</dt>
<dd>
インデントのスペースの数(-1 だとインデントしない)
</dd>
<dt class='method-param'>[PARAM] transitive:</dt>
<dd>
XMLではインデントのスペースでDOMが変化してしまう場合がある。
これに真を渡すと、XMLのDOMに余計な要素が加わらないように
空白の出力を適当に抑制するようになる
</dd>
<dt class='method-param'>[PARAM] ie_hack:</dt>
<dd>
IEはバージョンによってはXMLをちゃんと解釈できないので、
それに対応したXMLを出力するかどうかを真偽値で指定する
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_XML_DECL"><code>xml_decl -&gt; REXML::XMLDecl | nil</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/i/xml_decl.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-i-xml_decl">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文書の XML 宣言を返します。
</p>
<p>
文書が XML 宣言を持たない場合は nil を返します。
</p>
</dd>


</dl>

<h2>定数</h2>
<dl>

<dt class="method-heading" id="C_-D-E-C-L-A-R-A-T-I-O-N"><code>DECLARATION -&gt; REXML::XMLDecl</code><span class="permalink">[<a href="../method/-r-e-x-m-l=3a=3a-document/c/-d-e-c-l-a-r-a-t-i-o-n.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.9.2/REXML/Document.html#method-c-DECLARATION">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
この定数は deprecated です。<a href="../method/-r-e-x-m-l=3a=3a-x-m-l-decl/s/default.html">REXML::XMLDecl.default</a> を
代わりに使ってください。
</p>
<p>
デフォルトとして使えるXML宣言オブジェクト。
</p>
</dd>


</dl>



<div id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>
</div>
</body>
</html>
