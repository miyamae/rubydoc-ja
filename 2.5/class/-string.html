<!DOCTYPE html>
<html lang="ja-JP">
<head>

<meta name="robots" content="noindex">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="../syntax-highlight.css">
<link rel="icon" type="image/png" href="../rurema.png">

<title>class String (Ruby 2.5.9 リファレンスマニュアル)</title>
<meta name="description" content="文字列のクラスです。
ヌル文字を含む任意のバイト列を扱うことができます。
文字列の長さにはメモリ容量以外の制限はありません。">
<script src="../script.js"></script>
</head>
<body>


<header>
  <nav>
    <ol class="inline-breadcrumb-list">
      <li>
        <a href="../doc/index.html">Ruby 2.5.9 リファレンスマニュアル</a>
      </li>
      <li>
        <a href="../library/index.html">ライブラリ一覧</a>
      </li>
      <li>
        <a href="../library/_builtin.html">組み込みライブラリ</a>
      </li>
      <li>
        Stringクラス
      </li>
    </ol>
  </nav>

<h1>class String</h1>
</header>

<main>



  <nav>
    クラス・モジュールの継承リスト:
    <ol class="inline-ancestors-list">
      
        <li>
          <a href="../class/-basic-object.html">BasicObject</a>
        </li>
        
      
        <li>
          <a href="../class/-kernel.html">Kernel</a>
        </li>
        
      
        <li>
          <a href="../class/-object.html">Object</a>
        </li>
        
      
        <li>
          <a href="../class/-comparable.html">Comparable</a>
        </li>
        
      
      <li>
        String
      </li>
    </ol>
  </nav>







<p>
  dynamic include:
  <a href="../class/-j-s-o-n=3a=3a-generator=3a=3a-generator-methods=3a=3a-string.html">JSON::Generator::GeneratorMethods::String</a> (by <a href="../library/json.html">json</a>)
</p>



<p>
  dynamic extend:
  <a href="../class/-j-s-o-n=3a=3a-generator=3a=3a-generator-methods=3a=3a-string=3a=3a-extend.html">JSON::Generator::GeneratorMethods::String::Extend</a> (by <a href="../library/json.html">json</a>)
</p>



<h2>要約</h2>
<p>
文字列のクラスです。ヌル文字を含む任意のバイト列を扱うことができます。文字列の長さにはメモリ容量以外の制限はありません。
</p>
<p>
文字列は通常、文字列リテラルを使って生成します。以下に文字列リテラルの例をいくつか示します。
</p>
<pre class="highlight ruby">
<span class="caption">文字列リテラルの例</span>
<code>
<span class="s1">'str\\ing'</span>   <span class="c1"># シングルクオート文字列 (エスケープシーケンスがほぼ無効)
</span><span class="s2">"</span><span class="s2">string\n</span><span class="s2">"</span>   <span class="c1"># ダブルクオート文字列 (エスケープシーケンスがすべて有効)
</span><span class="s2">%q(</span><span class="s2">str\\ing</span><span class="s2">)</span> <span class="c1"># 「%q」文字列 (エスケープシーケンスがほぼ無効、デリミタが変えられる)
</span><span class="s2">%Q(</span><span class="s2">string\n</span><span class="s2">)</span> <span class="c1"># 「%Q」文字列 (エスケープシーケンスがすべて有効、デリミタが変えられる)
</span>
<span class="c1"># ヒアドキュメント
</span><span class="no">&lt;&lt;End</span>
<span class="sh">この行はヒアドキュメント
</span><span class="no">End
</span>
<span class="c1"># ダブルクオートヒアドキュメント (クオートなしの場合と同じ)
</span><span class="no">&lt;&lt;&quot;End&quot;</span>
<span class="sh">この行はヒアドキュメント
</span><span class="no">End
</span>
<span class="c1"># シングルクオートヒアドキュメント (一切のエスケープシーケンスが無効)
</span><span class="no">&lt;&lt;'End'</span>
<span class="sh">この行はヒアドキュメント
</span><span class="no">End
</span>
<span class="c1"># 終端記号がインデントされたヒアドキュメント
</span><span class="c1"># シングルクオート、ダブルクオートとの併用も可能
</span><span class="no">&lt;&lt;-End</span>
<span class="sh">この行はヒアドキュメント (終端記号をインデントできる)
</span><span class="no">   End
</span>
<span class="c1"># 中身がインデントされたヒアドキュメント
</span><span class="c1"># シングルクオート、ダブルクオートとの併用も可能
</span><span class="no">&lt;&lt;~End</span>
  <span class="sh">この行のインデントは無視される
</span><span class="no">End
</span></code></pre>
<h2 id='mutable'>破壊的な変更</h2>
<p>
Ruby の String クラスは mutable です。つまり、オブジェクト自体を破壊的に変更できます。
</p>
<p>
「破壊的な変更」とは、あるオブジェクトの内容自体を変化させることです。例えば文字列のすべての文字を破壊的に大文字へ変更する
<a href="../method/-string/i/upcase=21.html">String#upcase!</a> メソッドの使用例を以下に示します。
</p>
<pre class="highlight ruby">
<span class="caption">例:String#upcase!</span>
<code>
a <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
b <span class="o">=</span> a
a<span class="p">.</span><span class="nf">upcase!</span>
<span class="nb">p</span> a   <span class="c1"># =&gt; &quot;STRING&quot;
</span><span class="nb">p</span> b   <span class="c1"># =&gt; &quot;STRING&quot;
</span></code></pre>
<p>
この例では、a に対してメソッドを呼んだにも関わらず b も変更されています。これは、変数 a と b が一つの文字列オブジェクトを指していて、
upcase! メソッドでそのオブジェクト自体が変更されたからです。
</p>
<p>
upcase! の非破壊版である <a href="../method/-string/i/upcase.html">String#upcase</a> を使った例を以下に示します。こちらでは a の変更が b に波及しません。
</p>
<pre class="highlight ruby">
<span class="caption">例:String#upcase</span>
<code>
a <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
b <span class="o">=</span> a
a <span class="o">=</span> a<span class="p">.</span><span class="nf">upcase</span>
<span class="nb">p</span> a   <span class="c1"># =&gt; &quot;STRING&quot;
</span><span class="nb">p</span> b   <span class="c1"># =&gt; &quot;string&quot;
</span></code></pre>
<p>
一般には、破壊的「ではない」メソッドを中心に使っていくほうがバグが出にくくなります。
</p>
<p>
String クラスのメソッドには破壊的なメソッドも非破壊的なメソッドもあります。破壊的なメソッドの例としては concat, sub!, upcase! などが挙げられます。非破壊的なメソッドの例としては index, sub, upcase などが挙げられます。
</p>
<p>
同じ動作で破壊的なメソッドと非破壊的なメソッドの両方が定義されているときは、破壊的なバージョンには名前の最後に「!」が付いています。例えば upcase メソッドは非破壊的で、upcase! メソッドは破壊的です。
</p>
<p>
ただし、この命名ルールを「破壊的なメソッドにはすべて『!』が付いている」と解釈しないでください。例えば concat には「!」が付いていませんが、破壊的です。あくまでも、「『!』が付いているメソッドと付いていないメソッドの両方があるときは、『!』が付いているほうが破壊的」というだけです。「『!』が付いているならば破壊的」は常に成立しますが、逆は必ずしも成立しません。
</p>
<h2 id='m17n'>多言語化と文字列のエンコーディング</h2>
<p>
String オブジェクトは自身のエンコーディング情報を持ちます。インスタンスメソッドはエンコーディングに従い、1バイトではなく1文字を単位として動作します。エンコーディングの変換にはメソッド <a href="../method/-string/i/encode.html">String#encode</a> を使います。
</p>
<pre class="highlight ruby">
<span class="caption">例:エンコーディングの変換</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">いろは</span><span class="s2">"</span><span class="p">.</span><span class="nf">size</span>      <span class="c1">#=&gt; 3
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">漢字</span><span class="s2">"</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>          <span class="c1">#=&gt; &quot;漢&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">山本山</span><span class="s2">"</span><span class="p">.</span><span class="nf">reverse</span>   <span class="c1">#=&gt; &quot;山本山&quot; (回文なので分からないですね)
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">ループ</span><span class="s2">"</span><span class="p">.</span><span class="nf">reverse</span>   <span class="c1">#=&gt; &quot;プール&quot;
</span>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">ruビー</span><span class="s2">"</span>
s<span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">ル</span><span class="s2">"</span>
<span class="nb">p</span> s                  <span class="c1">#=&gt; &quot;ルビー&quot;
</span>
e <span class="o">=</span> <span class="s2">"</span><span class="s2">言語</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
u <span class="o">=</span> <span class="s2">"</span><span class="s2">言語</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> e<span class="p">.</span><span class="nf">encoding</span>                   <span class="c1">#=&gt; Encoding::EUC_JP
</span><span class="nb">p</span> u<span class="p">.</span><span class="nf">encoding</span>                   <span class="c1">#=&gt; Encoding::UTF_8
</span></code></pre>
<p>
より詳しく知りたい場合は、<a href="../doc/spec=2fm17n.html">多言語化</a> を参照してください。
</p>
<h3 >文字列同士の比較・結合</h3>
<p>
文字列同士の比較・結合などでは両者のエンコーディングを意識する必要があります。例えば <a href="../method/-string/i/=3d=3d.html">String#==</a> や <a href="../method/-string/i/eql=3f.html">String#eql?</a> は両者のエンコーディングが等しくバイト列表現が等しい場合にのみ true を返します。このときエンコーディングが UTF-8 であっても正規化せずに比較します。文字列の結合も同様です。異なるエンコーディング同士の文字列を結合する時は明示的にエンコーディングを変換する必要があります。
</p>
<pre class="highlight ruby">
<span class="caption">例:文字列の結合</span>
<code>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">いろは</span><span class="s2">"</span>
a <span class="o">=</span> s<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
b <span class="o">=</span> s<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> a <span class="o">==</span> b                            <span class="c1">#=&gt; false
</span>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">合</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> s <span class="o">+</span> <span class="s2">"</span><span class="s2">\u{4f53}</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;合体&quot;
</span><span class="nb">p</span> s <span class="o">+</span> <span class="s2">"</span><span class="s2">\u{4f53}</span><span class="s2">"</span>                    <span class="c1">#=&gt; Encoding::CompatibilityError
</span></code></pre>
<p>
<a href="../method/-string/i/eql=3f.html">String#eql?</a> はハッシュのキーの比較に使われますので、ハッシュのキーに非 ASCII 文字列を使う場合には注意が必要です。
</p>
<pre class="highlight ruby">
<span class="caption">動作例:  (注)一行目にmagic commentが必要です。</span>
<code>
<span class="c1"># encoding: UTF-8
</span>h <span class="o">=</span> <span class="p">{</span><span class="p">}</span>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">いろは</span><span class="s2">"</span>
s<span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
h<span class="p">[</span>s<span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
s<span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">ASCII-8BIT</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> h<span class="p">[</span>s<span class="p">]</span>                             <span class="c1">#=&gt; nil
</span></code></pre>
<h3 >7bit クリーンな文字列</h3>
<p>
ASCII 互換エンコーディングをもつ 7bit クリーンな文字列はエンコーディングに関わらず ASCII として扱うことができます。例えば <a href="../method/-string/i/=3d=3d.html">String#==</a> は両者の文字エンコーディングが異なっていても
true を返します。
ASCII 互換エンコーディングをもつ文字列にエンコーディングの変換なしで結合することができます。
</p>
<pre class="highlight ruby">
<span class="caption">例:</span>
<code>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span>
a <span class="o">=</span> s<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
b <span class="o">=</span> s<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> a <span class="o">==</span> b                           <span class="c1">#=&gt; true
</span><span class="nb">p</span> a <span class="o">+</span> b                            <span class="c1">#=&gt; &quot;abcabc&quot;
</span></code></pre>
<p>
ここで言う「ASCII互換エンコーディング」とは、コードポイントが同一という意味ではなくバイト列が同じことを意味します。従って UTF-16 はASCII互換ではありません。また厳密性を追求せず、おおむね互換なら互換と呼びます。よって Shift_JIS は ASCII 互換です。
</p>
<h3 >バイト列を表す文字列</h3>
<p>
文字列ではない単なるバイト列も String オブジェクトで表されます。その時のエンコーディングは ASCII-8BIT です。
</p>



<h2>目次</h2>
<dl>

<dt>特異メソッド</dt>
<dd>
<ul class="class-toc">

<li><a href="#S_NEW">new</a></li>

<li><a href="#S_TRY_CONVERT">try_convert</a></li>

</ul>
</dd>

<dt>インスタンスメソッド</dt>
<dd>
<ul class="class-toc">

<li><a href="#I_--25">%</a></li>

<li><a href="#I_--2A">*</a></li>

<li><a href="#I_--2B">+</a></li>

<li><a href="#I_--2B--40">+@</a></li>

<li><a href="#I_--2D--40">-@</a></li>

<li><a href="#I_--3C--3C">&lt;&lt;</a></li>

<li><a href="#I_--3C--3D--3E">&lt;=&gt;</a></li>

<li><a href="#I_--3D--3D">==</a></li>

<li><a href="#I_--3D--3D">===</a></li>

<li><a href="#I_--3D--7E">=~</a></li>

<li><a href="#I_--5B--5D">[]</a></li>

<li><a href="#I_--5B--5D--3D">[]=</a></li>

<li><a href="#I_ASCII_ONLY--3F">ascii_only?</a></li>

<li><a href="#I_B">b</a></li>

<li><a href="#I_BYTES">bytes</a></li>

<li><a href="#I_BYTESIZE">bytesize</a></li>

<li><a href="#I_BYTESLICE">byteslice</a></li>

<li><a href="#I_CAPITALIZE">capitalize</a></li>

<li><a href="#I_CAPITALIZE--21">capitalize!</a></li>

<li><a href="#I_CASECMP">casecmp</a></li>

<li><a href="#I_CASECMP--3F">casecmp?</a></li>

<li><a href="#I_CENTER">center</a></li>

<li><a href="#I_CHARS">chars</a></li>

<li><a href="#I_CHOMP">chomp</a></li>

<li><a href="#I_CHOMP--21">chomp!</a></li>

<li><a href="#I_CHOP">chop</a></li>

<li><a href="#I_CHOP--21">chop!</a></li>

<li><a href="#I_CHR">chr</a></li>

<li><a href="#I_CLEAR">clear</a></li>

<li><a href="#I_CODEPOINTS">codepoints</a></li>

<li><a href="#I_--3C--3C">concat</a></li>

<li><a href="#I_COUNT">count</a></li>

<li><a href="#I_CRYPT">crypt</a></li>

<li><a href="#I_DELETE">delete</a></li>

<li><a href="#I_DELETE--21">delete!</a></li>

<li><a href="#I_DELETE_PREFIX">delete_prefix</a></li>

<li><a href="#I_DELETE_PREFIX--21">delete_prefix!</a></li>

<li><a href="#I_DELETE_SUFFIX">delete_suffix</a></li>

<li><a href="#I_DELETE_SUFFIX--21">delete_suffix!</a></li>

<li><a href="#I_DOWNCASE">downcase</a></li>

<li><a href="#I_DOWNCASE--21">downcase!</a></li>

<li><a href="#I_DUMP">dump</a></li>

<li><a href="#I_EACH_BYTE">each_byte</a></li>

<li><a href="#I_EACH_CHAR">each_char</a></li>

<li><a href="#I_EACH_CODEPOINT">each_codepoint</a></li>

<li><a href="#I_EACH_GRAPHEME_CLUSTER">each_grapheme_cluster</a></li>

<li><a href="#I_EACH_LINE">each_line</a></li>

<li><a href="#I_EMPTY--3F">empty?</a></li>

<li><a href="#I_ENCODE">encode</a></li>

<li><a href="#I_ENCODE--21">encode!</a></li>

<li><a href="#I_ENCODING">encoding</a></li>

<li><a href="#I_END_WITH--3F">end_with?</a></li>

<li><a href="#I_EQL--3F">eql?</a></li>

<li><a href="#I_FORCE_ENCODING">force_encoding</a></li>

<li><a href="#I_GETBYTE">getbyte</a></li>

<li><a href="#I_GRAPHEME_CLUSTERS">grapheme_clusters</a></li>

<li><a href="#I_GSUB">gsub</a></li>

<li><a href="#I_GSUB--21">gsub!</a></li>

<li><a href="#I_HASH">hash</a></li>

<li><a href="#I_HEX">hex</a></li>

<li><a href="#I_INCLUDE--3F">include?</a></li>

<li><a href="#I_INDEX">index</a></li>

<li><a href="#I_INSERT">insert</a></li>

<li><a href="#I_INSPECT">inspect</a></li>

<li><a href="#I_INTERN">intern</a></li>

<li><a href="#I_LENGTH">length</a></li>

<li><a href="#I_LINES">lines</a></li>

<li><a href="#I_LJUST">ljust</a></li>

<li><a href="#I_LSTRIP">lstrip</a></li>

<li><a href="#I_LSTRIP--21">lstrip!</a></li>

<li><a href="#I_MATCH">match</a></li>

<li><a href="#I_MATCH--3F">match?</a></li>

<li><a href="#I_NEXT">next</a></li>

<li><a href="#I_NEXT--21">next!</a></li>

<li><a href="#I_OCT">oct</a></li>

<li><a href="#I_ORD">ord</a></li>

<li><a href="#I_PARTITION">partition</a></li>

<li><a href="#I_PREPEND">prepend</a></li>

<li><a href="#I_REPLACE">replace</a></li>

<li><a href="#I_REVERSE">reverse</a></li>

<li><a href="#I_REVERSE--21">reverse!</a></li>

<li><a href="#I_RINDEX">rindex</a></li>

<li><a href="#I_RJUST">rjust</a></li>

<li><a href="#I_RPARTITION">rpartition</a></li>

<li><a href="#I_RSTRIP">rstrip</a></li>

<li><a href="#I_RSTRIP--21">rstrip!</a></li>

<li><a href="#I_SCAN">scan</a></li>

<li><a href="#I_SCRUB">scrub</a></li>

<li><a href="#I_SCRUB--21">scrub!</a></li>

<li><a href="#I_SETBYTE">setbyte</a></li>

<li><a href="#I_LENGTH">size</a></li>

<li><a href="#I_--5B--5D">slice</a></li>

<li><a href="#I_SLICE--21">slice!</a></li>

<li><a href="#I_SPLIT">split</a></li>

<li><a href="#I_SQUEEZE">squeeze</a></li>

<li><a href="#I_SQUEEZE--21">squeeze!</a></li>

<li><a href="#I_START_WITH--3F">start_with?</a></li>

<li><a href="#I_STRIP">strip</a></li>

<li><a href="#I_STRIP--21">strip!</a></li>

<li><a href="#I_SUB">sub</a></li>

<li><a href="#I_SUB--21">sub!</a></li>

<li><a href="#I_NEXT">succ</a></li>

<li><a href="#I_NEXT--21">succ!</a></li>

<li><a href="#I_SUM">sum</a></li>

<li><a href="#I_SWAPCASE">swapcase</a></li>

<li><a href="#I_SWAPCASE--21">swapcase!</a></li>

<li><a href="#I_TO_C">to_c</a></li>

<li><a href="#I_TO_F">to_f</a></li>

<li><a href="#I_TO_I">to_i</a></li>

<li><a href="#I_TO_R">to_r</a></li>

<li><a href="#I_TO_S">to_s</a></li>

<li><a href="#I_TO_S">to_str</a></li>

<li><a href="#I_INTERN">to_sym</a></li>

<li><a href="#I_TR">tr</a></li>

<li><a href="#I_TR--21">tr!</a></li>

<li><a href="#I_TR_S">tr_s</a></li>

<li><a href="#I_TR_S--21">tr_s!</a></li>

<li><a href="#I_UNDUMP">undump</a></li>

<li><a href="#I_UNICODE_NORMALIZE">unicode_normalize</a></li>

<li><a href="#I_UNICODE_NORMALIZE--21">unicode_normalize!</a></li>

<li><a href="#I_UNICODE_NORMALIZED--3F">unicode_normalized?</a></li>

<li><a href="#I_UNPACK">unpack</a></li>

<li><a href="#I_UNPACK1">unpack1</a></li>

<li><a href="#I_UPCASE">upcase</a></li>

<li><a href="#I_UPCASE--21">upcase!</a></li>

<li><a href="#I_UPTO">upto</a></li>

<li><a href="#I_VALID_ENCODING--3F">valid_encoding?</a></li>

</ul>
</dd>

</dl>




  <h2>継承しているメソッド</h2>
<dl>
  
<dt>Comparableから継承しているメソッド</dt>
<dd>
  <ul class="class-toc">
    
      <li><a href="../method/-comparable/i/=3c.html">&lt;</a></li>
      
    
      <li><a href="../method/-comparable/i/=3c=3d.html">&lt;=</a></li>
      
    
      <li><a href="../method/-comparable/i/=3e.html">&gt;</a></li>
      
    
      <li><a href="../method/-comparable/i/=3e=3d.html">&gt;=</a></li>
      
    
      <li><a href="../method/-comparable/i/between=3f.html">between?</a></li>
      
    
      <li><a href="../method/-comparable/i/clamp.html">clamp</a></li>
      
    
  </ul>
</dd>

</dl>


<h2>特異メソッド</h2>
<dl>

<dt class="method-heading" id="S_NEW"><code>new(string = &quot;&quot;) -&gt; String</code><span class="permalink">[<a href="../method/-string/s/new.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-c-new">rdoc</a>]</span></dt>
<dt class="method-heading"><code>new(string = &quot;&quot;, encoding: string.encoding, capacity: 127) -&gt; String</code></dt>
<dt class="method-heading"><code>new(string = &quot;&quot;, encoding: string.encoding, capacity: string.bytesize) -&gt; String</code></dt>
<dd class="method-description">
<p>
string と同じ内容の新しい文字列を作成して返します。引数を省略した場合は空文字列を生成して返します。
</p>
<dl>
<dt class='method-param'>[PARAM] string:</dt>
<dd>
文字列
</dd>
<dt class='method-param'>[PARAM] encoding:</dt>
<dd>
作成する文字列のエンコーディングを文字列か
<a href="../class/-encoding.html">Encoding</a> オブジェクトで指定します(変換は行われません)。省略した場合は引数 string のエンコーディングと同じになります(ただし、string が指定されていなかった場合は
<a href="../method/-encoding/c/-a-s-c-i-i_8-b-i-t.html">Encoding::ASCII_8BIT</a>になります)。
</dd>
<dt class='method-param'>[PARAM] capacity:</dt>
<dd>
内部バッファのサイズを指定します。指定することで、なんども文字列連結する
(そしてreallocがなんども呼ばれる)ときのパフォーマンスが改善されるかもしれません。省略した場合、引数stringのバイト数が127未満であれば127、それ以上であればstring.bytesizeになります。
</dd>
<dt>[RETURN]</dt>
<dd>
引数 string と同じ内容の文字列オブジェクト
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
text <span class="o">=</span> <span class="s2">"</span><span class="s2">hoge</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
no_option <span class="o">=</span> <span class="no">String</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>text<span class="p">)</span>                             <span class="c1"># =&gt; &quot;hoge&quot;
</span>no_option<span class="p">.</span><span class="nf">encoding</span> <span class="o">==</span> <span class="no">Encoding</span><span class="o">::</span><span class="no">EUC_JP</span>                   <span class="c1"># =&gt; true
</span>with_encoding <span class="o">=</span> <span class="no">String</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>text, <span class="ss">encoding:</span> <span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;hoge&quot;
</span>with_encoding<span class="p">.</span><span class="nf">encoding</span> <span class="o">==</span> <span class="no">Encoding</span><span class="o">::</span><span class="no">UTF_8</span>                <span class="c1"># =&gt; true
</span><span class="no">String</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">test</span><span class="s2">"</span>, <span class="ss">encoding:</span> <span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span>, <span class="ss">capacity:</span> <span class="mi">100_000</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="S_TRY_CONVERT"><code>try_convert(obj) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string/s/try_convert.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-c-try_convert">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
obj を String に変換しようと試みます。変換には <a href="../method/-object/i/to_str.html">Object#to_str</a> メソッドが使われます。変換後の文字列を返すか、何らかの理由により変換できなかった場合は nil が返されます。
</p>
<dl>
<dt class='method-param'>[PARAM] obj:</dt>
<dd>
変換する任意のオブジェクト
</dd>
<dt>[RETURN]</dt>
<dd>
変換後の文字列または nil
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">String</span><span class="p">.</span><span class="nf">try_convert</span><span class="p">(</span><span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;str&quot;
</span><span class="no">String</span><span class="p">.</span><span class="nf">try_convert</span><span class="p">(</span><span class="sr">/re/</span><span class="p">)</span>      <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


</dl>

<h2>インスタンスメソッド</h2>
<dl>

<dt class="method-heading" id="I_--25"><code>self % args -&gt; String</code><span class="permalink">[<a href="../method/-string/i/=25.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-25">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
printf と同じ規則に従って args をフォーマットします。
</p>
<p>
args が配列であれば <a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>(self, *args) と同じです。それ以外の場合は <a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>(self, args) と同じです。
</p>
<dl>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
フォーマットする値、もしくはその配列
</dd>
<dt>[RETURN]</dt>
<dd>
フォーマットされた文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">i = %d</span><span class="s2">"</span> <span class="o">%</span> <span class="mi">10</span>       <span class="c1"># =&gt; &quot;i = 10&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">i = %x</span><span class="s2">"</span> <span class="o">%</span> <span class="mi">10</span>       <span class="c1"># =&gt; &quot;i = a&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">i = %o</span><span class="s2">"</span> <span class="o">%</span> <span class="mi">10</span>       <span class="c1"># =&gt; &quot;i = 12&quot;
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">i = %#d</span><span class="s2">"</span> <span class="o">%</span> <span class="mi">10</span>      <span class="c1"># =&gt; &quot;i = 10&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">i = %#x</span><span class="s2">"</span> <span class="o">%</span> <span class="mi">10</span>      <span class="c1"># =&gt; &quot;i = 0xa&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">i = %#o</span><span class="s2">"</span> <span class="o">%</span> <span class="mi">10</span>      <span class="c1"># =&gt; &quot;i = 012&quot;
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span> <span class="o">%</span> <span class="mi">10</span>           <span class="c1"># =&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">%d,%o</span><span class="s2">"</span> <span class="o">%</span> <span class="p">[</span><span class="mi">10</span>, <span class="mi">10</span><span class="p">]</span>  <span class="c1"># =&gt; &quot;10,12&quot;
</span></code></pre>
<h3 >sprintf フォーマット</h3>
<p>
Ruby の sprintf フォーマットは基本的に C 言語の <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/sprintf.html">sprintf(3)</a>
のものと同じです。ただし、short や long などの C 特有の型に対する修飾子がないこと、2進数の指示子(%b, %B)が存在すること、sprintf のすべての方言をサポートしていないこと(%': 3桁区切り)などの違いがあります。
</p>
<p>
Ruby には整数の大きさに上限がないので、%b, %B, %o, %x, %X
に負の数を与えると (左側に無限に1が続くとみなせるので)
..f のような表示をします。絶対値に符号を付けた形式で出力するためには %+x、% x のように指定します。
</p>
<p>
以下は sprintf フォーマットの書式です。[] で囲まれた部分は省略可能であることを示しています。
</p>
<pre>
%[nth$][フラグ][幅][.精度]指示子
%[&lt;name&gt;][フラグ][幅][.精度]指示子
</pre>
<p>
`%' 自身を出力するには `%%' とします。
</p>
<p>
以下それぞれの要素に関して説明します。
</p>
<h3 >フラグ</h3>
<p>
フラグには #, +, ' '(スペース), -, 0 の5種類があります。
</p>
<dl>
<dt>#</dt>
<dd>
<p>
2進、8進、16進の指示子(b, B, o, x, X) ではそれぞれプレフィックスとして &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; を付加します。
C 言語と同様引数が 0 の場合にはプレフィックスが付加されません。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0b1010&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#B</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0B1010&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#b</span><span class="s2">"</span>, <span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;0&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0xa&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#X</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0XA&quot;
</span></code></pre>
<p>
浮動小数点数 (f, e, E, g, G) に対しては必ず出力に&quot;.&quot;をつけます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.0f</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#.0f</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10.&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.0e</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1e+01&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#.0e</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.e+01&quot;
</span></code></pre>
<p>
また g, G では上記に加えて末尾の余分な0が残ります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.05g</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#.05g</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10.000&quot;
</span></code></pre>
</dd>
<dt>+</dt>
<dd>
<p>
出力文字列を符号付きにします。特に正の数では`+'が付加されます。数値の指示子
(d, i, b, B, o, x, X, u, f, e, E, g, G)
に対してだけ意味を持ちます。また、特に b, B, o, x, X, u に対しては、負数に対して &quot;-&quot;
を付加することを示します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;+1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;..f&quot;  # &quot;..&quot; は無限に f が続くことを表している
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;-1&quot;
</span></code></pre>
</dd>
<dt>' '(スペース)</dt>
<dd>
<p>
`+' と同じですが正の符号 `+' の代わりに空白を用います。数値の指示子
(d, i, b, B, o, x, X, u, f, e, E, g, G)
に対してだけ意味を持ちます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;+1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">% d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot; 1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;..f&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">% x</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot; 1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">% x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;-1&quot;
</span></code></pre>
</dd>
<dt>-</dt>
<dd>
<p>
出力を左詰めにします。幅の指定がなければ意味がありません。
</p>
</dd>
<dt>0</dt>
<dd>
<p>
出力が右詰めの場合に余った部分に空白の代わりに &quot;0&quot; を詰めます。
</p>
<p>
数値の指示子の一部(d, i, b, B, o, x, X, u, f, g, G)に対してだけ意味を持ちます(e, E には意味がない)
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%010d</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;0000000010&quot;
</span></code></pre>
<p>
`#' と一緒に指定した場合の出力は以下のようになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#010x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;0x0000000a&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#010o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;0000000012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#010b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;0b00001010&quot;
</span></code></pre>
<p>
これは、以下と同じです。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.8x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0x0000000a&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.9o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0000000012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.8b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0b00001010&quot;
</span></code></pre>
<p>
通常は、以下のようになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;       0xa&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;       012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;    0b1010&quot;
</span></code></pre>
</dd>
</dl>
<h3 >幅</h3>
<p>
0以外の数字で始まる数字列は幅指定になります。幅は生成文字列の長さを示します。後述の精度の値によらずこの幅分だけの文字列が生成されます。
</p>
<p>
幅の指定はフラグで付与される &quot; &quot;, &quot;+&quot;,
&quot;-&quot;, &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; の長さも考慮されます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+5d</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;  +11&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+-5d</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span> <span class="c1">#=&gt; &quot;+11  &quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+05d</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span> <span class="c1">#=&gt; &quot;+0011&quot;
</span></code></pre>
<p>
幅は「最低限必要な幅」の指定になります。結果の文字列が指定した幅を超える場合は幅の指定は無効になります。
</p>
<p>
幅として `*' を指定すると幅の値を引数から得ることになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#05x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0x00a&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#0*x</span><span class="s2">"</span>, <span class="mi">5</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0x00a&quot;
</span></code></pre>
<h3 >精度</h3>
<p>
&quot;.&quot; の後に続く数字列は精度を表します(&quot;.&quot; のみの場合 &quot;.0&quot; と同じです)。精度は整数の指示子
(d, i, b, B, o, x, X, u)
に対しては、数値列部分の長さを意味します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;     00001&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.5x</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;   0x00001&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+10.5x</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;    +00001&quot;
</span></code></pre>
<p>
浮動小数点数の指示子
(f)
に対しては小数部の桁数を意味します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5f</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;   1.00000&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5f</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;  10.00000&quot;
</span></code></pre>
<p>
浮動小数点数の指示子
(e, E, g, G)
に対しては有効桁数を意味します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5e</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;1.00000e+00&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5e</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;1.00000e+01&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5g</span><span class="s2">"</span>,  <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;        10&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.5G</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;    10.000&quot;
</span></code></pre>
<p>
文字列の指示子(s, p)
に対しては引数の文字列のうち指定した数を超える分を切り捨てます。幅と精度を同じ値にすれば、どのような引数に対してもその長さだけの出力を行うことになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.2s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;        fo&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%5.5s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; &quot;  foo&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%5.5s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;fooba&quot;
</span></code></pre>
<p>
精度として `*' を指定すると精度の値を引数から得ることになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.5s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;fooba&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.*s</span><span class="s2">"</span>, <span class="mi">5</span>, <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; &quot;fooba&quot;
</span></code></pre>
<h3 >指示子</h3>
<p>
指示子は引数の型の解釈を示します。指示子を省略することはできません。指示子には大きく分けて
</p>
<ul>
<li>文字列を表す指示子: c, s, p</li>
<li>整数を表す指示子: d, i, u, b, B, o, x, X,</li>
<li>浮動小数点数を表す指示子: f, g, e, E, G</li>
</ul>
<p>
があります
</p>
<dl>
<dt>c</dt>
<dd>
<p>
引数の数値(0〜255)を文字コードとみなして対応する文字を出力します。引数が数値以外のオブジェクトの場合 to_int メソッドによる変換を試みます。引数として範囲内の一文字の文字列も受けつけます。文字そのものを出力します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%c</span><span class="s2">"</span>, <span class="mi">97</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;a&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%c</span><span class="s2">"</span>, <span class="s1">'a'</span><span class="p">)</span> <span class="c1">#=&gt; &quot;a&quot;
</span></code></pre>
<p>
フラグ `-' と幅 の指定だけが意味を持ちます。
</p>
</dd>
<dt>s</dt>
<dd>
<p>
文字列を出力します。
</p>
<p>
引数が <a href="../class/-string.html">String</a> オブジェクトでなければ to_s メソッドにより文字列化したものを引数として扱います。
</p>
</dd>
<dt>p</dt>
<dd>
<p>
<a href="../method/-object/i/inspect.html">Object#inspect</a> の結果を出力します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%s</span><span class="s2">"</span>, <span class="sr">/e+/</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;(?-mix:e+)&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%p</span><span class="s2">"</span>, <span class="sr">/e+/</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;/e+/&quot;
</span></code></pre>
</dd>
<dt>d</dt>
<dt>i</dt>
<dd>
<p>
引数の数値を10進表現の整数として出力します。
</p>
<p>
引数が整数でなければ関数 <a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a> と同じ規則で整数に変換されます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;-1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="mf">3.1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;3&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="s1">'0b1010'</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10&quot;
</span></code></pre>
</dd>
<dt>u</dt>
<dd>
<p>
引数の数値を符号なし整数とみなして10進表現の整数として出力します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%u</span><span class="s2">"</span>, <span class="s1">'0b1010'</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%u</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;-1&quot;
</span></code></pre>
</dd>
<dt>b</dt>
<dt>B</dt>
<dt>o</dt>
<dt>x</dt>
<dt>X</dt>
<dd>
<p>
整数をそれぞれ2進、2進(大文字)、8進、16進、16進(大文字)表現の文字列で出力します。
</p>
<p>
`#' フラグを指定すれば &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; を先頭に付加します。
</p>
<p>
`+', ` ' フラグがない場合、負の数には &quot;..&quot; が先頭(`#' フラグがあれば
&quot;0x&quot; などの後)に付加されます。これは最上位桁の文字が無限に続くことを意味し、2の補数表現で負の数を表しています。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0b1010&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#B</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0B1010&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0xa&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#X</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0XA&quot;
</span>
<span class="c1"># 負の数に対して &quot;..&quot; が付加されます
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#b</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0b..1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#o</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0..7&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0x..f&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;       ..f&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%-10x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;..f       &quot;
</span>
<span class="c1"># ruby 1.9.1 以降では「精度」を指定した場合も、&quot;..&quot; は付加されます 
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.10x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;..ffffffff&quot; 
</span></code></pre>
</dd>
<dt>f</dt>
<dt>e</dt>
<dt>E</dt>
<dt>g</dt>
<dt>G</dt>
<dt>a</dt>
<dt>A</dt>
<dd>
<p>
f は小数点表現(xxx.xxx)で数値を出力します。
</p>
<p>
e は指数表現(x.xxxe+xx)で数値を出力します。
</p>
<p>
g は 指数が -4 より小さいか精度以上の場合に e と同じ出力を、それ以外では f と同じ出力を行います。ただし、小数部の末尾の0は取り除かれます。
</p>
<p>
a, A は指数表現の16進数(&quot;-h.hhh±pd&quot;) で数値を出力します。ただし、<a href="../method/-float/c/-i-n-f-i-n-i-t-y.html">Float::INFINITY</a>、<a href="../method/-float/c/-n-a-n.html">Float::NAN</a> はそれぞれ 'Inf'、'NaN' になります。詳しくは <a class="external" href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/40650">[ruby-dev:40650]</a> を参照してください。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%a</span><span class="s2">"</span>, <span class="o">-</span><span class="mf">0.0</span><span class="p">)</span>            <span class="c1"># =&gt; &quot;-0x0p+0&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%a</span><span class="s2">"</span>, <span class="mf">729.0</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;0x1.239999999999ap+6&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%a</span><span class="s2">"</span>, <span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span><span class="p">)</span> <span class="c1"># =&gt; &quot;Inf&quot;
</span></code></pre>
<p>
大文字の指示子(E, G)は出力のアルファベットを大文字にします。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>, <span class="mf">1.0</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.000000&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%e</span><span class="s2">"</span>, <span class="mf">1.0</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.000000e+00&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%g</span><span class="s2">"</span>, <span class="mf">1.0</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>, <span class="mf">10.1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10.100000&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%e</span><span class="s2">"</span>, <span class="mf">10.1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.010000e+01&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%g</span><span class="s2">"</span>, <span class="mf">10.1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10.1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%g</span><span class="s2">"</span>, <span class="mi">10</span> <span class="o">**</span> <span class="mi">6</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;1e+06&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%g</span><span class="s2">"</span>, <span class="mi">10</span> <span class="o">**</span> <span class="o">-</span><span class="mi">5</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1e-05&quot;
</span></code></pre>
<p>
精度の省略値は 6 です。
</p>
<p>
無限大、NaN(Not a Number) に対する出力は以下のとおりです。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>,  <span class="mf">1.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;inf&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>, <span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;-inf&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>,  <span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;nan&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%E</span><span class="s2">"</span>,  <span class="mf">1.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;INF&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%E</span><span class="s2">"</span>, <span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;-INF&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%E</span><span class="s2">"</span>,  <span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;NAN&quot;
</span></code></pre>
<p>
f, e, E, g, G に関しては <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/sprintf.html">sprintf(3)</a> の結果を利用しています。従って出力結果は実際にはシステムに依存することになります。
</p>
</dd>
</dl>
<h3 >引数指定</h3>
<p>
利用頻度が低いので最後に説明します。
</p>
<dl>
<dt>nth$</dt>
<dd>
<p>
nth 番目の引数のフォーマットを行うことを示します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d, %x, %o</span><span class="s2">"</span>, <span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1, 2, 3&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%3$d, %2$x, %1$o</span><span class="s2">"</span>, <span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="p">)</span> <span class="c1">#=&gt; &quot;3, 2, 1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%1$d, %1$x, %1$o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10, a, 12&quot;
</span></code></pre>
<p>
状況によってフォーマットを変えたいが引数の順序を変えたくない場合に使用します。
</p>
<pre class="highlight ruby">
<code>
<span class="k">case</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'LC_TIME'</span><span class="p">]</span>
<span class="k">when</span> <span class="sr">/^ja_JP/</span>
  fmt <span class="o">=</span> <span class="s2">"</span><span class="s2">%1$d年%2$d月%3$d日</span><span class="s2">"</span>
<span class="k">else</span>
  fmt <span class="o">=</span> <span class="s2">"</span><span class="s2">%2$02d/%03$2d/%1$02d</span><span class="s2">"</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span>fmt, <span class="mi">1</span>, <span class="mi">4</span>, <span class="mi">22</span><span class="p">)</span> <span class="c1">#=&gt; &quot;04/22/01&quot;
</span></code></pre>
<p>
&quot;*&quot; の後に指定することで幅や精度を引数で指定することもできます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%5.2f</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>              <span class="c1">#=&gt; &quot; 1.00&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%*.*f</span><span class="s2">"</span>, <span class="mi">5</span>, <span class="mi">2</span>, <span class="mi">1</span><span class="p">)</span>        <span class="c1">#=&gt; &quot; 1.00&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%1$*2$.*3$f</span><span class="s2">"</span>, <span class="mi">1</span>, <span class="mi">5</span>, <span class="mi">2</span><span class="p">)</span>  <span class="c1">#=&gt; &quot; 1.00&quot;
</span></code></pre>
</dd>
<dt>%&lt;name&gt;</dt>
<dd>
<p>
Symbol のインスタンス name をキーとする Hash を引数にした場合、対応する値をフォーマットして参照します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'%&lt;foo&gt;f : %&lt;bar&gt;+d'</span>, <span class="ss">foo:</span> <span class="mi">1</span>, <span class="ss">bar:</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.000000 : +2&quot;
</span></code></pre>
</dd>
<dt>%{name}</dt>
<dd>
<p>
Symbol のインスタンス name をキーとする Hash を引数にした場合、対応する値をフォーマットせずに参照します。幅や精度を指定するために使用することができます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'%{foo}f : %{bar}+d'</span>, <span class="ss">foo:</span> <span class="mi">1</span>, <span class="ss">bar:</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1f : 2+d&quot;
</span></code></pre>
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_--2A"><code>self * times -&gt; String</code><span class="permalink">[<a href="../method/-string/i/=2a.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-2A">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の内容を times 回だけ繰り返した新しい文字列を作成して返します。
</p>
<dl>
<dt class='method-param'>[PARAM] times:</dt>
<dd>
整数
</dd>
<dt>[RETURN]</dt>
<dd>
self を times 回繰り返した新しい文字列
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
引数に負数を指定したときに発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">str</span><span class="s2">"</span> <span class="o">*</span> <span class="mi">3</span>   <span class="c1"># =&gt; &quot;strstrstr&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span>
<span class="nb">p</span> str <span class="o">*</span> <span class="mi">4</span>   <span class="c1"># =&gt; &quot;abcabcabcabc&quot;
</span><span class="nb">p</span> str <span class="o">*</span> <span class="mi">0</span>   <span class="c1"># =&gt; &quot;&quot;
</span><span class="nb">p</span> str       <span class="c1"># =&gt; &quot;abc&quot;  (変化なし)
</span></code></pre>
</dd>


<dt class="method-heading" id="I_--2B"><code>self + other -&gt; String</code><span class="permalink">[<a href="../method/-string/i/=2b.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-2B">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列と other を連結した新しい文字列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
文字列
</dd>
<dt>[RETURN]</dt>
<dd>
self と other を連結した文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">str</span><span class="s2">"</span> <span class="o">+</span> <span class="s2">"</span><span class="s2">ing</span><span class="s2">"</span>   <span class="c1"># =&gt; &quot;string&quot;
</span>
a <span class="o">=</span> <span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span>
b <span class="o">=</span> <span class="s2">"</span><span class="s2">def</span><span class="s2">"</span>
<span class="nb">p</span> a <span class="o">+</span> b   <span class="c1"># =&gt; &quot;abcdef&quot;
</span><span class="nb">p</span> a       <span class="c1"># =&gt; &quot;abc&quot;  (変化なし)
</span><span class="nb">p</span> b       <span class="c1"># =&gt; &quot;def&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_--2B--40"><code>+ self -&gt; String | self</code><span class="permalink">[<a href="../method/-string/i/=2b=40.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-2B-40">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self が freeze されている文字列の場合、元の文字列の複製を返します。
freeze されていない場合は self を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># frozen_string_literal: false
</span>
original_text <span class="o">=</span> <span class="s2">"</span><span class="s2">text</span><span class="s2">"</span>
unfrozen_text <span class="o">=</span> <span class="o">+</span>original_text
unfrozen_text<span class="p">.</span><span class="nf">frozen?</span>                 <span class="c1"># =&gt; false
</span>original_text <span class="o">==</span> unfrozen_text        <span class="c1"># =&gt; true
</span>original_text<span class="p">.</span><span class="nf">equal?</span><span class="p">(</span>unfrozen_text<span class="p">)</span>   <span class="c1"># =&gt; true
</span>
original_text <span class="o">=</span> <span class="s2">"</span><span class="s2">text</span><span class="s2">"</span><span class="p">.</span><span class="nf">freeze</span>
unfrozen_text <span class="o">=</span> <span class="o">+</span>original_text
unfrozen_text<span class="p">.</span><span class="nf">frozen?</span>                 <span class="c1"># =&gt; false
</span>original_text <span class="o">==</span> unfrozen_text        <span class="c1"># =&gt; true
</span>original_text<span class="p">.</span><span class="nf">equal?</span><span class="p">(</span>unfrozen_text<span class="p">)</span>   <span class="c1"># =&gt; false
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/=2d=40.html">String#-@</a>
</p>
</dd>


<dt class="method-heading" id="I_--2D--40"><code>- self -&gt; String | self</code><span class="permalink">[<a href="../method/-string/i/=2d=40.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-2D-40">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self が freeze されている文字列の場合、self を返します。
freeze されていない場合は元の文字列の freeze された (できる限り既存の) 複製を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># frozen_string_literal: false
</span>
original_text <span class="o">=</span> <span class="s2">"</span><span class="s2">text</span><span class="s2">"</span>
frozen_text <span class="o">=</span> <span class="o">-</span>original_text
frozen_text<span class="p">.</span><span class="nf">frozen?</span>                 <span class="c1"># =&gt; true
</span>original_text <span class="o">==</span> frozen_text        <span class="c1"># =&gt; true
</span>original_text<span class="p">.</span><span class="nf">equal?</span><span class="p">(</span>frozen_text<span class="p">)</span>   <span class="c1"># =&gt; false
</span>
original_text <span class="o">=</span> <span class="s2">"</span><span class="s2">text</span><span class="s2">"</span><span class="p">.</span><span class="nf">freeze</span>
frozen_text <span class="o">=</span> <span class="o">-</span>original_text
frozen_text<span class="p">.</span><span class="nf">frozen?</span>                 <span class="c1"># =&gt; true
</span>original_text <span class="o">==</span> frozen_text        <span class="c1"># =&gt; true
</span>original_text<span class="p">.</span><span class="nf">equal?</span><span class="p">(</span>frozen_text<span class="p">)</span>   <span class="c1"># =&gt; true
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/=2b=40.html">String#+@</a>
</p>
</dd>


<dt class="method-heading" id="I_--3C--3C"><code>self &lt;&lt; other -&gt; self</code><span class="permalink">[<a href="../method/-string/i/=3c=3c.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-3C-3C">rdoc</a>]</span></dt>
<dt class="method-heading"><code>concat(other) -&gt; self</code></dt>
<dd class="method-description">
<p>
self に文字列 other を破壊的に連結します。
other が 整数である場合は other.chr(self.encoding) 相当の文字を末尾に追加します。
</p>
<p>
self を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
文字列もしくは 0 以上の整数
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">concat</span> <span class="s2">"</span><span class="s2">XXX</span><span class="s2">"</span>
<span class="nb">p</span> str    <span class="c1"># =&gt; &quot;stringXXX&quot;
</span>
str <span class="o">&lt;&lt;</span> <span class="s2">"</span><span class="s2">YYY</span><span class="s2">"</span>
<span class="nb">p</span> str    <span class="c1"># =&gt; &quot;stringXXXYYY&quot;
</span>
str <span class="o">&lt;&lt;</span> <span class="mi">65</span>  <span class="c1"># 文字AのASCIIコード
</span><span class="nb">p</span> str    <span class="c1"># =&gt; &quot;stringXXXYYYA&quot;
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--3C--3C"><code>concat(*arguments) -&gt; self</code><span class="permalink">[<a href="../method/-string/i/=3c=3c.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-3C-3C">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self に複数の文字列を破壊的に連結します。
</p>
<p>
引数の値が整数である場合は <a href="../method/-integer/i/chr.html">Integer#chr</a> の結果に相当する文字を末尾に追加します。追加する文字のエンコーディングは self.encoding です。
</p>
<p>
self を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] arguments:</dt>
<dd>
複数の文字列もしくは 0 以上の整数
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">concat</span>
<span class="nb">p</span> str    <span class="c1"># =&gt; &quot;foo&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">concat</span> <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">baz</span><span class="s2">"</span>
<span class="nb">p</span> str    <span class="c1"># =&gt; &quot;foobarbaz&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">concat</span><span class="p">(</span><span class="s2">"</span><span class="s2">!</span><span class="s2">"</span>, <span class="mi">33</span>, <span class="mi">33</span><span class="p">)</span>
<span class="nb">p</span> str    <span class="c1"># =&gt; &quot;foo!!!&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_--3C--3D--3E"><code>self &lt;=&gt; other -&gt; -1 | 0 | 1 | nil</code><span class="permalink">[<a href="../method/-string/i/=3c=3d=3e.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-3C-3D-3E">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self と other を ASCII コード順で比較して、
self が大きい時には 1、等しい時には 0、小さい時には -1 を返します。このメソッドは Comparable モジュールのメソッドを実装するために使われます。
</p>
<p>
other が文字列でない場合、
other.to_str と other.&lt;=&gt; が定義されていれば
0 - (other &lt;=&gt; self) の結果を返します。そうでなければ nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
文字列
</dd>
<dt>[RETURN]</dt>
<dd>
比較結果の整数か nil
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">aaa</span><span class="s2">"</span> <span class="o">&lt;=&gt;</span> <span class="s2">"</span><span class="s2">xxx</span><span class="s2">"</span>   <span class="c1"># =&gt; -1
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">aaa</span><span class="s2">"</span> <span class="o">&lt;=&gt;</span> <span class="s2">"</span><span class="s2">aaa</span><span class="s2">"</span>   <span class="c1"># =&gt; 0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">xxx</span><span class="s2">"</span> <span class="o">&lt;=&gt;</span> <span class="s2">"</span><span class="s2">aaa</span><span class="s2">"</span>   <span class="c1"># =&gt; 1
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span> <span class="o">&lt;=&gt;</span> <span class="s2">"</span><span class="s2">stringAA</span><span class="s2">"</span>  <span class="c1"># =&gt; -1
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span> <span class="o">&lt;=&gt;</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>    <span class="c1"># =&gt; 0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">stringAA</span><span class="s2">"</span> <span class="o">&lt;=&gt;</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>  <span class="c1"># =&gt; 1
</span></code></pre>
</dd>


<dt class="method-heading" id="I_--3D--3D"><code>self == other -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/=3d=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-3D-3D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>self === other -&gt; bool</code></dt>
<dd class="method-description">
<p>
other が文字列の場合、<a href="../method/-string/i/eql=3f.html">String#eql?</a> と同様に文字列の内容を比較します。
</p>
<p>
other が文字列でない場合、
other.to_str が定義されていれば
other == self の結果を返します。(ただし、 other.to_str は実行されません。)
そうでなければ false を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
任意のオブジェクト
</dd>
<dt>[RETURN]</dt>
<dd>
true か false
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
stringlike <span class="o">=</span> <span class="no">Object</span><span class="p">.</span><span class="nf">new</span>

<span class="k">def</span> <span class="nf">stringlike</span><span class="p">.</span><span class="o">==</span><span class="p">(</span>other<span class="p">)</span>
  <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span> <span class="o">==</span> other
<span class="k">end</span>

<span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span>stringlike<span class="p">)</span> <span class="c1">#=&gt; false
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span> <span class="o">==</span> stringlike    <span class="c1">#=&gt; false
</span>
<span class="k">def</span> <span class="nf">stringlike</span><span class="p">.</span><span class="nf">to_str</span>
  <span class="nb">raise</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span>stringlike<span class="p">)</span> <span class="c1">#=&gt; false
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span> <span class="o">==</span> stringlike    <span class="c1">#=&gt; true
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/eql=3f.html">String#eql?</a>
</p>
</dd>


<dt class="method-heading" id="I_--3D--7E"><code>self =~ other -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string/i/=3d=7e.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-3D-7E">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
正規表現 other とのマッチを行います。マッチが成功すればマッチした位置のインデックスを、そうでなければ nil を返します。
</p>
<p>
other が正規表現でも文字列でもない場合は
other =~ self を行います。
</p>
<p>
このメソッドが実行されると、組み込み変数 <a href="../method/-kernel/v/=7e.html">$~</a>, <a href="../method/-kernel/v/1.html">$1</a>, ...
にマッチに関する情報が設定されます。
</p>
<dl>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
正規表現もしくは =~ メソッドを持つオブジェクト
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
other が文字列の場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span> <span class="o">=~</span> <span class="sr">/str/</span>   <span class="c1"># =&gt; 0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span> <span class="o">=~</span> <span class="sr">/not/</span>   <span class="c1"># =&gt; nil
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">abcfoo</span><span class="s2">"</span> <span class="o">=~</span> <span class="sr">/foo/</span>   <span class="c1"># =&gt; 3
</span></code></pre>
</dd>


<dt class="method-heading" id="I_--5B--5D"><code>self[nth] -&gt; String | nil</code><span class="permalink">[<a href="../method/-string/i/=5b=5d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice(nth) -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
nth 番目の文字を返します。
nth が負の場合は文字列の末尾から数えます。つまり、 self.size + nth 番目の文字を返します。
</p>
<p>
nth が範囲外を指す場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
文字の位置を表す整数
</dd>
<dt>[RETURN]</dt>
<dd>
指定した位置の文字を表す String オブジェクト
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s1">'bar'</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>       <span class="c1"># =&gt; &quot;r&quot;
</span><span class="nb">p</span> <span class="s1">'bar'</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">?r</span> <span class="c1"># =&gt; true
</span><span class="nb">p</span> <span class="s1">'bar'</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>      <span class="c1"># =&gt; &quot;r&quot;
</span><span class="nb">p</span> <span class="s1">'bar'</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>       <span class="c1"># =&gt; nil
</span><span class="nb">p</span> <span class="s1">'bar'</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>      <span class="c1"># =&gt; nil
</span></code></pre>
<p>
このメソッドの仕様は 1.8.x 以前から大きく変更されていますので注意が必要です。
</p>
</dd>
<dt class="method-heading" id="I_--5B--5D"><code>self[nth, len] -&gt; String | nil</code><span class="permalink">[<a href="../method/-string/i/=5b=5d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice(nth, len) -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
nth 文字目から長さ len 文字の部分文字列を新しく作って返します。
nth が負の場合は文字列の末尾から数えます。
</p>
<dl>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
取得したい文字列の開始インデックスを整数で指定します。
</dd>
<dt class='method-param'>[PARAM] len:</dt>
<dd>
取得したい文字列の長さを正の整数で指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
nth が範囲外を指す場合は nil を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str0 <span class="o">=</span> <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>
str0<span class="p">[</span><span class="mi">2</span>, <span class="mi">1</span><span class="p">]</span>         <span class="c1">#=&gt; &quot;r&quot;
</span>str0<span class="p">[</span><span class="mi">2</span>, <span class="mi">0</span><span class="p">]</span>         <span class="c1">#=&gt; &quot;&quot;
</span>str0<span class="p">[</span><span class="mi">2</span>, <span class="mi">100</span><span class="p">]</span>       <span class="c1">#=&gt; &quot;r&quot;  (右側を超えても平気)
</span>str0<span class="p">[</span><span class="o">-</span><span class="mi">1</span>, <span class="mi">1</span><span class="p">]</span>        <span class="c1">#=&gt; &quot;r&quot;
</span>str0<span class="p">[</span><span class="o">-</span><span class="mi">1</span>, <span class="mi">2</span><span class="p">]</span>        <span class="c1">#=&gt; &quot;r&quot;  (右に向かって len 文字)
</span>
str0<span class="p">[</span><span class="mi">3</span>, <span class="mi">1</span><span class="p">]</span>         <span class="c1">#=&gt; &quot;&quot;
</span>str0<span class="p">[</span><span class="mi">4</span>, <span class="mi">1</span><span class="p">]</span>         <span class="c1">#=&gt; nil
</span>str0<span class="p">[</span><span class="o">-</span><span class="mi">4</span>, <span class="mi">1</span><span class="p">]</span>        <span class="c1">#=&gt; nil
</span>str1 <span class="o">=</span> str0<span class="p">[</span><span class="mi">0</span>, <span class="mi">2</span><span class="p">]</span>    <span class="c1"># (str0 の「一部」を str1 とする)
</span>str1               <span class="c1">#=&gt; &quot;ba&quot;
</span>str1<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">XYZ</span><span class="s2">"</span>
str1               <span class="c1">#=&gt; &quot;XYZa&quot; (str1 の内容が破壊的に変更された)
</span>str0               <span class="c1">#=&gt; &quot;bar&quot; (str0 は無傷、 str1 は str0 と内容を共有していない)
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D"><code>self[substr] -&gt; String | nil</code><span class="permalink">[<a href="../method/-string/i/=5b=5d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice(substr) -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
self が substr を含む場合、一致した文字列を新しく作って返します。
substr を含まなければ nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] substr:</dt>
<dd>
取得したい文字列のパターン。文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
substr <span class="o">=</span> <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>
result <span class="o">=</span> <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">[</span>substr<span class="p">]</span>
<span class="nb">p</span> result   <span class="c1"># =&gt; &quot;bar&quot;
</span><span class="nb">p</span> substr<span class="p">.</span><span class="nf">equal?</span><span class="p">(</span>result<span class="p">)</span>   <span class="c1"># =&gt; false
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D"><code>self[regexp, nth = 0] -&gt; String</code><span class="permalink">[<a href="../method/-string/i/=5b=5d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice(regexp, nth = 0) -&gt; String</code></dt>
<dd class="method-description">
<p>
正規表現 regexp の nth 番目の括弧にマッチする最初の部分文字列を返します。
nth を省略したときや 0 の場合は正規表現がマッチした部分文字列全体を返します。正規表現が self にマッチしなかった場合や nth に対応する括弧がないときは nil を返します。
</p>
<p>
このメソッドを実行すると、マッチ結果に関する情報が組み込み変数 <a href="../method/-kernel/v/=7e.html">$~</a> に設定されます。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
取得したい文字列のパターンを示す正規表現
</dd>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
取得したい正規表現レジスタのインデックス。整数
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">[</span><span class="sr">/bar/</span><span class="p">]</span>  <span class="c1"># =&gt; &quot;bar&quot;
</span><span class="nb">p</span> <span class="vg">$~</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>      <span class="c1"># =&gt; 3
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">def getcnt(line)</span><span class="s2">"</span><span class="p">[</span> <span class="sr">/def\s+(\w+)/</span>, <span class="mi">1</span> <span class="p">]</span>   <span class="c1"># =&gt; &quot;getcnt&quot;
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D"><code>self[regexp, name] -&gt; String</code><span class="permalink">[<a href="../method/-string/i/=5b=5d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice(regexp, name) -&gt; String</code></dt>
<dd class="method-description">
<p>
正規表現 regexp の name で指定した名前付きキャプチャにマッチする最初の部分文字列を返します。正規表現が self にマッチしなかった場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
正規表現を指定します。
</dd>
<dt class='method-param'>[PARAM] name:</dt>
<dd>
取得したい部分文字列のパターンを示す正規表現レジスタを示す名前
</dd>
<dt>[EXCEPTION] IndexError:</dt>
<dd>
name に対応する括弧がない場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">FooBar</span><span class="s2">"</span>
s<span class="p">[</span><span class="sr">/(?&lt;foo&gt;[A-Z]..)(?&lt;bar&gt;[A-Z]..)/</span><span class="p">]</span>        <span class="c1"># =&gt; &quot;FooBar&quot;
</span>s<span class="p">[</span><span class="sr">/(?&lt;foo&gt;[A-Z]..)(?&lt;bar&gt;[A-Z]..)/</span>, <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">]</span> <span class="c1"># =&gt; &quot;Foo&quot;
</span>s<span class="p">[</span><span class="sr">/(?&lt;foo&gt;[A-Z]..)(?&lt;bar&gt;[A-Z]..)/</span>, <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span><span class="p">]</span> <span class="c1"># =&gt; &quot;Bar&quot;
</span>s<span class="p">[</span><span class="sr">/(?&lt;foo&gt;[A-Z]..)(?&lt;bar&gt;[A-Z]..)/</span>, <span class="s2">"</span><span class="s2">baz</span><span class="s2">"</span><span class="p">]</span> <span class="c1"># =&gt; IndexError
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D"><code>self[range] -&gt; String</code><span class="permalink">[<a href="../method/-string/i/=5b=5d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice(range) -&gt; String</code></dt>
<dd class="method-description">
<p>
rangeで指定したインデックスの範囲に含まれる部分文字列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
取得したい文字列の範囲を示す Range オブジェクト
</dd>
</dl>
<h3 >rangeオブジェクトが終端を含む場合</h3>
<p>
インデックスと文字列の対応については以下の対照図も参照してください。
</p>
<pre>
  0   1   2   3   4   5   (インデックス)
 -6  -5  -4  -3  -2  -1   (負のインデックス)
| a | b | c | d | e | f |
|&lt;---------&gt;|                'abcdef'[0..2]  # =&gt; 'abc'
                |&lt;-----&gt;|    'abcdef'[4..5]  # =&gt; 'ef'
        |&lt;---------&gt;|        'abcdef'[2..4]  # =&gt; 'cde'
</pre>
<p>
range.last が文字列の長さ以上のときは
(文字列の長さ - 1) を指定したものとみなされます。
</p>
<p>
range.first が 0 より小さいか文字列の長さより大きいときは nil を返します。ただし range.first および range.last のどちらかまたは両方が負の数のときは一度だけ文字列の長さを足して再試行します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">..</span>  <span class="mi">1</span><span class="p">]</span> <span class="c1"># =&gt; &quot;&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;c&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">..</span>  <span class="mi">3</span><span class="p">]</span> <span class="c1"># =&gt; &quot;cd&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">..</span>  <span class="mi">4</span><span class="p">]</span> <span class="c1"># =&gt; &quot;cd&quot;
</span>
<span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">..</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># =&gt; &quot;cd&quot;   # str[f..-1] は「f 文字目から
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">3</span> <span class="o">..</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># =&gt; &quot;d&quot;    # 文字列の最後まで」を表す慣用句
</span>
<span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">1</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;bc&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;c&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">3</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">4</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">5</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; nil
</span>
<span class="s1">'abcd'</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;bc&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;abc&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span> <span class="o">..</span>  <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; nil
</span></code></pre>
<h3 >rangeオブジェクトが終端を含まない場合</h3>
<p>
文字列と「隙間」の関係については以下の模式図を参照してください。
</p>
<pre>
 0   1   2   3   4   5   6  (隙間番号)
-6  -5  -4  -3  -2  -1      (負の隙間番号)
 | a | b | c | d | e | f |
 |&lt;---------&gt;|                'abcdef'[0...3]  # =&gt; 'abc'
                 |&lt;-----&gt;|    'abcdef'[4...6]  # =&gt; 'ef'
         |&lt;---------&gt;|        'abcdef'[2...5]  # =&gt; 'cde'
</pre>
<p>
range.last が文字列の長さよりも大きいときは文字列の長さを指定したものとみなされます。
</p>
<p>
range.first が 0 より小さいか文字列の長さより大きいときは nil を返します。ただし range.first と range.last のどちらかまたは両方が負の数であるときは一度だけ文字列の長さを足して再試行します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">...</span> <span class="mi">3</span><span class="p">]</span> <span class="c1"># =&gt; &quot;c&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">...</span> <span class="mi">4</span><span class="p">]</span> <span class="c1"># =&gt; &quot;cd&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">...</span> <span class="mi">5</span><span class="p">]</span> <span class="c1"># =&gt; &quot;cd&quot;
</span>
<span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">1</span> <span class="o">...</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;b&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">2</span> <span class="o">...</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">3</span> <span class="o">...</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">4</span> <span class="o">...</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span> <span class="mi">5</span> <span class="o">...</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; nil
</span>
<span class="s1">'abcd'</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span> <span class="o">...</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;b&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span> <span class="o">...</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; &quot;ab&quot;
</span><span class="s1">'abcd'</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span> <span class="o">...</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_--5B--5D--3D"><code>self[nth] = val</code><span class="permalink">[<a href="../method/-string/i/=5b=5d=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
nth 番目の文字を文字列 val で置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
置き換えたい文字の位置を指定します。
</dd>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
置き換える文字列を指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
val を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
buf<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">!!</span><span class="s2">"</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;s!!ring&quot;
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D--3D"><code>self[nth, len] = val</code><span class="permalink">[<a href="../method/-string/i/=5b=5d=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
nth 番目の文字から len 文字の部分文字列を文字列 val で置き換えます。
</p>
<p>
len が0 の場合は、単にnthの位置から文字列の追加が行われます。
nth が負の場合は文字列の末尾から数えます。
</p>
<dl>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
置き換えたい部分文字列の開始インデックス
</dd>
<dt class='method-param'>[PARAM] len:</dt>
<dd>
置き換えたい部分文字列の長さ
</dd>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
指定範囲の部分文字列と置き換える文字列
</dd>
<dt>[RETURN]</dt>
<dd>
val を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
buf<span class="p">[</span><span class="mi">1</span>, <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">!!</span><span class="s2">"</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;s!!g&quot;
</span>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
buf<span class="p">[</span><span class="mi">1</span>, <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">!!</span><span class="s2">"</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;s!!tring&quot;
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D--3D"><code>self[substr] = val</code><span class="permalink">[<a href="../method/-string/i/=5b=5d=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中の substr に一致する最初の部分文字列を文字列 val で置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] substr:</dt>
<dd>
置き換えたい部分文字列のパターンを示す文字列
</dd>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
指定範囲の部分文字列と置き換える文字列
</dd>
<dt>[RETURN]</dt>
<dd>
val を返します。
</dd>
<dt>[EXCEPTION] IndexError:</dt>
<dd>
self が部分文字列 substr を含まない場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
buf<span class="p">[</span><span class="s2">"</span><span class="s2">trin</span><span class="s2">"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">!!</span><span class="s2">"</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;s!!g&quot;
</span>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
buf<span class="p">[</span><span class="s2">"</span><span class="s2">nosuchstring</span><span class="s2">"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">!!</span><span class="s2">"</span>   <span class="c1"># IndexError
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D--3D"><code>self[regexp, nth] = val</code><span class="permalink">[<a href="../method/-string/i/=5b=5d=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
正規表現 regexp の nth 番目の括弧にマッチする最初の部分文字列を文字列 val で置き換えます。
</p>
<p>
nth が 0 の場合は、マッチした部分文字列全体を val で置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
置き換えたい部分文字列のパターンを示す正規表現
</dd>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
置き換えたい部分文字列のパターンを示す正規表現レジスタの番号
</dd>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
指定範囲の部分文字列と置き換えたい文字列
</dd>
<dt>[RETURN]</dt>
<dd>
val を返します。
</dd>
<dt>[EXCEPTION] IndexError:</dt>
<dd>
正規表現がマッチしなかった場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">def exec(cmd)</span><span class="s2">"</span>
buf<span class="p">[</span><span class="sr">/def\s+(\w+)/</span>, <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">preprocess</span><span class="s2">"</span>
<span class="nb">p</span> buf    <span class="c1"># =&gt; &quot;def preprocess(cmd)&quot;
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D--3D"><code>self[regexp, name] = val</code><span class="permalink">[<a href="../method/-string/i/=5b=5d=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
正規表現 regexp の name で指定した名前付きキャプチャにマッチする最初の部分文字列を文字列 val で置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
置き換えたい部分文字列のパターンを示す正規表現
</dd>
<dt class='method-param'>[PARAM] name:</dt>
<dd>
置き換えたい部分文字列のパターンを示す正規表現レジスタを示す名前
</dd>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
指定範囲の部分文字列と置き換えたい文字列
</dd>
<dt>[RETURN]</dt>
<dd>
val を返します。
</dd>
<dt>[EXCEPTION] IndexError:</dt>
<dd>
name で指定した名前付きキャプチャが存在しない場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">FooBar</span><span class="s2">"</span>
s<span class="p">[</span><span class="sr">/(?&lt;foo&gt;[A-Z]..)(?&lt;bar&gt;[A-Z]..)/</span>, <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">Baz</span><span class="s2">"</span>
<span class="nb">p</span> s <span class="c1"># =&gt; &quot;BazBar&quot;
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D--3D"><code>self[regexp] = val</code><span class="permalink">[<a href="../method/-string/i/=5b=5d=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
正規表現 regexp にマッチした部分文字列全体を val で置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
置き換えたい部分文字列のパターンを示す正規表現
</dd>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
置き換えたい文字列
</dd>
<dt>[RETURN]</dt>
<dd>
val を返します。
</dd>
<dt>[EXCEPTION] IndexError:</dt>
<dd>
正規表現がマッチしなかった場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span>
buf<span class="p">[</span><span class="sr">/tr../</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">!!</span><span class="s2">"</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;s!!g&quot;
</span></code></pre>
</dd>
<dt class="method-heading" id="I_--5B--5D--3D"><code>self[range] = val</code><span class="permalink">[<a href="../method/-string/i/=5b=5d=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-5B-5D-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
rangeで指定したインデックスの範囲に含まれる部分文字列を文字列 val で置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
置き換えたい範囲を示す <a href="../class/-range.html">Range</a> オブジェクト
</dd>
<dt>[RETURN]</dt>
<dd>
val を返します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_ASCII_ONLY--3F"><code>ascii_only? -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/ascii_only=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-ascii_only-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列がASCII文字のみで構成されている場合に true を返します。さもなくば
false を返します。
</p>
<p>
例:
</p>
<pre>
'abc123'.ascii_only?        # =&gt; true
''.ascii_only?              # =&gt; true
'日本語'.ascii_only?        # =&gt; false
'日本語abc123'.ascii_only?  # =&gt; false
</pre>
</dd>


<dt class="method-heading" id="I_B"><code>b -&gt; String</code><span class="permalink">[<a href="../method/-string/i/b.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-b">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の文字エンコーディングを ASCII-8BIT にした文字列の複製を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s1">'abc123'</span><span class="p">.</span><span class="nf">encoding</span>    <span class="c1"># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class="s1">'abc123'</span><span class="p">.</span><span class="nf">b</span><span class="p">.</span><span class="nf">encoding</span>  <span class="c1"># =&gt; #&lt;Encoding:ASCII-8BIT&gt;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_BYTES"><code>bytes -&gt; [Integer]</code><span class="permalink">[<a href="../method/-string/i/bytes.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-bytes">rdoc</a>]</span></dt>
<dt class="method-heading"><code>bytes {|byte| ... } -&gt; self</code></dt>
<dd class="method-description">
<p>
文字列の各バイトを数値の配列で返します。(self.each_byte.to_a と同じです)
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">.</span><span class="nf">bytes</span> <span class="c1"># =&gt; [115, 116, 114]
</span></code></pre>
<p>
ブロックが指定された場合は <a href="../method/-string/i/each_byte.html">String#each_byte</a> と同じように動作します。
</p>
<p>
Ruby 2.6 までは deprecated の警告が出ますが、Ruby 2.7 で警告は削除されました。
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/each_byte.html">String#each_byte</a>
</p>
</dd>


<dt class="method-heading" id="I_BYTESIZE"><code>bytesize -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/bytesize.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-bytesize">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列のバイト長を整数で返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1">#coding:UTF-8
</span><span class="c1"># 実行結果は文字コードによって異なります。
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">いろは</span><span class="s2">"</span><span class="p">.</span><span class="nf">size</span>     <span class="c1">#=&gt; 3
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">いろは</span><span class="s2">"</span><span class="p">.</span><span class="nf">bytesize</span> <span class="c1">#=&gt; 9
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/size.html">String#size</a>
</p>
</dd>


<dt class="method-heading" id="I_BYTESLICE"><code>byteslice(nth) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string/i/byteslice.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-byteslice">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
nth バイト目の文字を返します。nth が負の場合は文字列の末尾から数えます。引数が範囲外を指定した場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
文字の位置を表す整数を指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
切り出した文字列を返します。戻り値の文字エンコーディングは自身と同じです。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">byteslice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;e&quot;
</span><span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">byteslice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># =&gt; &quot;o&quot;
</span><span class="s2">"</span><span class="s2">\u3042</span><span class="s2">"</span><span class="p">.</span><span class="nf">byteslice</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\xE3&quot;
</span><span class="s2">"</span><span class="s2">\u3042</span><span class="s2">"</span><span class="p">.</span><span class="nf">byteslice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x81&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/slice.html">String#slice</a>
</p>
</dd>
<dt class="method-heading" id="I_BYTESLICE"><code>byteslice(nth, len=1) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string/i/byteslice.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-byteslice">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
nth バイト目から長さ len バイトの部分文字列を新しく作って返します。
nth が負の場合は文字列の末尾から数えます。引数が範囲外を指定した場合は
nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
取得したい文字列の開始バイトを整数で指定します。
</dd>
<dt class='method-param'>[PARAM] len:</dt>
<dd>
取得したい文字列の長さを正の整数で指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
切り出した文字列を返します。戻り値の文字エンコーディングは自身と同じです。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">byteslice</span><span class="p">(</span><span class="mi">1</span>, <span class="mi">2</span><span class="p">)</span>              <span class="c1"># =&gt; &quot;el&quot;
</span><span class="s2">"</span><span class="s2">\u3042\u3044\u3046</span><span class="s2">"</span><span class="p">.</span><span class="nf">byteslice</span><span class="p">(</span><span class="mi">0</span>, <span class="mi">3</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\u3042&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/slice.html">String#slice</a>
</p>
</dd>
<dt class="method-heading" id="I_BYTESLICE"><code>byteslice(range) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string/i/byteslice.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-byteslice">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
range で指定したバイトの範囲に含まれる部分文字列を返します。引数が範囲外を指定した場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
取得したい文字列の範囲を示す Range オブジェクト
</dd>
<dt>[RETURN]</dt>
<dd>
切り出した文字列を返します。戻り値の文字エンコーディングは自身と同じです。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">byteslice</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="p">)</span>          <span class="c1"># =&gt; &quot;el&quot;
</span><span class="s2">"</span><span class="s2">\x03\u3042\xff</span><span class="s2">"</span><span class="p">.</span><span class="nf">byteslice</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\u3042&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/slice.html">String#slice</a>
</p>
</dd>


<dt class="method-heading" id="I_CAPITALIZE"><code>capitalize(*options) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/capitalize.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-capitalize">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列先頭の文字を大文字に、残りを小文字に変更した文字列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションの詳細は <a href="../method/-string/i/downcase.html">String#downcase</a> を参照してください。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foobar--</span><span class="s2">"</span><span class="p">.</span><span class="nf">capitalize</span>   <span class="c1"># =&gt; &quot;Foobar--&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">fooBAR--</span><span class="s2">"</span><span class="p">.</span><span class="nf">capitalize</span>   <span class="c1"># =&gt; &quot;Foobar--&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">FOOBAR--</span><span class="s2">"</span><span class="p">.</span><span class="nf">capitalize</span>   <span class="c1"># =&gt; &quot;Foobar--&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/capitalize=21.html">String#capitalize!</a>, <a href="../method/-string/i/upcase.html">String#upcase</a>,
<a href="../method/-string/i/downcase.html">String#downcase</a>, <a href="../method/-string/i/swapcase.html">String#swapcase</a>
</p>
</dd>


<dt class="method-heading" id="I_CAPITALIZE--21"><code>capitalize!(*options) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/capitalize=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-capitalize-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列先頭の文字を大文字に、残りを小文字に破壊的に変更します。
</p>
<dl>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションの詳細は <a href="../method/-string/i/downcase.html">String#downcase</a> を参照してください。
</dd>
<dt>[RETURN]</dt>
<dd>
capitalize! は self を変更して返しますが、変更が起こらなかった場合は nil を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">capitalize!</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;Foobar&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">fooBAR</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">capitalize!</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;Foobar&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/capitalize.html">String#capitalize</a>, <a href="../method/-string/i/upcase=21.html">String#upcase!</a>,
<a href="../method/-string/i/downcase=21.html">String#downcase!</a>, <a href="../method/-string/i/swapcase=21.html">String#swapcase!</a>
</p>
</dd>


<dt class="method-heading" id="I_CASECMP"><code>casecmp(other) -&gt; -1 | 0 | 1 | nil</code><span class="permalink">[<a href="../method/-string/i/casecmp.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-casecmp">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-string/i/=3c=3d=3e.html">String#&lt;=&gt;</a> と同様に文字列の順序を比較しますが、アルファベットの大文字小文字の違いを無視します。
</p>
<p>
このメソッドの動作は組み込み変数 <a href="../method/-kernel/v/=3d.html">$=</a> には影響されません。
</p>
<p>
<a href="../method/-string/i/casecmp=3f.html">String#casecmp?</a> と違って大文字小文字の違いを無視するのは
Unicode 全体ではなく、A-Z/a-z だけです。
</p>
<dl>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
self と比較する文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">aBcDeF</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp</span><span class="p">(</span><span class="s2">"</span><span class="s2">abcde</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; 1
</span><span class="s2">"</span><span class="s2">aBcDeF</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp</span><span class="p">(</span><span class="s2">"</span><span class="s2">abcdef</span><span class="s2">"</span><span class="p">)</span>    <span class="c1">#=&gt; 0
</span><span class="s2">"</span><span class="s2">aBcDeF</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp</span><span class="p">(</span><span class="s2">"</span><span class="s2">abcdefg</span><span class="s2">"</span><span class="p">)</span>   <span class="c1">#=&gt; -1
</span><span class="s2">"</span><span class="s2">abcdef</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp</span><span class="p">(</span><span class="s2">"</span><span class="s2">ABCDEF</span><span class="s2">"</span><span class="p">)</span>    <span class="c1">#=&gt; 0
</span></code></pre>
<p>
nil は文字列のエンコーディングが非互換の時に返されます。
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\u{e4 f6 fc}</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">ISO-8859-1</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">casecmp</span><span class="p">(</span><span class="s2">"</span><span class="s2">\u{c4 d6 dc}</span><span class="s2">"</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/=3c=3d=3e.html">String#&lt;=&gt;</a>, <a href="../method/-encoding/i/compatible=3f.html">Encoding#compatible?</a>
</p>
</dd>


<dt class="method-heading" id="I_CASECMP--3F"><code>casecmp?(other) -&gt; bool | nil</code><span class="permalink">[<a href="../method/-string/i/casecmp=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-casecmp-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
大文字小文字の違いを無視し文字列を比較します。文字列が一致する場合には true を返し、一致しない場合には false を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
self と比較する文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">abcdef</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp?</span><span class="p">(</span><span class="s2">"</span><span class="s2">abcde</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; false
</span><span class="s2">"</span><span class="s2">aBcDeF</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp?</span><span class="p">(</span><span class="s2">"</span><span class="s2">abcdef</span><span class="s2">"</span><span class="p">)</span>    <span class="c1">#=&gt; true
</span><span class="s2">"</span><span class="s2">abcdef</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp?</span><span class="p">(</span><span class="s2">"</span><span class="s2">abcdefg</span><span class="s2">"</span><span class="p">)</span>   <span class="c1">#=&gt; false
</span><span class="s2">"</span><span class="s2">abcdef</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp?</span><span class="p">(</span><span class="s2">"</span><span class="s2">ABCDEF</span><span class="s2">"</span><span class="p">)</span>    <span class="c1">#=&gt; true
</span><span class="s2">"</span><span class="s2">\u{e4 f6 fc}</span><span class="s2">"</span><span class="p">.</span><span class="nf">casecmp?</span><span class="p">(</span><span class="s2">"</span><span class="s2">\u{c4 d6 dc}</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; true
</span></code></pre>
<p>
nil は文字列のエンコーディングが非互換の時に返されます。
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\u{e4 f6 fc}</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">ISO-8859-1</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">casecmp?</span><span class="p">(</span><span class="s2">"</span><span class="s2">\u{c4 d6 dc}</span><span class="s2">"</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/casecmp.html">String#casecmp</a>
</p>
</dd>


<dt class="method-heading" id="I_CENTER"><code>center(width, padding = ' ') -&gt; String</code><span class="permalink">[<a href="../method/-string/i/center.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-center">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
長さ width の文字列に self を中央寄せした文字列を返します。
self の長さが width より長い時には元の文字列の複製を返します。また、第 2 引数 padding を指定したときは空白文字の代わりに padding を詰めます。
</p>
<dl>
<dt class='method-param'>[PARAM] width:</dt>
<dd>
返り値の文字列の最小の長さ
</dd>
<dt class='method-param'>[PARAM] padding:</dt>
<dd>
長さが width になるまで self の両側に詰める文字
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>       <span class="c1"># =&gt; &quot;   foo    &quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;   foo   &quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;  foo   &quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;  foo  &quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">center</span><span class="p">(</span><span class="mi">10</span>, <span class="s2">"</span><span class="s2">*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;***foo****&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/ljust.html">String#ljust</a>, <a href="../method/-string/i/rjust.html">String#rjust</a>
</p>
</dd>


<dt class="method-heading" id="I_CHARS"><code>chars -&gt; [String]</code><span class="permalink">[<a href="../method/-string/i/chars.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-chars">rdoc</a>]</span></dt>
<dt class="method-heading"><code>chars {|cstr| block } -&gt; self</code></dt>
<dd class="method-description">
<p>
文字列の各文字を文字列の配列で返します。(self.each_char.to_a と同じです)
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">hello世界</span><span class="s2">"</span><span class="p">.</span><span class="nf">chars</span> <span class="c1"># =&gt; [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;, &quot;世&quot;, &quot;界&quot;]
</span></code></pre>
<p>
ブロックが指定された場合は <a href="../method/-string/i/each_char.html">String#each_char</a> と同じように動作します。
</p>
<p>
Ruby 2.6 までは deprecated の警告が出ますが、Ruby 2.7 で警告は削除されました。
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/each_char.html">String#each_char</a>
</p>
</dd>


<dt class="method-heading" id="I_CHOMP"><code>chomp(rs = $/) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/chomp.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-chomp">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の末尾から rs で指定する改行コードを取り除いた文字列を生成して返します。ただし、rs が &quot;\n&quot; ($/ のデフォルト値) のときは、実行環境によらず &quot;\r&quot;, &quot;\r\n&quot;, &quot;\n&quot; のすべてを改行コードとみなして取り除きます。
</p>
<p>
rs に nil を指定した場合、このメソッドは何もしません。
</p>
<p>
rs に空文字列 (&quot;&quot;) を指定した場合は「パラグラフモード」になり、実行環境によらず末尾の連続する改行コード(&quot;\r\n&quot;, &quot;\n&quot;)をすべて取り除きます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span>             <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span><span class="p">(</span><span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\r\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span><span class="p">(</span><span class="s2">"</span><span class="s2">\r\n</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;foo&quot;
</span>
<span class="vg">$/</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span>   <span class="c1"># デフォルト値と同じ
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\r</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span>    <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\r\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span>  <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span>    <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n\r</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span>  <span class="c1"># =&gt; &quot;foo\n&quot;
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">string\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;string\n&quot;
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\r\n\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n\r\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n\r\r</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;foo\n\r\r&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chomp=21.html">String#chomp!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/chop.html">String#chop</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix.html">String#delete_suffix</a>
</p>
</dd>


<dt class="method-heading" id="I_CHOMP--21"><code>chomp!(rs = $/) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/chomp=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-chomp-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の末尾から rs で指定する改行コードを取り除きます。ただし rs が &quot;\n&quot; ($/ のデフォルト値) のときは、実行環境によらず &quot;\r&quot;, &quot;\r\n&quot;, &quot;\n&quot; のすべてを改行コードとみなして取り除きます。
</p>
<p>
rs に nil を指定した場合、このメソッドは何もしません。
</p>
<p>
rs に空文字列 (&quot;&quot;) を指定した場合は「パラグラフモード」になり、実行環境によらず末尾の連続する改行コード(&quot;\r\n&quot;, &quot;\n&quot;)をすべて取り除きます。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
chomp! は通常 self を返しますが、取り除く改行がなかった場合は nil を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">string\n</span><span class="s2">"</span>
buf<span class="p">.</span><span class="nf">chomp!</span>  <span class="c1"># =&gt; nil
</span><span class="nb">p</span> buf       <span class="c1"># =&gt; &quot;string&quot;
</span>
<span class="vg">$/</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span>   <span class="c1"># デフォルトと同じ
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\r</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp!</span>    <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\r\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp!</span>  <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp!</span>    <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n\r</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp!</span>  <span class="c1"># =&gt; &quot;foo\n&quot;
</span>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">string\n</span><span class="s2">"</span>
buf<span class="p">.</span><span class="nf">chomp!</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span>  <span class="c1"># =&gt; nil
</span><span class="nb">p</span> buf            <span class="c1"># =&gt; &quot;string\n&quot;
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\r\n\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp!</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n\r\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp!</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo\n\r\r</span><span class="s2">"</span><span class="p">.</span><span class="nf">chomp!</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chomp.html">String#chomp</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/chop=21.html">String#chop!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix=21.html">String#delete_suffix!</a>
</p>
</dd>


<dt class="method-heading" id="I_CHOP"><code>chop -&gt; String</code><span class="permalink">[<a href="../method/-string/i/chop.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-chop">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の最後の文字を取り除いた新しい文字列を生成して返します。ただし、文字列の終端が &quot;\r\n&quot; であればその 2 文字を取り除きます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">string\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chop</span>    <span class="c1"># =&gt; &quot;string&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string\r\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">chop</span>  <span class="c1"># =&gt; &quot;string&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">chop</span>      <span class="c1"># =&gt; &quot;strin&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">strin</span><span class="s2">"</span><span class="p">.</span><span class="nf">chop</span>       <span class="c1"># =&gt; &quot;stri&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">chop</span>            <span class="c1"># =&gt; &quot;&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chomp.html">String#chomp</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/chop=21.html">String#chop!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix.html">String#delete_suffix</a>
</p>
</dd>


<dt class="method-heading" id="I_CHOP--21"><code>chop! -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/chop=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-chop-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の最後の文字を取り除きます。ただし、終端が &quot;\r\n&quot; であればその 2 文字を取り除きます。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
chop! は self を変更して返しますが、取り除く文字がなかった場合は nil を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">string\r\n</span><span class="s2">"</span>
ret <span class="o">=</span> str<span class="p">.</span><span class="nf">chop!</span>
ret                  <span class="c1"># =&gt; &quot;string&quot;
</span>str                  <span class="c1"># =&gt; &quot;string&quot;
</span>str<span class="p">.</span><span class="nf">chop!</span>            <span class="c1"># =&gt; &quot;strin&quot;
</span><span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">chop!</span>             <span class="c1"># =&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chomp=21.html">String#chomp!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/chop.html">String#chop</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix=21.html">String#delete_suffix!</a>
</p>
</dd>


<dt class="method-heading" id="I_CHR"><code>chr -&gt; String</code><span class="permalink">[<a href="../method/-string/i/chr.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-chr">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の最初の文字だけを含む文字列を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="s2">"</span><span class="s2">abcde</span><span class="s2">"</span>
a<span class="p">.</span><span class="nf">chr</span>    <span class="c1">#=&gt; &quot;a&quot;
</span></code></pre>
<p>
Ruby 1.9 で IO#getc の戻り値が Integer から String を返すように変更になりました。
Ruby 1.8 以前と1.9以降の互換性を保つために  String#chr が存在します。
</p>
<p>
例:
</p>
<pre>
# ruby 1.8 系では STDIN.getc が 116 を返すため Integer#chr が呼び出される
$ echo test | ruby -e &quot;p STDIN.getc.chr&quot; # =&gt; &quot;t&quot;
# ruby 1.9 系以降では STDIN.getc が &quot;t&quot; を返すため String#chr が呼び出される
$ echo test | ruby -e &quot;p STDIN.getc.chr&quot; # =&gt; &quot;t&quot;
</pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/ord.html">String#ord</a>, <a href="../method/-integer/i/chr.html">Integer#chr</a>
</p>
</dd>


<dt class="method-heading" id="I_CLEAR"><code>clear -&gt; self</code><span class="permalink">[<a href="../method/-string/i/clear.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-clear">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の内容を削除して空にします。
self を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">clear</span>
<span class="nb">p</span> str     <span class="c1"># =&gt; &quot;&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">clear</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_CODEPOINTS"><code>codepoints -&gt; [Integer]</code><span class="permalink">[<a href="../method/-string/i/codepoints.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-codepoints">rdoc</a>]</span></dt>
<dt class="method-heading"><code>codepoints {|codepoint| block } -&gt; self</code></dt>
<dd class="method-description">
<p>
文字列の各コードポイントの配列を返します。(self.each_codepoint.to_a と同じです)
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1">#coding:UTF-8
</span><span class="s2">"</span><span class="s2">hello わーるど</span><span class="s2">"</span><span class="p">.</span><span class="nf">codepoints</span>
<span class="c1"># =&gt; [104, 101, 108, 108, 111, 32, 12431, 12540, 12427, 12393]
</span></code></pre>
<p>
ブロックが指定された場合は <a href="../method/-string/i/each_codepoint.html">String#each_codepoint</a> と同じように動作します。
</p>
<p>
Ruby 2.6 までは deprecated の警告が出ますが、Ruby 2.7 で警告は削除されました。
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/each_codepoint.html">String#each_codepoint</a>
</p>
</dd>


<dt class="method-heading" id="I_COUNT"><code>count(*chars) -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/count.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-count">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
chars で指定された文字が文字列 self にいくつあるか数えます。
</p>
<p>
検索する文字を示す引数 chars の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり、「&quot;a-c&quot;」は文字 a から c を意味し、「&quot;^0-9&quot;」のように文字列の先頭が「^」の場合は指定文字以外を意味します。
</p>
<p>
文字「-」は文字列の両端にない場合にだけ範囲指定の意味になります。同様に、「^」も文字列の先頭にあるときだけ否定の効果を発揮します。また、「-」「^」「\」はバックスラッシュ (「\」) によりエスケープできます。
</p>
<p>
引数を複数指定した場合は、すべての引数にマッチした文字だけを数えます。
</p>
<dl>
<dt class='method-param'>[PARAM] chars:</dt>
<dd>
出現回数を数える文字のパターン
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s1">'abcdefg'</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s1">'c'</span><span class="p">)</span>               <span class="c1"># =&gt; 1
</span><span class="nb">p</span> <span class="s1">'123456789'</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s1">'2378'</span><span class="p">)</span>          <span class="c1"># =&gt; 4
</span><span class="nb">p</span> <span class="s1">'123456789'</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s1">'2-8'</span>, <span class="s1">'^4-6'</span><span class="p">)</span>   <span class="c1"># =&gt; 4
</span>
<span class="c1"># ファイルの行数を数える
</span>n_lines <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">read</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># ファイルの末尾に改行コードがない場合にも対処する
</span>buf <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">read</span>
n_lines <span class="o">=</span> buf<span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span><span class="p">)</span>
n_lines <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="sr">/[^\n]\z/</span> <span class="o">=~</span> buf
           <span class="c1"># if /\n\z/ !~ buf だと空ファイルを 1 行として数えてしまうのでダメ
</span></code></pre>
</dd>


<dt class="method-heading" id="I_CRYPT"><code>crypt(salt) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/crypt.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-crypt">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self と salt から暗号化された文字列を生成して返します。
salt には英数字、ドット (「.」)、スラッシュ (「/」) から構成される、
2 バイト以上の文字列を指定します。
</p>
<p>
暗号化された文字列から暗号化前の文字列 (self) を求めることは一般に困難で、
self を知っている者のみが同じ暗号化された文字列を生成できます。このことから self を知っているかどうかの認証に使うことが出来ます。
</p>
<p>
salt には、以下の様になるべくランダムな文字列を選ぶべきです。他にも <a class="external" href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-list/29297">[ruby-list:29297]</a> などがあります。
</p>
<p>
注意:
</p>
<ul>
<li>Ruby 2.6 から非推奨になったため、引き続き必要な場合は
string-crypt gem の使用を検討してください。</li>
<li>crypt の処理は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/crypt.html">crypt(3)</a> の実装に依存しています。
従って、crypt で処理される内容の詳細や salt の与え方については、
利用環境の <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/crypt.html">crypt(3)</a> 等を見て確認してください。</li>
<li>crypt の結果は利用環境が異なると変わる場合があります。
crypt の結果を、異なる利用環境間で使用する場合には注意して下さい。</li>
<li>典型的な DES を使用した <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/crypt.html">crypt(3)</a> の場合、
self の最初の 8 バイト、salt の最初の 2 バイトだけが使用されます。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] salt:</dt>
<dd>
文字列を暗号化するための鍵となる文字列。英数字・「.」・「/」のいずれかで構成される 2 バイト以上の文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># パスワードの暗号化
</span>salt <span class="o">=</span> <span class="p">[</span><span class="nb">rand</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>,<span class="nb">rand</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C*</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s2">"</span><span class="s2">\x00-\x3f</span><span class="s2">"</span>,<span class="s2">"</span><span class="s2">A-Za-z0-9./</span><span class="s2">"</span><span class="p">)</span>
passwd<span class="p">.</span><span class="nf">crypt</span><span class="p">(</span>salt<span class="p">)</span>

<span class="c1"># UNIX のログイン認証
</span><span class="nb">require</span> <span class="s1">'etc'</span>

<span class="k">def</span> <span class="nf">valid_login?</span><span class="p">(</span>user, password<span class="p">)</span>
  ent <span class="o">=</span> <span class="no">Etc</span><span class="p">.</span><span class="nf">getpwnam</span><span class="p">(</span>user<span class="p">)</span>
  password<span class="p">.</span><span class="nf">crypt</span><span class="p">(</span>ent<span class="p">.</span><span class="nf">passwd</span><span class="p">)</span> <span class="o">==</span> ent<span class="p">.</span><span class="nf">passwd</span>
<span class="k">end</span>

<span class="nb">p</span> valid_login?<span class="p">(</span><span class="s2">"</span><span class="s2">taro</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">password</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; 真偽値が得られる
</span></code></pre>
</dd>


<dt class="method-heading" id="I_DELETE"><code>delete(*strs) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/delete.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-delete">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self から strs に含まれる文字を取り除いた文字列を生成して返します。
</p>
<p>
str の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり、`a-c' は a から c を意味し、&quot;^0-9&quot; のように文字列の先頭が `^' の場合は指定文字以外を意味します。
</p>
<p>
「-」は文字列の両端にない場合にだけ範囲指定の意味になります。「^」も文字列の先頭にあるときだけ効果を発揮します。また、「-」「^」「\」はバックスラッシュ (「\」)
によってエスケープできます。
</p>
<p>
なお、引数を複数指定した場合は、すべての引数にマッチする文字だけが削除されます。
</p>
<dl>
<dt class='method-param'>[PARAM] strs:</dt>
<dd>
削除する文字列を示す文字列 (のリスト)
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">123456789</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"</span><span class="s2">2378</span><span class="s2">"</span><span class="p">)</span>         <span class="c1">#=&gt; &quot;14569&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">123456789</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"</span><span class="s2">2-8</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">^4-6</span><span class="s2">"</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;14569&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete=21.html">String#delete!</a>
</p>
</dd>


<dt class="method-heading" id="I_DELETE--21"><code>delete!(*strs) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/delete=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-delete-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self から strs に含まれる文字を破壊的に取り除きます。
</p>
<p>
str の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり、「a-c」は a から c を意味し、&quot;^0-9&quot; のように文字列の先頭が「^」の場合は指定文字以外を意味します。
</p>
<p>
「-」は文字列の両端にない場合にだけ範囲指定の意味になります。「^」も文字列先頭にあるときだけ否定の効果を発揮します。また、「-」「^」「\」はバックスラッシュ (「\」)
によってエスケープできます。
</p>
<p>
なお、引数を複数指定した場合は、すべての引数にマッチする文字だけが削除されます。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
通常は self を返しますが、何も変更が起こらなかった場合は nil を返します。
</dd>
<dt class='method-param'>[PARAM] strs:</dt>
<dd>
削除する文字列を示す文字列 (のリスト)
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">123456789</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">delete!</span><span class="p">(</span><span class="s2">"</span><span class="s2">2378</span><span class="s2">"</span><span class="p">)</span>         <span class="c1">#=&gt; &quot;14569&quot;
</span><span class="nb">p</span> str                         <span class="c1">#=&gt; &quot;14569&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">123456789</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">delete!</span><span class="p">(</span><span class="s2">"</span><span class="s2">2-8</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">^4-6</span><span class="s2">"</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;14569&quot;
</span><span class="nb">p</span> str                         <span class="c1">#=&gt; &quot;14569&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">delete!</span><span class="p">(</span><span class="s2">"</span><span class="s2">2378</span><span class="s2">"</span><span class="p">)</span>         <span class="c1">#=&gt; &quot;nil&quot;
</span><span class="nb">p</span> str                         <span class="c1">#=&gt; &quot;abc&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete.html">String#delete</a>
</p>
</dd>


<dt class="method-heading" id="I_DELETE_PREFIX"><code>delete_prefix(prefix) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/delete_prefix.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-delete_prefix">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の先頭から prefix を削除した文字列のコピーを返します。
</p>
<dl>
<dt class='method-param'>[PARAM] prefix:</dt>
<dd>
先頭から削除する文字列を指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
文字列の先頭から prefix を削除した文字列のコピー
</dd>
</dl>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete_prefix</span><span class="p">(</span><span class="s2">"</span><span class="s2">hel</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;lo&quot;
</span><span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete_prefix</span><span class="p">(</span><span class="s2">"</span><span class="s2">llo</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;hello&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_prefix=21.html">String#delete_prefix!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix.html">String#delete_suffix</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/start_with=3f.html">String#start_with?</a>
</p>
</dd>


<dt class="method-heading" id="I_DELETE_PREFIX--21"><code>delete_prefix!(prefix) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/delete_prefix=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-delete_prefix-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の先頭から破壊的に prefix を削除します。
</p>
<dl>
<dt class='method-param'>[PARAM] prefix:</dt>
<dd>
先頭から削除する文字列を指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
削除した場合は self、変化しなかった場合は nil
</dd>
</dl>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete_prefix!</span><span class="p">(</span><span class="s2">"</span><span class="s2">hel</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;lo&quot;
</span><span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete_prefix!</span><span class="p">(</span><span class="s2">"</span><span class="s2">llo</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_prefix.html">String#delete_prefix</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix=21.html">String#delete_suffix!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/start_with=3f.html">String#start_with?</a>
</p>
</dd>


<dt class="method-heading" id="I_DELETE_SUFFIX"><code>delete_suffix(suffix) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/delete_suffix.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-delete_suffix">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の末尾から suffix を削除した文字列のコピーを返します。
</p>
<dl>
<dt class='method-param'>[PARAM] suffix:</dt>
<dd>
末尾から削除する文字列を指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
文字列の末尾から suffix を削除した文字列のコピー
</dd>
</dl>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete_suffix</span><span class="p">(</span><span class="s2">"</span><span class="s2">llo</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;he&quot;
</span><span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete_suffix</span><span class="p">(</span><span class="s2">"</span><span class="s2">hel</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;hello&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chomp.html">String#chomp</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/chop.html">String#chop</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_prefix.html">String#delete_prefix</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix=21.html">String#delete_suffix!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/end_with=3f.html">String#end_with?</a>
</p>
</dd>


<dt class="method-heading" id="I_DELETE_SUFFIX--21"><code>delete_suffix!(suffix) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/delete_suffix=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-delete_suffix-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の末尾から破壊的に suffix を削除します。
</p>
<dl>
<dt class='method-param'>[PARAM] suffix:</dt>
<dd>
末尾から削除する文字列を指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
削除した場合は self、変化しなかった場合は nil
</dd>
</dl>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete_suffix!</span><span class="p">(</span><span class="s2">"</span><span class="s2">llo</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;he&quot;
</span><span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete_suffix!</span><span class="p">(</span><span class="s2">"</span><span class="s2">hel</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chomp=21.html">String#chomp!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/chop=21.html">String#chop!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_prefix=21.html">String#delete_prefix!</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix.html">String#delete_suffix</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/end_with=3f.html">String#end_with?</a>
</p>
</dd>


<dt class="method-heading" id="I_DOWNCASE"><code>downcase(*options) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/downcase.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-downcase">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
全ての大文字を対応する小文字に置き換えた文字列を返します。どの文字がどう置き換えられるかは、オプションの有無や文字列のエンコーディングに依存します。
</p>
<dl>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションの意味は以下の通りです。
</dd>
</dl>
<dl>
<dt>オプションなし</dt>
<dd>
<p>
完全な Unicode ケースマッピングに対応し、ほとんどの言語に適しています。(例外は以下の :turkic,
:lithuanian オプションを参照)
Unicode 標準の表 3-14 で説明されている、コンテキスト依存のケースマッピングは、現在サポートされていません。
</p>
</dd>
<dt>:ascii</dt>
<dd>
<p>
ASCII の範囲内のみ (A-Z, a-z) が影響します。このオプションは他のオプションと組み合わせることはできません。
</p>
</dd>
<dt>:turkic</dt>
<dd>
<p>
チュルク語族 (トルコ語、アゼルバイジャン語など) に適合した完全な Unicode ケースマッピングです。これはたとえば大文字の I は小文字のドットなしの i (ı) にマッピングされることを意味します。
</p>
</dd>
<dt>:lithuanian</dt>
<dd>
<p>
現在は、ただの完全な Unicode ケースマッピングです。将来、リトアニア語に対応した完全な Unicode ケースマッピングです。
(上にアクセントがあっても小文字の i のドットを維持します。)
</p>
</dd>
<dt>:fold</dt>
<dd>
<p>
downcase と downcase! のみで使えます。
Unicode ケースフォールディングは Unicode ケースマッピングより広範囲です。このオプションは今の所、他のオプションと組み合わせることはできません。
(すなわち現在チュルク語族のバリアントはありません。)
</p>
</dd>
</dl>
<p>
ASCII のみの大文字小文字変換で有効ないくつかの仮定は、より一般的なケース変換では成り立たないことに注意してください。例えば、結果の長さは入力の長さと同じとは限りません (文字数でもバイト数でも)。ラウンドトリップできるという仮定も成り立ちません (例えば str.downcase == str.upcase.downcase)。そして、Unicode 正規化 (すなわち <a href="../method/-string/i/unicode_normalize.html">String#unicode_normalize</a>) はケースマッピング操作で必ずしも維持されるとは限りません。
</p>
<p>
現在 ASCII 以外のケースマッピング/フォールディングは、UTF-8, UTF-16BE/LE,
UTF-32BE/LE, ISO-8859-1~16 の String/Symbol でサポートされています。他のエンコーディングもサポートされる予定です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">STRing?</span><span class="s2">"</span><span class="p">.</span><span class="nf">downcase</span>   <span class="c1"># =&gt; &quot;string?&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/downcase=21.html">String#downcase!</a>, <a href="../method/-string/i/upcase.html">String#upcase</a>, <a href="../method/-string/i/swapcase.html">String#swapcase</a>, <a href="../method/-string/i/capitalize.html">String#capitalize</a>
</p>
</dd>


<dt class="method-heading" id="I_DOWNCASE--21"><code>downcase!(*options) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/downcase=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-downcase-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
全ての大文字を対応する小文字に破壊的に置き換えます。どの文字がどう置き換えられるかは、オプションの有無や文字列のエンコーディングに依存します。
</p>
<dl>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションの詳細は <a href="../method/-string/i/downcase.html">String#downcase</a> を参照してください。
</dd>
<dt>[RETURN]</dt>
<dd>
self を変更して返します。変更が無かった場合は nil を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">STRing?</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">downcase!</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;string?&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/downcase.html">String#downcase</a>, <a href="../method/-string/i/upcase=21.html">String#upcase!</a>, <a href="../method/-string/i/swapcase=21.html">String#swapcase!</a>, <a href="../method/-string/i/capitalize=21.html">String#capitalize!</a>
</p>
</dd>


<dt class="method-heading" id="I_DUMP"><code>dump -&gt; String</code><span class="permalink">[<a href="../method/-string/i/dump.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-dump">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中の非表示文字をバックスラッシュ記法に置き換えた文字列を返します。
str == eval(str.dump) となることが保証されています。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># p だとさらにバックスラッシュが増えて見にくいので puts している
</span><span class="nb">puts</span> <span class="s2">"</span><span class="s2">abc\r\n\f\x00\b10\\\&quot;</span><span class="s2">"</span><span class="p">.</span><span class="nf">dump</span>   <span class="c1"># =&gt; &quot;abc\r\n\f\000\01010\\\&quot;&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/undump.html">String#undump</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_BYTE"><code>each_byte {|byte| ... } -&gt; self</code><span class="permalink">[<a href="../method/-string/i/each_byte.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-each_byte">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_byte -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
文字列の各バイトに対して繰り返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_byte</span> <span class="k">do</span> <span class="o">|</span>byte<span class="o">|</span>
  <span class="nb">p</span> byte
<span class="k">end</span>
    <span class="c1"># =&gt; 115
</span>    <span class="c1"># =&gt; 116
</span>    <span class="c1"># =&gt; 114
</span>
<span class="s2">"</span><span class="s2">あ</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_byte</span> <span class="k">do</span> <span class="o">|</span>byte<span class="o">|</span>
  <span class="nb">p</span> byte
<span class="k">end</span>
    <span class="c1"># =&gt; 227
</span>    <span class="c1"># =&gt; 129
</span>    <span class="c1"># =&gt; 130
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/bytes.html">String#bytes</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_CHAR"><code>each_char {|cstr| block } -&gt; self</code><span class="permalink">[<a href="../method/-string/i/each_char.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-each_char">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_char -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
文字列の各文字に対して繰り返します。
</p>
<p>
たとえば、
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">hello世界</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_char</span> <span class="p">{</span><span class="o">|</span>c<span class="o">|</span> <span class="nb">print</span> c, <span class="s1">' '</span> <span class="p">}</span>
</code></pre>
<p>
は次のように出力されます。
</p>
<pre>
h e l l o 世 界
</pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chars.html">String#chars</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_CODEPOINT"><code>each_codepoint {|codepoint| block } -&gt; self</code><span class="permalink">[<a href="../method/-string/i/each_codepoint.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-each_codepoint">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_codepoint -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
文字列の各コードポイントに対して繰り返します。
</p>
<p>
UTF-8/UTF-16(BE|LE)/UTF-32(BE|LE) 以外のエンコーディングに対しては各文字のバイナリ表現由来の値になります。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1">#coding:UTF-8
</span><span class="s2">"</span><span class="s2">hello わーるど</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_codepoint</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [104, 101, 108, 108, 111, 32, 12431, 12540, 12427, 12393]
</span><span class="s2">"</span><span class="s2">hello わーるど</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s1">'euc-jp'</span><span class="p">)</span><span class="p">.</span><span class="nf">each_codepoint</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [104, 101, 108, 108, 111, 32, 42223, 41404, 42219, 42185]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/codepoints.html">String#codepoints</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_GRAPHEME_CLUSTER"><code>each_grapheme_cluster {|grapheme_cluster| block } -&gt; self</code><span class="permalink">[<a href="../method/-string/i/each_grapheme_cluster.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-each_grapheme_cluster">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_grapheme_cluster -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
文字列の書記素クラスタに対して繰り返します。
</p>
<p>
<a href="../method/-string/i/each_char.html">String#each_char</a> と違って、
Unicode Standard Annex #29 (<a class="external" href="https://unicode.org/reports/tr29/">https://unicode.org/reports/tr29/</a>)
で定義された書記素クラスタに対して繰り返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_char</span><span class="p">.</span><span class="nf">to_a</span><span class="p">.</span><span class="nf">size</span> <span class="c1"># =&gt; 2
</span><span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_grapheme_cluster</span><span class="p">.</span><span class="nf">to_a</span><span class="p">.</span><span class="nf">size</span> <span class="c1"># =&gt; 1
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/grapheme_clusters.html">String#grapheme_clusters</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_LINE"><code>each_line(rs = $/, chomp: false) {|line| ... } -&gt; self</code><span class="permalink">[<a href="../method/-string/i/each_line.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-each_line">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_line(rs = $/, chomp: false) -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
文字列中の各行に対して繰り返します。行の区切りは rs に指定した文字列で、そのデフォルト値は変数 <a href="../method/-kernel/v/=2f.html">$/</a> の値です。各 line には区切りの文字列も含みます。
</p>
<p>
rs に nil を指定すると行区切りなしとみなします。
rs に空文字列 &quot;&quot; を指定すると「パラグラフモード」になり、改行コードが 2 つ以上連続するところで文字列を分割します
(つまり空行で分割します)。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行末を示す文字列
</dd>
<dt class='method-param'>[PARAM] chomp:</dt>
<dd>
true を指定すると各行の末尾から rs を取り除きます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">aa\nbb\ncc\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_line</span> <span class="k">do</span> <span class="o">|</span>line<span class="o">|</span>
  <span class="nb">p</span> line
<span class="k">end</span>
    <span class="c1"># =&gt; &quot;aa\n&quot;
</span>    <span class="c1"># =&gt; &quot;bb\n&quot;
</span>    <span class="c1"># =&gt; &quot;cc\n&quot;
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">aa\nbb\ncc\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">lines</span><span class="p">.</span><span class="nf">to_a</span>   <span class="c1"># =&gt; [&quot;aa\n&quot;, &quot;bb\n&quot;, &quot;cc\n&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">aa\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">lines</span><span class="p">.</span><span class="nf">to_a</span>           <span class="c1"># =&gt; [&quot;aa\n&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">lines</span><span class="p">.</span><span class="nf">to_a</span>               <span class="c1"># =&gt; []
</span>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">aa\nbb\ncc\n</span><span class="s2">"</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">lines</span><span class="p">(</span><span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span> <span class="c1">#=&gt; [&quot;aa\n&quot;, &quot;bb\n&quot;, &quot;cc\n&quot;]
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">lines</span><span class="p">(</span><span class="s2">"</span><span class="s2">bb</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span> <span class="c1">#=&gt; [&quot;aa\nbb&quot;, &quot;\ncc\n&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/lines.html">String#lines</a>
</p>
</dd>


<dt class="method-heading" id="I_EMPTY--3F"><code>empty? -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/empty=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-empty-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列が空 (つまり長さ 0) の時、真を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">empty?</span>   <span class="c1">#=&gt; false
</span><span class="s2">"</span><span class="s2"> </span><span class="s2">"</span><span class="p">.</span><span class="nf">empty?</span>       <span class="c1">#=&gt; false
</span><span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">empty?</span>        <span class="c1">#=&gt; true
</span></code></pre>
</dd>


<dt class="method-heading" id="I_ENCODE"><code>encode(encoding, options = nil) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/encode.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-encode">rdoc</a>]</span></dt>
<dt class="method-heading"><code>encode(encoding, from_encoding, options = nil) -&gt; String</code></dt>
<dt class="method-heading"><code>encode(options = nil) -&gt; String</code></dt>
<dd class="method-description">
<p>
self を指定したエンコーディングに変換した文字列を作成して返します。引数を2つ与えた場合、第二引数は変換元のエンコーディングを意味します。さもなくば self のエンコーディングが使われます。無引数の場合は、<a href="../method/-encoding/s/default_internal.html">Encoding.default_internal</a> が nil でなければそれが変換先のエンコーディングになり、かつ :invalid =&gt; :replace と :undef =&gt; :replace が指定されたと見なされ、nil ならば変換は行われません。
</p>
<dl>
<dt class='method-param'>[PARAM] encoding:</dt>
<dd>
変換先のエンコーディングを表す文字列か <a href="../class/-encoding.html">Encoding</a> オブジェクトを指定します。
</dd>
<dt class='method-param'>[PARAM] from_encoding:</dt>
<dd>
変換元のエンコーディングを表す文字列か <a href="../class/-encoding.html">Encoding</a> オブジェクトを指定します。
</dd>
<dt class='method-param'>[PARAM] option:</dt>
<dd>
変換オプションをハッシュで与えます。
</dd>
<dt>[RETURN]</dt>
<dd>
変換された文字列
</dd>
</dl>
<p>
変換オプション
</p>
<dl>
<dt>:invalid =&gt; nil</dt>
<dd>
<p>
変換元のエンコーディングにおいて不正なバイトがあった場合に、例外 <a href="../class/-encoding=3a=3a-invalid-byte-sequence-error.html">Encoding::InvalidByteSequenceError</a> を投げます。(デフォルト)
</p>
</dd>
<dt>:invalid =&gt; :replace</dt>
<dd>
<p>
変換元のエンコーディングにおいて不正なバイトがあった場合に、不正なバイトを置換文字で置き換えます。
</p>
</dd>
<dt>:undef =&gt; nil</dt>
<dd>
<p>
変換先のエンコーディングにおいて文字が定義されていない場合に、例外 <a href="../class/-encoding=3a=3a-undefined-conversion-error.html">Encoding::UndefinedConversionError</a> を投げます。(デフォルト)
</p>
</dd>
<dt>:undef =&gt; :replace</dt>
<dd>
<p>
変換先のエンコーディングにおいて文字が定義されていない場合に、未定義文字を置換文字で置き換えます。
</p>
</dd>
<dt>:replace =&gt; string</dt>
<dd>
<p>
前述の :invalid =&gt; :replace や :undef =&gt; :replace で用いられる置換文字を指定します。デフォルトは Unicode 系のエンコーディングならば U+FFFD、それ以外では &quot;?&quot; です。
</p>
</dd>
<dt>:fallback =&gt; Hash | Proc | Method</dt>
<dd>
<p>
未定義の文字に対する置換文字を設定します。このオプションに与えられるオブジェクトは <a href="../class/-hash.html">Hash</a>, <a href="../class/-proc.html">Proc</a>, <a href="../class/-method.html">Method</a> のいずれかまたは [] メソッドを持つオブジェクトです。キーは現在のトランスコーダのソースエンコーディングで未定義の文字です。値は、変換先のエンコーディングでの変換後の文字です。
</p>
</dd>
<dt>:xml =&gt; :text</dt>
<dd>
<p>
文字列を XML の CharData として適するように処理します。具体的には、'&amp;'、'&lt;'、'&gt;'、をそれぞれ '&amp;amp;'、'&amp;lt;'、'&amp;gt;' に変換し、未定義文字を文字参照 (大文字16進数) に置き換えます。この出力は HTML の #PCDATA として利用することもできます。
</p>
</dd>
<dt>:xml =&gt; :attr</dt>
<dd>
<p>
文字列を XML の AttValue として適するように処理します。具体的には、'&amp;'、'&lt;'、'&gt;'、'&quot;'、をそれぞれ '&amp;amp;'、'&amp;lt;'、'&amp;gt;'、'&amp;quot;' に変換し、未定義文字を文字参照 (大文字16進数) に置き換えます。この出力は HTML の属性値として利用することもできます。
</p>
</dd>
<dt>:universal_newline =&gt; true</dt>
<dd>
<p>
CR 改行および CRLF 改行を LF 改行に置き換えます。
</p>
</dd>
<dt>:cr_newline =&gt; true</dt>
<dd>
<p>
LF 改行を CR 改行に置き換えます。(CRLF は CRCR になります)
</p>
</dd>
<dt>:crlf_newline =&gt; true</dt>
<dd>
<p>
LF 改行を CRLF 改行に置き換えます。(CRLF は CRCRLF になります)
</p>
</dd>
</dl>
<p>
これ以上細かい指定を行いたい場合は、<a href="../method/-encoding=3a=3a-converter/i/convert.html">Encoding::Converter#convert</a> を用いましょう。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1">#coding:UTF-8
</span>s <span class="o">=</span> <span class="s2">"</span><span class="s2">いろは</span><span class="s2">"</span>
s<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="no">Encoding</span><span class="o">::</span><span class="no">UTF_8</span><span class="p">)</span>

<span class="c1"># U+00B7 MIDDLE DOT, U+2014 EM DASH は対応する文字が Windows-31J には
</span><span class="c1"># 存在しないのでそのまま変換しようとすると Encoding::UndefinedConversionError が発生する
</span>str <span class="o">=</span> <span class="s2">"</span><span class="s2">\u00b7\u2014</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">Windows-31J</span><span class="s2">"</span>, <span class="ss">fallback:</span> <span class="p">{</span> <span class="s2">"</span><span class="s2">\u00b7</span><span class="s2">"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="s2">\xA5</span><span class="s2">"</span><span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">Windows-31J</span><span class="s2">"</span><span class="p">)</span>,
                                      <span class="s2">"</span><span class="s2">\u2014</span><span class="s2">"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="s2">\x81\x5C</span><span class="s2">"</span><span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">Windows-31J</span><span class="s2">"</span><span class="p">)</span> <span class="p">}</span><span class="p">)</span>
</code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/encode=21.html">String#encode!</a>
</p>
</dd>


<dt class="method-heading" id="I_ENCODE--21"><code>encode!(encoding, options = nil) -&gt; self</code><span class="permalink">[<a href="../method/-string/i/encode=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-encode-21">rdoc</a>]</span></dt>
<dt class="method-heading"><code>encode!(encoding, from_encoding, options = nil) -&gt; self</code></dt>
<dd class="method-description">
<p>
self を指定したエンコーディングに変換し、自身を置き換えます。引数を2つ与えた場合、第二引数は変換元のエンコーディングを意味します。さもなくば
self のエンコーディングが使われます。変換後の self を返します。
</p>
<p>
(gsub!などと異なり)変換が行なわれなくても self を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] encoding:</dt>
<dd>
変換先のエンコーディングを表す文字列か Encoding オブジェクトを指定します。
</dd>
<dt class='method-param'>[PARAM] from_encoding:</dt>
<dd>
変換元のエンコーディングを表す文字列か Encoding オブジェクトを指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
変換後のself
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1">#coding:UTF-8
</span>s <span class="o">=</span> <span class="s2">"</span><span class="s2">いろは</span><span class="s2">"</span>
s<span class="p">.</span><span class="nf">encode!</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">encode!</span><span class="p">(</span><span class="no">Encoding</span><span class="o">::</span><span class="no">UTF_8</span><span class="p">)</span>
</code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/encode.html">String#encode</a>
</p>
</dd>


<dt class="method-heading" id="I_ENCODING"><code>encoding -&gt; Encoding</code><span class="permalink">[<a href="../method/-string/i/encoding.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-encoding">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列のエンコーディング情報を表現した Encoding オブジェクトを返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># encoding: utf-8
</span>utf8_str <span class="o">=</span> <span class="s2">"</span><span class="s2">test</span><span class="s2">"</span>
euc_str <span class="o">=</span> utf8_str<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>
utf8_str<span class="p">.</span><span class="nf">encoding</span>   <span class="c1"># =&gt; #&lt;Encoding:UTF-8&gt;
</span>euc_str<span class="p">.</span><span class="nf">encoding</span>    <span class="c1"># =&gt; #&lt;Encoding:EUC-JP&gt;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../class/-encoding.html">Encoding</a>
</p>
</dd>


<dt class="method-heading" id="I_END_WITH--3F"><code>end_with?(*strs) -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/end_with=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-end_with-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の末尾が strs のいずれかであるとき true を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] strs:</dt>
<dd>
パターンを表す文字列 (のリスト)
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">end_with?</span><span class="p">(</span><span class="s2">"</span><span class="s2">ing</span><span class="s2">"</span><span class="p">)</span>          <span class="c1"># =&gt; true
</span><span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">end_with?</span><span class="p">(</span><span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">)</span>          <span class="c1"># =&gt; false
</span><span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">end_with?</span><span class="p">(</span><span class="s2">"</span><span class="s2">str</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">ing</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; true
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/start_with=3f.html">String#start_with?</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_suffix.html">String#delete_suffix</a>, <a href="../method/-string/i/delete_suffix=21.html">String#delete_suffix!</a>
</p>
</dd>


<dt class="method-heading" id="I_EQL--3F"><code>eql?(other) -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/eql=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-eql-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の内容が文字列 other の内容と等しいときに true を返します。等しくなければ false を返します。
</p>
<p>
このメソッドは文字列の内容を比較します。同一のオブジェクトかどうかを比較するわけではありません。つまり、&quot;string&quot;.eql?(str) という式を実行した場合には、
str が &quot;string&quot; という内容の文字列でありさえすれば常に true を返します。同一のオブジェクトであるかどうかを判定したいときは
<a href="../method/-object/i/equal=3f.html">Object#equal?</a> を使ってください。
</p>
<p>
アルファベットの大文字小文字を無視して比較したい場合は
<a href="../method/-string/i/casecmp=3f.html">String#casecmp?</a> を使ってください。
</p>
<p>
<a href="../class/-hash.html">Hash</a> クラス内での比較に使われます。
</p>
<dl>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
任意のオブジェクト
</dd>
<dt>[RETURN]</dt>
<dd>
true か false
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; true
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="s2">"</span><span class="s2">STRING</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; false
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; false
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; false
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="s2">"</span><span class="s2">str</span><span class="s2">"</span> <span class="o">+</span> <span class="s2">"</span><span class="s2">ing</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; true   (内容が同じなら true)
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="s2">"</span><span class="s2">stringX</span><span class="s2">"</span><span class="p">.</span><span class="nf">chop</span><span class="p">)</span>  <span class="c1"># =&gt; true   (内容が同じなら true)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../class/-hash.html">Hash</a>, <a href="../method/-string/i/=3c=3d=3e.html">String#&lt;=&gt;</a>, <a href="../method/-string/i/casecmp.html">String#casecmp</a>, <a href="../method/-string/i/=3d=3d.html">String#==</a>
</p>
</dd>


<dt class="method-heading" id="I_FORCE_ENCODING"><code>force_encoding(encoding) -&gt; self</code><span class="permalink">[<a href="../method/-string/i/force_encoding.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-force_encoding">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の持つエンコーディング情報を指定された encoding に変えます。
</p>
<p>
このとき実際のエンコーディングは変換されず、検査もされません。
<a href="../method/-array/i/pack.html">Array#pack</a> などで得られたバイト列のエンコーディングを指定する時に使います。
</p>
<dl>
<dt class='method-param'>[PARAM] encoding:</dt>
<dd>
変更するエンコーディング情報を表す文字列か Encoding オブジェクトを指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
s <span class="o">=</span> <span class="p">[</span><span class="mi">164</span>, <span class="mi">164</span>, <span class="mi">164</span>, <span class="mi">237</span>, <span class="mi">164</span>, <span class="mi">207</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C*</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">encoding</span>                                  <span class="c1">#=&gt; ASCII-8BIT
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>                  <span class="c1">#=&gt; &quot;いろは&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="no">Encoding</span><span class="o">::</span><span class="no">EUC_JP</span><span class="p">)</span>          <span class="c1">#=&gt; &quot;いろは&quot;
</span>
u <span class="o">=</span> <span class="p">[</span><span class="mi">12411</span>, <span class="mi">12408</span>, <span class="mi">12392</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U*</span><span class="s2">"</span><span class="p">)</span>
u<span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span>                     <span class="c1">#=&gt; &quot;ほへと&quot;
</span>u<span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="no">Encoding</span><span class="o">::</span><span class="no">UTF_8</span><span class="p">)</span>             <span class="c1">#=&gt; &quot;ほへと&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_GETBYTE"><code>getbyte(index) -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string/i/getbyte.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-getbyte">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
index バイト目のバイトを整数で返します。
</p>
<p>
index に負を指定すると末尾から数えた位置のバイトを取り出します。範囲外を指定した場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] index:</dt>
<dd>
バイトを取り出す位置
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">tester</span><span class="s2">"</span>
s<span class="p">.</span><span class="nf">bytes</span>             <span class="c1"># =&gt; [116, 101, 115, 116, 101, 114]
</span>s<span class="p">.</span><span class="nf">getbyte</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>        <span class="c1"># =&gt; 116
</span>s<span class="p">.</span><span class="nf">getbyte</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>        <span class="c1"># =&gt; 101
</span>s<span class="p">.</span><span class="nf">getbyte</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>       <span class="c1"># =&gt; 114
</span>s<span class="p">.</span><span class="nf">getbyte</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>        <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_GRAPHEME_CLUSTERS"><code>grapheme_clusters -&gt; [String]</code><span class="permalink">[<a href="../method/-string/i/grapheme_clusters.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-grapheme_clusters">rdoc</a>]</span></dt>
<dt class="method-heading"><code>grapheme_clusters {|grapheme_cluster| block } -&gt; self</code></dt>
<dd class="method-description">
<p>
文字列の書記素クラスタの配列を返します。(self.each_grapheme_cluster.to_a と同じです)
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span><span class="p">.</span><span class="nf">grapheme_clusters</span> <span class="c1"># =&gt; [&quot;à&quot;]
</span></code></pre>
<p>
ブロックが指定された場合は <a href="../method/-string/i/each_grapheme_cluster.html">String#each_grapheme_cluster</a> と同じように動作します。
</p>
<p>
Ruby 2.6 までは deprecated の警告が出ますが、Ruby 2.7 で警告は削除されました。
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/each_grapheme_cluster.html">String#each_grapheme_cluster</a>
</p>
</dd>


<dt class="method-heading" id="I_GSUB"><code>gsub(pattern, replace) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/gsub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-gsub">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中で pattern にマッチする部分全てを文字列 replace で置き換えた文字列を生成して返します。
</p>
<p>
置換文字列 replace 中の \&amp; と \0 はマッチした部分文字列に、
\1 ... \9 は n 番目の括弧の内容に置き換えられます。置換文字列内では \`、\'、\+ も使えます。これらは <a href="../method/-kernel/v/=60.html">$`</a>、<a href="../method/-kernel/v/=27.html">$'</a>、<a href="../method/-kernel/v/=2b.html">$+</a> に対応します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字列と置き換える文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s1">'abcdefg'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/def/</span>, <span class="s1">'!!'</span><span class="p">)</span>          <span class="c1"># =&gt; &quot;abc!!g&quot;
</span><span class="nb">p</span> <span class="s1">'abcabc'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/b/</span>, <span class="s1">'&lt;&lt;\&amp;&gt;&gt;'</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;a&lt;&lt;b&gt;&gt;ca&lt;&lt;b&gt;&gt;c&quot;
</span><span class="nb">p</span> <span class="s1">'xxbbxbb'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/x+(b+)/</span>, <span class="s1">'X&lt;&lt;\1&gt;&gt;'</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;X&lt;&lt;bb&gt;&gt;X&lt;&lt;bb&gt;&gt;&quot;
</span><span class="nb">p</span> <span class="s1">'2.5'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="s1">'.'</span>, <span class="s1">','</span><span class="p">)</span> <span class="c1"># =&gt; &quot;2,5&quot;
</span></code></pre>
<p>
注意:
</p>
<p>
第 2 引数 replace に <a href="../method/-kernel/v/1.html">$1</a> を埋め込んでも意図した結果にはなりません。この文字列が評価される時点ではまだ正規表現マッチが行われておらず、
$1 がセットされていないからです。
</p>
<p>
また、gsub では「\」が部分文字列との置き換えという特別な意味を持つため、
replace に「\」自身を入れたいときは「\」を二重にエスケープしなければなりません。
</p>
<pre class="highlight ruby">
<span class="caption">ひとつめの括弧の内容に置き換えるときによくある間違い</span>
<code>
<span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s2">"</span><span class="si">#{</span><span class="vg">$1</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;-&quot;        # NG
</span><span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s2">"</span><span class="s2">\1</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;1-1&quot;      # NG
</span><span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s2">"</span><span class="s2">\\1</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;bbb-bbb&quot;  # OK
</span><span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s1">'\1'</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;bbb-bbb&quot;  # OK
</span><span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s1">'\\1'</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;bbb-bbb&quot;  # OK
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">バックスラッシュを倍にするときによくある間違い</span>
<code>
<span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/\\/</span>, <span class="s2">"</span><span class="s2">\\\\</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; \n   # NG
</span><span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/\\/</span>, <span class="s1">'\\\\'</span><span class="p">)</span>      <span class="c1"># =&gt; \n   # NG
</span><span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/\\/</span>, <span class="s2">"</span><span class="s2">\\\\\\\\</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; \\n  # OK
</span><span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/\\/</span>, <span class="s1">'\\\\\\\\'</span><span class="p">)</span>  <span class="c1"># =&gt; \\n  # OK
</span></code></pre>
<p>
このような間違いを確実に防止し、コードの可読性を上げるには、
\&amp; や \1 よりも下記のようにブロック付き形式の gsub を使うべきです。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/x(b+)/</span><span class="p">)</span> <span class="p">{</span> <span class="vg">$1</span> <span class="p">}</span>   <span class="c1"># =&gt; &quot;bbb-bbb&quot;  # OK
</span>
<span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/\\/</span><span class="p">)</span> <span class="p">{</span> <span class="s1">'\\\\'</span> <span class="p">}</span>      <span class="c1"># =&gt; \\n        # OK
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/sub.html">String#sub</a>
</p>
</dd>
<dt class="method-heading" id="I_GSUB"><code>gsub(pattern) {|matched| .... } -&gt; String</code><span class="permalink">[<a href="../method/-string/i/gsub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-gsub">rdoc</a>]</span></dt>
<dt class="method-heading"><code>gsub(pattern) -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
文字列中で pattern にマッチした部分を順番にブロックに渡し、その実行結果で置き換えた文字列を生成して返します。ブロックなしの場合と違い、ブロックの中からは組み込み変数 <a href="../method/-kernel/v/1.html">$1</a>, $2, $3, ... を問題なく参照できます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt>[RETURN]</dt>
<dd>
新しい文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s1">'abcabc'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/[bc]/</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>s<span class="o">|</span> s<span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span>  <span class="c1">#=&gt; &quot;aBCaBC&quot;
</span><span class="nb">p</span> <span class="s1">'abcabc'</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/[bc]/</span><span class="p">)</span> <span class="p">{</span> <span class="vg">$&amp;</span><span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span>    <span class="c1">#=&gt; &quot;aBCaBC&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/sub.html">String#sub</a>, <a href="../method/-string/i/scan.html">String#scan</a>
</p>
</dd>
<dt class="method-heading" id="I_GSUB"><code>gsub(pattern, hash) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/gsub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-gsub">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中の pattern にマッチした部分をキーにして hash を引いた値で置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターン
</dd>
<dt class='method-param'>[PARAM] hash:</dt>
<dd>
置き換える文字列を与えるハッシュ
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'b'</span><span class="o">=&gt;</span><span class="s1">'B'</span>, <span class="s1">'c'</span><span class="o">=&gt;</span><span class="s1">'C'</span><span class="p">}</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">abcabc</span><span class="s2">"</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/[bc]/</span><span class="p">)</span><span class="p">{</span><span class="nb">hash</span><span class="p">[</span><span class="vg">$&amp;</span><span class="p">]</span><span class="p">}</span> <span class="c1">#=&gt; &quot;aBCaBC&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">abcabc</span><span class="s2">"</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/[bc]/</span>, <span class="nb">hash</span><span class="p">)</span>     <span class="c1">#=&gt; &quot;aBCaBC&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_GSUB--21"><code>gsub!(pattern, replace) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/gsub=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-gsub-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中で pattern にマッチする部分全てを文字列 replace に破壊的に置き換えます。
</p>
<p>
置換文字列 replace 中の \&amp; と \0 はマッチした部分文字列に、
\1 ... \9 は n 番目の括弧の内容に置き換えられます。置換文字列内では \`、\'、\+ も使えます。これらは <a href="../method/-kernel/v/=60.html">$`</a>、<a href="../method/-kernel/v/=27.html">$'</a>、<a href="../method/-kernel/v/=2b.html">$+</a> に対応します。
</p>
<p>
gsub! は通常 self を変更して返しますが、置換が起こらなかった場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字列と置き換える文字列
</dd>
<dt>[RETURN]</dt>
<dd>
置換した場合は self、置換しなかった場合は nil
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">String-String</span><span class="s2">"</span>
buf<span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/in./</span>, <span class="s2">"</span><span class="s2">!!</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;Str!!-Str!!&quot;
</span>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">String.String</span><span class="s2">"</span>
buf<span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/in./</span>, <span class="s1">'&lt;&lt;\&amp;&gt;&gt;'</span><span class="p">)</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;Str&lt;&lt;ing&gt;&gt;-Str&lt;&lt;ing&gt;&gt;&quot;
</span></code></pre>
<p>
注意:
</p>
<p>
引数 replace の中で <a href="../method/-kernel/v/1.html">$1</a> を使うことはできません。
replace は gsub メソッドの呼び出しより先に評価されるので、まだ gsub の正規表現マッチが行われておらず、
$1 がセットされていないからです。
</p>
<p>
また、gsub では「\」が部分文字列との置き換えという特別な意味を持つため、
replace に「\」自身を入れたいときは「\」を二重にエスケープしなければなりません。
</p>
<pre class="highlight ruby">
<span class="caption">ひとつめの括弧にマッチした部分に置き換えるときによくやる間違い</span>
<code>
<span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s2">"</span><span class="si">#{</span><span class="vg">$1</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># NG
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s2">"</span><span class="s2">\1</span><span class="s2">"</span><span class="p">)</span>          <span class="c1"># NG
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s2">"</span><span class="s2">\\1</span><span class="s2">"</span><span class="p">)</span>         <span class="c1"># OK
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s1">'\\1'</span><span class="p">)</span>         <span class="c1"># OK
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s1">'\1'</span><span class="p">)</span>          <span class="c1"># OK
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/a(b+)/</span><span class="p">)</span> <span class="p">{</span> <span class="vg">$1</span> <span class="p">}</span>         <span class="c1"># OK   これがもっとも安全
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/sub.html">String#sub</a>
</p>
</dd>
<dt class="method-heading" id="I_GSUB--21"><code>gsub!(pattern) {|matched| .... } -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/gsub=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-gsub-21">rdoc</a>]</span></dt>
<dt class="method-heading"><code>gsub!(pattern) -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
文字列中で pattern にマッチする部分全てを順番にブロックに渡し、その評価結果に置き換えます。
</p>
<p>
また、ブロックなしの場合と違い、ブロックの中からは組み込み変数 <a href="../method/-kernel/v/1.html">$1</a>, $2, $3, ... を問題なく参照できます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt>[RETURN]</dt>
<dd>
置換した場合は self、置換しなかった場合は nil
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s1">'abcabc'</span>
str<span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/b/</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>s<span class="o">|</span> s<span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span>
<span class="nb">p</span> str    <span class="c1">#=&gt; &quot;aBcaBc&quot;
</span>
str <span class="o">=</span> <span class="s1">'abcabc'</span>
str<span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/b/</span><span class="p">)</span> <span class="p">{</span> <span class="vg">$&amp;</span><span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span>
<span class="nb">p</span> str    <span class="c1">#=&gt; &quot;aBcaBc&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/sub.html">String#sub</a>
</p>
</dd>
<dt class="method-heading" id="I_GSUB--21"><code>gsub!(pattern, hash) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/gsub=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-gsub-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中の pattern にマッチした部分をキーにして hash を引いた値へ破壊的に置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターン
</dd>
<dt class='method-param'>[PARAM] hash:</dt>
<dd>
置き換える文字列を与えるハッシュ
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'b'</span><span class="o">=&gt;</span><span class="s1">'B'</span>, <span class="s1">'c'</span><span class="o">=&gt;</span><span class="s1">'C'</span><span class="p">}</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">abcabc</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/[bc]/</span><span class="p">)</span><span class="p">{</span><span class="nb">hash</span><span class="p">[</span><span class="vg">$&amp;</span><span class="p">]</span><span class="p">}</span>
<span class="nb">p</span> str     <span class="c1">#=&gt; &quot;aBCaBC&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">abcabc</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/[bc]/</span>, <span class="nb">hash</span><span class="p">)</span>
<span class="nb">p</span> str     <span class="c1">#=&gt; &quot;aBCaBC&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_HASH"><code>hash -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/hash.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-hash">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self のハッシュ値を返します。
eql? で等しい文字列は、常にハッシュ値も等しくなります。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">test</span><span class="s2">"</span><span class="p">.</span><span class="nf">hash</span>                        <span class="c1"># =&gt; 4038258770210371295
</span><span class="p">(</span><span class="s2">"</span><span class="s2">te</span><span class="s2">"</span> <span class="o">+</span> <span class="s2">"</span><span class="s2">st</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">hash</span> <span class="o">==</span> <span class="s2">"</span><span class="s2">test</span><span class="s2">"</span><span class="p">.</span><span class="nf">hash</span>  <span class="c1"># =&gt; true
</span></code></pre>
<p>
[SEE_ALSO] <a href="../class/-hash.html">Hash</a>
</p>
</dd>


<dt class="method-heading" id="I_HEX"><code>hex -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/hex.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-hex">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列に 16 進数で数値が表現されていると解釈して整数に変換します。接頭辞 &quot;0x&quot;, &quot;0X&quot; とアンダースコアは無視されます。文字列が [_0-9a-fA-F] 以外の文字を含むときはその文字以降を無視します。
</p>
<p>
self が空文字列のときは 0 を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">10</span><span class="s2">"</span><span class="p">.</span><span class="nf">hex</span>    <span class="c1"># =&gt; 16
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">ff</span><span class="s2">"</span><span class="p">.</span><span class="nf">hex</span>    <span class="c1"># =&gt; 255
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">0x10</span><span class="s2">"</span><span class="p">.</span><span class="nf">hex</span>  <span class="c1"># =&gt; 16
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-0x10</span><span class="s2">"</span><span class="p">.</span><span class="nf">hex</span> <span class="c1"># =&gt; -16
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">xyz</span><span class="s2">"</span><span class="p">.</span><span class="nf">hex</span>   <span class="c1"># =&gt; 0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">10z</span><span class="s2">"</span><span class="p">.</span><span class="nf">hex</span>   <span class="c1"># =&gt; 16
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">1_0</span><span class="s2">"</span><span class="p">.</span><span class="nf">hex</span>   <span class="c1"># =&gt; 16
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">hex</span>      <span class="c1"># =&gt; 0
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/oct.html">String#oct</a>, <a href="../method/-string/i/to_i.html">String#to_i</a>, <a href="../method/-string/i/to_f.html">String#to_f</a>,
<a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a>, <a href="../method/-kernel/m/-float.html">Kernel.#Float</a>
</p>
<p>
このメソッドの逆に数値を文字列に変換するには
<a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>, <a href="../method/-string/i/=25.html">String#%</a>,
<a href="../method/-integer/i/to_s.html">Integer#to_s</a>
などを使ってください。
</p>
</dd>


<dt class="method-heading" id="I_INCLUDE--3F"><code>include?(substr) -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/include=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-include-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中に部分文字列 substr が含まれていれば真を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] substr:</dt>
<dd>
検索する文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">include?</span> <span class="s2">"</span><span class="s2">lo</span><span class="s2">"</span>   <span class="c1">#=&gt; true
</span><span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">include?</span> <span class="s2">"</span><span class="s2">ol</span><span class="s2">"</span>   <span class="c1">#=&gt; false
</span><span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span><span class="p">.</span><span class="nf">include?</span> <span class="sc">?h</span>     <span class="c1">#=&gt; true
</span></code></pre>
</dd>


<dt class="method-heading" id="I_INDEX"><code>index(pattern, pos = 0) -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string/i/index.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-index">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列のインデックス pos から右に向かって pattern を検索し、最初に見つかった部分文字列の左端のインデックスを返します。見つからなければ nil を返します。
</p>
<p>
引数 pattern は探索する部分文字列または正規表現で指定します。
</p>
<p>
pos が負の場合、文字列の末尾から数えた位置から探索します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
探索する部分文字列または正規表現
</dd>
<dt class='method-param'>[PARAM] pos:</dt>
<dd>
探索を開始するインデックス
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">astrochemistry</span><span class="s2">"</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">)</span>         <span class="c1"># =&gt; 1
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">regexpindex</span><span class="s2">"</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="sr">/e.*x/</span>, <span class="mi">2</span><span class="p">)</span>        <span class="c1"># =&gt; 3
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">character</span><span class="s2">"</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="sc">?c</span><span class="p">)</span>                 <span class="c1"># =&gt; 0
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foobarfoobar</span><span class="s2">"</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>, <span class="mi">6</span><span class="p">)</span>        <span class="c1"># =&gt; 9
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foobarfoobar</span><span class="s2">"</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">6</span><span class="p">)</span>       <span class="c1"># =&gt; 9
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/rindex.html">String#rindex</a>
</p>
</dd>


<dt class="method-heading" id="I_INSERT"><code>insert(pos, other) -&gt; self</code><span class="permalink">[<a href="../method/-string/i/insert.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-insert">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
pos 番目の文字の直前に文字列 other を挿入します。
self[pos, 0] = other と同じ操作です。
</p>
<dl>
<dt class='method-param'>[PARAM] pos:</dt>
<dd>
文字列を挿入するインデックス
</dd>
<dt class='method-param'>[PARAM] other:</dt>
<dd>
挿入する文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foobaz</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">insert</span><span class="p">(</span><span class="mi">3</span>, <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;foobarbaz&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/=5b=5d=3d.html">String#[]=</a>
</p>
</dd>


<dt class="method-heading" id="I_INSPECT"><code>inspect -&gt; String</code><span class="permalink">[<a href="../method/-string/i/inspect.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-inspect">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列オブジェクトの内容を、出力したときに人間が読みやすいような適当な形式に変換します。変換された文字列は印字可能な文字のみによって構成されます
</p>
<p>
現在の実装では、Ruby のリテラル形式を使って、文字列中の不可視文字をエスケープシーケンスに変換します。
</p>
<p>
このメソッドは主にデバッグのために用意されています。永続化などの目的で文字列をダンプしたいときは、
<a href="../method/-string/i/dump.html">String#dump</a> を使うべきです。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># p ではないことに注意
</span><span class="nb">puts</span> <span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">inspect</span>    <span class="c1"># =&gt; &quot;string&quot;
</span><span class="nb">puts</span> <span class="s2">"</span><span class="s2">\t\r\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">inspect</span>    <span class="c1"># =&gt; &quot;\t\r\n&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/dump.html">String#dump</a>
</p>
</dd>


<dt class="method-heading" id="I_INTERN"><code>intern -&gt; Symbol</code><span class="permalink">[<a href="../method/-string/i/intern.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-intern">rdoc</a>]</span></dt>
<dt class="method-heading"><code>to_sym -&gt; Symbol</code></dt>
<dd class="method-description">
<p>
文字列に対応するシンボル値 <a href="../class/-symbol.html">Symbol</a> を返します。
</p>
<p>
なお、このメソッドの逆にシンボルに対応する文字列を得るには
<a href="../method/-symbol/i/to_s.html">Symbol#to_s</a> または <a href="../method/-symbol/i/id2name.html">Symbol#id2name</a> を使います。
</p>
<p>
シンボル文字列にはヌルキャラクタ(&quot;\0&quot;)、空の文字列の使用も可能です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">intern</span>                 <span class="c1"># =&gt; :foo
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">intern</span><span class="p">.</span><span class="nf">to_s</span> <span class="o">==</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>   <span class="c1"># =&gt; true
</span></code></pre>
</dd>


<dt class="method-heading" id="I_LENGTH"><code>length -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/length.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-length">rdoc</a>]</span></dt>
<dt class="method-heading"><code>size -&gt; Integer</code></dt>
<dd class="method-description">
<p>
文字列の文字数を返します。バイト数を知りたいときは bytesize メソッドを使ってください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">test</span><span class="s2">"</span><span class="p">.</span><span class="nf">length</span>          <span class="c1"># =&gt; 4
</span><span class="s2">"</span><span class="s2">test</span><span class="s2">"</span><span class="p">.</span><span class="nf">size</span>            <span class="c1"># =&gt; 4
</span><span class="s2">"</span><span class="s2">テスト</span><span class="s2">"</span><span class="p">.</span><span class="nf">length</span>         <span class="c1"># =&gt; 3
</span><span class="s2">"</span><span class="s2">テスト</span><span class="s2">"</span><span class="p">.</span><span class="nf">size</span>           <span class="c1"># =&gt; 3
</span><span class="s2">"</span><span class="s2">\x80\u3042</span><span class="s2">"</span><span class="p">.</span><span class="nf">length</span>    <span class="c1"># =&gt; 2
</span><span class="s2">"</span><span class="s2">\x80\u3042</span><span class="s2">"</span><span class="p">.</span><span class="nf">size</span>      <span class="c1"># =&gt; 2
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/bytesize.html">String#bytesize</a>
</p>
</dd>


<dt class="method-heading" id="I_LINES"><code>lines(rs = $/, chomp: false) -&gt; [String]</code><span class="permalink">[<a href="../method/-string/i/lines.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-lines">rdoc</a>]</span></dt>
<dt class="method-heading"><code>lines(rs = $/, chomp: false) {|line| ... } -&gt; self</code></dt>
<dd class="method-description">
<p>
文字列中の各行を文字列の配列で返します。(self.each_line.to_a と同じです)
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">aa\nbb\ncc\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">lines</span> <span class="c1"># =&gt; [&quot;aa\n&quot;, &quot;bb\n&quot;, &quot;cc\n&quot;]
</span></code></pre>
<p>
行の区切りは rs に指定した文字列で、 そのデフォルト値は変数 $/ の値です。各 line には区切りの文字列も含みます。
</p>
<p>
rs に nil を指定すると行区切りなしとみなします。 rs に空文字列 &quot;&quot; を指定すると「パラグラフモード」になり、 改行コードが 2 つ以上連続するところで文字列を分割します (つまり空行で分割します)。
</p>
<p>
chomp に true を指定すると、分割した各行の末尾から rs を取り除きます。
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">hello\nworld\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">lines</span>              <span class="c1"># =&gt; [&quot;hello\n&quot;, &quot;world\n&quot;]
</span><span class="s2">"</span><span class="s2">hello\nworld\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">lines</span><span class="p">(</span><span class="ss">chomp:</span> <span class="k">true</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;hello&quot;, &quot;world&quot;]
</span></code></pre>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行末を示す文字列
</dd>
<dt class='method-param'>[PARAM] chomp:</dt>
<dd>
分割した各行に対して <a href="../method/-string/i/chomp.html">String#chomp</a> と同等の結果を得る場合は true を、そうでない場合は false で指定します。省略した場合は false を指定したとみなされます。
</dd>
</dl>
<p>
ブロックが指定された場合は <a href="../method/-string/i/each_line.html">String#each_line</a> と同じように動作します。
</p>
<p>
Ruby 2.6 までは deprecated の警告が出ますが、Ruby 2.7 で警告は削除されました。
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/each_line.html">String#each_line</a>
</p>
</dd>


<dt class="method-heading" id="I_LJUST"><code>ljust(width, padding = ' ') -&gt; String</code><span class="permalink">[<a href="../method/-string/i/ljust.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-ljust">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
長さ width の文字列に self を左詰めした文字列を返します。
self の長さが width より長い時には元の文字列の複製を返します。また、第 2 引数 padding を指定したときは空白文字の代わりに padding を詰めます。
</p>
<dl>
<dt class='method-param'>[PARAM] width:</dt>
<dd>
返り値の文字列の最小の長さ
</dd>
<dt class='method-param'>[PARAM] padding:</dt>
<dd>
長さが width になるまで self の右側に詰める文字
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">ljust</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;foo       &quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">ljust</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;foo      &quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">ljust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;foo     &quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">ljust</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">ljust</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">ljust</span><span class="p">(</span><span class="mi">10</span>, <span class="s2">"</span><span class="s2">*</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;foo*******&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/center.html">String#center</a>, <a href="../method/-string/i/rjust.html">String#rjust</a>
</p>
</dd>


<dt class="method-heading" id="I_LSTRIP"><code>lstrip -&gt; String</code><span class="permalink">[<a href="../method/-string/i/lstrip.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-lstrip">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の先頭にある空白文字を全て取り除いた新しい文字列を返します。空白文字の定義は &quot; \t\r\n\f\v&quot; です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">  abc\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">lstrip</span>     <span class="c1">#=&gt; &quot;abc\n&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">\t abc\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">lstrip</span>    <span class="c1">#=&gt; &quot;abc\n&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">abc\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">lstrip</span>       <span class="c1">#=&gt; &quot;abc\n&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/strip.html">String#strip</a>, <a href="../method/-string/i/rstrip.html">String#rstrip</a>
</p>
</dd>


<dt class="method-heading" id="I_LSTRIP--21"><code>lstrip! -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/lstrip=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-lstrip-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の先頭にある空白文字を全て破壊的に取り除きます。空白文字の定義は &quot; \t\r\n\f\v&quot; です。
</p>
<p>
lstrip! は self を変更して返します。ただし取り除く空白がなかったときは nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">  abc</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">lstrip!</span>   <span class="c1"># =&gt; &quot;abc&quot;
</span><span class="nb">p</span> str           <span class="c1"># =&gt; &quot;abc&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">lstrip!</span>   <span class="c1"># =&gt; nil
</span><span class="nb">p</span> str           <span class="c1"># =&gt; &quot;abc&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_MATCH"><code>match(regexp, pos = 0) -&gt; MatchData | nil</code><span class="permalink">[<a href="../method/-string/i/match.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-match">rdoc</a>]</span></dt>
<dt class="method-heading"><code>match(regexp, pos = 0) {|m| ... } -&gt; object</code></dt>
<dd class="method-description">
<p>
regexp.match(self, pos) と同じです。
regexp が文字列の場合は、正規表現にコンパイルします。詳しくは <a href="../method/-regexp/i/match.html">Regexp#match</a> を参照してください。
</p>
<pre class="highlight ruby">
<span class="caption">例: regexp のみの場合</span>
<code>
<span class="s1">'hello'</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s1">'(.)\1'</span><span class="p">)</span>      <span class="c1"># =&gt; #&lt;MatchData &quot;ll&quot; 1:&quot;l&quot;&gt;
</span><span class="s1">'hello'</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s1">'(.)\1'</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>   <span class="c1"># =&gt; &quot;ll&quot;
</span><span class="s1">'hello'</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sr">/(.)\1/</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>   <span class="c1"># =&gt; &quot;ll&quot;
</span><span class="s1">'hello'</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s1">'xx'</span><span class="p">)</span>         <span class="c1"># =&gt; nil
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">例: regexp, pos を指定した場合</span>
<code>
<span class="s1">'hoge hige hege bar'</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s1">'h.ge'</span>, <span class="mi">0</span><span class="p">)</span>     <span class="c1"># =&gt; #&lt;MatchData &quot;hoge&quot;&gt;
</span><span class="s1">'hoge hige hege bar'</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s1">'h.ge'</span>, <span class="mi">1</span><span class="p">)</span>     <span class="c1"># =&gt; #&lt;MatchData &quot;hige&quot;&gt;
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">例: ブロックを指定した場合</span>
<code>
<span class="s1">'hello'</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s1">'(.)\1'</span><span class="p">)</span><span class="p">{</span><span class="o">|</span>e<span class="o">|</span><span class="s2">"</span><span class="s2">match </span><span class="si">#{</span><span class="vg">$1</span><span class="si">}</span><span class="s2">"</span><span class="p">}</span>  <span class="c1"># =&gt; &quot;match l&quot;
</span><span class="s1">'hello'</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s1">'xx'</span><span class="p">)</span><span class="p">{</span><span class="o">|</span>e<span class="o">|</span><span class="s2">"</span><span class="s2">match </span><span class="si">#{</span><span class="vg">$1</span><span class="si">}</span><span class="s2">"</span><span class="p">}</span>     <span class="c1"># マッチしないためブロックは実行されない
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-regexp/i/match.html">Regexp#match</a>, <a href="../method/-symbol/i/match.html">Symbol#match</a>
</p>
</dd>


<dt class="method-heading" id="I_MATCH--3F"><code>match?(regexp, pos = 0) -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/match=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-match-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp.match?(self, pos) と同じです。
regexp が文字列の場合は、正規表現にコンパイルします。詳しくは <a href="../method/-regexp/i/match=3f.html">Regexp#match?</a> を参照してください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">Ruby</span><span class="s2">"</span><span class="p">.</span><span class="nf">match?</span><span class="p">(</span><span class="sr">/R.../</span><span class="p">)</span>    <span class="c1">#=&gt; true
</span><span class="s2">"</span><span class="s2">Ruby</span><span class="s2">"</span><span class="p">.</span><span class="nf">match?</span><span class="p">(</span><span class="sr">/R.../</span>, <span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; false
</span><span class="s2">"</span><span class="s2">Ruby</span><span class="s2">"</span><span class="p">.</span><span class="nf">match?</span><span class="p">(</span><span class="sr">/P.../</span><span class="p">)</span>    <span class="c1">#=&gt; false
</span><span class="vg">$&amp;</span>                       <span class="c1">#=&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-regexp/i/match=3f.html">Regexp#match?</a>, <a href="../method/-symbol/i/match=3f.html">Symbol#match?</a>
</p>
</dd>


<dt class="method-heading" id="I_NEXT"><code>succ -&gt; String</code><span class="permalink">[<a href="../method/-string/i/next.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-next">rdoc</a>]</span></dt>
<dt class="method-heading"><code>next -&gt; String</code></dt>
<dd class="method-description">
<p>
self の「次の」文字列を返します。
</p>
<p>
「次の」文字列は、対象の文字列の右端からアルファベットなら アルファベット順(aの次はb, zの次はa, 大文字も同様)に、数字なら 10 進数(9 の次は 0)とみなして計算されます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">aa</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>        <span class="c1"># =&gt; &quot;ab&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">88</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;90&quot;
</span></code></pre>
<p>
&quot;99&quot; → &quot;100&quot;, &quot;AZZ&quot; → &quot;BAA&quot; のような繰り上げも行われます。このとき負符号などは考慮されません。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">99</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;100&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">ZZ</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;AAA&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;b0&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;-10&quot;
</span></code></pre>
<p>
self にアルファベットや数字とそれ以外の文字が混在している場合、アルファベットと数字だけが「次の」文字になり、残りは保存されます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">1.9.9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span> <span class="c1"># =&gt; # &quot;2.0.0&quot;
</span></code></pre>
<p>
逆に self がアルファベットや数字をまったく含まない場合は、単純に文字コードを 1 増やします。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">.</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>     <span class="c1"># =&gt; &quot;/&quot;
</span></code></pre>
<p>
さらに、self が空文字列の場合は &quot;&quot; を返します。このメソッドはマルチバイト文字を意識せず、単に文字列をバイト列として扱います。
</p>
<p>
なお、succ と逆の動作をするメソッドはありません。また、succ という名前の由来は successor です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">aa</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;ab&quot;
</span>
<span class="c1"># 繰り上がり
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">99</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;100&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;b0&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">Az</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;Ba&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">zz</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;aaa&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;-10&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>    <span class="c1"># =&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">09</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;10&quot;
</span>
<span class="c1"># アルファベット・数字とそれ以外の混在
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">1.9.9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span> <span class="c1"># =&gt; # &quot;2.0.0&quot;
</span>
<span class="c1"># アルファベット・数字以外のみ
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">.</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>     <span class="c1"># =&gt; &quot;/&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">\0</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>    <span class="c1"># =&gt; &quot;\001&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">\377</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>  <span class="c1"># =&gt; &quot;\001\000&quot;
</span></code></pre>
<p>
このメソッドは文字列の <a href="../class/-range.html">Range</a> の内部で使用されます。
</p>
</dd>


<dt class="method-heading" id="I_NEXT--21"><code>succ! -&gt; String</code><span class="permalink">[<a href="../method/-string/i/next=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-next-21">rdoc</a>]</span></dt>
<dt class="method-heading"><code>next! -&gt; String</code></dt>
<dd class="method-description">
<p>
self を「次の」文字列に置き換えます。「次の」文字列は、アルファベットなら 16 進数、数字なら 10 進数とみなして計算されます。「次の」文字列の計算では &quot;99&quot; → &quot;100&quot; のように繰り上げも行われます。このとき負符号などは考慮されません。
</p>
<p>
self にアルファベットや数字とそれ以外の文字が混在している場合、アルファベットと数字だけが「次の」文字になり、残りは保存されます。逆に self がアルファベットや数字をまったく含まない場合は、単純に文字コードを 1 増やします。
</p>
<p>
さらに、self が空文字列の場合は &quot;&quot; を返します。
</p>
<p>
このメソッドはマルチバイト文字を意識せず、単に文字列をバイト列として扱います。
</p>
<p>
なお、succ! と逆の動作をするメソッドはありません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">aa</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;ab&quot;
</span>
<span class="c1"># 繰り上がり
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">99</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;100&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;b0&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">Az</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;Ba&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">zz</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;aaa&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;-10&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>    <span class="c1"># =&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">09</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>   <span class="c1"># =&gt; &quot;10&quot;
</span>
<span class="c1"># アルファベット・数字とそれ以外の混在
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">1.9.9</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span> <span class="c1"># =&gt; # &quot;2.0.0&quot;
</span>
<span class="c1"># アルファベット・数字以外のみ
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">.</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>     <span class="c1"># =&gt; &quot;/&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">\0</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>    <span class="c1"># =&gt; &quot;\001&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">\377</span><span class="s2">"</span><span class="p">.</span><span class="nf">succ</span>  <span class="c1"># =&gt; &quot;\001\000&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/succ.html">String#succ</a>
</p>
</dd>


<dt class="method-heading" id="I_OCT"><code>oct -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/oct.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-oct">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列を 8 進文字列であると解釈して、整数に変換します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">10</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>  <span class="c1"># =&gt; 8
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">010</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span> <span class="c1"># =&gt; 8
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">8</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>   <span class="c1"># =&gt; 0
</span></code></pre>
<p>
oct は文字列の接頭辞 (&quot;0&quot;, &quot;0b&quot;, &quot;0B&quot;, &quot;0x&quot;, &quot;0X&quot;) に応じて
8 進以外の変換も行います。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">0b10</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>  <span class="c1"># =&gt; 2
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">10</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>    <span class="c1"># =&gt; 8
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">010</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>   <span class="c1"># =&gt; 8
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">0x10</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>  <span class="c1"># =&gt; 16
</span></code></pre>
<p>
整数とみなせない文字があればそこまでを変換対象とします。変換対象が空文字列であれば 0 を返します。
</p>
<p>
符号や _ が含まれる場合も変換対象になります。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">-010</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>     <span class="c1"># =&gt; -8
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-0x10</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>    <span class="c1"># =&gt; -16
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-0b10</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>    <span class="c1"># =&gt; -2
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">1_0_1x</span><span class="s2">"</span><span class="p">.</span><span class="nf">oct</span>   <span class="c1"># =&gt; 65
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/hex.html">String#hex</a>, <a href="../method/-string/i/to_i.html">String#to_i</a>, <a href="../method/-string/i/to_f.html">String#to_f</a>,
<a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a>, <a href="../method/-kernel/m/-float.html">Kernel.#Float</a>
</p>
<p>
逆に、数値を文字列に変換するには<a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>,
<a href="../method/-string/i/=25.html">String#%</a>, <a href="../method/-integer/i/to_s.html">Integer#to_s</a> を使用します。
</p>
</dd>


<dt class="method-heading" id="I_ORD"><code>ord -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/ord.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-ord">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の最初の文字の文字コードを整数で返します。
</p>
<p>
self が空文字列のときは例外を発生します。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
文字コードを表す整数
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
self の長さが 0 のとき発生
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">a</span><span class="s2">"</span><span class="p">.</span><span class="nf">ord</span>   <span class="c1"># =&gt; 97
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-integer/i/chr.html">Integer#chr</a>, <a href="../method/-string/i/chr.html">String#chr</a>
</p>
</dd>


<dt class="method-heading" id="I_PARTITION"><code>partition(sep) -&gt; [String, String, String]</code><span class="permalink">[<a href="../method/-string/i/partition.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-partition">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
セパレータ sep が最初に登場する部分で self を 3 つに分割し、
[最初のセパレータより前の部分, セパレータ, それ以降の部分]
の 3 要素の配列を返します。
</p>
<p>
self がセパレータを含まないときは、返り値の第 2 要素と第 3 要素が空文字列になります。
</p>
<dl>
<dt class='method-param'>[PARAM] sep:</dt>
<dd>
セパレータを表す文字列か正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">axaxa</span><span class="s2">"</span><span class="p">.</span><span class="nf">partition</span><span class="p">(</span><span class="s2">"</span><span class="s2">x</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;a&quot;, &quot;x&quot;, &quot;axa&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">aaaaa</span><span class="s2">"</span><span class="p">.</span><span class="nf">partition</span><span class="p">(</span><span class="s2">"</span><span class="s2">x</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;aaaaa&quot;, &quot;&quot;, &quot;&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">aaaaa</span><span class="s2">"</span><span class="p">.</span><span class="nf">partition</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; [&quot;&quot;, &quot;&quot;, &quot;aaaaa&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/rpartition.html">String#rpartition</a>, <a href="../method/-string/i/split.html">String#split</a>
</p>
</dd>


<dt class="method-heading" id="I_PREPEND"><code>prepend(other_str) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/prepend.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-prepend">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列 other_str を先頭に破壊的に追加します。
</p>
<dl>
<dt class='method-param'>[PARAM] other_str:</dt>
<dd>
追加したい文字列を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="s2">"</span><span class="s2">world</span><span class="s2">"</span>
a<span class="p">.</span><span class="nf">prepend</span><span class="p">(</span><span class="s2">"</span><span class="s2">hello </span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;hello world&quot;
</span>a                   <span class="c1"># =&gt; &quot;hello world&quot;
</span></code></pre>
</dd>
<dt class="method-heading" id="I_PREPEND"><code>prepend(*arguments) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/prepend.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-prepend">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
複数の文字列を先頭に破壊的に追加します。
</p>
<dl>
<dt class='method-param'>[PARAM] arguments:</dt>
<dd>
追加したい文字列を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="s2">"</span><span class="s2">!!!</span><span class="s2">"</span>
a<span class="p">.</span><span class="nf">prepend</span> <span class="c1"># =&gt; &quot;!!!&quot;
</span>a         <span class="c1"># =&gt; &quot;!!!&quot;
</span>
a <span class="o">=</span> <span class="s2">"</span><span class="s2">!!!</span><span class="s2">"</span>
a<span class="p">.</span><span class="nf">prepend</span> <span class="s2">"</span><span class="s2">hello </span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">world</span><span class="s2">"</span> <span class="c1"># =&gt; &quot;hello world!!!&quot;
</span>a                           <span class="c1"># =&gt; &quot;hello world!!!&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_REPLACE"><code>replace(other) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/replace.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-replace">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の内容を other の内容で置き換えます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">replace</span> <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;bar&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_REVERSE"><code>reverse -&gt; String</code><span class="permalink">[<a href="../method/-string/i/reverse.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-reverse">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列を文字単位で左右逆転した文字列を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">.</span><span class="nf">reverse</span>   <span class="c1"># =&gt; &quot;raboof&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">reverse</span>         <span class="c1"># =&gt; &quot;&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_REVERSE--21"><code>reverse! -&gt; self</code><span class="permalink">[<a href="../method/-string/i/reverse=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-reverse-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列を文字単位で左右逆転します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">reverse!</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;raboof&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_RINDEX"><code>rindex(pattern, pos = self.size) -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string/i/rindex.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-rindex">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列のインデックス pos から左に向かって pattern を探索します。最初に見つかった部分文字列の左端のインデックスを返します。見つからなければ nil を返します。
</p>
<p>
引数 pattern は探索する部分文字列または正規表現で指定します。
</p>
<p>
pos が負の場合は、文字列の末尾から数えた位置から探索します。
</p>
<p>
rindex と <a href="../method/-string/i/index.html">String#index</a> とでは、探索方向だけが逆になります。完全に左右が反転した動作をするわけではありません。探索はその開始位置を右から左にずらしながら行いますが、部分文字列の照合はどちらのメソッドも左から右に向かって行います。以下の例を参照してください。
</p>
<pre class="highlight ruby">
<span class="caption">String#index の場合</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">stringstring</span><span class="s2">"</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"</span><span class="s2">ing</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>    <span class="c1"># =&gt; 3
</span>  <span class="c1"># ing            # ここから探索を始める
</span>  <span class="c1">#  ing
</span>  <span class="c1">#   ing          # 右にずらしていってここで見つかる
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">String#rindex の場合</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">stringstring</span><span class="s2">"</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="s2">"</span><span class="s2">ing</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># =&gt; 9
</span>  <span class="c1">#           ing    # インデックス -1 の文字から探索を始める
</span>  <span class="c1">#          ing
</span>  <span class="c1">#         ing      # 左にずらしていってここで見つかる
</span></code></pre>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
探索する部分文字列または正規表現
</dd>
<dt class='method-param'>[PARAM] pos:</dt>
<dd>
探索を始めるインデックス
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">astrochemistry</span><span class="s2">"</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; 10
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">character</span><span class="s2">"</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="sc">?c</span><span class="p">)</span>                <span class="c1"># =&gt; 5
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">regexprindex</span><span class="s2">"</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="sr">/e.*x/</span>, <span class="mi">2</span><span class="p">)</span>      <span class="c1"># =&gt; 1
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foobarfoobar</span><span class="s2">"</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>, <span class="mi">6</span><span class="p">)</span>       <span class="c1"># =&gt; 3
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foobarfoobar</span><span class="s2">"</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">6</span><span class="p">)</span>      <span class="c1"># =&gt; 3
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/index.html">String#index</a>
</p>
</dd>


<dt class="method-heading" id="I_RJUST"><code>rjust(width, padding = ' ') -&gt; String</code><span class="permalink">[<a href="../method/-string/i/rjust.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-rjust">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
長さ width の文字列に self を右詰めした文字列を返します。
self の長さが width より長い時には元の文字列の複製を返します。また、第 2 引数 padding を指定したときは空白文字の代わりに padding を詰めます。
</p>
<dl>
<dt class='method-param'>[PARAM] width:</dt>
<dd>
返り値の文字列の最小の長さ
</dd>
<dt class='method-param'>[PARAM] padding:</dt>
<dd>
長さが width になるまで self の左側に詰める文字
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">rjust</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;       foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">rjust</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;      foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;     foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">rjust</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">rjust</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;foo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">rjust</span><span class="p">(</span><span class="mi">10</span>, <span class="s2">"</span><span class="s2">*</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;*******foo&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/center.html">String#center</a>, <a href="../method/-string/i/ljust.html">String#ljust</a>
</p>
</dd>


<dt class="method-heading" id="I_RPARTITION"><code>rpartition(sep) -&gt; [String, String, String]</code><span class="permalink">[<a href="../method/-string/i/rpartition.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-rpartition">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
セパレータ sep が最後に登場する部分で self を 3 つに分割し、
[最後のセパレータより前の部分, セパレータ, それ以降の部分]
の 3 要素の配列を返します。
</p>
<p>
self がセパレータを含まないときは、返り値の第 1 要素と第 2 要素が空文字列になります。
</p>
<dl>
<dt class='method-param'>[PARAM] sep:</dt>
<dd>
セパレータを表す文字列か正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">axaxa</span><span class="s2">"</span><span class="p">.</span><span class="nf">rpartition</span><span class="p">(</span><span class="s2">"</span><span class="s2">x</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;axa&quot;, &quot;x&quot;, &quot;a&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">aaaaa</span><span class="s2">"</span><span class="p">.</span><span class="nf">rpartition</span><span class="p">(</span><span class="s2">"</span><span class="s2">x</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;&quot;, &quot;&quot;, &quot;aaaaa&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/partition.html">String#partition</a>, <a href="../method/-string/i/split.html">String#split</a>
</p>
</dd>


<dt class="method-heading" id="I_RSTRIP"><code>rstrip -&gt; String</code><span class="permalink">[<a href="../method/-string/i/rstrip.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-rstrip">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の末尾にある空白文字を全て取り除いた新しい文字列を返します。空白文字の定義は &quot; \t\r\n\f\v\0&quot; です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">  abc\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">rstrip</span>          <span class="c1">#=&gt; &quot;  abc&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">  abc \t\r\n\0</span><span class="s2">"</span><span class="p">.</span><span class="nf">rstrip</span>   <span class="c1">#=&gt; &quot;  abc&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">  abc</span><span class="s2">"</span><span class="p">.</span><span class="nf">rstrip</span>            <span class="c1">#=&gt; &quot;  abc&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">  abc\0 </span><span class="s2">"</span><span class="p">.</span><span class="nf">rstrip</span>         <span class="c1">#=&gt; &quot;  abc&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">abc\n</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">rstrip</span>    <span class="c1">#=&gt; &quot;abc&quot;
</span><span class="nb">p</span> str           <span class="c1">#=&gt; &quot;abc\n&quot;  (元の文字列は変化しない)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/lstrip.html">String#lstrip</a>,<a href="../method/-string/i/strip.html">String#strip</a>
</p>
</dd>


<dt class="method-heading" id="I_RSTRIP--21"><code>rstrip! -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/rstrip=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-rstrip-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の末尾にある空白文字を全て破壊的に取り除きます。空白文字の定義は &quot; \t\r\n\f\v\0&quot; です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">  abc\n</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">rstrip!</span>   <span class="c1"># =&gt; &quot;  abc&quot;
</span><span class="nb">p</span> str           <span class="c1"># =&gt; &quot;  abc&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">  abc \r\n\t\v\0</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">rstrip!</span>   <span class="c1"># =&gt; &quot;  abc&quot;
</span><span class="nb">p</span> str           <span class="c1"># =&gt; &quot;  abc&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/rstrip.html">String#rstrip</a>, <a href="../method/-string/i/lstrip.html">String#lstrip</a>
</p>
</dd>


<dt class="method-heading" id="I_SCAN"><code>scan(pattern) -&gt; [String] | [[String]]</code><span class="permalink">[<a href="../method/-string/i/scan.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-scan">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self に対して pattern を繰り返しマッチし、マッチした部分文字列の配列を返します。
</p>
<p>
pattern が正規表現で括弧を含む場合は、括弧で括られたパターンにマッチした部分文字列の配列の配列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
探索する部分文字列または正規表現
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/../</span><span class="p">)</span>               <span class="c1"># =&gt; [&quot;fo&quot;, &quot;ob&quot;, &quot;ar&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="s2">"</span><span class="s2">o</span><span class="s2">"</span><span class="p">)</span>                <span class="c1"># =&gt; [&quot;o&quot;, &quot;o&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foobarbazfoobarbaz</span><span class="s2">"</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/ba./</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;bar&quot;, &quot;baz&quot;, &quot;bar&quot;, &quot;baz&quot;]
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/(.)/</span><span class="p">)</span> <span class="c1"># =&gt; [[&quot;f&quot;], [&quot;o&quot;], [&quot;o&quot;], [&quot;b&quot;], [&quot;a&quot;], [&quot;r&quot;]]
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foobarbazfoobarbaz</span><span class="s2">"</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/(ba)(.)/</span><span class="p">)</span> <span class="c1"># =&gt; [[&quot;ba&quot;, &quot;r&quot;], [&quot;ba&quot;, &quot;z&quot;], [&quot;ba&quot;, &quot;r&quot;], [&quot;ba&quot;, &quot;z&quot;]]
</span></code></pre>
</dd>
<dt class="method-heading" id="I_SCAN"><code>scan(pattern) {|s| ... } -&gt; self</code><span class="permalink">[<a href="../method/-string/i/scan.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-scan">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
pattern がマッチした部分文字列をブロックに渡して実行します。
pattern が正規表現で括弧を含む場合は、括弧で括られたパターンにマッチした文字列の配列を渡します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
探索する部分文字列または正規表現
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">foobarbazfoobarbaz</span><span class="s2">"</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/ba./</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>s<span class="o">|</span> <span class="nb">p</span> s <span class="p">}</span>
<span class="c1"># &quot;bar&quot;
</span><span class="c1"># &quot;baz&quot;
</span><span class="c1"># &quot;bar&quot;
</span><span class="c1"># &quot;baz&quot;
</span>
<span class="s2">"</span><span class="s2">foobarbazfoobarbaz</span><span class="s2">"</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="s2">"</span><span class="s2">ba</span><span class="s2">"</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>s<span class="o">|</span> <span class="nb">p</span> s <span class="p">}</span>
<span class="c1"># &quot;ba&quot;
</span><span class="c1"># &quot;ba&quot;
</span><span class="c1"># &quot;ba&quot;
</span><span class="c1"># &quot;ba&quot;
</span>
<span class="s2">"</span><span class="s2">foobarbazfoobarbaz</span><span class="s2">"</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/(ba)(.)/</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>s<span class="o">|</span> <span class="nb">p</span> s <span class="p">}</span>
<span class="c1"># [&quot;ba&quot;, &quot;r&quot;]
</span><span class="c1"># [&quot;ba&quot;, &quot;z&quot;]
</span><span class="c1"># [&quot;ba&quot;, &quot;r&quot;]
</span><span class="c1"># [&quot;ba&quot;, &quot;z&quot;]
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SCRUB"><code>scrub -&gt; String</code><span class="permalink">[<a href="../method/-string/i/scrub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-scrub">rdoc</a>]</span></dt>
<dt class="method-heading"><code>scrub(repl) -&gt; String</code></dt>
<dt class="method-heading"><code>scrub {|bytes| ... } -&gt; String</code></dt>
<dd class="method-description">
<p>
self が不正なバイト列を含む場合に別の文字列に置き換えた新しい文字列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] repl:</dt>
<dd>
不正なバイト列を置き換える文字列を指定します。省略した場合は self の文字エンコーディングが <a href="../method/-encoding/c/-u-t-f_16-b-e.html">Encoding::UTF_16BE</a>,
<a href="../method/-encoding/c/-u-t-f_16-l-e.html">Encoding::UTF_16LE</a>, <a href="../method/-encoding/c/-u-t-f_32-b-e.html">Encoding::UTF_32BE</a>,
<a href="../method/-encoding/c/-u-t-f_32-l-e.html">Encoding::UTF_32LE</a>, <a href="../method/-encoding/c/-u-t-f_8.html">Encoding::UTF_8</a> のいずれかの場合は &quot;\uFFFD&quot; を表す文字で、それ以外の場合は &quot;?&quot; で置き換えられます。ブロックが指定された場合は不正なバイト列はブロックの戻り値で置き換えられます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">abc\u3042\x81</span><span class="s2">"</span><span class="p">.</span><span class="nf">scrub</span>      <span class="c1"># =&gt; &quot;abc\u3042\uFFFD&quot;
</span><span class="s2">"</span><span class="s2">abc\u3042\x81</span><span class="s2">"</span><span class="p">.</span><span class="nf">scrub</span><span class="p">(</span><span class="s2">"</span><span class="s2">*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;abc\u3042*&quot;
</span><span class="s2">"</span><span class="s2">abc\u3042\xE3\x80</span><span class="s2">"</span><span class="p">.</span><span class="nf">scrub</span><span class="p">{</span><span class="o">|</span>bytes<span class="o">|</span> <span class="s1">'&lt;'</span><span class="o">+</span>bytes<span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s1">'H*'</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">'&gt;'</span> <span class="p">}</span> <span class="c1"># =&gt; &quot;abc\u3042&lt;e380&gt;&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/scrub=21.html">String#scrub!</a>
</p>
</dd>


<dt class="method-heading" id="I_SCRUB--21"><code>scrub! -&gt; String</code><span class="permalink">[<a href="../method/-string/i/scrub=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-scrub-21">rdoc</a>]</span></dt>
<dt class="method-heading"><code>scrub!(repl) -&gt; String</code></dt>
<dt class="method-heading"><code>scrub! {|bytes| ... } -&gt; String</code></dt>
<dd class="method-description">
<p>
self が不正なバイト列を含む場合に別の文字列に置き換えます。常に self を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] repl:</dt>
<dd>
不正なバイト列を置き換える文字列を指定します。省略した場合は self の文字エンコーディングが <a href="../method/-encoding/c/-u-t-f_16-b-e.html">Encoding::UTF_16BE</a>,
<a href="../method/-encoding/c/-u-t-f_16-l-e.html">Encoding::UTF_16LE</a>, <a href="../method/-encoding/c/-u-t-f_32-b-e.html">Encoding::UTF_32BE</a>,
<a href="../method/-encoding/c/-u-t-f_32-l-e.html">Encoding::UTF_32LE</a>, <a href="../method/-encoding/c/-u-t-f_8.html">Encoding::UTF_8</a> のいずれかの場合は &quot;\uFFFD&quot; を表す文字で、それ以外の場合は &quot;?&quot; で置き換えられます。ブロックが指定された場合は不正なバイト列はブロックの戻り値で置き換えられます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">abc\u3042\x81</span><span class="s2">"</span><span class="p">.</span><span class="nf">scrub!</span>      <span class="c1"># =&gt; &quot;abc\u3042\uFFFD&quot;
</span><span class="s2">"</span><span class="s2">abc\u3042\x81</span><span class="s2">"</span><span class="p">.</span><span class="nf">scrub!</span><span class="p">(</span><span class="s2">"</span><span class="s2">*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;abc\u3042*&quot;
</span><span class="s2">"</span><span class="s2">abc\u3042\xE3\x80</span><span class="s2">"</span><span class="p">.</span><span class="nf">scrub!</span><span class="p">{</span><span class="o">|</span>bytes<span class="o">|</span> <span class="s1">'&lt;'</span><span class="o">+</span>bytes<span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s1">'H*'</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">'&gt;'</span> <span class="p">}</span> <span class="c1"># =&gt; &quot;abc\u3042&lt;e380&gt;&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/scrub.html">String#scrub</a>
</p>
</dd>


<dt class="method-heading" id="I_SETBYTE"><code>setbyte(index, b) -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/setbyte.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-setbyte">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
index バイト目のバイトを b に変更します。
</p>
<p>
index に負を指定すると末尾から数えた位置を変更します。
</p>
<p>
セットした値を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] index:</dt>
<dd>
バイトをセットする位置
</dd>
<dt class='method-param'>[PARAM] b:</dt>
<dd>
セットするバイト(0 から 255 までの整数)
</dd>
<dt>[EXCEPTION] IndexError:</dt>
<dd>
範囲外に値をセットしようとした場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">Sunday</span><span class="s2">"</span>
s<span class="p">.</span><span class="nf">setbyte</span><span class="p">(</span><span class="mi">0</span>, <span class="mi">77</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">setbyte</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span>, <span class="mi">111</span><span class="p">)</span>
s <span class="c1"># =&gt; &quot;Monday&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SLICE--21"><code>slice!(nth) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/slice=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-slice-21">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice!(pos, len) -&gt; String</code></dt>
<dt class="method-heading"><code>slice!(substr) -&gt; String</code></dt>
<dt class="method-heading"><code>slice!(regexp, nth = 0) -&gt; String</code></dt>
<dt class="method-heading"><code>slice!(first..last) -&gt; String</code></dt>
<dt class="method-heading"><code>slice!(first...last) -&gt; String</code></dt>
<dd class="method-description">
<p>
指定した範囲 (<a href="../method/-string/i/=5b=5d.html">String#[]</a> 参照) を文字列から取り除いたうえで取り除いた部分文字列を返します。
</p>
<p>
引数が範囲外を指す場合は nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
string <span class="o">=</span> <span class="s2">"</span><span class="s2">this is a string</span><span class="s2">"</span>
string<span class="p">.</span><span class="nf">slice!</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>        <span class="c1">#=&gt; &quot;i&quot;
</span>string<span class="p">.</span><span class="nf">slice!</span><span class="p">(</span><span class="mi">3</span><span class="o">..</span><span class="mi">6</span><span class="p">)</span>     <span class="c1">#=&gt; &quot; is &quot;
</span>string<span class="p">.</span><span class="nf">slice!</span><span class="p">(</span><span class="sr">/s.*t/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;sa st&quot;
</span>string<span class="p">.</span><span class="nf">slice!</span><span class="p">(</span><span class="s2">"</span><span class="s2">r</span><span class="s2">"</span><span class="p">)</span>      <span class="c1">#=&gt; &quot;r&quot;
</span>string                  <span class="c1">#=&gt; &quot;thing&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SPLIT"><code>split(sep = $;, limit = 0) -&gt; [String]</code><span class="permalink">[<a href="../method/-string/i/split.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-split">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
第 1 引数 sep で指定されたセパレータによって文字列を limit 個まで分割し、結果を文字列の配列で返します。
</p>
<p>
第 1 引数 sep は以下のいずれかです。
</p>
<dl>
<dt>正規表現</dt>
<dd>
<p>
正規表現にマッチする部分で分割する。特に、括弧によるグルーピングがあればそのグループにマッチした文字列も結果の配列に含まれる (後述)。
</p>
</dd>
<dt>文字列</dt>
<dd>
<p>
その文字列自体にマッチする部分で分割する。
</p>
</dd>
<dt>1 バイトの空白文字 ' '</dt>
<dd>
<p>
先頭と末尾の空白を除いたうえで、空白文字列で分割する。
</p>
</dd>
<dt>nil</dt>
<dd>
<p>
常に $; で分割する。 $; も nil の場合は、先頭と末尾の空白を除いたうえで、空白文字列で分割する。
</p>
</dd>
<dt>空文字列 '' あるいは空文字列にマッチする正規表現</dt>
<dd>
<p>
文字列を 1 文字ずつに分割する。マルチバイト文字を認識する。
</p>
</dd>
</dl>
<p>
sep が正規表現で、かつその正規表現に括弧が含まれている場合には、各括弧のパターンにマッチした文字列も配列に含まれます。括弧が複数ある場合は、マッチしたものだけが配列に含まれます。
</p>
<p>
第 2 引数 limit は以下のいずれかです。
</p>
<dl>
<dt>limit &gt; 0</dt>
<dd>
<p>
最大 limit 個の文字列に分割する
</p>
</dd>
<dt>limit == 0</dt>
<dd>
<p>
分割個数制限はなしで、配列末尾の空文字列を取り除く
</p>
</dd>
<dt>limit &lt; 0</dt>
<dd>
<p>
分割個数の制限はなし
</p>
</dd>
</dl>
<dl>
<dt class='method-param'>[PARAM] sep:</dt>
<dd>
文字列を分割するときのセパレータのパターン
</dd>
<dt class='method-param'>[PARAM] limit:</dt>
<dd>
分割する最大個数
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">   a \t  b \n  c</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">   a \t  b \n  c</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">   a \t  b \n  c</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]   # split(nil) と同じ
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">   a \t  b \n  c</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span>        <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]   # split(nil) と同じ
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">括弧を含む正規表現</span>
<code>
<span class="nb">p</span> <span class="s1">'1-10,20'</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/([-,])/</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;1&quot;, &quot;-&quot;, &quot;10&quot;, &quot;,&quot;, &quot;20&quot;]
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">正規表現が空文字列にマッチする場合は 1 文字に分割</span>
<code>
<span class="nb">p</span> <span class="s1">'hi there'</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/\s*/</span><span class="p">)</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">':'</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;h:i:t:h:e:r:e&quot;
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">文字列全体を 1 文字ずつに分割する例</span>
<code>
<span class="nb">p</span> <span class="s1">'hi there'</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">//</span><span class="p">)</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">':'</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;h:i: :t:h:e:r:e&quot;
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">limit == 0 だと制限なく分割、配列末尾の空文字列は取り除かれる</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,,,</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="mi">0</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">limit 省略時は 0 と同じ (最もよく使われるパターン)</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,,,</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span><span class="p">)</span>      <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">正の limit 使用例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,d,e</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;a,b,c,d,e&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,d,e</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="mi">2</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;a&quot;, &quot;b,c,d,e&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,d,e</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="mi">3</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c,d,e&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,d,e</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="mi">4</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d,e&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,d,e</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="mi">5</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,d,e</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="mi">6</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,d,e</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="mi">7</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">limit が負の数の場合は制限なく分割</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">a,b,c,,,</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/,/</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/partition.html">String#partition</a>, <a href="../method/-string/i/rpartition.html">String#rpartition</a>
</p>
</dd>


<dt class="method-heading" id="I_SQUEEZE"><code>squeeze(*chars) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/squeeze.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-squeeze">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
chars に含まれる文字が複数並んでいたら 1 文字にまとめます。
</p>
<p>
chars の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり、
`a-c' は a から c を意味し、&quot;^0-9&quot; のように文字列の先頭が `^' の場合は指定文字以外を意味します。
</p>
<p>
`-' は文字列の両端にない場合にだけ範囲指定の意味になります。同様に、`^' もその効果は文字列の先頭にあるときだけです。また、
`-', `^', `\' はバックスラッシュ(`\')によりエスケープすることができます。
</p>
<p>
引数を 1 つも指定しない場合は、すべての連続した文字を 1 文字にまとめます。
</p>
<p>
引数を複数指定した場合は、すべての引数にマッチする文字を 1 文字にまとめます。
</p>
<dl>
<dt class='method-param'>[PARAM] chars:</dt>
<dd>
１文字にまとめる文字。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">112233445566778899</span><span class="s2">"</span><span class="p">.</span><span class="nf">squeeze</span>          <span class="c1"># =&gt;&quot;123456789&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">112233445566778899</span><span class="s2">"</span><span class="p">.</span><span class="nf">squeeze</span><span class="p">(</span><span class="s2">"</span><span class="s2">2-8</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt;&quot;11234567899&quot;
</span>
<span class="c1"># 以下の 2 つは同じ意味
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">112233445566778899</span><span class="s2">"</span><span class="p">.</span><span class="nf">squeeze</span><span class="p">(</span><span class="s2">"</span><span class="s2">2378</span><span class="s2">"</span><span class="p">)</span>          <span class="c1"># =&gt;&quot;11234455667899&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">112233445566778899</span><span class="s2">"</span><span class="p">.</span><span class="nf">squeeze</span><span class="p">(</span><span class="s2">"</span><span class="s2">2-8</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">^4-6</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt;&quot;11234455667899&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SQUEEZE--21"><code>squeeze!(*chars) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/squeeze=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-squeeze-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
chars に含まれる文字が複数並んでいたら 1 文字にまとめます。
</p>
<p>
chars の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり、
`a-c' は a から c を意味し、&quot;^0-9&quot; のように文字列の先頭が `^' の場合は指定文字以外を意味します。
</p>
<p>
`-' は文字列の両端にない場合にだけ範囲指定の意味になります。同様に、`^' もその効果は文字列の先頭にあるときだけです。また、
`-', `^', `\' はバックスラッシュ(`\')によりエスケープすることができます。
</p>
<p>
引数を 1 つも指定しない場合は、すべての連続した文字を 1 文字にまとめます。
</p>
<p>
引数を複数指定した場合は、すべての引数にマッチする文字を 1 文字にまとめます。
</p>
<p>
1 文字もまとめられなかった場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] chars:</dt>
<dd>
１文字にまとめる文字。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">112233445566778899</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">squeeze!</span>
<span class="nb">p</span> str    <span class="c1"># =&gt;&quot;123456789&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">112233445566778899</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">squeeze!</span><span class="p">(</span><span class="s2">"</span><span class="s2">2-8</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> str    <span class="c1"># =&gt;&quot;11234567899&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">123456789</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">squeeze!</span> <span class="c1"># =&gt; nil
</span><span class="nb">p</span> str        <span class="c1"># =&gt;&quot;123456789&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_START_WITH--3F"><code>start_with?(*prefixes) -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/start_with=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-start_with-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self の先頭が prefixes のいずれかであるとき true を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] prefixes:</dt>
<dd>
パターンを表す文字列または正規表現 (のリスト)
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">start_with?</span><span class="p">(</span><span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">)</span>          <span class="c1"># =&gt; true
</span><span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">start_with?</span><span class="p">(</span><span class="s2">"</span><span class="s2">ing</span><span class="s2">"</span><span class="p">)</span>          <span class="c1"># =&gt; false
</span><span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">start_with?</span><span class="p">(</span><span class="s2">"</span><span class="s2">ing</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; true
</span><span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">start_with?</span><span class="p">(</span><span class="sr">/\w/</span><span class="p">)</span>           <span class="c1"># =&gt; true
</span><span class="s2">"</span><span class="s2">string</span><span class="s2">"</span><span class="p">.</span><span class="nf">start_with?</span><span class="p">(</span><span class="sr">/\d/</span><span class="p">)</span>           <span class="c1"># =&gt; false
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/end_with=3f.html">String#end_with?</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/delete_prefix.html">String#delete_prefix</a>, <a href="../method/-string/i/delete_prefix=21.html">String#delete_prefix!</a>
</p>
</dd>


<dt class="method-heading" id="I_STRIP"><code>strip -&gt; String</code><span class="permalink">[<a href="../method/-string/i/strip.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-strip">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列先頭と末尾の空白文字を全て取り除いた文字列を生成して返します。空白文字の定義は &quot; \t\r\n\f\v&quot; です。また、文字列右側からは &quot;\0&quot; も取り除きますが、左側の &quot;\0&quot; は取り除きません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">  abc  \r\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">strip</span>    <span class="c1">#=&gt; &quot;abc&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">abc\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">strip</span>          <span class="c1">#=&gt; &quot;abc&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">  abc</span><span class="s2">"</span><span class="p">.</span><span class="nf">strip</span>          <span class="c1">#=&gt; &quot;abc&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">.</span><span class="nf">strip</span>            <span class="c1">#=&gt; &quot;abc&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">  \0  abc  \0</span><span class="s2">"</span><span class="p">.</span><span class="nf">strip</span>  <span class="c1"># =&gt; &quot;\000  abc&quot;   # 右側のみ &quot;\0&quot; も取り除く
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">\tabc\n</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">strip</span>              <span class="c1">#=&gt; &quot;abc&quot;
</span><span class="nb">p</span> str                    <span class="c1">#=&gt; &quot;\tabc\n&quot; (元の文字列は変化しない)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/lstrip.html">String#lstrip</a>, <a href="../method/-string/i/rstrip.html">String#rstrip</a>
</p>
</dd>


<dt class="method-heading" id="I_STRIP--21"><code>strip! -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/strip=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-strip-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
先頭と末尾の空白文字を全て破壊的に取り除きます。空白文字の定義は &quot; \t\r\n\f\v&quot; です。また、文字列右側からは &quot;\0&quot; も取り除きますが、左側の &quot;\0&quot; は取り除きません。
</p>
<p>
strip! は、内容を変更した self を返します。ただし取り除く空白がなかったときは nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">  abc\r\n</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">strip!</span>     <span class="c1">#=&gt; &quot;abc&quot;
</span><span class="nb">p</span> str            <span class="c1">#=&gt; &quot;abc&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span>
<span class="nb">p</span> str<span class="p">.</span><span class="nf">strip!</span>     <span class="c1">#=&gt; nil
</span><span class="nb">p</span> str            <span class="c1">#=&gt; &quot;abc&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">  \0  abc  \0</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">strip!</span>
<span class="nb">p</span> str            <span class="c1"># =&gt; &quot;\000  abc&quot;   # 右側の &quot;\0&quot; のみ取り除かれる
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/strip.html">String#strip</a>, <a href="../method/-string/i/lstrip.html">String#lstrip</a>
</p>
</dd>


<dt class="method-heading" id="I_SUB"><code>sub(pattern, replace) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/sub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-sub">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中で pattern にマッチした最初の部分を文字列 replace で置き換えた文字列を生成して返します。
</p>
<p>
置換文字列 replace 中の \&amp; と \0 はマッチした部分文字列に、
\1 ... \9 は n 番目の括弧の内容に置き換えられます。置換文字列内では \`、\'、\+ も使えます。これらは <a href="../method/-kernel/v/=60.html">$`</a>、<a href="../method/-kernel/v/=27.html">$'</a>、<a href="../method/-kernel/v/=2b.html">$+</a> に対応します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字列と置き換える文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s1">'abcdefg'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/def/</span>, <span class="s1">'!!'</span><span class="p">)</span>          <span class="c1"># =&gt; &quot;abc!!g&quot;
</span><span class="nb">p</span> <span class="s1">'abcabc'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/b/</span>, <span class="s1">'&lt;&lt;\&amp;&gt;&gt;'</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;a&lt;&lt;b&gt;&gt;cabc&quot;
</span><span class="nb">p</span> <span class="s1">'xxbbxbb'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/x+(b+)/</span>, <span class="s1">'X&lt;&lt;\1&gt;&gt;'</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;X&lt;&lt;bb&gt;&gt;xbb&quot;
</span></code></pre>
<p>
注意:
</p>
<p>
第 2 引数 replace に <a href="../method/-kernel/v/1.html">$1</a> を埋め込んでも意図した結果にはなりません。この文字列が評価される時点ではまだ正規表現マッチが行われておらず、
$1 がセットされていないからです。
</p>
<p>
また、sub では「\」が部分文字列との置き換えという特別な意味を持つため、
replace に「\」自身を入れたいときは「\」を二重にエスケープしなければなりません。
</p>
<pre class="highlight ruby">
<span class="caption">ひとつめの括弧の内容に置き換えるときによくある間違い</span>
<code>
<span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s2">"</span><span class="si">#{</span><span class="vg">$1</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;-xbbb&quot;     # NG
</span><span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s2">"</span><span class="s2">\1</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;1-xbbb&quot;    # NG
</span><span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s2">"</span><span class="s2">\\1</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;bbb-xbbb&quot;  # OK
</span><span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s1">'\1'</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;bbb-xbbb&quot;  # OK
</span><span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/x(b+)/</span>, <span class="s1">'\\1'</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;bbb-xbbb&quot;  # OK
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">バックスラッシュを倍にするときによくある間違い</span>
<code>
<span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/\\/</span>, <span class="s2">"</span><span class="s2">\\\\</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; \n   # NG
</span><span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/\\/</span>, <span class="s1">'\\\\'</span><span class="p">)</span>      <span class="c1"># =&gt; \n   # NG
</span><span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/\\/</span>, <span class="s2">"</span><span class="s2">\\\\\\\\</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; \\n  # OK
</span><span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/\\/</span>, <span class="s1">'\\\\\\\\'</span><span class="p">)</span>  <span class="c1"># =&gt; \\n  # OK
</span></code></pre>
<p>
このような間違いを確実に防止し、コードの可読性を上げるには、
\&amp; や \1 よりも下記のようにブロック付き形式の sub を使うべきです。
</p>
<pre class="highlight ruby">
<span class="caption">安全な例</span>
<code>
<span class="nb">p</span> <span class="s1">'xbbb-xbbb'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/x(b+)/</span><span class="p">)</span> <span class="p">{</span> <span class="vg">$1</span> <span class="p">}</span>   <span class="c1"># =&gt; &quot;bbb-xbbb&quot;  # OK
</span>
<span class="nb">puts</span> <span class="s1">'\n'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/\\/</span><span class="p">)</span> <span class="p">{</span> <span class="s1">'\\\\'</span> <span class="p">}</span>      <span class="c1"># =&gt; \\n        # OK
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/gsub.html">String#gsub</a>
</p>
</dd>
<dt class="method-heading" id="I_SUB"><code>sub(pattern) {|matched| .... } -&gt; String</code><span class="permalink">[<a href="../method/-string/i/sub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-sub">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中で pattern にマッチした最初の部分をブロックに渡し、その評価結果で置き換えた新しい文字列を返します。ブロックなしの sub と違い、ブロックの中からは組み込み変数 <a href="../method/-kernel/v/1.html">$1</a>, $2, $3, ... を問題なく参照できます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s1">'abcabc'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/b/</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>s<span class="o">|</span> s<span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span>  <span class="c1">#=&gt; &quot;aBcabc&quot;
</span><span class="nb">p</span> <span class="s1">'abcabc'</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/b/</span><span class="p">)</span> <span class="p">{</span> <span class="vg">$&amp;</span><span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span>    <span class="c1">#=&gt; &quot;aBcabc&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/gsub.html">String#gsub</a>
</p>
</dd>
<dt class="method-heading" id="I_SUB"><code>sub(pattern, hash) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/sub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-sub">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中の pattern にマッチした部分をキーにして hash を引いた値で置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターン
</dd>
<dt class='method-param'>[PARAM] hash:</dt>
<dd>
置き換える文字列を与えるハッシュ
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'b'</span><span class="o">=&gt;</span><span class="s1">'B'</span>, <span class="s1">'c'</span><span class="o">=&gt;</span><span class="s1">'C'</span><span class="p">}</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">abcabc</span><span class="s2">"</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/[bc]/</span><span class="p">)</span><span class="p">{</span><span class="nb">hash</span><span class="p">[</span><span class="vg">$&amp;</span><span class="p">]</span><span class="p">}</span> <span class="c1">#=&gt; &quot;aBCabc&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">abcabc</span><span class="s2">"</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/[bc]/</span>, <span class="nb">hash</span><span class="p">)</span>     <span class="c1">#=&gt; &quot;aBCabc&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SUB--21"><code>sub!(pattern, replace) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/sub=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-sub-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中で pattern にマッチした最初の部分を文字列 replace へ破壊的に置き換えます。
</p>
<p>
置換文字列 replace 中の \&amp; と \0 はマッチした部分文字列に、
\1 ... \9 は n 番目の括弧の内容に置き換えられます。置換文字列内では \`、\'、\+ も使えます。これらは <a href="../method/-kernel/v/=60.html">$`</a>、<a href="../method/-kernel/v/=27.html">$'</a>、<a href="../method/-kernel/v/=2b.html">$+</a> に対応します。
</p>
<p>
sub! は通常 self を変更して返しますが、置換が起こらなかった場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字列と置き換える文字列
</dd>
<dt>[RETURN]</dt>
<dd>
置換した場合は self、置換しなかった場合は nil
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">String-String</span><span class="s2">"</span>
buf<span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/in./</span>, <span class="s2">"</span><span class="s2">!!</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;Str!!-String&quot;
</span>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">String.String</span><span class="s2">"</span>
buf<span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/in./</span>, <span class="s1">'&lt;&lt;\&amp;&gt;&gt;'</span><span class="p">)</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;Str&lt;&lt;ing&gt;&gt;-String&quot;
</span></code></pre>
<p>
注意:
</p>
<p>
引数 replace の中で <a href="../method/-kernel/v/1.html">$1</a> を使うことはできません。
replace は sub メソッドの呼び出しより先に評価されるので、まだ sub の正規表現マッチが行われておらず、
$1 がセットされていないからです。
</p>
<p>
また、sub では「\」が部分文字列との置き換えという特別な意味を持つため、
replace に「\」自身を入れたいときは「\」を二重にエスケープしなければなりません。
</p>
<pre class="highlight ruby">
<span class="caption">ひとつめの括弧にマッチした部分に置き換えるときによくやる間違いと正しい例</span>
<code>
<span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s2">"</span><span class="si">#{</span><span class="vg">$1</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># NG
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s2">"</span><span class="s2">\1</span><span class="s2">"</span><span class="p">)</span>          <span class="c1"># NG
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s2">"</span><span class="s2">\\1</span><span class="s2">"</span><span class="p">)</span>         <span class="c1"># OK
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s1">'\\1'</span><span class="p">)</span>         <span class="c1"># OK
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/a(b+)/</span>, <span class="s1">'\1'</span><span class="p">)</span>          <span class="c1"># OK
</span><span class="s1">'abbbcd'</span><span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/a(b+)/</span><span class="p">)</span> <span class="p">{</span> <span class="vg">$1</span> <span class="p">}</span>         <span class="c1"># OK   これがもっとも安全
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/gsub.html">String#gsub</a>
</p>
</dd>
<dt class="method-heading" id="I_SUB--21"><code>sub!(pattern) {|matched| .... } -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/sub=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-sub-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中で pattern にマッチした最初の部分をブロックに渡し、その評価結果へ破壊的に置き換えます。
</p>
<p>
また、ブロックなしの sub と違い、ブロックの中からは組み込み変数 <a href="../method/-kernel/v/1.html">$1</a>, $2, $3, ... を問題なく参照できます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt>[RETURN]</dt>
<dd>
置換した場合は self、置換しなかった場合は nil
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s1">'abcabc'</span>
str<span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/b/</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>s<span class="o">|</span> s<span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span>
<span class="nb">p</span> str    <span class="c1">#=&gt; &quot;aBcabc&quot;
</span>
str <span class="o">=</span> <span class="s1">'abcabc'</span>
str<span class="p">.</span><span class="nf">sub!</span><span class="p">(</span><span class="sr">/b/</span><span class="p">)</span> <span class="p">{</span> <span class="vg">$&amp;</span><span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span>
<span class="nb">p</span> str    <span class="c1">#=&gt; &quot;aBcabc&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/gsub.html">String#gsub</a>
</p>
</dd>
<dt class="method-heading" id="I_SUB--21"><code>sub!(pattern, hash) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/sub=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-sub-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列中の pattern にマッチした部分をキーにして hash を引いた値で破壊的に置き換えます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターン
</dd>
<dt class='method-param'>[PARAM] hash:</dt>
<dd>
置き換える文字列を与えるハッシュ
</dd>
<dt>[RETURN]</dt>
<dd>
置換した場合は self、置換しなかった場合は nil
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_SUM"><code>sum(bits = 16) -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/sum.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-sum">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の bits ビットのチェックサムを計算します。
</p>
<p>
以下と同じです。
</p>
<pre class="highlight ruby">
<code>
<span class="k">def</span> <span class="nf">sum</span><span class="p">(</span>bits<span class="p">)</span>
  sum <span class="o">=</span> <span class="mi">0</span>
  each_byte <span class="p">{</span><span class="o">|</span>c<span class="o">|</span> sum <span class="o">+=</span> c <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> sum <span class="o">==</span> <span class="mi">0</span>
  sum <span class="o">&amp;</span> <span class="p">(</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> bits<span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
<p>
例えば以下のコードで UNIX System V の
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/sum.html">sum(1)</a> コマンドと同じ値が得られます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
sum <span class="o">=</span> <span class="mi">0</span>
<span class="no">ARGF</span><span class="p">.</span><span class="nf">each_line</span> <span class="k">do</span> <span class="o">|</span>line<span class="o">|</span>
  sum <span class="o">+=</span> line<span class="p">.</span><span class="nf">sum</span>
<span class="k">end</span>
sum <span class="o">%=</span> <span class="mi">65536</span>
</code></pre>
<dl>
<dt class='method-param'>[PARAM] bits:</dt>
<dd>
チェックサムのビット数
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_SWAPCASE"><code>swapcase(*options) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/swapcase.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-swapcase">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
大文字を小文字に、小文字を大文字に変更した文字列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションの詳細は <a href="../method/-string/i/downcase.html">String#downcase</a> を参照してください。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">ABCxyz</span><span class="s2">"</span><span class="p">.</span><span class="nf">swapcase</span>   <span class="c1"># =&gt; &quot;abcXYZ&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">Access</span><span class="s2">"</span><span class="p">.</span><span class="nf">swapcase</span>   <span class="c1"># =&gt; &quot;aCCESS&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/swapcase=21.html">String#swapcase!</a>, <a href="../method/-string/i/upcase.html">String#upcase</a>, <a href="../method/-string/i/downcase.html">String#downcase</a>, <a href="../method/-string/i/capitalize.html">String#capitalize</a>
</p>
</dd>


<dt class="method-heading" id="I_SWAPCASE--21"><code>swapcase!(*options) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/swapcase=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-swapcase-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
大文字を小文字に、小文字を大文字に破壊的に変更します。
</p>
<dl>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションの詳細は <a href="../method/-string/i/downcase.html">String#downcase</a> を参照してください。
</dd>
</dl>
<p>
swapcase! は self を変更して返しますが、置換が起こらなかった場合は nil を返します。
</p>
<p>
このメソッドはマルチバイト文字を認識しません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">ABCxyz</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">swapcase!</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;abcXYZ&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/swapcase.html">String#swapcase</a>, <a href="../method/-string/i/upcase=21.html">String#upcase!</a>, <a href="../method/-string/i/downcase=21.html">String#downcase!</a>, <a href="../method/-string/i/capitalize=21.html">String#capitalize!</a>
</p>
</dd>


<dt class="method-heading" id="I_TO_C"><code>to_c -&gt; Complex</code><span class="permalink">[<a href="../method/-string/i/to_c.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-to_c">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自身を複素数 (<a href="../class/-complex.html">Complex</a>) に変換した結果を返します。
</p>
<p>
以下の形式を解析できます。i、j は大文字、小文字のどちらでも解析できます。
</p>
<ul>
<li>実部+虚部i</li>
<li>実部+虚部j</li>
<li>絶対値@偏角</li>
</ul>
<p>
それぞれの数値は以下のいずれかの形式で指定します。先頭の空白文字や複素数値の後にある文字列は無視されます。また、数値オブジェクトと同様に各桁の間に「_」を入れる事ができます。
</p>
<ul>
<li>&quot;1/3&quot; のような分数の形式</li>
<li>&quot;0.3&quot; のような10進数の形式</li>
<li>&quot;0.3E0&quot; のような x.xEn の形式</li>
</ul>
<p>
自身が解析できない値であった場合は 0+0i を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s1">'9'</span><span class="p">.</span><span class="nf">to_c</span>           <span class="c1"># =&gt; (9+0i)
</span><span class="s1">'2.5'</span><span class="p">.</span><span class="nf">to_c</span>         <span class="c1"># =&gt; (2.5+0i)
</span><span class="s1">'2.5/1'</span><span class="p">.</span><span class="nf">to_c</span>       <span class="c1"># =&gt; ((5/2)+0i)
</span><span class="s1">'-3/2'</span><span class="p">.</span><span class="nf">to_c</span>        <span class="c1"># =&gt; ((-3/2)+0i)
</span><span class="s1">'-i'</span><span class="p">.</span><span class="nf">to_c</span>          <span class="c1"># =&gt; (0-1i)
</span><span class="s1">'45i'</span><span class="p">.</span><span class="nf">to_c</span>         <span class="c1"># =&gt; (0+45i)
</span><span class="s1">'3-4i'</span><span class="p">.</span><span class="nf">to_c</span>        <span class="c1"># =&gt; (3-4i)
</span><span class="s1">'-4e2-4e-2i'</span><span class="p">.</span><span class="nf">to_c</span>  <span class="c1"># =&gt; (-400.0-0.04i)
</span><span class="s1">'-0.0-0.0i'</span><span class="p">.</span><span class="nf">to_c</span>   <span class="c1"># =&gt; (-0.0-0.0i)
</span><span class="s1">'1/2+3/4i'</span><span class="p">.</span><span class="nf">to_c</span>    <span class="c1"># =&gt; ((1/2)+(3/4)*i)
</span><span class="s1">'10@10'</span><span class="p">.</span><span class="nf">to_c</span>       <span class="c1"># =&gt; (-8.390715290764524-5.440211108893697i)
</span><span class="s1">'-0.3_3'</span><span class="p">.</span><span class="nf">to_c</span>      <span class="c1"># =&gt; (-0.33+0i)
</span><span class="s2">"</span><span class="s2"> \t\r\n5+3i</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_c</span> <span class="c1"># =&gt; (5+3i)
</span><span class="s1">'5+3ix'</span><span class="p">.</span><span class="nf">to_c</span>       <span class="c1"># =&gt; (5+3i)
</span><span class="s1">'ruby'</span><span class="p">.</span><span class="nf">to_c</span>        <span class="c1"># =&gt; (0+0i)
</span></code></pre>
</dd>


<dt class="method-heading" id="I_TO_F"><code>to_f -&gt; Float</code><span class="permalink">[<a href="../method/-string/i/to_f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-to_f">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列を 10 進数表現と解釈して、浮動小数点数 <a href="../class/-float.html">Float</a> に変換します。
</p>
<p>
浮動小数点数とみなせなくなるところまでを変換対象とします。途中に変換できないような文字列がある場合、それより先の文字列は無視されます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">-10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span>   <span class="c1"># =&gt; -10.0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">10e2</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span>  <span class="c1"># =&gt; 1000.0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">1e-2</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span>  <span class="c1"># =&gt; 0.01
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">.1</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span>    <span class="c1"># =&gt; 0.1
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">1_0_0</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span> <span class="c1"># =&gt; 100.0  # 数値リテラルと同じように区切りに _ を使える
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2"> \n10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span> <span class="c1"># =&gt; 10.0   # 先頭の空白・改行は無視される
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">7xa.5</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span> <span class="c1"># =&gt; 7.0
</span></code></pre>
<p>
以下の例は、先頭に浮動小数点数とみなせるものがないため、0.0 を返します。変換対象が空文字列のケースでも、0.0 を返します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span>      <span class="c1"># =&gt; 0.0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">nan</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span>   <span class="c1"># =&gt; 0.0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">INF</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span>   <span class="c1"># =&gt; 0.0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-Inf</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_f</span>  <span class="c1"># =&gt; 0.0
</span></code></pre>
<p>
変換後の <a href="../class/-float.html">Float</a> が有限の値を取れないときは、<a href="../method/-float/c/-i-n-f-i-n-i-t-y.html">Float::INFINITY</a> を用います。このとき、全ての警告を有効にすると、警告が表示されます。
</p>
<pre class="highlight ruby">
<code>
<span class="c1">#!ruby -W2
</span>
<span class="nb">p</span> <span class="p">(</span><span class="s2">"</span><span class="s2">10</span><span class="s2">"</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span><span class="p">.</span><span class="nf">to_f</span>   <span class="c1"># =&gt; Infinity
</span><span class="c1"># warning: Float 10101010101010101010... out of range
</span></code></pre>
<p>
なお、このメソッドとは逆に、数値を文字列に変換するには
<a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>, <a href="../method/-string/i/=25.html">String#%</a>, <a href="../method/-integer/i/to_s.html">Integer#to_s</a>
を使用します。
</p>
<p>
[SEE_ALSO] <a href="../method/-string/i/hex.html">String#hex</a>, <a href="../method/-string/i/oct.html">String#oct</a>, <a href="../method/-string/i/to_i.html">String#to_i</a>,
<a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a>, <a href="../method/-kernel/m/-float.html">Kernel.#Float</a>
</p>
</dd>


<dt class="method-heading" id="I_TO_I"><code>to_i(base = 10) -&gt; Integer</code><span class="permalink">[<a href="../method/-string/i/to_i.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-to_i">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列を 10 進数表現された整数であると解釈して、整数に変換します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2"> 10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span>    <span class="c1"># =&gt; 10
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">+10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span>    <span class="c1"># =&gt; 10
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span>    <span class="c1"># =&gt; -10
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">010</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span>    <span class="c1"># =&gt; 10
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">-010</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span>   <span class="c1"># =&gt; -10
</span></code></pre>
<p>
整数とみなせない文字があればそこまでを変換対象とします。変換対象が空文字列であれば 0 を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">0x11</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span>   <span class="c1"># =&gt; 0
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span>       <span class="c1"># =&gt; 0
</span></code></pre>
<p>
基数を指定することでデフォルトの 10 進以外に 2 〜 36 進数表現へ変換できます。それぞれ Ruby の整数リテラルで使用可能なプリフィクスは無視されます。また、base に 0 を指定するとプリフィクスから基数を判断します。認識できるプリフィクスは、
0b (2 進数)、0 (8 進数)、0o (8 進数)、0d (10 進数)、0x (16 進数) です。
</p>
<p>
0, 2 〜 36 以外の引数を指定した場合は例外 <a href="../class/-argument-error.html">ArgumentError</a> が発生します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">01</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>    <span class="c1"># =&gt; 1
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">0b1</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>   <span class="c1"># =&gt; 1
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">07</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>    <span class="c1"># =&gt; 7
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">0o7</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>   <span class="c1"># =&gt; 7
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">1f</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>   <span class="c1"># =&gt; 31
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">0x1f</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># =&gt; 31
</span>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">0b10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># =&gt; 2
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">0o10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># =&gt; 8
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">010</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># =&gt; 8
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">0d10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># =&gt; 10
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">0x10</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># =&gt; 16
</span></code></pre>
<dl>
<dt class='method-param'>[PARAM] base:</dt>
<dd>
進数を指定する整数。0 か、2〜36 の整数。
</dd>
<dt>[RETURN]</dt>
<dd>
整数
</dd>
</dl>
<p>
このメソッドの逆に数値を文字列に変換するには、
<a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>, <a href="../method/-string/i/=25.html">String#%</a>, <a href="../method/-integer/i/to_s.html">Integer#to_s</a>
を使用します。
</p>
<p>
<a href="../method/-string/i/hex.html">String#hex</a>, <a href="../method/-string/i/oct.html">String#oct</a>, <a href="../method/-string/i/to_f.html">String#to_f</a>,
<a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a>, <a href="../method/-kernel/m/-float.html">Kernel.#Float</a>
も参照してください。
</p>
</dd>


<dt class="method-heading" id="I_TO_R"><code>to_r -&gt; Rational</code><span class="permalink">[<a href="../method/-string/i/to_r.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-to_r">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自身を有理数(<a href="../class/-rational.html">Rational</a>)に変換した結果を返します。
</p>
<p>
<a href="../method/-kernel/m/-rational.html">Kernel.#Rational</a> に文字列を指定した時のように、以下のいずれかの形式で指定します。
</p>
<ul>
<li>&quot;1/3&quot; のような分数の形式</li>
<li>&quot;0.3&quot; のような10進数の形式</li>
<li>&quot;0.3E0&quot; のような x.xEn の形式</li>
<li>数字をアンダースコアで繋いだ形式</li>
</ul>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s1">'  2  '</span><span class="p">.</span><span class="nf">to_r</span>       <span class="c1"># =&gt; (2/1)
</span><span class="s1">'1/3'</span><span class="p">.</span><span class="nf">to_r</span>         <span class="c1"># =&gt; (1/3)
</span><span class="s1">'-9.2'</span><span class="p">.</span><span class="nf">to_r</span>        <span class="c1"># =&gt; (-46/5)
</span><span class="s1">'-9.2E2'</span><span class="p">.</span><span class="nf">to_r</span>      <span class="c1"># =&gt; (-920/1)
</span><span class="s1">'1_234_567'</span><span class="p">.</span><span class="nf">to_r</span>   <span class="c1"># =&gt; (1234567/1)
</span><span class="s1">'1_234/5_678'</span><span class="p">.</span><span class="nf">to_r</span> <span class="c1"># =&gt; (617/2839)
</span></code></pre>
<p>
<a href="../method/-kernel/m/-rational.html">Kernel.#Rational</a> に文字列を指定した時とは異なる点もあります。
</p>
<p>
途中に変換できないような文字列が入っていた場合は、それより先の文字列は無視されます。
</p>
<pre class="highlight ruby">
<code>
<span class="s1">'21 june 09'</span><span class="p">.</span><span class="nf">to_r</span>  <span class="c1"># =&gt; (21/1)
</span><span class="s1">'21/06/09'</span><span class="p">.</span><span class="nf">to_r</span>    <span class="c1"># =&gt; (7/2)   # 21/6 を約分して 7/2。
</span></code></pre>
<p>
変換できないような文字列を指定した場合は 0/1 を返します。
</p>
<pre class="highlight ruby">
<code>
<span class="s1">'foo'</span><span class="p">.</span><span class="nf">to_r</span>         <span class="c1"># =&gt; (0/1)
</span><span class="s1">''</span><span class="p">.</span><span class="nf">to_r</span>            <span class="c1"># =&gt; (0/1)
</span><span class="s1">'bwv 1079'</span><span class="p">.</span><span class="nf">to_r</span>    <span class="c1"># =&gt; (0/1)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/-rational.html">Kernel.#Rational</a>
</p>
</dd>


<dt class="method-heading" id="I_TO_S"><code>to_s -&gt; String</code><span class="permalink">[<a href="../method/-string/i/to_s.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-to_s">rdoc</a>]</span></dt>
<dt class="method-heading"><code>to_str -&gt; String</code></dt>
<dd class="method-description">
<p>
self を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_s</span>     <span class="c1"># =&gt; &quot;str&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">str</span><span class="s2">"</span><span class="p">.</span><span class="nf">to_str</span>   <span class="c1"># =&gt; &quot;str&quot;
</span></code></pre>
<p>
このメソッドは、文字列を他のクラスのインスタンスと混ぜて処理したいときに有効です。例えば返り値が文字列か nil であるメソッド some_method があるとき、
to_s メソッドを使うと以下のように統一的に処理できます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># some_method(5).downcase だと返り値が nil のときに
</span><span class="c1"># エラーになるので to_s をはさむ
</span><span class="nb">p</span> some_method<span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">to_s</span><span class="p">.</span><span class="nf">downcase</span>
</code></pre>
</dd>


<dt class="method-heading" id="I_TR"><code>tr(pattern, replace) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/tr.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-tr">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
pattern 文字列に含まれる文字を検索し、それを replace 文字列の対応する文字に置き換えます。
</p>
<p>
pattern の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり、
`a-c' は a から c を意味し、&quot;^0-9&quot; のように文字列の先頭が `^' の場合は指定文字以外が置換の対象になります。
</p>
<p>
replace に対しても `-' による範囲指定が可能です。
</p>
<p>
`-' は文字列の両端にない場合にだけ範囲指定の意味になります。
`^' も文字列の先頭にあるときにだけ否定の効果を発揮します。また、`-', `^', `\' はバックスラッシュ (`\') によりエスケープできます。
</p>
<p>
replace の範囲が pattern の範囲よりも小さい場合は、
replace の最後の文字が無限に続くものとして扱われます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字のパターン
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字を置き換える文字
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">X</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;Xoo&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s1">'a-z'</span>, <span class="s1">'A-Z'</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;FOO&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">FOO</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s1">'A-Z'</span>, <span class="s1">'a-z'</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;foo&quot;
</span>
<span class="c1"># シーザー暗号の復号
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">ORYV</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s2">"</span><span class="s2">A-Z</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">D-ZA-C</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;RUBY&quot;
</span>
<span class="c1"># 全角英数字といくつかの記号の半角化
</span>email <span class="o">=</span> <span class="s2">"</span><span class="s2">ｒｕｂｙ−ｌａｎｇ＠ｅｘａｍｐｌｅ．ｃｏｍ</span><span class="s2">"</span>
<span class="nb">p</span> email<span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s2">"</span><span class="s2">０-９ａ-ｚＡ-Ｚ．＠−</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">0-9a-zA-Z.@-</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;ruby-lang@example.com&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/tr=21.html">String#tr!</a>, <a href="../method/-string/i/tr_s.html">String#tr_s</a>
</p>
</dd>


<dt class="method-heading" id="I_TR--21"><code>tr!(pattern, replace) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/tr=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-tr-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
pattern 文字列に含まれる文字を検索し、それを replace 文字列の対応する文字に破壊的に置き換えます。
</p>
<p>
pattern の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり、`a-c' は a から c を意味し、
&quot;^0-9&quot; のように文字列の先頭が `^' の場合は指定文字以外が置換の対象になります。
</p>
<p>
replace に対しても `-' による範囲指定が可能です。
</p>
<p>
`-' は文字列の両端にない場合にだけ範囲指定の意味になります。
`^' も文字列の先頭にあるときにだけ否定の効果を発揮します。また、`-', `^', `\' はバックスラッシュ (`\') によりエスケープできます。
</p>
<p>
replace の範囲が pattern の範囲よりも小さい場合は、
replace の最後の文字が無限に続くものと扱われます。
</p>
<p>
tr! は self を変更して返しますが、置換が起こらなかった場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字のパターン
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字を置き換える文字
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-string/i/tr.html">String#tr</a>, <a href="../method/-string/i/tr_s.html">String#tr_s</a>
</p>
</dd>


<dt class="method-heading" id="I_TR_S"><code>tr_s(pattern, replace) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/tr_s.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-tr_s">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の中に pattern 文字列に含まれる文字が存在したら、
replace 文字列の対応する文字に置き換えます。さらに、置換した部分内に同一の文字の並びがあったらそれを 1 文字に圧縮します。
</p>
<p>
pattern の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり「a-c」は a から c を意味し、
&quot;^0-9&quot; のように文字列の先頭が「^」の場合は指定した文字以外が置換の対象になります。
</p>
<p>
replace でも「-」を使って範囲を指定できます。
</p>
<p>
「-」は文字列の両端にない場合にだけ範囲指定の意味になります。同様に、「^」もその効果は文字列の先頭にあるときだけです。また、「-」、「^」、「\」はバックスラッシュ (「\」) でエスケープできます。
</p>
<p>
replace の範囲が pattern の範囲よりも小さい場合、
replace の最後の文字が無限に続くものとして扱われます。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字のパターン
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字を置き換える文字
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">gooooogle</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr_s</span><span class="p">(</span><span class="s2">"</span><span class="s2">o</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">X</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; &quot;gXgle&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">gooooogle</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr_s</span><span class="p">(</span><span class="s2">"</span><span class="s2">a-z</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">A-Z</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;GOGLE&quot;
</span></code></pre>
<p>
注意:
一般に、tr_s を tr と squeeze で置き換えることはできません。
tr と squeeze の組みあわせでは tr の置換後の文字列全体を squeeze しますが、
tr_s は置換された部分だけを squeeze します。以下のコードを参照してください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr_s</span><span class="p">(</span><span class="s2">"</span><span class="s2">o</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>              <span class="c1"># =&gt; &quot;ff&quot;
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s2">"</span><span class="s2">o</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">squeeze</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;f&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/tr.html">String#tr</a>
</p>
</dd>


<dt class="method-heading" id="I_TR_S--21"><code>tr_s!(pattern, replace) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/tr_s=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-tr_s-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の中に pattern 文字列に含まれる文字が存在したら、
replace 文字列の対応する文字に置き換えます。さらに、置換した部分内に同一の文字の並びがあったらそれを 1 文字に圧縮します。
</p>
<p>
pattern の形式は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/tr.html">tr(1)</a> と同じです。つまり「a-c」は a から c を意味し、
&quot;^0-9&quot; のように文字列の先頭が「^」の場合は指定した文字以外が置換の対象になります。
</p>
<p>
replace でも「-」を使って範囲を指定できます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">gooooogle</span><span class="s2">"</span><span class="p">.</span><span class="nf">tr_s</span><span class="p">(</span><span class="s2">"</span><span class="s2">a-z</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">A-Z</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;GOGLE&quot;
</span></code></pre>
<p>
「-」は文字列の両端にない場合にだけ範囲指定の意味になります。同様に、「^」もその効果は文字列の先頭にあるときだけです。また、「-」、「^」、「\」はバックスラッシュ (「\」) でエスケープできます。
</p>
<p>
replace の範囲が search の範囲よりも小さい場合、
replace の最後の文字が無限に続くものとして扱われます。
</p>
<p>
tr_s は置換後の文字列を生成して返します。
tr_s! は self を変更して返しますが、置換が起こらなかった場合は nil を返します。
</p>
<p>
注意:
一般に、tr_s! を tr! と squeeze! で置き換えることはできません。
tr! と squeeze! の組みあわせでは tr! の置換後の文字列全体を squeeze! しますが、
tr_s! は置換された部分だけを squeeze! します。以下のコードを参照してください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">tr_s!</span><span class="p">(</span><span class="s2">"</span><span class="s2">o</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;ff&quot;
</span>
str <span class="o">=</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>
str<span class="p">.</span><span class="nf">tr!</span><span class="p">(</span><span class="s2">"</span><span class="s2">o</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>
str<span class="p">.</span><span class="nf">squeeze!</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> str   <span class="c1"># =&gt; &quot;f&quot;
</span></code></pre>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字のパターン
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字を置き換える文字
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-string/i/tr.html">String#tr</a>, <a href="../method/-string/i/tr_s.html">String#tr_s</a>
</p>
</dd>


<dt class="method-heading" id="I_UNDUMP"><code>undump -&gt; String</code><span class="permalink">[<a href="../method/-string/i/undump.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-undump">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self のエスケープを戻したものを返します。
</p>
<p>
<a href="../method/-string/i/dump.html">String#dump</a> の逆変換にあたります。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">\&quot;hello \\n ''\&quot;</span><span class="s2">"</span><span class="p">.</span><span class="nf">undump</span> <span class="c1">#=&gt; &quot;hello \n ''&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/dump.html">String#dump</a>
</p>
</dd>


<dt class="method-heading" id="I_UNICODE_NORMALIZE"><code>unicode_normalize(form = :nfc) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/unicode_normalize.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-unicode_normalize">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self を NFC、NFD、NFKC、NFKD のいずれかの正規化形式で Unicode 正規化した文字列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] form:</dt>
<dd>
正規化形式を :nfc、:nfd、:nfkc、:nfkd のいずれかで指定します。省略した場合は :nfc になります。
</dd>
<dt>[EXCEPTION] Encoding::CompatibilityError:</dt>
<dd>
self が Unicode 文字列ではない場合に発生します。
</dd>
</dl>
<p>
このメソッドでの &quot;Unicode 文字列&quot; とは、UTF-8、UTF-16BE/LE、
UTF-32BE/LE だけではなく GB18030、UCS_2BE、and UCS_4BE を含みます。
</p>
<p>
また、self が UTF-8 以外のエンコーディングであった場合は一度 UTF-8 に変換してから正規化されるため、UTF-8 よりも遅くなっています。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span><span class="p">.</span><span class="nf">unicode_normalize</span>        <span class="c1"># =&gt; 'à' (&quot;\u00E0&quot; と同じ)
</span><span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span><span class="p">.</span><span class="nf">unicode_normalize</span><span class="p">(</span><span class="ss">:nfc</span><span class="p">)</span>  <span class="c1"># =&gt; 'à' (&quot;\u00E0&quot; と同じ)
</span><span class="s2">"</span><span class="s2">\u00E0</span><span class="s2">"</span><span class="p">.</span><span class="nf">unicode_normalize</span><span class="p">(</span><span class="ss">:nfd</span><span class="p">)</span>   <span class="c1"># =&gt; 'à' (&quot;a\u0300&quot; と同じ)
</span><span class="s2">"</span><span class="s2">\xE0</span><span class="s2">"</span><span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s1">'ISO-8859-1'</span><span class="p">)</span><span class="p">.</span><span class="nf">unicode_normalize</span><span class="p">(</span><span class="ss">:nfd</span><span class="p">)</span>
                                   <span class="c1"># =&gt; Encoding::CompatibilityError raised
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/unicode_normalize=21.html">String#unicode_normalize!</a>, <a href="../method/-string/i/unicode_normalized=3f.html">String#unicode_normalized?</a>
</p>
</dd>


<dt class="method-heading" id="I_UNICODE_NORMALIZE--21"><code>unicode_normalize!(form = :nfc) -&gt; self</code><span class="permalink">[<a href="../method/-string/i/unicode_normalize=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-unicode_normalize-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self を NFC、NFD、NFKC、NFKD のいずれかの正規化形式で Unicode 正規化した文字列に置き換えます。
</p>
<p>
(gsub!などと異なり)変換が行なわれなくても self を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] form:</dt>
<dd>
正規化形式を :nfc、:nfd、:nfkc、:nfkd のいずれかで指定します。省略した場合は :nfc になります。
</dd>
<dt>[EXCEPTION] Encoding::CompatibilityError:</dt>
<dd>
self が Unicode 文字列ではない場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
text <span class="o">=</span> <span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span>
text<span class="p">.</span><span class="nf">unicode_normalize!</span><span class="p">(</span><span class="ss">:nfc</span><span class="p">)</span>
text <span class="o">==</span> <span class="s2">"</span><span class="s2">\u00E0</span><span class="s2">"</span>              <span class="c1"># =&gt; true
</span>text<span class="p">.</span><span class="nf">unicode_normalize!</span><span class="p">(</span><span class="ss">:nfd</span><span class="p">)</span>
text <span class="o">==</span> <span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span>             <span class="c1"># =&gt; true
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/unicode_normalize.html">String#unicode_normalize</a>, <a href="../method/-string/i/unicode_normalized=3f.html">String#unicode_normalized?</a>
</p>
</dd>


<dt class="method-heading" id="I_UNICODE_NORMALIZED--3F"><code>unicode_normalized?(form = :nfc) -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/unicode_normalized=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-unicode_normalized-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self が引数 form で指定された正規化形式で Unicode 正規化された文字列かどうかを返します。
</p>
<dl>
<dt class='method-param'>[PARAM] form:</dt>
<dd>
正規化形式を :nfc、:nfd、:nfkc、:nfkd のいずれかで指定します。省略した場合は :nfc になります。
</dd>
<dt>[EXCEPTION] Encoding::CompatibilityError:</dt>
<dd>
self が Unicode 文字列ではない場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span><span class="p">.</span><span class="nf">unicode_normalized?</span>        <span class="c1"># =&gt; false
</span><span class="s2">"</span><span class="s2">a\u0300</span><span class="s2">"</span><span class="p">.</span><span class="nf">unicode_normalized?</span><span class="p">(</span><span class="ss">:nfd</span><span class="p">)</span>  <span class="c1"># =&gt; true
</span><span class="s2">"</span><span class="s2">\u00E0</span><span class="s2">"</span><span class="p">.</span><span class="nf">unicode_normalized?</span>         <span class="c1"># =&gt; true
</span><span class="s2">"</span><span class="s2">\u00E0</span><span class="s2">"</span><span class="p">.</span><span class="nf">unicode_normalized?</span><span class="p">(</span><span class="ss">:nfd</span><span class="p">)</span>   <span class="c1"># =&gt; false
</span><span class="s2">"</span><span class="s2">\xE0</span><span class="s2">"</span><span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s1">'ISO-8859-1'</span><span class="p">)</span><span class="p">.</span><span class="nf">unicode_normalized?</span>
                                     <span class="c1"># =&gt; Encoding::CompatibilityError raised
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/unicode_normalize.html">String#unicode_normalize</a>, <a href="../method/-string/i/unicode_normalize=21.html">String#unicode_normalize!</a>
</p>
</dd>


<dt class="method-heading" id="I_UNPACK"><code>unpack(template) -&gt; Array</code><span class="permalink">[<a href="../method/-string/i/unpack.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-unpack">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-array/i/pack.html">Array#pack</a> で生成された文字列をテンプレート文字列 template にしたがってアンパックし、それらの要素を含む配列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] template:</dt>
<dd>
pack テンプレート文字列
</dd>
<dt>[RETURN]</dt>
<dd>
オブジェクトの配列
</dd>
</dl>
<p>
以下にあげるものは、<a href="../method/-array/i/pack.html">Array#pack</a>、<a href="../method/-string/i/unpack.html">String#unpack</a>、<a href="../method/-string/i/unpack1.html">String#unpack1</a>
のテンプレート文字の一覧です。テンプレート文字は後に「長さ」を表す数字を続けることができます。「長さ」の代わりに`*'とすることで「残り全て」を表すこともできます。
</p>
<p>
長さの意味はテンプレート文字により異なりますが大抵、
</p>
<pre>
&quot;iiii&quot;
</pre>
<p>
のように連続するテンプレート文字は
</p>
<pre>
&quot;i4&quot;
</pre>
<p>
と書き換えることができます。
</p>
<p>
テンプレート文字列中の空白類は無視されます。また、`#' から改行あるいはテンプレート文字列の最後まではコメントとみなされ無視されます。
</p>
<h3 >整数のテンプレート文字のシステム依存性</h3>
<p>
各テンプレート文字の説明の中で、
short や long はシステムによらずそれぞれ 2, 4バイトサイズの数値(32ビットマシンで一般的なshort, longのサイズ)を意味しています。s, S, l, L に対しては直後に _ または ! を &quot;s_&quot; あるいは &quot;s!&quot; のように続けることでシステム依存の short, long のサイズにすることもできます。
</p>
<p>
i, I (int)のサイズは常にシステム依存であり、n, N, v, V
のサイズは常にシステム依存ではない(!をつけられない)ことに注意してください。
</p>
<p>
つまり、<a href="../method/-i-o/i/ioctl.html">IO#ioctl</a> などで C の構造体を渡すときのように、システム依存のサイズとエンディアンに合わせる必要があるときには
s!, S!, i!, I!, l!, L!, q!, Q!, j!, J! を用います。また、ネットワークプロトコルやファイルフォーマットのように、システムに依存しないデータを扱うときには
n, N, v, V を用います。
</p>
<p>
強制的にエンディアンを指定したいときは、リトルエンディアンなら &lt; を、ビッグエンディアンなら &gt;
を後ろにつけます。! と組み合わせることも可能です。
</p>
<p>
まとめると以下のようになります。
</p>
<dl>
<dt>エンディアン非依存、整数サイズ非依存 (ネットワークプロトコルなどに適切)</dt>
<dd>
<pre>
  n: big endian unsigned 16bit
  N: big endian unsigned 32bit
  v: little endian unsigned 16bit
  V: little endian unsigned 32bit
</pre>
</dd>
<dt>エンディアン依存、整数サイズ依存 (C の構造体などに適切)</dt>
<dd>
<pre>
  s!: signed short
  S!: unsigned short
  i,i!: signed int
  I,I!: unsigned int
  l!: signed long
  L!: unsigned long
  q!: signed long long
  Q!: unsigned long long
  j,j!: intptr_t
  J,J!: uintptr_t
</pre>
</dd>
<dt>エンディアン依存、整数サイズ非依存 (C99 の stdint.h にある厳密な幅を持つ整数型に適切)</dt>
<dd>
<pre>
  s: int16_t
  S: uint16_t
  l: int32_t
  L: uint32_t
  q: int64_t
  Q: uint64_t
</pre>
</dd>
<dt>エンディアンの強制指定(バイナリ解析などに適切)</dt>
<dd>
<pre>
  S&gt;:  big endian unsigned 16bit(nと同じ)
  s&gt;:  big endian int16_t
  s!&gt;: big endian signed short
  l&lt;:  little endian int32_t
  l!&lt;: little endian signed long
</pre>
</dd>
</dl>
<h3 >各テンプレート文字の説明</h3>
<p>
説明中、<a href="../method/-array/i/pack.html">Array#pack</a> と <a href="../method/-string/i/unpack.html">String#unpack</a> で違いのあるものは `/' で区切って「Array#pack の説明 / String#unpack の説明」としています。
</p>
<dl>
<dt>a</dt>
<dd>
<p>
ASCII文字列(ヌル文字を詰める/後続するヌル文字やスペースを残す)
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;a&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">a*</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;abc&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">a4</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;abc\x00&quot;
</span>
<span class="s2">"</span><span class="s2">abc\0</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">a4</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;abc\x00&quot;]
</span><span class="s2">"</span><span class="s2">abc </span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">a4</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;abc &quot;]
</span></code></pre>
</dd>
<dt>A</dt>
<dd>
<p>
ASCII文字列(スペースを詰める/後続するヌル文字やスペースを削除)
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">A</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;a&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">A*</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;abc&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">A4</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;abc &quot;
</span>
<span class="s2">"</span><span class="s2">abc </span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">A4</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;abc&quot;]
</span><span class="s2">"</span><span class="s2">abc\0</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">A4</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;abc&quot;]
</span></code></pre>
</dd>
<dt>Z</dt>
<dd>
<p>
ヌル終端文字列(長さが`*'の場合も含め、ヌル文字を詰める/後続するヌル文字を削除)
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Z</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;a&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Z*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;abc\x00&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Z5</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;abc\x00\x00&quot;
</span>
<span class="s2">"</span><span class="s2">abc\0</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Z4</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;abc&quot;]
</span><span class="s2">"</span><span class="s2">abc </span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Z4</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;abc &quot;]
</span></code></pre>
</dd>
<dt>b</dt>
<dd>
<p>
ビットストリング(各バイトごとに下位ビットから上位ビット)
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\xFF\x00</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">b*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;1111111100000000&quot;]
</span><span class="s2">"</span><span class="s2">\x01\x02</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">b*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;1000000001000000&quot;]
</span><span class="s2">"</span><span class="s2">\x01\x02</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">b3</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;100&quot;]
</span>

<span class="p">[</span><span class="s2">"</span><span class="s2">1000000001000000</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">b*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02&quot;
</span></code></pre>
</dd>
<dt>B</dt>
<dd>
<p>
ビットストリング(各バイトごとに上位ビットから下位ビット)
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\xFF\x00</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;1111111100000000&quot;]
</span><span class="s2">"</span><span class="s2">\x01\x02</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;0000000100000010&quot;]
</span><span class="s2">"</span><span class="s2">\x01\x02</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B9</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;000000010&quot;]
</span><span class="s2">"</span><span class="s2">\x01\x02</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B15</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;000000010000001&quot;]
</span>
<span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B0</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B1</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x00&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B7</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x00&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B8</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B9</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x00&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B14</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x00&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B15</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">0000000100000010</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B16</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02&quot;
</span></code></pre>
</dd>
<dt>h</dt>
<dd>
<p>
16進文字列(下位ニブルが先)
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\xFE</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">h*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;10ef&quot;]
</span><span class="s2">"</span><span class="s2">\x01\xFE</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">h3</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;10e&quot;]
</span>
<span class="p">[</span><span class="s2">"</span><span class="s2">10ef</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">h*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\xFE&quot;
</span></code></pre>
</dd>
<dt>H</dt>
<dd>
<p>
16進文字列(上位ニブルが先)
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\xFE</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">H*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;01fe&quot;]
</span><span class="s2">"</span><span class="s2">\x01\xFE</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">H3</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;01f&quot;]
</span><span class="s2">"</span><span class="s2">~</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">H2</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; [&quot;7e&quot;]
</span>
<span class="p">[</span><span class="s2">"</span><span class="s2">01fe</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">H*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\xFE&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">7e</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">H2</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;~&quot;
</span></code></pre>
</dd>
<dt>c</dt>
<dd>
<p>
char (8bit 符号つき整数)
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\xFE</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">c*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [1, -2]
</span>
<span class="p">[</span><span class="mi">1</span>, <span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">c*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\xFE&quot;
</span><span class="p">[</span><span class="mi">1</span>, <span class="mi">254</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">c*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\xFE&quot;
</span></code></pre>
</dd>
<dt>C</dt>
<dd>
<p>
unsigned char (8bit 符号なし整数)
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\xFE</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [1, 254]
</span>
<span class="p">[</span><span class="mi">1</span>, <span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\xFE&quot;
</span><span class="p">[</span><span class="mi">1</span>, <span class="mi">254</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\xFE&quot;
</span></code></pre>
</dd>
<dt>s</dt>
<dd>
<p>
short (16bit 符号つき整数, エンディアンに依存)
(s! は 16bit でなく、short のサイズに依存)
</p>
<p>
リトルエンディアン (x86_64):
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\xFE\xFD</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [513, -514]
</span>
<span class="p">[</span><span class="mi">513</span>, <span class="mi">65022</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\xFE\xFD&quot;
</span><span class="p">[</span><span class="mi">513</span>, <span class="o">-</span><span class="mi">514</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02\xFE\xFD&quot;
</span></code></pre>
<p>
ビッグエンディアン (SPARC64):
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\xFE\xFD</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [258, -259]
</span>
<span class="p">[</span><span class="mi">258</span>, <span class="mi">65277</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\xFE\xFD&quot;
</span><span class="p">[</span><span class="mi">258</span>, <span class="o">-</span><span class="mi">259</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02\xFE\xFD&quot;
</span></code></pre>
</dd>
<dt>S</dt>
<dd>
<p>
unsigned short (16bit 符号なし整数, エンディアンに依存)
(S! は 16bit でなく、short のサイズに依存)
</p>
<p>
リトルエンディアン (x86_64):
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\xFE\xFD</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">S*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [513, 65022]
</span>
<span class="p">[</span><span class="mi">513</span>, <span class="mi">65022</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\xFE\xFD&quot;
</span><span class="p">[</span><span class="mi">513</span>, <span class="o">-</span><span class="mi">514</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02\xFE\xFD&quot;
</span></code></pre>
<p>
ビッグエンディアン (SPARC64):
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\xFE\xFD</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">S*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [258, 65277]
</span>
<span class="p">[</span><span class="mi">258</span>, <span class="mi">65277</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">S*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\xFE\xFD&quot;
</span><span class="p">[</span><span class="mi">258</span>, <span class="o">-</span><span class="mi">259</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">S*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02\xFE\xFD&quot;
</span></code></pre>
</dd>
<dt>i</dt>
<dd>
<p>
int (符号つき整数, エンディアンと int のサイズに依存)
</p>
<p>
リトルエンディアン (x86_64), 32bit int:
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\xFF\xFE\xFD\xFC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">i*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [67305985, -50462977]
</span>
<span class="p">[</span><span class="mi">67305985</span>, <span class="mi">4244504319</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">i*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span><span class="p">[</span><span class="mi">67305985</span>, <span class="o">-</span><span class="mi">50462977</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">i*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span></code></pre>
<p>
ビッグエンディアン (SPARC64), 32bit int:
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\xFF\xFE\xFD\xFC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">i*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [16909060, -66052]
</span>
<span class="p">[</span><span class="mi">16909060</span>, <span class="mi">4294901244</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">i*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span><span class="p">[</span><span class="mi">16909060</span>, <span class="o">-</span><span class="mi">66052</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">i*</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span></code></pre>
</dd>
<dt>I</dt>
<dd>
<p>
unsigned int (符号なし整数, エンディアンと int のサイズに依存)
</p>
<p>
リトルエンディアン (x86_64), 32bit int:
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\xFF\xFE\xFD\xFC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">I*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [67305985, 4244504319]
</span>
<span class="p">[</span><span class="mi">67305985</span>, <span class="mi">4244504319</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">I*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span><span class="p">[</span><span class="mi">67305985</span>, <span class="o">-</span><span class="mi">50462977</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">I*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span></code></pre>
<p>
ビッグエンディアン (SPARC64), 32bit int:
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\xFF\xFE\xFD\xFC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">I*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [16909060, 4294901244]
</span>
<span class="p">[</span><span class="mi">16909060</span>, <span class="mi">4294901244</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">I*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span><span class="p">[</span><span class="mi">16909060</span>, <span class="o">-</span><span class="mi">66052</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">I*</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span></code></pre>
</dd>
<dt>l</dt>
<dd>
<p>
long (32bit 符号つき整数, エンディアンに依存)
(l! は 32bit でなく、long のサイズに依存)
</p>
<p>
リトルエンディアン (x86_64), 32bit long:
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\xFF\xFE\xFD\xFC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">l*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [67305985, -50462977]
</span>
<span class="p">[</span><span class="mi">67305985</span>, <span class="mi">4244504319</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">l*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span><span class="p">[</span><span class="mi">67305985</span>, <span class="o">-</span><span class="mi">50462977</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">l*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span></code></pre>
<p>
ビッグエンディアン (SPARC64), 32bit long:
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\xFF\xFE\xFD\xFC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">l*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [16909060, -66052]
</span>
<span class="p">[</span><span class="mi">16909060</span>, <span class="mi">4294901244</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">l*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span><span class="p">[</span><span class="mi">16909060</span>, <span class="o">-</span><span class="mi">66052</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">l*</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span></code></pre>
</dd>
<dt>L</dt>
<dd>
<p>
unsigned long (32bit 符号なし整数, エンディアンに依存)
(L! は 32bit でなく、long のサイズに依存)
</p>
<p>
リトルエンディアン (x86_64), 32bit long:
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\xFF\xFE\xFD\xFC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">L*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [67305985, 4244504319]
</span>
<span class="p">[</span><span class="mi">67305985</span>, <span class="mi">4244504319</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">L*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span><span class="p">[</span><span class="mi">67305985</span>, <span class="o">-</span><span class="mi">50462977</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">L*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span></code></pre>
<p>
ビッグエンディアン (SPARC64), 32bit long:
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\xFF\xFE\xFD\xFC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">L*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [16909060, 4294901244]
</span>
<span class="p">[</span><span class="mi">16909060</span>, <span class="mi">4294901244</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">L*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span><span class="p">[</span><span class="mi">16909060</span>, <span class="o">-</span><span class="mi">66052</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">L*</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;\x01\x02\x03\x04\xFF\xFE\xFD\xFC&quot;
</span></code></pre>
</dd>
<dt>q</dt>
<dd>
<p>
64bit 符号付き整数 (エンディアンに依存)
(q! は 64bit でなく、long long のサイズに依存)
</p>
<p>
リトルエンディアン (x86_64):
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\x05\x06\x07\x08\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [578437695752307201, -506097522914230529]
</span>
<span class="p">[</span><span class="mi">578437695752307201</span>, <span class="o">-</span><span class="mi">506097522914230529</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x02\x03\x04\x05\x06\a\b\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8&quot;
</span><span class="p">[</span><span class="mi">578437695752307201</span>, <span class="mi">17940646550795321087</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x02\x03\x04\x05\x06\a\b\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8&quot;
</span></code></pre>
<p>
ビッグエンディアン (SPARC64):
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\x05\x06\x07\x08\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [72623859790382856, -283686952306184]
</span>
<span class="p">[</span><span class="mi">72623859790382856</span>, <span class="o">-</span><span class="mi">283686952306184</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x02\x03\x04\x05\x06\a\b\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8&quot;
</span><span class="p">[</span><span class="mi">72623859790382856</span>, <span class="mi">18446460386757245432</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x02\x03\x04\x05\x06\a\b\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8&quot;
</span></code></pre>
</dd>
<dt>Q</dt>
<dd>
<p>
64bit 符号なし整数 (エンディアンに依存)
(Q! は 64bit でなく、long long のサイズに依存)
</p>
<p>
リトルエンディアン (x86_64):
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\x05\x06\x07\x08\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [578437695752307201, 17940646550795321087]
</span>
<span class="p">[</span><span class="mi">578437695752307201</span>, <span class="mi">17940646550795321087</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x02\x03\x04\x05\x06\a\b\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8&quot;
</span><span class="p">[</span><span class="mi">578437695752307201</span>, <span class="o">-</span><span class="mi">506097522914230529</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x02\x03\x04\x05\x06\a\b\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8&quot;
</span></code></pre>
<p>
ビッグエンディアン (SPARC64):
</p>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">\x01\x02\x03\x04\x05\x06\x07\x08\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [72623859790382856, 18446460386757245432]
</span>
<span class="p">[</span><span class="mi">72623859790382856</span>, <span class="mi">18446460386757245432</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x02\x03\x04\x05\x06\a\b\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8&quot;
</span><span class="p">[</span><span class="mi">72623859790382856</span>, <span class="o">-</span><span class="mi">283686952306184</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Q*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x02\x03\x04\x05\x06\a\b\xFF\xFE\xFD\xFC\xFB\xFA\xF9\xF8&quot;
</span></code></pre>
</dd>
<dt>m</dt>
<dd>
<p>
base64された文字列。60 オクテットごと(と最後)に改行コードが付加されます。
</p>
<p>
Base64は、3オクテット(8bits * 3 = 24bits)のバイナリコードをASCII文字のうちの65文字 ([A-Za-z0-9+/]の64文字とpaddingのための'=')だけを使用して
4オクテット(6bits * 4 = 24bits)の印字可能文字列に変換するエンコーディング法です。<a class="external" href="https://tools.ietf.org/html/rfc2045">[RFC2045]</a>, <a class="external" href="https://tools.ietf.org/html/rfc4648">[RFC4648]</a> で定義されています。
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>             <span class="c1"># =&gt; &quot;&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\0</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>           <span class="c1"># =&gt; &quot;AA==\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\0\0</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;AAA=\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\0\0\0</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; &quot;AAAA\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\xFF</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;/w==\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\xFF\xFF</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;//8=\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\xFF\xFF\xFF</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;////\n&quot;
</span>
<span class="p">[</span><span class="s2">"</span><span class="s2">abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJT\nVFVWV1hZWg==\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abcdefghijklmnopqrstuvwxyz</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m3</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;YWJj\nZGVm\nZ2hp\namts\nbW5v\ncHFy\nc3R1\ndnd4\neXo=\n&quot;
</span>
<span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; [&quot;&quot;]
</span><span class="s2">"</span><span class="s2">AA==\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;\x00&quot;]
</span><span class="s2">"</span><span class="s2">AA==</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;\x00&quot;]
</span>
<span class="s2">"</span><span class="s2">YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJT\nVFVWV1hZWg==\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;]
</span><span class="s2">"</span><span class="s2">YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWg==\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;]
</span></code></pre>
<p>
m0 は <a class="external" href="https://tools.ietf.org/html/rfc4648">[RFC4648]</a> 対応
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>             <span class="c1"># =&gt; &quot;&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\0</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>           <span class="c1"># =&gt; &quot;AA==&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\0\0</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;AAA=&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\0\0\0</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; &quot;AAAA&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\xFF</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>         <span class="c1"># =&gt; &quot;/w==&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\xFF\xFF</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;//8=&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">\xFF\xFF\xFF</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;////&quot;
</span>
<span class="p">[</span><span class="s2">"</span><span class="s2">abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWg==&quot;
</span>
<span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; [&quot;&quot;]
</span><span class="s2">"</span><span class="s2">AA==\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; ArgumentError (invalid base64)
</span><span class="s2">"</span><span class="s2">AA==</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; [&quot;\x00&quot;]
</span>
<span class="s2">"</span><span class="s2">YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWg==</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">m0</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;]
</span></code></pre>
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../library/base64.html">base64</a>
</p>
<dl>
<dt>M</dt>
<dd>
<p>
quoted-printable encoding された文字列
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">a b c\td \ne</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">M</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;a b c\td =\n\ne=\n&quot;
</span>
<span class="s2">"</span><span class="s2">a b c\td =\n\ne=\n</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">M</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;a b c\td \ne&quot;]
</span></code></pre>
</dd>
<dt>n</dt>
<dd>
<p>
ネットワークバイトオーダー(ビッグエンディアン)のunsigned short (16bit 符号なし整数)
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">0</span>,<span class="mi">1</span>,<span class="o">-</span><span class="mi">1</span>,<span class="mi">32767</span>,<span class="o">-</span><span class="mi">32768</span>,<span class="mi">65535</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">n*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x00\x00\x00\x01\xFF\xFF\x7F\xFF\x80\x00\xFF\xFF&quot;
</span>
<span class="s2">"</span><span class="s2">\x00\x00\x00\x01\xFF\xFF\x7F\xFF\x80\x00\xFF\xFF</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">n*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [0, 1, 65535, 32767, 32768, 65535]
</span></code></pre>
</dd>
<dt>N</dt>
<dd>
<p>
ネットワークバイトオーダー(ビッグエンディアン)のunsigned long (32bit 符号なし整数)
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">0</span>,<span class="mi">1</span>,<span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">N*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\x00\x01\xFF\xFF\xFF\xFF&quot;
</span>
<span class="s2">"</span><span class="s2">\x00\x00\x00\x00\x00\x00\x00\x01\xFF\xFF\xFF\xFF</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">N*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [0, 1, 4294967295]
</span></code></pre>
</dd>
<dt>v</dt>
<dd>
<p>
&quot;VAX&quot;バイトオーダー(リトルエンディアン)のunsigned short (16bit 符号なし整数)
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">0</span>,<span class="mi">1</span>,<span class="o">-</span><span class="mi">1</span>,<span class="mi">32767</span>,<span class="o">-</span><span class="mi">32768</span>,<span class="mi">65535</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">v*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x00\x00\x01\x00\xFF\xFF\xFF\x7F\x00\x80\xFF\xFF&quot;
</span>
<span class="s2">"</span><span class="s2">\x00\x00\x01\x00\xFF\xFF\xFF\x7F\x00\x80\xFF\xFF</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">v*</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; [0, 1, 65535, 32767, 32768, 65535]
</span></code></pre>
</dd>
<dt>V</dt>
<dd>
<p>
&quot;VAX&quot;バイトオーダー(リトルエンディアン)のunsigned long (32bit 符号なし整数)
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">0</span>,<span class="mi">1</span>,<span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">V*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x01\x00\x00\x00\xFF\xFF\xFF\xFF&quot;
</span>

<span class="s2">"</span><span class="s2">\x00\x00\x00\x00\x01\x00\x00\x00\xFF\xFF\xFF\xFF</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">V*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [0, 1, 4294967295]
</span></code></pre>
</dd>
<dt>f</dt>
<dd>
<p>
単精度浮動小数点数(機種依存)
</p>
<p>
x86_64 (IEEE754 単精度 リトルエンディアン):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;\x00\x00\x80?&quot;
</span><span class="p">[</span><span class="mf">0.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x00\x00\xC0\xFF&quot;      # NaN
</span><span class="p">[</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x00\x00\x80\x7F&quot;      # +Infinity
</span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00\x00\x80\xFF&quot;      # -Infinity
</span></code></pre>
<p>
SPARC64 (IEEE754 単精度 ビッグエンディアン):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;?\x80\x00\x00&quot;
</span><span class="p">[</span><span class="mf">0.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x7F\xC0\x00\x00&quot;      # NaN
</span><span class="p">[</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x7F\x80\x00\x00&quot;      # +Infinity
</span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\xFF\x80\x00\x00&quot;      # -Infinity
</span></code></pre>
<p>
VAX (NetBSD 3.0) (非IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x80@\x00\x00&quot;
</span></code></pre>
</dd>
<dt>d</dt>
<dd>
<p>
倍精度浮動小数点数(機種依存)
</p>
<p>
x86_64 (IEEE754 倍精度 リトルエンディアン):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\xF0?&quot;
</span><span class="p">[</span><span class="mf">0.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\xF8\xFF&quot;      # NaN
</span><span class="p">[</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\xF0\x7F&quot;      # +Infinity
</span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\xF0\xFF&quot;      # -Infinity
</span></code></pre>
<p>
SPARC64 (IEEE754 倍精度 ビッグエンディアン):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;?\xF0\x00\x00\x00\x00\x00\x00&quot;
</span><span class="p">[</span><span class="mf">0.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x7F\xF8\x00\x00\x00\x00\x00\x00&quot;      # NaN
</span><span class="p">[</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\x7F\xF0\x00\x00\x00\x00\x00\x00&quot;      # +Infinity
</span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\xFF\xF0\x00\x00\x00\x00\x00\x00&quot;      # -Infinity
</span></code></pre>
<p>
VAX (NetBSD 3.0) (非IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x80@\x00\x00\x00\x00\x00\x00&quot;
</span></code></pre>
</dd>
<dt>e</dt>
<dd>
<p>
リトルエンディアンの単精度浮動小数点数(機種依存)
</p>
<p>
x86_64 (IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00\x00\x80?&quot;
</span></code></pre>
<p>
SPARC64 (IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00\x00\x80?&quot;
</span></code></pre>
</dd>
<dt>E</dt>
<dd>
<p>
リトルエンディアンの倍精度浮動小数点数(機種依存)
</p>
<p>
x86_64 (IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">E</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\xF0?&quot;
</span></code></pre>
<p>
SPARC64 (IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">E</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\xF0?&quot;
</span></code></pre>
</dd>
<dt>g</dt>
<dd>
<p>
ビッグエンディアンの単精度浮動小数点数(機種依存)
</p>
<p>
x86_64 (IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">g</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;?\x80\x00\x00&quot;
</span></code></pre>
<p>
SPARC64 (IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">g</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;?\x80\x00\x00&quot;
</span></code></pre>
<p>
IEEE754準拠な環境の場合、以下のようにして符号、指数部、仮数部を取り出せます。
</p>
<pre class="highlight ruby">
<code>
s <span class="o">=</span> <span class="p">[</span>v<span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">g</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">[</span><span class="mi">0</span>,<span class="mi">1</span><span class="p">]</span>      <span class="c1"># 符号
</span>e <span class="o">=</span> <span class="p">[</span>v<span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">g</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">[</span><span class="mi">1</span>,<span class="mi">8</span><span class="p">]</span>      <span class="c1"># 指数部
</span>f <span class="o">=</span> <span class="p">[</span>v<span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">g</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">[</span><span class="mi">9</span>,<span class="mi">23</span><span class="p">]</span>     <span class="c1"># 仮数部
</span></code></pre>
<p>
そして、s, e, f の意味は以下の通りです。
</p>
<pre class="highlight ruby">
<code>
sgn <span class="o">=</span> s <span class="o">==</span> <span class="s2">"</span><span class="s2">0</span><span class="s2">"</span> <span class="o">?</span> <span class="mf">+1.0</span> <span class="o">:</span> <span class="o">-</span><span class="mf">1.0</span>
exp <span class="o">=</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">0b</span><span class="s2">"</span> <span class="o">+</span> e<span class="p">)</span>
fra <span class="o">=</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">0b</span><span class="s2">"</span> <span class="o">+</span> f<span class="p">)</span>
<span class="k">if</span> exp <span class="o">==</span> <span class="mi">0</span>
  <span class="k">if</span> fra <span class="o">==</span> <span class="mi">0</span>
    sgn <span class="o">*</span> <span class="mi">0</span>                     <span class="c1"># ±0 (positive/negative zero)
</span>  <span class="k">else</span>
    sgn <span class="o">*</span> fra <span class="o">*</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">126</span><span class="o">-</span><span class="mi">23</span><span class="p">)</span>    <span class="c1"># 非正規化数 (denormalized number)
</span>  <span class="k">end</span>
<span class="k">elsif</span> exp <span class="o">==</span> <span class="mi">255</span>
  <span class="k">if</span> fra <span class="o">==</span> <span class="mi">0</span>
    sgn <span class="o">*</span> <span class="no">Inf</span>                   <span class="c1"># ±∞ (positive/negative infinity)
</span>  <span class="k">else</span>
    <span class="no">NaN</span>                         <span class="c1"># 非数 (not a number)
</span>  <span class="k">end</span>
<span class="k">else</span>
  fra <span class="o">+=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">23</span>                <span class="c1"># ゲタ
</span>  sgn <span class="o">*</span> fra <span class="o">*</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span>exp<span class="o">-</span><span class="mi">127</span><span class="o">-</span><span class="mi">23</span><span class="p">)</span>   <span class="c1"># 正規化数 (normalized number)
</span><span class="k">end</span>
</code></pre>
</dd>
<dt>G</dt>
<dd>
<p>
ビッグエンディアンの倍精度浮動小数点数(機種依存)
</p>
<p>
x86_64 (IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">G</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;?\xF0\x00\x00\x00\x00\x00\x00&quot;
</span></code></pre>
<p>
SPARC64 (IEEE754):
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mf">1.0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">G</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;?\xF0\x00\x00\x00\x00\x00\x00&quot;
</span></code></pre>
<p>
IEEE754準拠な環境の場合、以下のようにして符号、指数部、仮数部を取り出せます。
</p>
<pre class="highlight ruby">
<code>
s <span class="o">=</span> <span class="p">[</span>v<span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">G</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">[</span><span class="mi">0</span>,<span class="mi">1</span><span class="p">]</span>    <span class="c1"># 符号
</span>e <span class="o">=</span> <span class="p">[</span>v<span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">G</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">[</span><span class="mi">1</span>,<span class="mi">11</span><span class="p">]</span>   <span class="c1"># 指数部
</span>f <span class="o">=</span> <span class="p">[</span>v<span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">G</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B*</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">[</span><span class="mi">12</span>,<span class="mi">52</span><span class="p">]</span>  <span class="c1"># 仮数部
</span></code></pre>
<p>
そして、s, e, f の意味は以下の通りです。
</p>
<pre class="highlight ruby">
<code>
sgn <span class="o">=</span> s <span class="o">==</span> <span class="s2">"</span><span class="s2">0</span><span class="s2">"</span> <span class="o">?</span> <span class="mf">+1.0</span> <span class="o">:</span> <span class="o">-</span><span class="mf">1.0</span>
exp <span class="o">=</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">0b</span><span class="s2">"</span> <span class="o">+</span> e<span class="p">)</span>
fra <span class="o">=</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">0b</span><span class="s2">"</span> <span class="o">+</span> f<span class="p">)</span>
<span class="k">if</span> exp <span class="o">==</span> <span class="mi">0</span>
  <span class="k">if</span> fra <span class="o">==</span> <span class="mi">0</span>
    sgn <span class="o">*</span> <span class="mi">0</span>                     <span class="c1"># ±0 (positive/negative zero)
</span>  <span class="k">else</span>
    sgn <span class="o">*</span> fra <span class="o">*</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1022</span><span class="o">-</span><span class="mi">52</span><span class="p">)</span>   <span class="c1"># 非正規化数 (denormalized number)
</span>  <span class="k">end</span>
<span class="k">elsif</span> exp <span class="o">==</span> <span class="mi">2047</span>
  <span class="k">if</span> fra <span class="o">==</span> <span class="mi">0</span>
    sgn <span class="o">*</span> <span class="no">Inf</span>                   <span class="c1"># ±∞ (positive/negative infinity)
</span>  <span class="k">else</span>
    <span class="no">NaN</span>                         <span class="c1"># 非数 (not a number)
</span>  <span class="k">end</span>
<span class="k">else</span>
  fra <span class="o">+=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">52</span>                <span class="c1"># ゲタ
</span>  sgn <span class="o">*</span> fra <span class="o">*</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span>exp<span class="o">-</span><span class="mi">1023</span><span class="o">-</span><span class="mi">52</span><span class="p">)</span>  <span class="c1"># 正規化数 (normalized number)
</span><span class="k">end</span>
</code></pre>
</dd>
<dt>p</dt>
<dd>
<p>
ヌル終端の文字列へのポインタ
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p</span><span class="s2">"</span><span class="p">)</span>             <span class="c1"># =&gt; &quot;\x980\xBEf\x1CV\x00\x00&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">b</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">c</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p3</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x98\xE5\x9ER\xD2U\x00\x00p\xE5\x9ER\xD2U\x00\x00H\xE5\x9ER\xD2U\x00\x00&quot;
</span><span class="p">[</span><span class="k">nil</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p</span><span class="s2">"</span><span class="p">)</span>            <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\x00\x00&quot;
</span></code></pre>
</dd>
<dt>P</dt>
<dd>
<p>
構造体(固定長文字列)へのポインタ
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="k">nil</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">P</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\x00\x00&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">P3</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\xA0\xEE\er\x84U\x00\x00&quot;
</span>
<span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">P4</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; ArgumentError: too short buffer for P(3 for 4)
</span><span class="p">[</span><span class="s2">"</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">P</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># =&gt; ArgumentError: too short buffer for P(0 for 1)
</span></code></pre>
</dd>
<dt>u</dt>
<dd>
<p>
uuencodeされた文字列
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">u</span><span class="s2">"</span><span class="p">)</span>           <span class="c1"># =&gt; &quot;&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">u</span><span class="s2">"</span><span class="p">)</span>          <span class="c1"># =&gt; &quot;!80``\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">u</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;#86)C\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abcd</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">u</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; &quot;$86)C9```\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span><span class="o">*</span><span class="mi">45</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">u</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; &quot;M86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span><span class="o">*</span><span class="mi">46</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">u</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; &quot;M86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A86%A\n!80``\n&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">abcdefghi</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">u6</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;&amp;86)C9&amp;5F\n#9VAI\n&quot;
</span></code></pre>
</dd>
<dt>U</dt>
<dd>
<p>
UTF-8
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U</span><span class="s2">"</span><span class="p">)</span>                               <span class="c1"># =&gt; &quot;\u0000&quot;
</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U</span><span class="s2">"</span><span class="p">)</span>                               <span class="c1"># =&gt; &quot;\u0001&quot;
</span><span class="p">[</span><span class="mi">0x7f</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U</span><span class="s2">"</span><span class="p">)</span>                            <span class="c1"># =&gt; &quot;\u007F&quot;
</span><span class="p">[</span><span class="mi">0x80</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U</span><span class="s2">"</span><span class="p">)</span>                            <span class="c1"># =&gt; &quot;\u0080&quot;
</span><span class="p">[</span><span class="mi">0x7fffffff</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U</span><span class="s2">"</span><span class="p">)</span>                      <span class="c1"># =&gt; &quot;\xFD\xBF\xBF\xBF\xBF\xBF&quot;
</span><span class="p">[</span><span class="mi">0x80000000</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U</span><span class="s2">"</span><span class="p">)</span>                      <span class="c1"># =&gt; RangeError: pack(U): value out of range
</span><span class="p">[</span><span class="mi">0</span>,<span class="mi">256</span>,<span class="mi">65536</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U3</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">b</span>                  <span class="c1"># =&gt; &quot;\x00\xC4\x80\xF0\x90\x80\x80&quot;
</span>
<span class="s2">"</span><span class="s2">\x00\xC4\x80\xF0\x90\x80\x80</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U3</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [0, 256, 65536]
</span><span class="s2">"</span><span class="s2">\x00\xC4\x80\xF0\x90\x80\x80</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [0]
</span><span class="s2">"</span><span class="s2">\x00\xC4\x80\xF0\x90\x80\x80</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [0, 256, 65536]
</span></code></pre>
</dd>
<dt>w</dt>
<dd>
<p>
BER圧縮整数
</p>
<p>
1バイトあたり7ビットを使用して必要最小限のバイト数で任意サイズの
0以上の整数を表す数値表現。各バイトの最上位ビットはデータの最後を除いて必ず1が立っている(つまり最上位ビットはどこまでデータがあるかを示している)。
</p>
<p>
ISO/IEC 8825-1:1995 : Information technology−ASN.1 encoding rules : Specification of Basic Encoding Rules(BER) に定められる整数の符号化方法。
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>             <span class="c1"># =&gt; &quot;\x00&quot;
</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>             <span class="c1"># =&gt; &quot;\x01&quot;
</span><span class="p">[</span><span class="mi">127</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>           <span class="c1"># =&gt; &quot;\x7F&quot;
</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>           <span class="c1"># =&gt; &quot;\x81\x00&quot;
</span><span class="p">[</span><span class="mi">0x3fff</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;\xFF\x7F&quot;
</span><span class="p">[</span><span class="mi">0x4000</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;\x81\x80\x00&quot;
</span><span class="p">[</span><span class="mi">0x3fffffff</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;\x83\xFF\xFF\xFF\x7F&quot;
</span><span class="p">[</span><span class="mi">0x40000000</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;\x84\x80\x80\x80\x00&quot;
</span><span class="p">[</span><span class="mi">0xffffffff</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;\x8F\xFF\xFF\xFF\x7F&quot;
</span><span class="p">[</span><span class="mi">0x100000000</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;\x90\x80\x80\x80\x00&quot;
</span>
<span class="s2">"</span><span class="s2">\x00</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>              <span class="c1"># =&gt; [0]
</span><span class="s2">"</span><span class="s2">\x00\x81\x00\x01</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">w*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [0, 128, 1]
</span></code></pre>
<p>
なお、BER圧縮整数でエンコードした結果は大小関係を保存しない。たとえば、[0x3fff].pack(&quot;w&quot;) &gt; [0x4000].pack(&quot;w&quot;) である。
</p>
</dd>
<dt>x</dt>
<dd>
<p>
ヌルバイト（pack）／1バイト読み飛ばし（unpack）
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">97</span>, <span class="mi">98</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">CxC</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;a\x00b&quot;
</span><span class="p">[</span><span class="mi">97</span>, <span class="mi">98</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Cx3C</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;a\x00\x00\x00b&quot;
</span>
<span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">CxC</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [97, 99]
</span><span class="s2">"</span><span class="s2">abc</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">Cx3C</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; ArgumentError: x outside of string
</span></code></pre>
</dd>
<dt>X</dt>
<dd>
<p>
1バイト後退
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">97</span>, <span class="mi">98</span>, <span class="mi">99</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">CCXC</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;ac&quot;
</span>
<span class="s2">"</span><span class="s2">abcdef</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">x*XC</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [102]
</span></code></pre>
</dd>
<dt>@</dt>
<dd>
<p>
絶対位置への移動
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">97</span>, <span class="mi">98</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C @3 C</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;a\x00\x00b&quot;
</span>
<span class="s2">"</span><span class="s2">abcd</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C @3 C</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [97, 100]
</span></code></pre>
</dd>
<dt>j</dt>
<dd>
</dd>
</dl>
<p>
intptr_t (ポインタの幅の符号つき整数, エンディアンに依存)
</p>
<dl>
<dt>J</dt>
<dd>
</dd>
</dl>
<p>
uintptr_t (ポインタの幅の符号なし整数, エンディアンに依存)
</p>
<h3 >使用例</h3>
<p>
以下、pack/unpack の使用例の一部です。
</p>
<p>
pack を使用しなくても同じことができる場合はその例も載せています。
pack は暗号になりやすい面があることを考慮し、pack を使いたくない人に別解を示すためです。
</p>
<dl>
<dt>数値(文字コード)の配列を文字列に変換する例</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">82</span>, <span class="mi">117</span>, <span class="mi">98</span>, <span class="mi">121</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">cccc</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;Ruby&quot;
</span><span class="p">[</span><span class="mi">82</span>, <span class="mi">117</span>, <span class="mi">98</span>, <span class="mi">121</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">c4</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;Ruby&quot;
</span><span class="p">[</span><span class="mi">82</span>, <span class="mi">117</span>, <span class="mi">98</span>, <span class="mi">121</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">c*</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;Ruby&quot;
</span>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">"</span>
<span class="p">[</span><span class="mi">82</span>, <span class="mi">117</span>, <span class="mi">98</span>, <span class="mi">121</span><span class="p">]</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>c<span class="o">|</span> s <span class="o">&lt;&lt;</span> c<span class="p">}</span>
s    <span class="c1"># =&gt; &quot;Ruby&quot;
</span>
<span class="p">[</span><span class="mi">82</span>, <span class="mi">117</span>, <span class="mi">98</span>, <span class="mi">121</span><span class="p">]</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span><span class="o">|</span>c<span class="o">|</span> <span class="nb">sprintf</span> <span class="s2">"</span><span class="s2">%c</span><span class="s2">"</span>, c<span class="p">}</span><span class="p">.</span><span class="nf">join</span>   <span class="c1"># =&gt; &quot;Ruby&quot;
</span>
<span class="p">[</span><span class="mi">82</span>, <span class="mi">117</span>, <span class="mi">98</span>, <span class="mi">121</span><span class="p">]</span><span class="p">.</span><span class="nf">inject</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>s, c<span class="o">|</span> s <span class="o">&lt;&lt;</span> c<span class="p">}</span>    <span class="c1"># =&gt; &quot;Ruby&quot;
</span></code></pre>
</dd>
<dt>文字列を数値(文字コード)の配列に変換する例</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">Ruby</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s1">'C*'</span><span class="p">)</span>    <span class="c1"># =&gt; [82, 117, 98, 121]
</span>
a <span class="o">=</span> <span class="p">[</span><span class="p">]</span>
<span class="s2">"</span><span class="s2">Ruby</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_byte</span> <span class="p">{</span><span class="o">|</span>c<span class="o">|</span> a <span class="o">&lt;&lt;</span> c<span class="p">}</span>
a    <span class="c1"># =&gt; [82, 117, 98, 121]
</span></code></pre>
</dd>
<dt>&quot;x&quot; でヌルバイトを埋めることができる</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">82</span>, <span class="mi">117</span>, <span class="mi">98</span>, <span class="mi">121</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">ccxxcc</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;Ru\x00\x00by&quot;
</span></code></pre>
</dd>
<dt>&quot;x&quot; で文字を読み飛ばす事が出来る</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">Ru\x00\x00by</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s1">'ccxxcc'</span><span class="p">)</span>    <span class="c1"># =&gt; [82, 117, 98, 121]
</span></code></pre>
</dd>
<dt>Hexダンプを数値の配列に変換する例</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="s2">"</span><span class="s2">61 62 63 64 65 66</span><span class="s2">"</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span><span class="p">.</span><span class="nf">lines</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s1">'H*'</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s1">'C*'</span><span class="p">)</span>
<span class="c1"># =&gt; [97, 98, 99, 100, 101, 102]
</span>
<span class="s2">"</span><span class="s2">61 62 63 64 65 66</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span><span class="o">|</span>c<span class="o">|</span> c<span class="p">.</span><span class="nf">hex</span><span class="p">}</span>
<span class="c1"># =&gt; [97, 98, 99, 100, 101, 102]
</span></code></pre>
</dd>
<dt>バイナリと16進数のpackでは長さ指定は生成されるバイト数ではなく、ビットやニブルの個数を表す</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">0b01010010</span>, <span class="mi">0b01110101</span>, <span class="mi">0b01100010</span>, <span class="mi">0b01111001</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C4</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;Ruby&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">01010010011101010110001001111001</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">B32</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># 8 bits * 4
</span><span class="c1"># =&gt; &quot;Ruby&quot;
</span>
<span class="p">[</span><span class="mi">0x52</span>, <span class="mi">0x75</span>, <span class="mi">0x62</span>, <span class="mi">0x79</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C4</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;Ruby&quot;
</span><span class="p">[</span><span class="s2">"</span><span class="s2">52756279</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">H8</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># 2 nybbles * 4
</span><span class="c1"># =&gt; &quot;Ruby&quot;
</span></code></pre>
</dd>
<dt>テンプレート文字'a'の長さ指定は1つの文字列だけに適用される</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">RUBY</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">u</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">b</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">y</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">a4</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;RUBY&quot;
</span>
<span class="p">[</span><span class="s2">"</span><span class="s2">RUBY</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">u</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">b</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">y</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">aaaa</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;Ruby&quot;
</span>
<span class="p">[</span><span class="s2">"</span><span class="s2">RUBY</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">u</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">b</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">y</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">a*aaa</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;RUBYuby&quot;
</span></code></pre>
</dd>
<dt>テンプレート文字&quot;a&quot;は、長さが足りない分をヌル文字で補う</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">Ruby</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">a8</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;Ruby\x00\x00\x00\x00&quot;
</span></code></pre>
</dd>
<dt>リトルエンディアンとビッグエンディアン</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s2</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x00\002\x00&quot; # リトルエンディアンのシステムでの出力
</span><span class="c1"># =&gt; &quot;\x00\x01\x00\002&quot; # ビッグエンディアンのシステムでの出力
</span>
<span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">n2</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x00\x01\x00\002&quot; # システムによらずビッグエンディアン
</span>
<span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">v2</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x01\x00\002\x00&quot; # システムによらずリトルエンディアン
</span></code></pre>
</dd>
<dt>ネットワークバイトオーダの signed long</dt>
<dd>
<pre class="highlight ruby">
<code>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">\xFF\xFF\xFF\xFE</span><span class="s2">"</span>
n <span class="o">=</span> s<span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">N</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">if</span> n<span class="p">[</span><span class="mi">31</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
  n <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="p">(</span>n <span class="o">^</span> <span class="mi">0xffff_ffff</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>
n <span class="c1"># =&gt; -2
</span></code></pre>
</dd>
<dt>ネットワークバイトオーダの signed long(その2)</dt>
<dd>
<pre class="highlight ruby">
<code>
s <span class="o">=</span> <span class="s2">"</span><span class="s2">\xFF\xFF\xFF\xFE</span><span class="s2">"</span>
n <span class="o">=</span> s<span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">N</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">l</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">l</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
n <span class="c1"># =&gt; -2
</span></code></pre>
</dd>
<dt>IPアドレス</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="nb">require</span> <span class="s1">'socket'</span>
official_hostname, alias_hostnames, address_family, <span class="o">*</span>address_list <span class="o">=</span> <span class="no">Socket</span><span class="p">.</span><span class="nf">gethostbyname</span><span class="p">(</span><span class="s2">"</span><span class="s2">localhost</span><span class="s2">"</span><span class="p">)</span>
address_list<span class="p">.</span><span class="nf">find</span> <span class="p">{</span><span class="o">|</span>address<span class="o">|</span> address<span class="p">.</span><span class="nf">size</span> <span class="o">==</span> <span class="mi">4</span> <span class="p">}</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C4</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="s2">.</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;127.0.0.1&quot;
</span>
<span class="s2">"</span><span class="s2">127.0.0.1</span><span class="s2">"</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">"</span><span class="s2">.</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span><span class="o">|</span>c<span class="o">|</span> c<span class="p">.</span><span class="nf">to_i</span><span class="p">}</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C4</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x7F\x00\x00\x01&quot;
</span></code></pre>
</dd>
<dt>sockaddr_in 構造体</dt>
<dd>
<pre class="highlight ruby">
<code>
<span class="nb">require</span> <span class="s1">'socket'</span>
<span class="p">[</span><span class="no">Socket</span><span class="o">::</span><span class="no">AF_INET</span>,
 <span class="no">Socket</span><span class="p">.</span><span class="nf">getservbyname</span><span class="p">(</span><span class="s1">'echo'</span><span class="p">)</span>,
 <span class="mi">127</span>, <span class="mi">0</span>, <span class="mi">0</span>, <span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">s n C4 x8</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;\x02\x00\x00\a\x7F\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00&quot;
</span></code></pre>
<p>
pack/unpack を使う代わりに
<a href="../method/-socket/s/pack_sockaddr_in.html">Socket.pack_sockaddr_in</a>,
<a href="../method/-socket/s/unpack_sockaddr_in.html">Socket.unpack_sockaddr_in</a> メソッドがあります。
</p>
</dd>
<dt>'\0'終端文字列のアドレス</dt>
<dd>
<p>
テンプレート文字 &quot;p&quot; や &quot;P&quot; は、C 言語レベルのインタフェースのためにあります(例えば <a href="../method/-i-o/i/ioctl.html">IO#ioctl</a>)。
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;xp\xC2\x85\vV\x00\x00&quot;
</span></code></pre>
<p>
結果の文字列はゴミに見えますが、実際は文字列&quot;foo\0&quot;を指すアドレス(のバイナリ表現)です。以下のようにすれば見慣れた表記で見ることが出来ます
</p>
<pre class="highlight ruby">
<code>
<span class="nb">printf</span> <span class="s2">"</span><span class="s2">%#014x\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">xp\xC2\x85\vV\x00\x00</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">J</span><span class="s2">"</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># =&gt; 0x560b85c27078
</span></code></pre>
<p>
アドレスが指す先のオブジェクト(この例で &quot;foo\0&quot;) は、pack の結果が GC されるまではGCされないことが保証されています。
</p>
<p>
unpack(&quot;p&quot;), unpack(&quot;P&quot;) は、pack の結果からしか unpack できません。
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;foo&quot;]
</span><span class="s2">"</span><span class="s2">xp\xC2\x85\vV\x00\x00</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># =&gt; ArgumentError: no associated pointer
</span></code></pre>
<p>
&quot;p&quot; や &quot;P&quot; は、nil を特別に扱い NULL
ポインタとして解釈します。(以下は、64bitマシンで一般的な結果)
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="k">nil</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;\x00\x00\x00\x00\x00\x00\x00\x00&quot;
</span><span class="s2">"</span><span class="s2">\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">p</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; [nil]
</span></code></pre>
</dd>
<dt>構造体のアドレス</dt>
<dd>
<p>
例えば、
</p>
<pre>
      struct {
        int   a;
        short b;
        long  c;
      } v = {1,2,3};
</pre>
<p>
を表す文字列は
</p>
<pre class="highlight ruby">
<code>
v <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span><span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">i!s!l!</span><span class="s2">"</span><span class="p">)</span>
</code></pre>
<p>
です。(byte alignment の問題から実際は適当な padding が必要になるかもしれません)
</p>
<p>
この構造体を指すアドレスは
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span>v<span class="p">]</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">P</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;\xC0\xCC2L\fV\x00\x00&quot;
</span></code></pre>
<p>
で得られます。
</p>
</dd>
<dt>UTF-8からUCS-2への変換 (サロゲートを処理していないので UTF-16 とはいえない)</dt>
<dd>
<p>
リトルエンディアン:
</p>
<pre class="highlight ruby">
<code>
<span class="p">(</span><span class="s2">"</span><span class="s2">Comments</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U*</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">v*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;C\x00o\x00m\x00m\x00e\x00n\x00t\x00s\x00&quot;
</span></code></pre>
<p>
ビッグエンディアン:
</p>
<pre class="highlight ruby">
<code>
<span class="p">(</span><span class="s2">"</span><span class="s2">Comments</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">U*</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"</span><span class="s2">n*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; &quot;\x00C\x00o\x00m\x00m\x00e\x00n\x00t\x00s&quot;
</span></code></pre>
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-string/i/unpack1.html">String#unpack1</a>, <a href="../method/-array/i/pack.html">Array#pack</a>
</p>
</dd>


<dt class="method-heading" id="I_UNPACK1"><code>unpack1(format) -&gt; object</code><span class="permalink">[<a href="../method/-string/i/unpack1.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-unpack1">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
formatにしたがって文字列をデコードし、展開された1つ目の値を返します。
unpackは配列を返しますがunpack1は配列の1つ目の要素のみを返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">ABC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack1</span><span class="p">(</span><span class="s2">"</span><span class="s2">C*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; 65
</span><span class="s2">"</span><span class="s2">ABC</span><span class="s2">"</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="s2">"</span><span class="s2">C*</span><span class="s2">"</span><span class="p">)</span>  <span class="c1"># =&gt; [65, 66, 67]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/unpack.html">String#unpack</a>, <a href="../method/-array/i/pack.html">Array#pack</a>
</p>
</dd>


<dt class="method-heading" id="I_UPCASE"><code>upcase(*options) -&gt; String</code><span class="permalink">[<a href="../method/-string/i/upcase.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-upcase">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
全ての小文字を対応する大文字に置き換えた文字列を返します。どの文字がどう置き換えられるかは、オプションの有無や文字列のエンコーディングに依存します。
</p>
<dl>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションの詳細は <a href="../method/-string/i/downcase.html">String#downcase</a> を参照してください。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="s2">"</span><span class="s2">stRIng? STring.</span><span class="s2">"</span><span class="p">.</span><span class="nf">upcase</span>   <span class="c1"># =&gt; &quot;STRING? STRING.&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/upcase=21.html">String#upcase!</a>, <a href="../method/-string/i/downcase.html">String#downcase</a>,
<a href="../method/-string/i/swapcase.html">String#swapcase</a>, <a href="../method/-string/i/capitalize.html">String#capitalize</a>
</p>
</dd>


<dt class="method-heading" id="I_UPCASE--21"><code>upcase!(*options) -&gt; self | nil</code><span class="permalink">[<a href="../method/-string/i/upcase=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-upcase-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
全ての小文字を対応する大文字に破壊的に置き換えます。どの文字がどう置き換えられるかは、オプションの有無や文字列のエンコーディングに依存します。
</p>
<dl>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションの詳細は <a href="../method/-string/i/downcase.html">String#downcase</a> を参照してください。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
buf <span class="o">=</span> <span class="s2">"</span><span class="s2">stRIng? STring.</span><span class="s2">"</span>
buf<span class="p">.</span><span class="nf">upcase!</span>
<span class="nb">p</span> buf   <span class="c1"># =&gt; &quot;STRING? STRING.&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/upcase.html">String#upcase</a>, <a href="../method/-string/i/downcase=21.html">String#downcase!</a>,
<a href="../method/-string/i/swapcase=21.html">String#swapcase!</a>, <a href="../method/-string/i/capitalize=21.html">String#capitalize!</a>
</p>
</dd>


<dt class="method-heading" id="I_UPTO"><code>upto(max, exclusive = false) {|s| ... } -&gt; self</code><span class="permalink">[<a href="../method/-string/i/upto.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-upto">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self から始めて max まで「次の文字列」を順番にブロックに与えて繰り返します。「次」の定義については <a href="../method/-string/i/succ.html">String#succ</a> を参照してください。
</p>
<p>
たとえば以下のコードは a, b, c, ... z, aa, ... az, ..., za を出力します。
</p>
<pre class="highlight ruby">
<code>
<span class="p">(</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span> <span class="o">..</span> <span class="s2">"</span><span class="s2">za</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span>str<span class="o">|</span>
  <span class="nb">puts</span> str
<span class="k">end</span>
<span class="s1">'a'</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="s1">'za'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span>str<span class="o">|</span>
  <span class="nb">puts</span> str
<span class="k">end</span>
</code></pre>
<dl>
<dt class='method-param'>[PARAM] max:</dt>
<dd>
繰り返しをやめる文字列
</dd>
<dt class='method-param'>[PARAM] exclusive:</dt>
<dd>
max を含むかどうか。false の場合は max を含む。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_VALID_ENCODING--3F"><code>valid_encoding? -&gt; bool</code><span class="permalink">[<a href="../method/-string/i/valid_encoding=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/String.html#method-i-valid_encoding-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の内容が、現在のエンコーディングに照らしあわせて妥当であれば
true を返します。さもなくば false を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="s2">"</span><span class="s2">\xc2\xa1</span><span class="s2">"</span><span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">valid_encoding?</span>  <span class="c1">#=&gt; true
</span><span class="s2">"</span><span class="s2">\xc2</span><span class="s2">"</span><span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">valid_encoding?</span>      <span class="c1">#=&gt; false
</span><span class="s2">"</span><span class="s2">\x80</span><span class="s2">"</span><span class="p">.</span><span class="nf">force_encoding</span><span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">valid_encoding?</span>      <span class="c1">#=&gt; false
</span></code></pre>
</dd>


</dl>

</main>

<footer id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>

  <a href="https://github.com/rurema/doctree/issues/new" id="feedback-link">フィードバックを送る</a>
  
  <script>if (window.URLSearchParams) { document.getElementById("feedback-link").search = new URLSearchParams({'body': document.location}); }</script>
</footer>
</body>
</html>
