<!DOCTYPE html>
<html lang="ja-JP">
<head>

<meta name="robots" content="noindex">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="../syntax-highlight.css">
<link rel="icon" type="image/png" href="../rurema.png">

<title>module Kernel (Ruby 2.5.9 リファレンスマニュアル)</title>
<meta name="description" content="全てのクラスから参照できるメソッドを定義しているモジュール。
[[c:Object]] クラスはこのモジュールをインクルードしています。">
<script src="../script.js"></script>
</head>
<body>


<header>
  <nav>
    <ol class="inline-breadcrumb-list">
      <li>
        <a href="../doc/index.html">Ruby 2.5.9 リファレンスマニュアル</a>
      </li>
      <li>
        <a href="../library/index.html">ライブラリ一覧</a>
      </li>
      <li>
        <a href="../library/_builtin.html">組み込みライブラリ</a>
      </li>
      <li>
        Kernelモジュール
      </li>
    </ol>
  </nav>

<h1>module Kernel</h1>
</header>

<main>



  <nav>
    クラス・モジュールの継承リスト:
    <ol class="inline-ancestors-list">
      
      <li>
        Kernel
      </li>
    </ol>
  </nav>







<p>
  dynamic include:
  <a href="../class/-rake-file-utils.html">RakeFileUtils</a> (by <a href="../library/rake.html">rake</a>)
</p>





<h2>要約</h2>
<p>
全てのクラスから参照できるメソッドを定義しているモジュール。
<a href="../class/-object.html">Object</a> クラスはこのモジュールをインクルードしています。
</p>
<p>
<a href="../class/-object.html">Object</a> クラスのメソッドは実際にはこのモジュールで定義されています。これはトップレベルでのメソッドの再定義に対応するためです。
</p>



<h2>目次</h2>
<dl>

<dt>モジュール関数</dt>
<dd>
<ul class="class-toc">

<li><a href="#M___CALLEE__">__callee__</a></li>

<li><a href="#M___DIR__">__dir__</a></li>

<li><a href="#M___METHOD__">__method__</a></li>

<li><a href="#M_--60">`</a></li>

<li><a href="#M_-ARRAY">Array</a></li>

<li><a href="#M_-COMPLEX">Complex</a></li>

<li><a href="#M_-FLOAT">Float</a></li>

<li><a href="#M_-HASH">Hash</a></li>

<li><a href="#M_-INTEGER">Integer</a></li>

<li><a href="#M_-RATIONAL">Rational</a></li>

<li><a href="#M_-STRING">String</a></li>

<li><a href="#M_ABORT">abort</a></li>

<li><a href="#M_AT_EXIT">at_exit</a></li>

<li><a href="#M_AUTOLOAD">autoload</a></li>

<li><a href="#M_AUTOLOAD--3F">autoload?</a></li>

<li><a href="#M_BINDING">binding</a></li>

<li><a href="#M_BLOCK_GIVEN--3F">block_given?</a></li>

<li><a href="#M_CALLER">caller</a></li>

<li><a href="#M_CALLER_LOCATIONS">caller_locations</a></li>

<li><a href="#M_CATCH">catch</a></li>

<li><a href="#M_CHOMP">chomp</a></li>

<li><a href="#M_CHOP">chop</a></li>

<li><a href="#M_EVAL">eval</a></li>

<li><a href="#M_EXEC">exec</a></li>

<li><a href="#M_EXIT">exit</a></li>

<li><a href="#M_EXIT--21">exit!</a></li>

<li><a href="#M_FAIL">fail</a></li>

<li><a href="#M_FORK">fork</a></li>

<li><a href="#M_FORMAT">format</a></li>

<li><a href="#M_GETS">gets</a></li>

<li><a href="#M_GLOBAL_VARIABLES">global_variables</a></li>

<li><a href="#M_GSUB">gsub</a></li>

<li><a href="#M_BLOCK_GIVEN--3F">iterator?</a></li>

<li><a href="#M_LAMBDA">lambda</a></li>

<li><a href="#M_LOAD">load</a></li>

<li><a href="#M_LOCAL_VARIABLES">local_variables</a></li>

<li><a href="#M_LOOP">loop</a></li>

<li><a href="#M_OPEN">open</a></li>

<li><a href="#M_P">p</a></li>

<li><a href="#M_PP">pp</a></li>

<li><a href="#M_PRINT">print</a></li>

<li><a href="#M_PRINTF">printf</a></li>

<li><a href="#M_LAMBDA">proc</a></li>

<li><a href="#M_PUTC">putc</a></li>

<li><a href="#M_PUTS">puts</a></li>

<li><a href="#M_FAIL">raise</a></li>

<li><a href="#M_RAND">rand</a></li>

<li><a href="#M_READLINE">readline</a></li>

<li><a href="#M_READLINES">readlines</a></li>

<li><a href="#M_REQUIRE">require</a></li>

<li><a href="#M_REQUIRE_RELATIVE">require_relative</a></li>

<li><a href="#M_SELECT">select</a></li>

<li><a href="#M_SET_TRACE_FUNC">set_trace_func</a></li>

<li><a href="#M_SLEEP">sleep</a></li>

<li><a href="#M_SPAWN">spawn</a></li>

<li><a href="#M_FORMAT">sprintf</a></li>

<li><a href="#M_SRAND">srand</a></li>

<li><a href="#M_SUB">sub</a></li>

<li><a href="#M_SYSCALL">syscall</a></li>

<li><a href="#M_SYSTEM">system</a></li>

<li><a href="#M_TEST">test</a></li>

<li><a href="#M_THROW">throw</a></li>

<li><a href="#M_TRACE_VAR">trace_var</a></li>

<li><a href="#M_TRAP">trap</a></li>

<li><a href="#M_UNTRACE_VAR">untrace_var</a></li>

<li><a href="#M_WARN">warn</a></li>

</ul>
</dd>

<dt>特殊変数</dt>
<dd>
<ul class="class-toc">

<li><a href="#V_--21">$!</a></li>

<li><a href="#V_--22">$&quot;</a></li>

<li><a href="#V_--24">$$</a></li>

<li><a href="#V_--26">$&amp;</a></li>

<li><a href="#V_--27">$'</a></li>

<li><a href="#V_--2A">$*</a></li>

<li><a href="#V_--2B">$+</a></li>

<li><a href="#V_--2C">$,</a></li>

<li><a href="#V_--2D0">$-0</a></li>

<li><a href="#V_--2D-F">$-F</a></li>

<li><a href="#V_--2D-I">$-I</a></li>

<li><a href="#V_--2D-K">$-K</a></li>

<li><a href="#V_--2D-W">$-W</a></li>

<li><a href="#V_--2DA">$-a</a></li>

<li><a href="#V_--2DD">$-d</a></li>

<li><a href="#V_--2DI">$-i</a></li>

<li><a href="#V_--2DL">$-l</a></li>

<li><a href="#V_--2DP">$-p</a></li>

<li><a href="#V_--2DV">$-v</a></li>

<li><a href="#V_--2DV">$-w</a></li>

<li><a href="#V_--2E">$.</a></li>

<li><a href="#V_--2D0">$/</a></li>

<li><a href="#V_--2D-I">$:</a></li>

<li><a href="#V_--2D-F">$;</a></li>

<li><a href="#V_--3C">$&lt;</a></li>

<li><a href="#V_--3D">$=</a></li>

<li><a href="#V_--3E">$&gt;</a></li>

<li><a href="#V_--3F">$?</a></li>

<li><a href="#V_--40">$@</a></li>

<li><a href="#V_--5C">$\</a></li>

<li><a href="#V__">$_</a></li>

<li><a href="#V_--60">$`</a></li>

<li><a href="#V_--7E">$~</a></li>

<li><a href="#V_0">$0</a></li>

<li><a href="#V_1">$1</a></li>

<li><a href="#V_1">$10</a></li>

<li><a href="#V_1">$11</a></li>

<li><a href="#V_1">$2</a></li>

<li><a href="#V_1">$3</a></li>

<li><a href="#V_1">$4</a></li>

<li><a href="#V_1">$5</a></li>

<li><a href="#V_1">$6</a></li>

<li><a href="#V_1">$7</a></li>

<li><a href="#V_1">$8</a></li>

<li><a href="#V_1">$9</a></li>

<li><a href="#V_--2DD">$DEBUG</a></li>

<li><a href="#V_-F-I-L-E-N-A-M-E">$FILENAME</a></li>

<li><a href="#V_--2D-K">$KCODE</a></li>

<li><a href="#V_--2D-I">$LOAD_PATH</a></li>

<li><a href="#V_--22">$LOADED_FEATURES</a></li>

<li><a href="#V_0">$PROGRAM_NAME</a></li>

<li><a href="#V_-S-A-F-E">$SAFE</a></li>

<li><a href="#V_--2DV">$VERBOSE</a></li>

<li><a href="#V_STDERR">$stderr</a></li>

<li><a href="#V_STDIN">$stdin</a></li>

<li><a href="#V_--3E">$stdout</a></li>

</ul>
</dd>

</dl>




</dl>


<h2>モジュール関数</h2>
<dl>

<dt class="method-heading" id="M_-ARRAY"><code>Array(arg) -&gt; Array</code><span class="permalink">[<a href="../method/-kernel/m/-array.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-Array">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を配列(<a href="../class/-array.html">Array</a>)に変換した結果を返します。
</p>
<p>
arg.to_ary と arg.to_a をこの順に呼び出して、返ってきた配列を変換結果とします。
</p>
<p>
arg に to_ary, to_a のいずれのメソッドも定義されていない場合は一要素の配列 [arg] を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
to_ary, to_a の返り値が配列でなければ発生します
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="no">Array</span><span class="p">(</span><span class="p">{</span><span class="ss">:it</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">}</span><span class="p">)</span> <span class="c1">#=&gt; [[:it, 3]]
</span><span class="nb">p</span> <span class="no">Array</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span> <span class="c1">#=&gt; []
</span><span class="nb">p</span> <span class="no">Array</span><span class="p">(</span><span class="s2">"</span><span class="s2">fefe</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; [&quot;fefe&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-object/i/to_a.html">Object#to_a</a>,<a href="../method/-object/i/to_ary.html">Object#to_ary</a>,<a href="../class/-array.html">Array</a>
</p>
</dd>


<dt class="method-heading" id="M_-COMPLEX"><code>Complex(r, i = 0) -&gt; Complex</code><span class="permalink">[<a href="../method/-kernel/m/-complex.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-Complex">rdoc</a>]</span></dt>
<dt class="method-heading"><code>Complex(s) -&gt; Complex</code></dt>
<dd class="method-description">
<p>
実部が r、虚部が i である <a href="../class/-complex.html">Complex</a> クラスのオブジェクトを生成します。
</p>
<dl>
<dt class='method-param'>[PARAM] r:</dt>
<dd>
生成する複素数の実部。
</dd>
<dt class='method-param'>[PARAM] i:</dt>
<dd>
生成する複素数の虚部。省略した場合は 0 です。
</dd>
<dt class='method-param'>[PARAM] s:</dt>
<dd>
生成する複素数を表す文字列。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
変換できないオブジェクトを指定した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">Complex</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>       <span class="c1"># =&gt; (1+0i)
</span><span class="no">Complex</span><span class="p">(</span><span class="mi">1</span>, <span class="mi">2</span><span class="p">)</span>    <span class="c1"># =&gt; (1+2i)
</span><span class="no">Complex</span><span class="p">(</span><span class="s1">'1+1i'</span><span class="p">)</span>  <span class="c1"># =&gt; (1+1i)
</span><span class="no">Complex</span><span class="p">(</span><span class="s1">'1+1j'</span><span class="p">)</span>  <span class="c1"># =&gt; (1+1i)
</span><span class="c1"># Complex.polar(10, 10) と同一。
</span><span class="no">Complex</span><span class="p">(</span><span class="s1">'10@10'</span><span class="p">)</span> <span class="c1"># =&gt; (-8.390715290764524-5.440211108893697i)
</span><span class="no">Complex</span><span class="p">(</span><span class="s1">'_'</span><span class="p">)</span>     <span class="c1"># =&gt; ArgumentError
</span></code></pre>
<p>
r にも i にも複素数と解釈されるオブジェクトを指定した場合には、
Complex(a, b) を a+bi として計算した <a href="../class/-complex.html">Complex</a> オブジェクトを返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">Complex</span><span class="p">(</span><span class="s1">'1+1i'</span>, <span class="s1">'2+3i'</span><span class="p">)</span>                          <span class="c1"># =&gt; (-2+3i)
</span><span class="no">Complex</span><span class="p">(</span><span class="s1">'1+1i'</span><span class="p">)</span> <span class="o">+</span> <span class="no">Complex</span><span class="p">(</span><span class="s1">'2+3i'</span><span class="p">)</span> <span class="o">*</span> <span class="no">Complex</span><span class="p">(</span><span class="s1">'i'</span><span class="p">)</span> <span class="c1"># =&gt; (-2+3i)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-complex/s/rect.html">Complex.rect</a>、<a href="../method/-complex/s/rectangular.html">Complex.rectangular</a>
</p>
<p>
[注意] Complex.new、Complex.new! は 1.9 系では廃止されました。
</p>
</dd>


<dt class="method-heading" id="M_-FLOAT"><code>Float(arg) -&gt; Float</code><span class="permalink">[<a href="../method/-kernel/m/-float.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-Float">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を浮動小数点数(<a href="../class/-float.html">Float</a>)に変換した結果を返します。
</p>
<p>
引数が数値の場合は素直に変換し、文字列の場合は整数や浮動小数点数と見なせるもののみ変換します。
</p>
<p>
メソッド Float は文字列に対し <a href="../method/-string/i/to_f.html">String#to_f</a> よりも厳密な変換を行います。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
整数や浮動小数点数と見なせない文字列を引数に指定した場合に発生します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
nil またはメソッド to_f を持たないオブジェクトを引数に指定したか、
to_f が浮動小数点数を返さなかった場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>            <span class="c1">#=&gt; 4.0
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="mi">4_000</span><span class="p">)</span>        <span class="c1">#=&gt; 4000.0
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="mf">9.88</span><span class="p">)</span>         <span class="c1">#=&gt; 9.88
</span>
<span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="no">Time</span><span class="p">.</span><span class="nf">gm</span><span class="p">(</span><span class="mi">1986</span><span class="p">)</span><span class="p">)</span> <span class="c1">#=&gt; 504921600.0
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="no">Object</span><span class="p">.</span><span class="nf">new</span><span class="p">)</span>   <span class="c1"># can't convert Object into Float (TypeError)
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span>          <span class="c1"># can't convert nil into Float (TypeError)
</span>
<span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">10</span><span class="s2">"</span><span class="p">)</span>         <span class="c1">#=&gt; 10.0
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">10e2</span><span class="s2">"</span><span class="p">)</span>       <span class="c1">#=&gt; 1000.0
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">1e-2</span><span class="s2">"</span><span class="p">)</span>       <span class="c1">#=&gt; 0.01
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">.1</span><span class="s2">"</span><span class="p">)</span>         <span class="c1">#=&gt; 0.1
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">0xa</span><span class="s2">"</span><span class="p">)</span>        <span class="c1">#=&gt; 10.0
</span>
<span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">nan</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># invalid value for Float(): &quot;nan&quot; (ArgumentError)
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">INF</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># invalid value for Float(): &quot;INF&quot; (ArgumentError)
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">-Inf</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># invalid value for Float(): &quot;-Inf&quot; (ArgumentError)
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="p">(</span><span class="s2">"</span><span class="s2">10</span><span class="s2">"</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span><span class="p">)</span> <span class="c1">#=&gt; Infinity
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">0xa.a</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># invalid value for Float(): &quot;0xa.a&quot; (ArgumentError)
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2"> \n10\s \t</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; 10.0 # 先頭と末尾の空白類は無視される
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">1\n0</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># invalid value for Float(): &quot;1\n0&quot; (ArgumentError)
</span><span class="nb">p</span> <span class="no">Float</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>           <span class="c1"># invalid value for Float(): &quot;&quot; (ArgumentError)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/to_f.html">String#to_f</a>,<a href="../class/-float.html">Float</a>
</p>
</dd>


<dt class="method-heading" id="M_-HASH"><code>Hash(arg) -&gt; Hash</code><span class="permalink">[<a href="../method/-kernel/m/-hash.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-Hash">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数 arg で指定したオブジェクトを to_hash メソッドを呼び出す事で
<a href="../class/-hash.html">Hash</a> オブジェクトに変換します。nil か [] を指定した場合は空の
<a href="../class/-hash.html">Hash</a> オブジェクトを返します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトを指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">Hash</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="p">)</span>          <span class="c1"># =&gt; {}
</span><span class="no">Hash</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span>         <span class="c1"># =&gt; {}
</span><span class="no">Hash</span><span class="p">(</span><span class="ss">key:</span> <span class="ss">:value</span><span class="p">)</span> <span class="c1"># =&gt; {:key =&gt; :value}
</span><span class="no">Hash</span><span class="p">(</span><span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="p">]</span><span class="p">)</span>   <span class="c1"># =&gt; TypeError
</span></code></pre>
<dl>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
変換できないオブジェクトを指定した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="M_-INTEGER"><code>Integer(arg, base = 0) -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/-integer.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-Integer">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を整数(<a href="../class/-fixnum.html">Fixnum</a>,<a href="../class/-bignum.html">Bignum</a>)に変換した結果を返します。
</p>
<p>
引数が数値の場合は直接変換し（小数点以下切り落とし）、文字列の場合は、進数を表す接頭辞を含む整数表現とみなせる文字列のみ変換します。
</p>
<p>
数値と文字列以外のオブジェクトに対しては arg.to_int, arg.to_i をこの順に使用して変換します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt class='method-param'>[PARAM] base:</dt>
<dd>
基数として0か2から36の整数を指定します(引数argに文字列を指定した場合のみ)。省略するか0を指定した場合はプリフィクスから基数を判断します。その場合に認識できるプリフィクスは、0b
(2 進数)、0 (8 進数)、0o (8 進数)、0d (10 進数)、0x (16 進数) です。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
整数と見なせない文字列を引数に指定した場合に発生します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
メソッド to_int, to_i を持たないオブジェクトを引数に指定したか、to_int, to_i
が整数(<a href="../class/-integer.html">Integer</a>のサブクラス)を返さなかった場合に発生します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
引数に nil を指定した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>          <span class="c1">#=&gt; 4
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="mi">4_000</span><span class="p">)</span>      <span class="c1">#=&gt; 4000
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="mf">9.88</span><span class="p">)</span>       <span class="c1">#=&gt; 9
</span>
<span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span>        <span class="c1"># can't convert nil into Integer (TypeError)
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="no">Object</span><span class="p">.</span><span class="nf">new</span><span class="p">)</span> <span class="c1"># cannot convert Object into Integer (TypeError)
</span>
<span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">10</span><span class="s2">"</span><span class="p">)</span>       <span class="c1">#=&gt; 10
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">10</span><span class="s2">"</span>, <span class="mi">2</span><span class="p">)</span>    <span class="c1">#=&gt; 2
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">0d10</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; 10
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">010</span><span class="s2">"</span><span class="p">)</span>      <span class="c1">#=&gt; 8
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">0o10</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; 8
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">0x10</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; 16
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">0b10</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; 2
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2"> \n10\t </span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; 10 # 先頭と末尾の空白類は無視される
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">1\n0</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># `Integer': invalid value for Integer: &quot;1\n0&quot; (ArgumentError)
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">hoge</span><span class="s2">"</span><span class="p">)</span>     <span class="c1"># `Integer': invalid value for Integer: &quot;hoge&quot; (ArgumentError)
</span><span class="nb">p</span> <span class="no">Integer</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>         <span class="c1"># `Integer': invalid value for Integer: &quot;&quot; (ArgumentError)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/hex.html">String#hex</a>,<a href="../method/-string/i/oct.html">String#oct</a>,<a href="../method/-string/i/to_i.html">String#to_i</a>,<a href="../class/-integer.html">Integer</a>
</p>
</dd>


<dt class="method-heading" id="M_-RATIONAL"><code>Rational(x, y = 1) -&gt; Rational</code><span class="permalink">[<a href="../method/-kernel/m/-rational.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-Rational">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を有理数(<a href="../class/-rational.html">Rational</a>)に変換した結果を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] x:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt class='method-param'>[PARAM] y:</dt>
<dd>
変換対象のオブジェクトです。省略した場合は x だけを用いて
<a href="../class/-rational.html">Rational</a> オブジェクトを作成します。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
変換できないオブジェクトを指定した場合に発生します。
</dd>
</dl>
<p>
引数 x、y の両方を指定した場合、x/y した <a href="../class/-rational.html">Rational</a> オブジェクトを返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">Rational</span><span class="p">(</span><span class="s2">"</span><span class="s2">1/3</span><span class="s2">"</span><span class="p">)</span>           <span class="c1"># =&gt; (1/3)
</span><span class="no">Rational</span><span class="p">(</span><span class="mi">1</span>, <span class="mi">3</span><span class="p">)</span>            <span class="c1"># =&gt; (1/3)
</span><span class="no">Rational</span><span class="p">(</span><span class="s2">"</span><span class="s2">0.1</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">0.3</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; (1/3)
</span><span class="no">Rational</span><span class="p">(</span><span class="no">Complex</span><span class="p">(</span><span class="mi">1</span>,<span class="mi">2</span><span class="p">)</span>, <span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; ((1/2)+(1/1)*i)
</span></code></pre>
<p>
ただし、1.8系とは異なり、<a href="../class/-rational.html">Rational</a> オブジェクトは常に既約(それ以上約分できない状態)である事に注意してください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">Rational</span><span class="p">(</span><span class="mi">2</span>, <span class="mi">6</span><span class="p">)</span>         <span class="c1"># =&gt; (1/3)
</span><span class="no">Rational</span><span class="p">(</span><span class="mi">1</span>, <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>     <span class="c1"># =&gt; (1/1)
</span></code></pre>
<p>
引数に文字列を指定する場合、以下のいずれかの形式で指定します。
</p>
<ul>
<li>&quot;1/3&quot; のような分数の形式</li>
<li>&quot;0.3&quot; のような10進数の形式</li>
<li>&quot;0.3E0&quot; のような x.xEn の形式</li>
<li>数字をアンダースコアで繋いだ形式</li>
</ul>
<p>
&quot;1.2/3&quot; のように、分子を実数にする事も可能ですが、分母には指定できません。また、<a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a> とは違い &quot;0x10&quot; のような進数を表す接頭辞を含めた指定は行えません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">Rational</span><span class="p">(</span><span class="s2">"</span><span class="s2">1/3</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; (1/3)
</span><span class="no">Rational</span><span class="p">(</span><span class="s2">"</span><span class="s2">0.3</span><span class="s2">"</span><span class="p">)</span>        <span class="c1"># =&gt; (3/10)
</span><span class="no">Rational</span><span class="p">(</span><span class="s1">'0.3E0'</span><span class="p">)</span>      <span class="c1"># =&gt; (3/10)
</span><span class="no">Rational</span><span class="p">(</span><span class="s1">'0.1E1/3'</span><span class="p">)</span>    <span class="c1"># =&gt; (1/3)
</span><span class="no">Rational</span><span class="p">(</span><span class="s1">'1.2/3'</span><span class="p">)</span>      <span class="c1"># =&gt; (2/5)
</span><span class="no">Rational</span><span class="p">(</span><span class="s1">'1/3.1'</span><span class="p">)</span>      <span class="c1"># =&gt; ArgumentError
</span><span class="no">Rational</span><span class="p">(</span><span class="s1">'3.0'</span>, <span class="s1">'3.0'</span><span class="p">)</span> <span class="c1"># =&gt; (1/1)
</span><span class="no">Rational</span><span class="p">(</span><span class="s1">'3/3'</span>, <span class="s1">'3/3'</span><span class="p">)</span> <span class="c1"># =&gt; (1/1)
</span><span class="no">Rational</span><span class="p">(</span><span class="s1">'1_234_567'</span><span class="p">)</span>  <span class="c1"># =&gt; (1234567/1)
</span><span class="no">Rational</span><span class="p">(</span><span class="s2">"</span><span class="s2"> \n10\t </span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># =&gt; (10/1) # 空白類は無視される
</span><span class="no">Rational</span><span class="p">(</span><span class="s2">"</span><span class="s2">0x10</span><span class="s2">"</span><span class="p">)</span>       <span class="c1"># =&gt; ArgumentError
</span></code></pre>
<p>
引数に変換できないオブジェクトを指定した場合には <a href="../class/-argument-error.html">ArgumentError</a> が発生します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">Rational</span><span class="p">(</span><span class="no">Object</span><span class="p">.</span><span class="nf">new</span><span class="p">)</span>   <span class="c1"># =&gt; ArgumentError
</span><span class="no">Rational</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>           <span class="c1"># =&gt; ArgumentError
</span><span class="no">Rational</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span>          <span class="c1"># =&gt; ArgumentError
</span></code></pre>
<p>
また、Rational('0.3') と Rational(0.3) は異なるオブジェクトを返す事に注意してください。前者は正確に 3/10 ですが、後者はそうではありません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">Rational</span><span class="p">(</span><span class="s1">'0.3'</span><span class="p">)</span>        <span class="c1"># =&gt; (3/10)
</span><span class="no">Rational</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>          <span class="c1"># =&gt; (5404319552844595/18014398509481984)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../class/-rational.html">Rational</a>
</p>
</dd>


<dt class="method-heading" id="M_-STRING"><code>String(arg) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/-string.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-String">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を文字列(<a href="../class/-string.html">String</a>)に変換した結果を返します。
</p>
<p>
arg.to_s を呼び出して文字列に変換します。
arg が文字列の場合、何もせず arg を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
to_s の返り値が文字列でなければ発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Foo</span>
 <span class="k">def</span> <span class="nf">to_s</span>
   <span class="s2">"</span><span class="s2">hogehoge</span><span class="s2">"</span>
 <span class="k">end</span>
<span class="k">end</span>

arg <span class="o">=</span> <span class="no">Foo</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">p</span> <span class="no">String</span><span class="p">(</span>arg<span class="p">)</span> <span class="c1">#=&gt; &quot;hogehoge&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-object/i/to_s.html">Object#to_s</a>,<a href="../class/-string.html">String</a>
</p>
</dd>


<dt class="method-heading" id="M___CALLEE__"><code>__callee__ -&gt; Symbol | nil</code><span class="permalink">[<a href="../method/-kernel/m/__callee__.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-__callee__">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のメソッド名を返します。メソッドの外で呼ばれると nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">p</span> __callee__
<span class="k">end</span>
<span class="k">alias</span> <span class="ss">:bar</span> <span class="ss">:foo</span>
foo <span class="c1"># =&gt; :foo
</span>bar <span class="c1"># =&gt; :bar
</span><span class="nb">p</span> __callee__ <span class="c1"># =&gt; nil
</span></code></pre>
<p>
<a href="../method/-kernel/m/__method__.html">Kernel.#__method__</a> とは異なり、現在のメソッド名が alias されたメソッドの場合には alias 先のメソッド名を返します。
</p>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/__method__.html">Kernel.#__method__</a>
</p>
</dd>


<dt class="method-heading" id="M___DIR__"><code>__dir__ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/m/__dir__.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-__dir__">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のソースファイル(__FILE__)のあるディレクトリ名を正規化された絶対パスで返します。シンボリックリンクも解決されます。また、__FILE__ が nil
の場合は nil を返します。
</p>
</dd>


<dt class="method-heading" id="M___METHOD__"><code>__method__ -&gt; Symbol | nil</code><span class="permalink">[<a href="../method/-kernel/m/__method__.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-__method__">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のメソッド名を返します。メソッドの外で呼ばれると nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">p</span> __method__
<span class="k">end</span>
<span class="k">alias</span> <span class="ss">:bar</span> <span class="ss">:foo</span>
foo <span class="c1">#=&gt; :foo
</span>bar <span class="c1">#=&gt; :foo
</span><span class="nb">p</span> __method__ <span class="c1">#=&gt; nil
</span></code></pre>
<p>
現在のメソッド名が alias されたメソッドの場合でも alias 元のメソッド名を返します。
</p>
</dd>


<dt class="method-heading" id="M_--60"><code>`command` -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/=60.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-60">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
command を外部コマンドとして実行し、その標準出力を文字列として返します。このメソッドは `command` の形式で呼ばれます。
</p>
<p>
引数 command に対しダブルクォートで囲まれた文字列と同様の解釈と式展開を行った後、コマンドとして実行します。コマンドは評価されるたびに実行されます。コマンドの終了ステータスを得るには、<a href="../method/-kernel/v/=3f.html">$?</a> を参照します。
</p>
<p>
コマンドの出力を得る必要がなく、単にコマンドを実行したいだけなら
<a href="../method/-kernel/m/system.html">Kernel.#system</a> を使います。特に端末を制御するコマンドでは
`command` は失敗するかもしれません。
</p>
<p>
<a href="../doc/spec=2fliteral.html#command">リテラル/コマンド出力</a> も参照。
</p>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
コマンドとして実行する引数です。そのまま評価されるのではなく、ダブルクォート文字列と同様のバックスラッシュ記法の解釈と式展開が行われます。
</dd>
<dt>[RETURN]</dt>
<dd>
コマンドの出力を文字列で返します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
コマンドを実行できないときや失敗した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">puts</span> <span class="sb">`</span>ruby -v<span class="s2">`</span> <span class="c1">#=&gt; ruby 1.8.6 (2007-03-13 patchlevel 0) [i386-mswin32]
</span><span class="nb">puts</span> <span class="vg">$?</span><span class="p">.</span><span class="nf">inspect</span> <span class="c1">#=&gt; #&lt;Process::Status: pid=3580,exited(0)&gt;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/system.html">Kernel.#system</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>,<a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a>
</p>
</dd>


<dt class="method-heading" id="M_ABORT"><code>abort -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/abort.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-abort">rdoc</a>]</span></dt>
<dt class="method-heading"><code>abort(message) -&gt; ()</code></dt>
<dd class="method-description">
<p>
Ruby プログラムをエラーメッセージ付きで終了します。終了ステータスは 1 固定です。
</p>
<p>
このメソッドと <a href="../method/-kernel/m/exit.html">Kernel.#exit</a> との違いは、プログラムの終了ステータスが 1 (正確にはCレベルの定数 EXIT_FAILURE の値)固定であることと、エラーメッセージを標準エラー出力 <a href="../method/-kernel/v/stderr.html">$stderr</a> に出力することです。
</p>
<p>
引数 message を指定すると SystemExit クラスの
<a href="../method/-exception/i/message.html">Exception#message</a> に message を設定して標準エラー出力に出力します。
</p>
<dl>
<dt class='method-param'>[PARAM] message:</dt>
<dd>
エラーメッセージ文字列です。
</dd>
</dl>
<pre class="highlight ruby">
<code>
<span class="nb">puts</span> <span class="s1">'start'</span>
<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'start1...'</span>
  <span class="nb">abort</span> <span class="s2">"</span><span class="s2">error1</span><span class="s2">"</span>
<span class="k">rescue</span> <span class="no">SystemExit</span> <span class="o">=&gt;</span> err
  <span class="nb">puts</span> <span class="s2">"</span><span class="s2">end1 with </span><span class="si">#{</span><span class="n">err</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'start2...'</span>
  <span class="nb">raise</span> <span class="no">RuntimeError</span><span class="p">.</span><span class="nf">new</span>
<span class="k">rescue</span>
  <span class="nb">abort</span>
<span class="k">ensure</span>
  <span class="nb">puts</span> <span class="s1">'end2...'</span>
<span class="k">end</span>
<span class="nb">puts</span> <span class="s1">'end'</span> <span class="c1">#実行されない
</span>
<span class="c1">#(標準出力)
</span><span class="c1">#=&gt; start
</span><span class="c1">#   start1...
</span><span class="c1">#   end1 with #&lt;SystemExit: error1&gt;
</span><span class="c1">#   start2...
</span><span class="c1">#   end2...
</span><span class="c1">#終了ステータス:1
</span><span class="c1">#(標準エラー出力)
</span><span class="c1">#=&gt; error1
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/exit.html">Kernel.#exit</a>,<a href="../method/-kernel/m/exit=21.html">Kernel.#exit!</a>
</p>
</dd>


<dt class="method-heading" id="M_AT_EXIT"><code>at_exit { ... } -&gt; Proc</code><span class="permalink">[<a href="../method/-kernel/m/at_exit.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-at_exit">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
与えられたブロックをインタプリタ終了時に実行します。
</p>
<p>
at_exitがメソッドである点を除けば、END ブロックによる終了処理の登録と同等です。登録した処理を取り消すことはできません。
<a href="../doc/spec=2fterminate.html">終了処理</a>も参照してください。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
登録した処理を <a href="../class/-proc.html">Proc</a> オブジェクトで返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">3</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span>i<span class="o">|</span>
  <span class="nb">at_exit</span><span class="p">{</span><span class="nb">puts</span> <span class="s2">"</span><span class="s2">at_exit</span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span><span class="p">}</span>
<span class="k">end</span>
<span class="k">END</span><span class="p">{</span><span class="nb">puts</span> <span class="s2">"</span><span class="s2">END</span><span class="s2">"</span><span class="p">}</span>
<span class="nb">at_exit</span><span class="p">{</span><span class="nb">puts</span> <span class="s2">"</span><span class="s2">at_exit</span><span class="s2">"</span><span class="p">}</span>
<span class="nb">puts</span> <span class="s2">"</span><span class="s2">main_end</span><span class="s2">"</span>

<span class="c1">#=&gt; main_end
</span><span class="c1">#   at_exit
</span><span class="c1">#   END
</span><span class="c1">#   at_exit2
</span><span class="c1">#   at_exit1
</span><span class="c1">#   at_exit0
</span></code></pre>
<p>
[SEE_ALSO] <a href="../doc/spec=2fcontrol.html#END">制御構造/END</a>,<a href="../method/-kernel/m/exit=21.html">Kernel.#exit!</a>,<a href="../method/-kernel/m/fork.html">Kernel.#fork</a>
</p>
</dd>


<dt class="method-heading" id="M_AUTOLOAD"><code>autoload(const_name, feature) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/autoload.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-autoload">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
定数 const_name を最初に参照した時に feature を
<a href="../method/-kernel/m/require.html">Kernel.#require</a> するように設定します。
</p>
<p>
const_name には、 &quot;::&quot; 演算子を含めることはできません。ネストした定数を指定する方法は <a href="../method/-module/i/autoload.html">Module#autoload</a> を参照してください。
</p>
<p>
const_name が autoload 設定されていて、まだ定義されてない(ロードされていない)ときは、
autoload する対象を置き換えます。
const_name が(autoloadではなく)既に定義されているときは何もしません。
</p>
<dl>
<dt class='method-param'>[PARAM] const_name:</dt>
<dd>
定数をString または Symbol で指定します。
</dd>
<dt class='method-param'>[PARAM] feature:</dt>
<dd>
require と同様な方法で autoload する対象を指定します。
</dd>
<dt>[EXCEPTION] LoadError:</dt>
<dd>
featureのロードに失敗すると発生します。
</dd>
</dl>
<pre class="highlight ruby">
<code>
<span class="c1"># ------- /tmp/foo.rb ---------
</span><span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Bar</span>
<span class="k">end</span>
<span class="c1"># ----- end of /tmp/foo.rb ----
</span>
<span class="nb">autoload</span> <span class="ss">:Bar</span>, <span class="s1">'/tmp/foo'</span>
<span class="nb">p</span> <span class="no">Bar</span> <span class="c1">#=&gt; Bar
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/autoload=3f.html">Kernel.#autoload?</a>,<a href="../method/-module/i/autoload.html">Module#autoload</a>,<a href="../method/-kernel/m/require.html">Kernel.#require</a>
</p>
</dd>


<dt class="method-heading" id="M_AUTOLOAD--3F"><code>autoload?(const_name) -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/m/autoload=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-autoload-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
const_name が <a href="../method/-kernel/m/autoload.html">Kernel.#autoload</a> 設定されているか調べます。
</p>
<p>
autoload 設定されていて、autoload 定数がまだ定義されてない(ロードされていない)
ときにそのパス名を返します。
</p>
<p>
autoload 設定されていないか、ロード済みなら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] const_name:</dt>
<dd>
定数をString または Symbol で指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># ------- /tmp/foo.rb ---------
</span><span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Foo</span>
  <span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Bar</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="c1"># ----- end of /tmp/foo.rb ----
</span>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Foo</span>
<span class="k">end</span>
<span class="nb">p</span> <span class="no">Foo</span><span class="p">.</span><span class="nf">autoload?</span><span class="p">(</span><span class="ss">:Bar</span><span class="p">)</span>         <span class="c1">#=&gt; nil
</span><span class="no">Foo</span><span class="p">.</span><span class="nf">autoload</span> <span class="ss">:Bar</span>, <span class="s1">'/tmp/foo'</span>
<span class="nb">p</span> <span class="no">Foo</span><span class="p">.</span><span class="nf">autoload?</span><span class="p">(</span><span class="ss">:Bar</span><span class="p">)</span>         <span class="c1">#=&gt; &quot;/tmp/foo&quot;
</span><span class="nb">p</span> <span class="no">Foo</span><span class="o">::</span><span class="no">Bar</span>                    <span class="c1">#=&gt; Foo::Bar
</span><span class="nb">p</span> <span class="no">Foo</span><span class="p">.</span><span class="nf">autoload?</span><span class="p">(</span><span class="ss">:Bar</span><span class="p">)</span>         <span class="c1">#=&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/autoload.html">Kernel.#autoload</a>
</p>
</dd>


<dt class="method-heading" id="M_BINDING"><code>binding -&gt; Binding</code><span class="permalink">[<a href="../method/-kernel/m/binding.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-binding">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
変数・メソッドなどの環境情報を含んだ <a href="../class/-binding.html">Binding</a> オブジェクトを生成して返します。通常、<a href="../method/-kernel/m/eval.html">Kernel.#eval</a> の第二引数として使います。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span>
  a <span class="o">=</span> <span class="mi">1</span>
  <span class="nb">binding</span>
<span class="k">end</span>

<span class="nb">eval</span><span class="p">(</span><span class="s2">"</span><span class="s2">p a</span><span class="s2">"</span>, foo<span class="p">)</span>  <span class="c1">#=&gt; 1
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/eval.html">Kernel.#eval</a>,<a href="../method/-object/c/-t-o-p-l-e-v-e-l_-b-i-n-d-i-n-g.html">Object::TOPLEVEL_BINDING</a>
</p>
</dd>


<dt class="method-heading" id="M_BLOCK_GIVEN--3F"><code>block_given? -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/m/block_given=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-block_given-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>iterator? -&gt; bool</code></dt>
<dd class="method-description">
<p>
メソッドにブロックが与えられていれば真を返します。
</p>
<p>
このメソッドはカレントコンテキストにブロックが与えられているかを調べるので、メソッド内部以外で使っても単に false を返します。
</p>
<p>
iterator? は （ブロックが必ずイテレートするとはいえないので）推奨されていないので block_given? を使ってください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">check</span>
  <span class="k">if</span> block_given?
    <span class="nb">puts</span> <span class="s2">"</span><span class="s2">Block is given.</span><span class="s2">"</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"</span><span class="s2">Block isn't given.</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>
check<span class="p">{</span><span class="p">}</span> <span class="c1">#=&gt; Block is given.
</span>check <span class="c1">#=&gt; Block isn't given.
</span></code></pre>
</dd>


<dt class="method-heading" id="M_CALLER"><code>caller(start = 1) -&gt; [String] | nil</code><span class="permalink">[<a href="../method/-kernel/m/caller.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-caller">rdoc</a>]</span></dt>
<dt class="method-heading"><code>caller(start, length) -&gt; [String] | nil</code></dt>
<dt class="method-heading"><code>caller(range) -&gt; [String] | nil</code></dt>
<dd class="method-description">
<p>
start 段上の呼び出し元の情報を <a href="../method/-kernel/v/=40.html">$@</a>
の形式のバックトレース(文字列の配列)として返します。
</p>
<p>
トップレベルでは空の配列を返します。caller の戻り値を <a href="../method/-kernel/v/=40.html">$@</a> に代入することで例外の発生位置を設定できます。
</p>
<p>
引数で指定した値が範囲外の場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] start:</dt>
<dd>
long の範囲を超えない正の整数でスタックレベルを指定します。
</dd>
<dt class='method-param'>[PARAM] length:</dt>
<dd>
取得するスタックの個数を指定します。
</dd>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
取得したいスタックの範囲を示す <a href="../class/-range.html">Range</a> オブジェクトを指定します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/set_trace_func.html">Kernel.#set_trace_func</a>,<a href="../method/-kernel/m/raise.html">Kernel.#raise</a>,
<a href="../method/-kernel/m/caller_locations.html">Kernel.#caller_locations</a>
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">p</span> <span class="nb">caller</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="nb">p</span> <span class="nb">caller</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="nb">p</span> <span class="nb">caller</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
  <span class="nb">p</span> <span class="nb">caller</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
  <span class="nb">p</span> <span class="nb">caller</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">bar</span>
  foo
<span class="k">end</span>

bar

<span class="c1">#=&gt; [&quot;-:2:in `foo'&quot;, &quot;-:10:in `bar'&quot;, &quot;-:13:in `&lt;main&gt;'&quot;]
</span><span class="c1">#   [&quot;-:10:in `bar'&quot;, &quot;-:13:in `&lt;main&gt;'&quot;]
</span><span class="c1">#   [&quot;-:13:in `&lt;main&gt;'&quot;]
</span><span class="c1">#   []
</span><span class="c1">#   nil
</span></code></pre>
<p>
以下の関数は、caller の要素から [ファイル名, 行番号, メソッド名]
を取り出して返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">parse_caller</span><span class="p">(</span>at<span class="p">)</span>
  <span class="k">if</span> <span class="sr">/^(.+?):(\d+)(?::in `(.*)')?/</span> <span class="o">=~</span> at
    file <span class="o">=</span> <span class="vg">$1</span>
    line <span class="o">=</span> <span class="vg">$2</span><span class="p">.</span><span class="nf">to_i</span>
    <span class="nb">method</span> <span class="o">=</span> <span class="vg">$3</span>
    <span class="p">[</span>file, line, <span class="nb">method</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">p</span> parse_caller<span class="p">(</span><span class="nb">caller</span><span class="p">.</span><span class="nf">first</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">bar</span>
  foo
  <span class="nb">p</span> parse_caller<span class="p">(</span><span class="nb">caller</span><span class="p">.</span><span class="nf">first</span><span class="p">)</span>
<span class="k">end</span>

bar
<span class="nb">p</span> parse_caller<span class="p">(</span><span class="nb">caller</span><span class="p">.</span><span class="nf">first</span><span class="p">)</span>

<span class="c1">#=&gt; [&quot;-&quot;, 15, &quot;bar&quot;]
</span><span class="c1">#   [&quot;-&quot;, 19, nil]
</span><span class="c1">#   nil
</span></code></pre>
<p>
以下は、<a href="../method/-kernel/v/-d-e-b-u-g.html">$DEBUG</a> が真の場合に役に立つ debug 関数のサンプルです。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$DEBUG</span> <span class="o">=</span> <span class="k">true</span>

<span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="o">*</span>args<span class="p">)</span>
  <span class="nb">p</span> <span class="p">[</span><span class="nb">caller</span><span class="p">.</span><span class="nf">first</span>, <span class="o">*</span>args<span class="p">]</span> <span class="k">if</span> <span class="vg">$DEBUG</span>
<span class="k">end</span>

debug <span class="s2">"</span><span class="s2">debug information</span><span class="s2">"</span>

<span class="c1">#=&gt; [&quot;-:7&quot;, &quot;debug information&quot;]
</span></code></pre>
</dd>


<dt class="method-heading" id="M_CALLER_LOCATIONS"><code>caller_locations(start = 1, length = nil) -&gt; [Thread::Backtrace::Location] | nil</code><span class="permalink">[<a href="../method/-kernel/m/caller_locations.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-caller_locations">rdoc</a>]</span></dt>
<dt class="method-heading"><code>caller_locations(range) -&gt; [Thread::Backtrace::Location] | nil</code></dt>
<dd class="method-description">
<p>
現在のフレームを <a href="../class/-thread=3a=3a-backtrace=3a=3a-location.html">Thread::Backtrace::Location</a> の配列で返します。引数で指定した値が範囲外の場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] start:</dt>
<dd>
開始フレームの位置を数値で指定します。
</dd>
<dt class='method-param'>[PARAM] length:</dt>
<dd>
取得するフレームの個数を指定します。
</dd>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
取得したいフレームの範囲を示す <a href="../class/-range.html">Range</a> オブジェクトを指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">test1</span><span class="p">(</span>start, length<span class="p">)</span>
  locations <span class="o">=</span> caller_locations<span class="p">(</span>start, length<span class="p">)</span>
  <span class="nb">p</span> locations
  <span class="nb">p</span> locations<span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:lineno</span><span class="p">)</span>
  <span class="nb">p</span> locations<span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:path</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">test2</span><span class="p">(</span>start, length<span class="p">)</span>
  test1<span class="p">(</span>start, length<span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">test3</span><span class="p">(</span>start, length<span class="p">)</span>
  test2<span class="p">(</span>start, length<span class="p">)</span>
<span class="k">end</span>

caller_locations <span class="c1"># =&gt; []
</span>test3<span class="p">(</span><span class="mi">1</span>, <span class="k">nil</span><span class="p">)</span>
<span class="c1"># =&gt; [&quot;/Users/user/test.rb:9:in `test2'&quot;, &quot;/Users/user/test.rb:13:in `test3'&quot;, &quot;/Users/user/test.rb:17:in `&lt;main&gt;'&quot;]
</span><span class="c1"># =&gt; [9, 13, 17]
</span><span class="c1"># =&gt; [&quot;/Users/user/test.rb&quot;, &quot;/Users/user/test.rb&quot;, &quot;/Users/user/test.rb&quot;]
</span>test3<span class="p">(</span><span class="mi">1</span>, <span class="mi">2</span><span class="p">)</span>
<span class="c1"># =&gt; [&quot;/Users/user/test.rb:9:in `test2'&quot;, &quot;/Users/user/test.rb:13:in `test3'&quot;]
</span><span class="c1"># =&gt; [9, 13]
</span><span class="c1"># =&gt; [&quot;/Users/user/test.rb&quot;, &quot;/Users/user/test.rb&quot;]
</span>test3<span class="p">(</span><span class="mi">2</span>, <span class="mi">1</span><span class="p">)</span>
<span class="c1"># =&gt; [&quot;/Users/user/test.rb:13:in `test3'&quot;]
</span><span class="c1"># =&gt; [13]
</span><span class="c1"># =&gt; [&quot;/Users/user/test.rb&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../class/-thread=3a=3a-backtrace=3a=3a-location.html">Thread::Backtrace::Location</a>, <a href="../method/-kernel/m/caller.html">Kernel.#caller</a>
</p>
</dd>


<dt class="method-heading" id="M_CATCH"><code>catch {|tag| .... } -&gt; object</code><span class="permalink">[<a href="../method/-kernel/m/catch.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-catch">rdoc</a>]</span></dt>
<dt class="method-heading"><code>catch(tag) {|tag| .... } -&gt; object</code></dt>
<dd class="method-description">
<p>
<a href="../method/-kernel/m/throw.html">Kernel.#throw</a>との組み合わせで大域脱出を行います。 catch はブロックを実行します。
</p>
<p>
ブロックの実行中に tag と同一のオブジェクトを引数とする <a href="../method/-kernel/m/throw.html">Kernel.#throw</a> が行われた場合は、その throw の第二引数を戻り値として、ブロックの実行を終了します。
</p>
<p>
主にネストしたループから一気に脱出するのに使用します。
</p>
<p>
引数を省略した場合、タグとなるオブジェクトが内部で生成され、ブロックパラメータ tag に渡されます。
</p>
<dl>
<dt class='method-param'>[PARAM] tag:</dt>
<dd>
タグとなる任意のオブジェクトです。
</dd>
<dt>[RETURN]</dt>
<dd>
ブロックの返り値か、対応するthrowの第二引数を返り値として返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
result <span class="o">=</span> <span class="nb">catch</span> <span class="k">do</span> <span class="o">|</span>tag<span class="o">|</span>
  <span class="k">for</span> i <span class="k">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">2</span>
    <span class="k">for</span> j <span class="k">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">2</span>
      <span class="k">for</span> k <span class="k">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">2</span>
        <span class="nb">throw</span> tag, k
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="nb">p</span> result <span class="c1">#=&gt; 1
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/throw.html">Kernel.#throw</a>
</p>
</dd>


<dt class="method-heading" id="M_CHOMP"><code>chomp(rs = $/) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/chomp.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-chomp">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
$_.chomp とほぼ同じですが、置換が発生したときは、$_の内容を置き換える点が異なります。コマンドラインオプションで -p または -n を指定した時のみ定義されます。
</p>
<p>
暗号的になりすぎるきらいがあるため、このメソッドの使用は推奨されていません。今後はより明示的な $_.chomp を使ってください。
</p>
<p>
$_.chomp とこのメソッド chomp は以下の点で違いがあります。
</p>
<ul>
<li>chomp は $_ の値をコピーして、コピーの方を更新し、
$_ に再代入します。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
末尾から削除する改行コードを指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例: ruby -n で &quot;test&quot; を入力</span>
<code>
<span class="vg">$_</span>            <span class="c1"># =&gt; &quot;test\n&quot;
</span><span class="nb">chomp</span>         <span class="c1"># =&gt; &quot;test&quot;
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">例: ruby -n で &quot;test,&quot; を入力し、 rs に &quot;,&quot; を指定</span>
<code>
<span class="vg">$_</span>            <span class="c1"># =&gt; &quot;test\n&quot;
</span><span class="nb">chomp</span>         <span class="c1"># =&gt; &quot;test,&quot;
</span><span class="nb">chomp</span><span class="p">(</span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;test&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chomp.html">String#chomp</a>,<a href="../method/-kernel/v/_.html">$_</a>,<a href="../method/-kernel/v/=2f.html">$/</a>
</p>
</dd>


<dt class="method-heading" id="M_CHOP"><code>chop -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/chop.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-chop">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
$_.chop とほぼ同じですが、置換が発生したときは、$_の内容を置き換える点が異なります。コマンドラインオプションで -p または -n を指定した時のみ定義されます。
</p>
<p>
暗号的になりすぎるきらいがあるため、このメソッドの使用は推奨されていません。今後はより明示的な $_.chop を使ってください。
</p>
<p>
$_.chopとこのメソッド chop は以下の点で違いがあります。
</p>
<ul>
<li>chop は $_ の値をコピーして、コピーの方を更新し、
$_ に再代入します。</li>
</ul>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$_</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">test\r\n</span><span class="s2">"</span>
<span class="vg">$_</span>          <span class="c1"># =&gt; &quot;test\r\n&quot;
</span><span class="nb">chop</span>        <span class="c1"># =&gt; &quot;test&quot;
</span><span class="vg">$_</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">test\n</span><span class="s2">"</span>
<span class="vg">$_</span>          <span class="c1"># =&gt; &quot;test\n&quot;
</span><span class="nb">chop</span>        <span class="c1"># =&gt; &quot;test&quot;
</span><span class="vg">$_</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">test</span><span class="s2">"</span>
<span class="vg">$_</span>          <span class="c1"># =&gt; &quot;test&quot;
</span><span class="nb">chop</span>        <span class="c1"># =&gt; &quot;tes&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/chop.html">String#chop</a>,<a href="../method/-kernel/v/_.html">$_</a>
</p>
</dd>


<dt class="method-heading" id="M_EVAL"><code>eval(expr) -&gt; object</code><span class="permalink">[<a href="../method/-kernel/m/eval.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-eval">rdoc</a>]</span></dt>
<dt class="method-heading"><code>eval(expr, bind, fname = &quot;(eval)&quot;, lineno = 1) -&gt; object</code></dt>
<dd class="method-description">
<p>
文字列 expr を Ruby プログラムとして評価してその結果を返します。第2引数に
<a href="../class/-binding.html">Binding</a> オブジェクトを与えた場合、そのオブジェクトを生成したコンテキストで文字列を評価します。
</p>
<p>
expr の中のローカル変数の扱いはブロックの場合と同じです。すなわち、eval
実行前に補足されていた変数は eval 実行後にブロック外に持ち出せます。
</p>
<p>
fname と lineno が与えられた場合には、ファイル
fname の行番号 lineno から文字列 expr が書かれているかのようにコンパイルされます。スタックトレースの表示などを差し替えることができます。
</p>
<p>
bind によらずに特定のオブジェクトのコンテキストで expr を評価したい場合、
<a href="../method/-module/i/module_eval.html">Module#module_eval</a>, <a href="../method/-basic-object/i/instance_eval.html">BasicObject#instance_eval</a> が使えます。
</p>
<dl>
<dt class='method-param'>[PARAM] expr:</dt>
<dd>
評価する文字列です。
</dd>
<dt class='method-param'>[PARAM] bind:</dt>
<dd>
評価コンテキストです。
</dd>
<dt class='method-param'>[PARAM] fname:</dt>
<dd>
スタックトレースに表示するファイル名です。
</dd>
<dt class='method-param'>[PARAM] lineno:</dt>
<dd>
文字列 expr が書かれていると想定する先頭の行番号を整数で指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="k">nil</span>
<span class="nb">eval</span><span class="p">(</span><span class="s1">'a = RUBY_RELEASE_DATE'</span><span class="p">)</span>
<span class="nb">p</span> a <span class="c1">#=&gt; &quot;2007-03-13&quot;
</span>
<span class="nb">eval</span><span class="p">(</span><span class="s1">'def fuga;p 777 end'</span><span class="p">)</span>
fuga <span class="c1">#=&gt; 777
</span>
<span class="nb">eval</span><span class="p">(</span><span class="s1">'raise RuntimeError'</span>, <span class="nb">binding</span>, <span class="s1">'XXX.rb'</span>, <span class="mi">4</span><span class="p">)</span>
<span class="c1">#=&gt; XXX.rb:4: RuntimeError (RuntimeError)
</span><span class="c1">#       from ..:9
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/binding.html">Kernel.#binding</a>,<a href="../method/-module/i/module_eval.html">Module#module_eval</a>,<a href="../method/-basic-object/i/instance_eval.html">BasicObject#instance_eval</a>,<a href="../method/-object/i/method.html">Object#method</a>,<a href="../method/-object/i/send.html">Object#send</a>
</p>
</dd>


<dt class="method-heading" id="M_EXEC"><code>exec(command, options={}) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/exec.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-exec">rdoc</a>]</span></dt>
<dt class="method-heading"><code>exec(env, command, options={}) -&gt; ()</code></dt>
<dd class="method-description">
<p>
引数で指定されたコマンドを実行します。
</p>
<p>
プロセスの実行コードはそのコマンド(あるいは shell)になるので、起動に成功した場合、このメソッドからは戻りません。
</p>
<h3 >引数の解釈</h3>
<p>
この形式では command が shell のメタ文字
</p>
<pre>
  * ? {} [] &lt;&gt; () ~ &amp; | \ $ ; ' ` &quot; \n
</pre>
<p>
を含む場合、shell 経由で実行されます。そうでなければインタプリタから直接実行されます。
</p>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
コマンドを文字列で指定します。
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
起動に失敗し、ruby インタプリタに制御が戻った場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># a.rb
</span><span class="nb">puts</span> <span class="s1">'実行前'</span>
<span class="nb">exec</span> <span class="s1">'echo &quot;実行中&quot;'</span>
<span class="nb">puts</span> <span class="s1">'実行後'</span>
</code></pre>
<p>
上記のスクリプトを実行すると以下のようになります。
</p>
<pre>
$ ruby a.rb
実行前
実行中
# '実行後' は表示されない
</pre>
</dd>
<dt class="method-heading" id="M_EXEC"><code>exec(program, *args, options={}) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/exec.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-exec">rdoc</a>]</span></dt>
<dt class="method-heading"><code>exec(env, program, *args, options={}) -&gt; ()</code></dt>
<dd class="method-description">
<p>
引数で指定されたコマンドを実行します。
</p>
<p>
プロセスの実行コードはそのコマンド(あるいは shell)になるので、起動に成功した場合、このメソッドからは戻りません。
</p>
<p>
この形式では、常に shell を経由せずに実行されます。
</p>
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/exec.html">exec(3)</a> でコマンドを実行すると、元々のプログラムの環境をある程度(ファイルデスクリプタなど)引き継ぎます。
Hash を options として渡すことで、この挙動を変更できます。詳しくは <a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a> を参照してください。
</p>
<h3 >引数の解釈</h3>
<p>
この形式で呼び出した場合、空白や shell のメタキャラクタもそのまま program の引数に渡されます。先頭の引数が2要素の配列であった場合、第1要素の文字列が実際に起動するプログラムのパスであり、第2要素が「みせかけ」のプログラム名になります。また、第1要素はフルパスで指定しなくても環境変数 PATH から探します。
</p>
<dl>
<dt class='method-param'>[PARAM] program:</dt>
<dd>
文字列か2要素の配列を指定します。
</dd>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
渡される引数です。0 個以上の文字列を指定します。
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
第一引数が配列かつ要素数が 2 でない場合に発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
起動に失敗し、ruby インタプリタに制御が戻った場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># a.rb
</span><span class="nb">exec</span> <span class="p">[</span><span class="s1">'sleep'</span>, <span class="s1">'mysleep'</span><span class="p">]</span>, <span class="s1">'600'</span>
</code></pre>
<p>
上記スクリプトを実行すると以下のようになります。
</p>
<pre>
$ ruby a.rb
## sleep してるので制御が戻ってこない。別の仮想端末に切替えて以下を実行
$ ps aux|grep sleep
xxxx    32754  0.0  0.0   2580   468 pts/3    S+   22:01   0:00 mysleep 600
xxxx    32761  0.0  0.0   2824   792 pts/6    S+   22:01   0:00 grep sleep
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/system.html">Kernel.#system</a>,<a href="../method/-kernel/m/=60.html">Kernel.#`</a>,<a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a>,<a href="../method/-kernel/m/fork.html">Kernel.#fork</a>,<a href="../method/-i-o/s/popen.html">IO.popen</a>,<a href="../method/-i-o/s/pipe.html">IO.pipe</a>,<a href="../method/-kernel/m/open.html">Kernel.#open</a>,<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/exec.html">exec(3)</a>
</p>
</dd>


<dt class="method-heading" id="M_EXIT"><code>exit(status = true) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/exit.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-exit">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Rubyプログラムの実行を終了します。status として整数が与えられた場合、その値を Ruby コマンドの終了ステータスとします。デフォルトの終了ステータスは 0(正常終了)です。
</p>
<p>
status が true の場合 0、 false の場合 1 を引数に指定したとみなされます。この値はCレベルの定数
EXIT_SUCCESS、EXIT_FAILURE の値なので、正確には環境依存です。
</p>
<p>
exit は例外 <a href="../class/-system-exit.html">SystemExit</a> を発生させることによってプログラムの実行を終了させますので、必要に応じて begin 節で捕捉することができます。
</p>
<dl>
<dt class='method-param'>[PARAM] status:</dt>
<dd>
終了ステータスを整数か true または false で与えます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">puts</span> <span class="s1">'start'</span>
<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'start1...'</span>
  <span class="nb">exit</span>
<span class="k">rescue</span> <span class="no">SystemExit</span> <span class="o">=&gt;</span> err
  <span class="nb">puts</span> <span class="s2">"</span><span class="s2">end1 with </span><span class="si">#{</span><span class="n">err</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'start2...'</span>
  <span class="nb">exit</span>
<span class="k">ensure</span>
  <span class="nb">puts</span> <span class="s1">'end2...'</span>
<span class="k">end</span>
<span class="nb">puts</span> <span class="s1">'end'</span> <span class="c1">#実行されない
</span>
<span class="c1">#=&gt; start
</span><span class="c1">#   start1...
</span><span class="c1">#   end1 with #&lt;SystemExit: exit&gt;
</span><span class="c1">#   start2...
</span><span class="c1">#   end2...
</span><span class="c1">#終了ステータス:0
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/exit=21.html">Kernel.#exit!</a>,<a href="../method/-kernel/m/abort.html">Kernel.#abort</a>, <a href="../doc/spec=2fcontrol.html#begin">制御構造/begin</a>
</p>
</dd>


<dt class="method-heading" id="M_EXIT--21"><code>exit!(status = false) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/exit=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-exit-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Rubyプログラムの実行を即座に終了します。
status として整数が与えられた場合、その値を Ruby コマンドの終了ステータスとします。デフォルトの終了ステータスは 1 です。
</p>
<p>
status が true の場合 0、 false の場合 1 を引数に指定したとみなされます。この値はCレベルの定数
EXIT_SUCCESS、EXIT_FAILURE の値なので、正確には環境依存です。
</p>
<p>
exit! は exit とは違って、例外処理などは一切行ないません。 <a href="../method/-kernel/m/fork.html">Kernel.#fork</a> の後、子プロセスを終了させる時などに用いられます。
</p>
<dl>
<dt class='method-param'>[PARAM] status:</dt>
<dd>
終了ステータスを整数か true または false で与えます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">STDOUT</span><span class="p">.</span><span class="nf">sync</span> <span class="o">=</span> <span class="k">true</span> <span class="c1">#表示前に終了しないようにする
</span><span class="nb">puts</span> <span class="s1">'start'</span>
<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'start1...'</span>
  exit!
<span class="k">ensure</span>
  <span class="nb">puts</span> <span class="s1">'end1...'</span> <span class="c1">#実行されない
</span><span class="k">end</span>
<span class="nb">puts</span> <span class="s1">'end'</span> <span class="c1">#実行されない
</span>
<span class="c1">#=&gt; start
</span><span class="c1">#   start1...
</span><span class="c1">#終了ステータス:1
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/exit.html">Kernel.#exit</a>,<a href="../method/-kernel/m/abort.html">Kernel.#abort</a>,<a href="../method/-kernel/m/at_exit.html">Kernel.#at_exit</a>,<a href="../method/-kernel/m/fork.html">Kernel.#fork</a>
</p>
</dd>


<dt class="method-heading" id="M_FAIL"><code>raise -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/fail.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-fail">rdoc</a>]</span></dt>
<dt class="method-heading"><code>fail -&gt; ()</code></dt>
<dt class="method-heading"><code>raise(message, cause: $!) -&gt; ()</code></dt>
<dt class="method-heading"><code>fail(message, cause: $!) -&gt; ()</code></dt>
<dt class="method-heading"><code>raise(error_type, message = nil, backtrace = caller(0), cause: $!) -&gt; ()</code></dt>
<dt class="method-heading"><code>fail(error_type, message = nil, backtrace = caller(0), cause: $!) -&gt; ()</code></dt>
<dd class="method-description">
<p>
例外を発生させます。発生した例外は変数 <a href="../method/-kernel/v/=21.html">$!</a> に格納されます。また例外が発生した時のスタックトレースは変数 <a href="../method/-kernel/v/=40.html">$@</a> に格納されます。発生した例外は rescue 節で捕捉できます。
</p>
<p>
引数無しの場合は、同スレッドの同じブロック内で最後に rescue された例外オブジェクト (<a href="../method/-kernel/v/=21.html">$!</a>) を再発生させます。そのような例外が存在しないが自身は捕捉されている時には例外 <a href="../class/-runtime-error.html">RuntimeError</a> を発生させます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">begin</span>
  <span class="nb">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">nonexist</span><span class="s2">"</span><span class="p">)</span>
<span class="k">rescue</span>
  <span class="nb">raise</span>   <span class="c1">#=&gt; `open': No such file or directory - &quot;nonexist&quot; (Errno::ENOENT)
</span><span class="k">end</span>
</code></pre>
<p>
引数を渡した場合は、例外メッセージ message を持った error_type の示す例外(省略時 RuntimeError)を発生させます。
</p>
<p>
error_type として例外ではないクラスやオブジェクトを指定した場合、そのオブジェクトの exception メソッドが返す値を発生する例外にします。その際、exception メソッドに引数として変数 message を渡すことができます。
</p>
<dl>
<dt class='method-param'>[PARAM] error_type:</dt>
<dd>
発生させる例外を例外クラスまたは例外クラスのインスタンスで指定します。
</dd>
<dt class='method-param'>[PARAM] message:</dt>
<dd>
例外のメッセージとなる文字列です。
</dd>
<dt class='method-param'>[PARAM] backtrace:</dt>
<dd>
例外発生時のスタックトレースで、<a href="../method/-kernel/m/caller.html">Kernel.#caller</a> の戻り値と同じ形式で指定しなければいけません。
</dd>
<dt class='method-param'>[PARAM] cause:</dt>
<dd>
現在の例外(<a href="../method/-kernel/v/=21.html">$!</a>)の代わりに <a href="../method/-exception/i/cause.html">Exception#cause</a> に設定する例外を指定します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
exception メソッドが例外オブジェクトを返さなかった場合に発生します。
</dd>
</dl>
<p>
例外の捕捉の例を示します。
</p>
<pre class="highlight ruby">
<span class="caption">例1</span>
<code>
<span class="k">begin</span>
  <span class="nb">raise</span> <span class="no">NameError</span>,<span class="s2">"</span><span class="s2">!!error!!</span><span class="s2">"</span>
<span class="k">rescue</span> <span class="no">ArgumentError</span> <span class="o">=&gt;</span> err
<span class="k">rescue</span> <span class="no">NameError</span> <span class="o">=&gt;</span> err
<span class="k">rescue</span> <span class="no">TypeError</span> <span class="o">=&gt;</span> err
<span class="k">ensure</span>
  <span class="nb">p</span> err <span class="c1">#=&gt; #&lt;NameError: !!error!!&gt;
</span><span class="k">end</span>
</code></pre>
<pre class="highlight ruby">
<span class="caption">例2</span>
<code>
<span class="k">def</span> <span class="nf">foo</span> num
  <span class="nb">print</span> <span class="s1">'in method.'</span>
  <span class="nb">raise</span> <span class="s2">"</span><span class="s2">error!!</span><span class="s2">"</span> <span class="k">if</span> num <span class="o">&lt;=</span> <span class="mi">9</span>
<span class="k">rescue</span> <span class="no">RuntimeError</span>
  num <span class="o">+=</span> <span class="mi">10</span>
  <span class="nb">print</span> <span class="s1">'in rescue.'</span>
  <span class="k">retry</span>
<span class="k">else</span>
  <span class="nb">print</span> <span class="s1">'in else.'</span>
<span class="k">ensure</span>
  <span class="nb">print</span> <span class="s2">"</span><span class="s2">in ensure.\n</span><span class="s2">"</span>
<span class="k">end</span>

foo<span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#=&gt; in method.in rescue.in method.in else.in ensure.
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">例3</span>
<code>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">MyException</span>
  <span class="k">def</span> <span class="nf">exception</span><span class="p">(</span>mesg<span class="o">=</span><span class="k">nil</span><span class="p">)</span>
    <span class="no">SecurityError</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>mesg<span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">begin</span>
  <span class="nb">raise</span> <span class="no">MyException</span><span class="p">.</span><span class="nf">new</span>
<span class="k">rescue</span> <span class="no">SecurityError</span>
  <span class="nb">p</span> <span class="vg">$!</span> <span class="c1">#=&gt; #&lt;SecurityError: SecurityError&gt;
</span><span class="k">end</span>
</code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/caller.html">Kernel.#caller</a>
</p>
</dd>


<dt class="method-heading" id="M_FORK"><code>fork -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-kernel/m/fork.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-fork">rdoc</a>]</span></dt>
<dt class="method-heading"><code>fork { ... } -&gt; Integer | nil</code></dt>
<dd class="method-description">
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fork.html">fork(2)</a> システムコールを使ってプロセスの複製を作ります。親プロセスでは子プロセスのプロセスIDを、子プロセスでは
nil を返します。ブロックを指定して呼び出した場合には、生成した子プロセスでブロックを評価します。
</p>
<p>
fork 前に STDOUT と STDERR を <a href="../method/-i-o/i/flush.html">IO#flush</a> します。
</p>
<dl>
<dt>[EXCEPTION] NotImplementedError:</dt>
<dd>
実行環境がこのメソッドに対応していないとき発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">ブロックを指定しなかった場合</span>
<code>
<span class="k">if</span> child_pid <span class="o">=</span> <span class="nb">fork</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="s2">parent process. pid: </span><span class="si">#{</span><span class="no">Process</span><span class="p">.</span><span class="nf">pid</span><span class="si">}</span><span class="s2">, child pid: </span><span class="si">#{</span><span class="n">child_pid</span><span class="si">}</span><span class="s2">"</span>
  <span class="c1"># =&gt; parent process. pid: 81060, child pid: 81329
</span>
  <span class="c1"># 親プロセスでの処理
</span>  <span class="c1"># ...
</span>
  <span class="c1"># 子プロセスの終了を待って終了。
</span>  <span class="no">Process</span><span class="p">.</span><span class="nf">waitpid</span><span class="p">(</span>child_pid<span class="p">)</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="s2">child process. pid: </span><span class="si">#{</span><span class="no">Process</span><span class="p">.</span><span class="nf">pid</span><span class="si">}</span><span class="s2">"</span>
  <span class="c1"># =&gt; child process. pid: 81329
</span>
  <span class="c1"># 子プロセスでの処理
</span>  <span class="nb">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight ruby">
<span class="caption">ブロックを指定した場合</span>
<code>
child_pid <span class="o">=</span> <span class="nb">fork</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="s2">child process. pid: </span><span class="si">#{</span><span class="no">Process</span><span class="p">.</span><span class="nf">pid</span><span class="si">}</span><span class="s2">"</span>
  <span class="c1"># =&gt; child process. pid: 79602
</span>
  <span class="c1"># 子プロセスでの処理
</span>  <span class="nb">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">"</span><span class="s2">parent process. pid: </span><span class="si">#{</span><span class="no">Process</span><span class="p">.</span><span class="nf">pid</span><span class="si">}</span><span class="s2">, child pid: </span><span class="si">#{</span><span class="n">child_pid</span><span class="si">}</span><span class="s2">"</span>
<span class="c1"># =&gt; parent process. pid: 79055, child pid: 79602
</span>
<span class="c1"># 親プロセスでの処理
</span><span class="c1"># ...
</span>
<span class="c1"># 子プロセスの終了を待って終了。
</span><span class="no">Process</span><span class="p">.</span><span class="nf">waitpid</span><span class="p">(</span>child_pid<span class="p">)</span>
</code></pre>
<p>
[SEE_ALSO] <a href="../method/-i-o/s/popen.html">IO.popen</a>,<a href="../method/-i-o/s/pipe.html">IO.pipe</a>,<a href="../method/-kernel/m/at_exit.html">Kernel.#at_exit</a>,<a href="../method/-kernel/m/exit=21.html">Kernel.#exit!</a>, <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fork.html">fork(2)</a>
</p>
</dd>


<dt class="method-heading" id="M_FORMAT"><code>sprintf(format, *arg) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/format.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-format">rdoc</a>]</span></dt>
<dt class="method-heading"><code>format(format, *arg) -&gt; String</code></dt>
<dd class="method-description">
<p>
format 文字列を C 言語の sprintf と同じように解釈し、引数をフォーマットした文字列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] format:</dt>
<dd>
フォーマット文字列です。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
フォーマットされる引数です。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/printf.html">Kernel.#printf</a>,<a href="../method/-time/i/strftime.html">Time#strftime</a>,<a href="../method/-date/s/strptime.html">Date.strptime</a>
</p>
<h3 >sprintf フォーマット</h3>
<p>
Ruby の sprintf フォーマットは基本的に C 言語の <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/sprintf.html">sprintf(3)</a>
のものと同じです。ただし、short や long などの C 特有の型に対する修飾子がないこと、2進数の指示子(%b, %B)が存在すること、sprintf のすべての方言をサポートしていないこと(%': 3桁区切り)などの違いがあります。
</p>
<p>
Ruby には整数の大きさに上限がないので、%b, %B, %o, %x, %X
に負の数を与えると (左側に無限に1が続くとみなせるので)
..f のような表示をします。絶対値に符号を付けた形式で出力するためには %+x、% x のように指定します。
</p>
<p>
以下は sprintf フォーマットの書式です。[] で囲まれた部分は省略可能であることを示しています。
</p>
<pre>
%[nth$][フラグ][幅][.精度]指示子
%[&lt;name&gt;][フラグ][幅][.精度]指示子
</pre>
<p>
`%' 自身を出力するには `%%' とします。
</p>
<p>
以下それぞれの要素に関して説明します。
</p>
<h3 >フラグ</h3>
<p>
フラグには #, +, ' '(スペース), -, 0 の5種類があります。
</p>
<dl>
<dt>#</dt>
<dd>
<p>
2進、8進、16進の指示子(b, B, o, x, X) ではそれぞれプレフィックスとして &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; を付加します。
C 言語と同様引数が 0 の場合にはプレフィックスが付加されません。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0b1010&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#B</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0B1010&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#b</span><span class="s2">"</span>, <span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;0&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0xa&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#X</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0XA&quot;
</span></code></pre>
<p>
浮動小数点数 (f, e, E, g, G) に対しては必ず出力に&quot;.&quot;をつけます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.0f</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#.0f</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10.&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.0e</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1e+01&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#.0e</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.e+01&quot;
</span></code></pre>
<p>
また g, G では上記に加えて末尾の余分な0が残ります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.05g</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#.05g</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10.000&quot;
</span></code></pre>
</dd>
<dt>+</dt>
<dd>
<p>
出力文字列を符号付きにします。特に正の数では`+'が付加されます。数値の指示子
(d, i, b, B, o, x, X, u, f, e, E, g, G)
に対してだけ意味を持ちます。また、特に b, B, o, x, X, u に対しては、負数に対して &quot;-&quot;
を付加することを示します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;+1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;..f&quot;  # &quot;..&quot; は無限に f が続くことを表している
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;-1&quot;
</span></code></pre>
</dd>
<dt>' '(スペース)</dt>
<dd>
<p>
`+' と同じですが正の符号 `+' の代わりに空白を用います。数値の指示子
(d, i, b, B, o, x, X, u, f, e, E, g, G)
に対してだけ意味を持ちます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;+1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">% d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot; 1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;..f&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">% x</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot; 1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">% x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;-1&quot;
</span></code></pre>
</dd>
<dt>-</dt>
<dd>
<p>
出力を左詰めにします。幅の指定がなければ意味がありません。
</p>
</dd>
<dt>0</dt>
<dd>
<p>
出力が右詰めの場合に余った部分に空白の代わりに &quot;0&quot; を詰めます。
</p>
<p>
数値の指示子の一部(d, i, b, B, o, x, X, u, f, g, G)に対してだけ意味を持ちます(e, E には意味がない)
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%010d</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;0000000010&quot;
</span></code></pre>
<p>
`#' と一緒に指定した場合の出力は以下のようになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#010x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;0x0000000a&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#010o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;0000000012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#010b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;0b00001010&quot;
</span></code></pre>
<p>
これは、以下と同じです。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.8x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0x0000000a&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.9o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0000000012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.8b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0b00001010&quot;
</span></code></pre>
<p>
通常は、以下のようになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;       0xa&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;       012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;    0b1010&quot;
</span></code></pre>
</dd>
</dl>
<h3 >幅</h3>
<p>
0以外の数字で始まる数字列は幅指定になります。幅は生成文字列の長さを示します。後述の精度の値によらずこの幅分だけの文字列が生成されます。
</p>
<p>
幅の指定はフラグで付与される &quot; &quot;, &quot;+&quot;,
&quot;-&quot;, &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; の長さも考慮されます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+5d</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;  +11&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+-5d</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span> <span class="c1">#=&gt; &quot;+11  &quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+05d</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span> <span class="c1">#=&gt; &quot;+0011&quot;
</span></code></pre>
<p>
幅は「最低限必要な幅」の指定になります。結果の文字列が指定した幅を超える場合は幅の指定は無効になります。
</p>
<p>
幅として `*' を指定すると幅の値を引数から得ることになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#05x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0x00a&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#0*x</span><span class="s2">"</span>, <span class="mi">5</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;0x00a&quot;
</span></code></pre>
<h3 >精度</h3>
<p>
&quot;.&quot; の後に続く数字列は精度を表します(&quot;.&quot; のみの場合 &quot;.0&quot; と同じです)。精度は整数の指示子
(d, i, b, B, o, x, X, u)
に対しては、数値列部分の長さを意味します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5d</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;     00001&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.5x</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;   0x00001&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+10.5x</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;    +00001&quot;
</span></code></pre>
<p>
浮動小数点数の指示子
(f)
に対しては小数部の桁数を意味します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5f</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;   1.00000&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5f</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;  10.00000&quot;
</span></code></pre>
<p>
浮動小数点数の指示子
(e, E, g, G)
に対しては有効桁数を意味します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5e</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;1.00000e+00&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5e</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;1.00000e+01&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.5g</span><span class="s2">"</span>,  <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;        10&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#10.5G</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;    10.000&quot;
</span></code></pre>
<p>
文字列の指示子(s, p)
に対しては引数の文字列のうち指定した数を超える分を切り捨てます。幅と精度を同じ値にすれば、どのような引数に対してもその長さだけの出力を行うことになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10.2s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;        fo&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%5.5s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; &quot;  foo&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%5.5s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;fooba&quot;
</span></code></pre>
<p>
精度として `*' を指定すると精度の値を引数から得ることになります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.5s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;fooba&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.*s</span><span class="s2">"</span>, <span class="mi">5</span>, <span class="s2">"</span><span class="s2">foobar</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; &quot;fooba&quot;
</span></code></pre>
<h3 >指示子</h3>
<p>
指示子は引数の型の解釈を示します。指示子を省略することはできません。指示子には大きく分けて
</p>
<ul>
<li>文字列を表す指示子: c, s, p</li>
<li>整数を表す指示子: d, i, u, b, B, o, x, X,</li>
<li>浮動小数点数を表す指示子: f, g, e, E, G</li>
</ul>
<p>
があります
</p>
<dl>
<dt>c</dt>
<dd>
<p>
引数の数値(0〜255)を文字コードとみなして対応する文字を出力します。引数が数値以外のオブジェクトの場合 to_int メソッドによる変換を試みます。引数として範囲内の一文字の文字列も受けつけます。文字そのものを出力します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%c</span><span class="s2">"</span>, <span class="mi">97</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;a&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%c</span><span class="s2">"</span>, <span class="s1">'a'</span><span class="p">)</span> <span class="c1">#=&gt; &quot;a&quot;
</span></code></pre>
<p>
フラグ `-' と幅 の指定だけが意味を持ちます。
</p>
</dd>
<dt>s</dt>
<dd>
<p>
文字列を出力します。
</p>
<p>
引数が <a href="../class/-string.html">String</a> オブジェクトでなければ to_s メソッドにより文字列化したものを引数として扱います。
</p>
</dd>
<dt>p</dt>
<dd>
<p>
<a href="../method/-object/i/inspect.html">Object#inspect</a> の結果を出力します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%s</span><span class="s2">"</span>, <span class="sr">/e+/</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;(?-mix:e+)&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%p</span><span class="s2">"</span>, <span class="sr">/e+/</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;/e+/&quot;
</span></code></pre>
</dd>
<dt>d</dt>
<dt>i</dt>
<dd>
<p>
引数の数値を10進表現の整数として出力します。
</p>
<p>
引数が整数でなければ関数 <a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a> と同じ規則で整数に変換されます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;-1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="mf">3.1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;3&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d</span><span class="s2">"</span>, <span class="s1">'0b1010'</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10&quot;
</span></code></pre>
</dd>
<dt>u</dt>
<dd>
<p>
引数の数値を符号なし整数とみなして10進表現の整数として出力します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%u</span><span class="s2">"</span>, <span class="s1">'0b1010'</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%u</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;-1&quot;
</span></code></pre>
</dd>
<dt>b</dt>
<dt>B</dt>
<dt>o</dt>
<dt>x</dt>
<dt>X</dt>
<dd>
<p>
整数をそれぞれ2進、2進(大文字)、8進、16進、16進(大文字)表現の文字列で出力します。
</p>
<p>
`#' フラグを指定すれば &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; を先頭に付加します。
</p>
<p>
`+', ` ' フラグがない場合、負の数には &quot;..&quot; が先頭(`#' フラグがあれば
&quot;0x&quot; などの後)に付加されます。これは最上位桁の文字が無限に続くことを意味し、2の補数表現で負の数を表しています。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#b</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0b1010&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#B</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0B1010&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;012&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#x</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0xa&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#X</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0XA&quot;
</span>
<span class="c1"># 負の数に対して &quot;..&quot; が付加されます
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#b</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0b..1&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#o</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0..7&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%#x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;0x..f&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%10x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;       ..f&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%-10x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;..f       &quot;
</span>
<span class="c1"># ruby 1.9.1 以降では「精度」を指定した場合も、&quot;..&quot; は付加されます 
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%.10x</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;..ffffffff&quot; 
</span></code></pre>
</dd>
<dt>f</dt>
<dt>e</dt>
<dt>E</dt>
<dt>g</dt>
<dt>G</dt>
<dt>a</dt>
<dt>A</dt>
<dd>
<p>
f は小数点表現(xxx.xxx)で数値を出力します。
</p>
<p>
e は指数表現(x.xxxe+xx)で数値を出力します。
</p>
<p>
g は 指数が -4 より小さいか精度以上の場合に e と同じ出力を、それ以外では f と同じ出力を行います。ただし、小数部の末尾の0は取り除かれます。
</p>
<p>
a, A は指数表現の16進数(&quot;-h.hhh±pd&quot;) で数値を出力します。ただし、<a href="../method/-float/c/-i-n-f-i-n-i-t-y.html">Float::INFINITY</a>、<a href="../method/-float/c/-n-a-n.html">Float::NAN</a> はそれぞれ 'Inf'、'NaN' になります。詳しくは <a class="external" href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/40650">[ruby-dev:40650]</a> を参照してください。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%a</span><span class="s2">"</span>, <span class="o">-</span><span class="mf">0.0</span><span class="p">)</span>            <span class="c1"># =&gt; &quot;-0x0p+0&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%a</span><span class="s2">"</span>, <span class="mf">729.0</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>        <span class="c1"># =&gt; &quot;0x1.239999999999ap+6&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%a</span><span class="s2">"</span>, <span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span><span class="p">)</span> <span class="c1"># =&gt; &quot;Inf&quot;
</span></code></pre>
<p>
大文字の指示子(E, G)は出力のアルファベットを大文字にします。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>, <span class="mf">1.0</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.000000&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%e</span><span class="s2">"</span>, <span class="mf">1.0</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.000000e+00&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%g</span><span class="s2">"</span>, <span class="mf">1.0</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>, <span class="mf">10.1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10.100000&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%e</span><span class="s2">"</span>, <span class="mf">10.1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.010000e+01&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%g</span><span class="s2">"</span>, <span class="mf">10.1</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10.1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%g</span><span class="s2">"</span>, <span class="mi">10</span> <span class="o">**</span> <span class="mi">6</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;1e+06&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%g</span><span class="s2">"</span>, <span class="mi">10</span> <span class="o">**</span> <span class="o">-</span><span class="mi">5</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1e-05&quot;
</span></code></pre>
<p>
精度の省略値は 6 です。
</p>
<p>
無限大、NaN(Not a Number) に対する出力は以下のとおりです。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>,  <span class="mf">1.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;inf&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>, <span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;-inf&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%f</span><span class="s2">"</span>,  <span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;nan&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%E</span><span class="s2">"</span>,  <span class="mf">1.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;INF&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%E</span><span class="s2">"</span>, <span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;-INF&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%E</span><span class="s2">"</span>,  <span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;NAN&quot;
</span></code></pre>
<p>
f, e, E, g, G に関しては <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/sprintf.html">sprintf(3)</a> の結果を利用しています。従って出力結果は実際にはシステムに依存することになります。
</p>
</dd>
</dl>
<h3 >引数指定</h3>
<p>
利用頻度が低いので最後に説明します。
</p>
<dl>
<dt>nth$</dt>
<dd>
<p>
nth 番目の引数のフォーマットを行うことを示します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d, %x, %o</span><span class="s2">"</span>, <span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1, 2, 3&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%3$d, %2$x, %1$o</span><span class="s2">"</span>, <span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="p">)</span> <span class="c1">#=&gt; &quot;3, 2, 1&quot;
</span>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%1$d, %1$x, %1$o</span><span class="s2">"</span>, <span class="mi">10</span><span class="p">)</span> <span class="c1">#=&gt; &quot;10, a, 12&quot;
</span></code></pre>
<p>
状況によってフォーマットを変えたいが引数の順序を変えたくない場合に使用します。
</p>
<pre class="highlight ruby">
<code>
<span class="k">case</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'LC_TIME'</span><span class="p">]</span>
<span class="k">when</span> <span class="sr">/^ja_JP/</span>
  fmt <span class="o">=</span> <span class="s2">"</span><span class="s2">%1$d年%2$d月%3$d日</span><span class="s2">"</span>
<span class="k">else</span>
  fmt <span class="o">=</span> <span class="s2">"</span><span class="s2">%2$02d/%03$2d/%1$02d</span><span class="s2">"</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span>fmt, <span class="mi">1</span>, <span class="mi">4</span>, <span class="mi">22</span><span class="p">)</span> <span class="c1">#=&gt; &quot;04/22/01&quot;
</span></code></pre>
<p>
&quot;*&quot; の後に指定することで幅や精度を引数で指定することもできます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%5.2f</span><span class="s2">"</span>, <span class="mi">1</span><span class="p">)</span>              <span class="c1">#=&gt; &quot; 1.00&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%*.*f</span><span class="s2">"</span>, <span class="mi">5</span>, <span class="mi">2</span>, <span class="mi">1</span><span class="p">)</span>        <span class="c1">#=&gt; &quot; 1.00&quot;
</span><span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%1$*2$.*3$f</span><span class="s2">"</span>, <span class="mi">1</span>, <span class="mi">5</span>, <span class="mi">2</span><span class="p">)</span>  <span class="c1">#=&gt; &quot; 1.00&quot;
</span></code></pre>
</dd>
<dt>%&lt;name&gt;</dt>
<dd>
<p>
Symbol のインスタンス name をキーとする Hash を引数にした場合、対応する値をフォーマットして参照します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'%&lt;foo&gt;f : %&lt;bar&gt;+d'</span>, <span class="ss">foo:</span> <span class="mi">1</span>, <span class="ss">bar:</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1.000000 : +2&quot;
</span></code></pre>
</dd>
<dt>%{name}</dt>
<dd>
<p>
Symbol のインスタンス name をキーとする Hash を引数にした場合、対応する値をフォーマットせずに参照します。幅や精度を指定するために使用することができます。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'%{foo}f : %{bar}+d'</span>, <span class="ss">foo:</span> <span class="mi">1</span>, <span class="ss">bar:</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">#=&gt; &quot;1f : 2+d&quot;
</span></code></pre>
</dd>
</dl>
</dd>


<dt class="method-heading" id="M_GETS"><code>gets(rs = $/) -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/m/gets.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-gets">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-a-r-g-f.html">ARGF</a>から一行読み込んで、それを返します。行の区切りは引数 rs で指定した文字列になります。
</p>
<p>
rs に nil を指定すると行区切りなしとみなしてファイルの内容をすべて読み込みます。ARGVに複数のファイル名が存在する場合は1度に1ファイルずつ読み込みます。空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします
(パラグラフモード)。
</p>
<p>
読み込んだ文字列は組み込み変数 <a href="../method/-kernel/v/_.html">$_</a> にもセットされます。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りとなる文字列です。
</dd>
<dt>[RETURN]</dt>
<dd>
ファイルの終り(EOF)に到達した時、 nil を返します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
読み込みに失敗した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">main.rb</span>
<code>
<span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span> <span class="o">&lt;&lt;</span> <span class="s1">'c.txt'</span>
<span class="nb">p</span> <span class="nb">gets</span> <span class="c1">#=&gt; &quot;hello\n&quot;
</span><span class="nb">p</span> <span class="nb">gets</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span> <span class="c1">#=&gt; &quot;it\ncommon\n&quot;
</span><span class="nb">p</span> <span class="nb">gets</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; &quot;ARGF\n\n&quot;
</span><span class="nb">p</span> <span class="nb">gets</span><span class="p">(</span><span class="s1">'、'</span><span class="p">)</span> <span class="c1">#=&gt; &quot;スクリプトに指定した引数 (Object::ARGV を参照) をファイル名と\nみなして、&quot;
</span><span class="nb">p</span> <span class="nb">gets</span> <span class="c1">#=&gt; &quot;それらのファイルを連結した 1 つの仮想ファイルを表すオブジェクトです。 \n&quot;
</span><span class="nb">p</span> <span class="nb">gets</span> <span class="c1">#=&gt; nil
</span><span class="nb">p</span> <span class="nb">readline</span> <span class="c1"># end of file reached (EOFError)
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">b.txt</span>
<code>
hello
it
common
</code></pre>
<pre class="highlight ruby">
<span class="caption">b.txt</span>
<code>
<span class="no">ARGF</span>
<span class="c1"># スクリプトに指定した引数 (Object::ARGV を参照) をファイル名と
</span><span class="c1"># みなして、それらのファイルを連結した 1 つの仮想ファイルを表すオブジェクトです。
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>,<a href="../class/-a-r-g-f.html">ARGF</a>,<a href="../method/-kernel/m/readlines.html">Kernel.#readlines</a>,<a href="../method/-kernel/m/readline.html">Kernel.#readline</a>
</p>
</dd>


<dt class="method-heading" id="M_GLOBAL_VARIABLES"><code>global_variables -&gt; [Symbol]</code><span class="permalink">[<a href="../method/-kernel/m/global_variables.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-global_variables">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
プログラム中で定義されているグローバル変数(`$'で始まる変数)名の配列を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="nb">global_variables</span> <span class="c1">#=&gt; [:$;, :$-F, :$@, ... ]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/local_variables.html">Kernel.#local_variables</a>,<a href="../method/-object/i/instance_variables.html">Object#instance_variables</a>,<a href="../method/-module/s/constants.html">Module.constants</a>,<a href="../method/-module/i/constants.html">Module#constants</a>,<a href="../method/-module/i/class_variables.html">Module#class_variables</a>
</p>
</dd>


<dt class="method-heading" id="M_GSUB"><code>gsub(pattern, replace) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/gsub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-gsub">rdoc</a>]</span></dt>
<dt class="method-heading"><code>gsub(pattern) {|matched| ... } -&gt; String</code></dt>
<dt class="method-heading"><code>gsub(pattern) -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
$_.gsub とほぼ同じですが、置換が発生したときは、$_の内容を置き換える点が異なります。コマンドラインオプションで -p または -n を指定した時のみ定義されます。
</p>
<p>
暗号的になりすぎるきらいがあるため、このメソッドの使用は推奨されていません。今後はより明示的な $_.gsub を使ってください。
</p>
<p>
$_.gsub とこのメソッド gsub は以下の点で違いがあります。
</p>
<ul>
<li>gsub は $_ の値をコピーして、コピーの方を更新し、
$_ に再代入します。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字列と置き換える文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$_</span>                <span class="c1"># =&gt; &quot;test\n&quot;
</span><span class="nb">gsub</span><span class="p">(</span><span class="sr">/es/</span>, <span class="s1">'!!'</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;t!!t\n&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/gsub.html">String#gsub</a>,<a href="../method/-kernel/v/_.html">$_</a>
</p>
</dd>


<dt class="method-heading" id="M_LAMBDA"><code>proc { ... } -&gt; Proc</code><span class="permalink">[<a href="../method/-kernel/m/lambda.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-lambda">rdoc</a>]</span></dt>
<dt class="method-heading"><code>lambda { ... } -&gt; Proc</code></dt>
<dt class="method-heading"><code>proc -&gt; Proc</code></dt>
<dt class="method-heading"><code>lambda -&gt; Proc</code></dt>
<dd class="method-description">
<p>
与えられたブロックから手続きオブジェクト (<a href="../class/-proc.html">Proc</a> のインスタンス)
を生成して返します。<a href="../method/-proc/s/new.html">Proc.new</a> に近い働きをします。
</p>
<p>
ブロックが指定されなければ、呼び出し元のメソッドで指定されたブロックを手続きオブジェクトとして返します。呼び出し元のメソッドがブロックなしで呼ばれると <a href="../class/-argument-error.html">ArgumentError</a> 例外が発生します。
</p>
<p>
ただし、ブロックを指定しない呼び出しは推奨されていません。呼び出し元のメソッドで指定されたブロックを得たい場合は明示的に &amp; 引数でうけるべきです。
</p>
<p>
ブロックを指定しない lambda は Ruby 2.6 までは警告メッセージ「warning: tried to create Proc object without a block」が出力され、Ruby 2.7 では
<a href="../class/-argument-error.html">ArgumentError</a> (tried to create Proc object without a block)
が発生します。
</p>
<p>
ブロックを指定しない proc は、Ruby 2.7 では
<a href="../method/-kernel/v/-v-e-r-b-o-s-e.html">$VERBOSE</a> = true のときには警告メッセージ「warning: Capturing the given block using Proc.new is deprecated; use `&amp;block` instead」が出力され、Ruby 3.0 では
<a href="../class/-argument-error.html">ArgumentError</a> (tried to create Proc object without a block)
が発生します。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
スタック上にブロックがないのにブロックを省略した呼び出しを行ったときに発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span> <span class="o">&amp;</span>block
  <span class="nb">lambda</span><span class="p">(</span><span class="o">&amp;</span>block<span class="p">)</span>
<span class="k">end</span>

it <span class="o">=</span> foo<span class="p">{</span><span class="nb">p</span> <span class="mi">12</span><span class="p">}</span>
it<span class="p">.</span><span class="nf">call</span> <span class="c1">#=&gt; 12
</span></code></pre>
<p>
[SEE_ALSO] <a href="../class/-proc.html">Proc</a>,<a href="../method/-proc/s/new.html">Proc.new</a>
</p>
<h3 id='should_use_next'>手続きを中断して値を返す</h3>
<p>
手続きオブジェクトを中断して、呼出し元(呼び出しブロックでは yield、それ以外では <a href="../method/-proc/i/call.html">Proc#call</a>)
へジャンプし値を返すには next を使います。break や return ではありません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span>
  f <span class="o">=</span> <span class="no">Proc</span><span class="p">.</span><span class="nf">new</span><span class="p">{</span>
    <span class="k">next</span> <span class="mi">1</span>
    <span class="mi">2</span>              <span class="c1"># この行に到達することはない
</span>  <span class="p">}</span>
<span class="k">end</span>

<span class="nb">p</span> foo<span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">call</span>       <span class="c1">#=&gt; 1
</span></code></pre>
<h3 id='block'>Proc オブジェクトをブロック付きメソッド呼び出しに使う</h3>
<p>
ブロック付きメソッドに対して Proc オブジェクトを `&amp;' を指定して渡すと呼び出しブロックのように動作します。しかし、厳密には以下の違いがあります。これらは、Proc オブジェクトが呼び出しブロックとして振舞う際の制限です。
</p>
<pre class="highlight ruby">
<span class="caption">問題なし</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="k">break</span> <span class="p">}</span>
</code></pre>
<pre class="highlight ruby">
<span class="caption">LocalJumpError が発生します。</span>
<code>
pr <span class="o">=</span> <span class="no">Proc</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="k">break</span> <span class="p">}</span>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">each</span><span class="p">(</span><span class="o">&amp;</span>pr<span class="p">)</span>
</code></pre>
<h3 id='lambda_proc'>lambda と proc と Proc.new とイテレータの違い</h3>
<p>
<a href="../method/-kernel/m/lambda.html">Kernel.#lambda</a> と <a href="../method/-proc/s/new.html">Proc.new</a> はどちらも <a href="../class/-proc.html">Proc</a> クラスのインスタンス(手続きオブジェクト)を生成しますが、生成された手続きオブジェクトはいくつかの場面で挙動が異なります。 lambda の生成する手続きオブジェクトのほうがよりメソッドに近い働きをするように設計されています。
</p>
<p>
<a href="../method/-kernel/m/proc.html">Kernel.#proc</a> は Proc.new と同じになります。引数に &amp; を付けることで手続きオブジェクト化したブロックは、Proc.new で生成されたそれと同じように振る舞います。
</p>
<h4 >引数の扱い</h4>
<p>
lambda のほうがより厳密です。引数の数が違っていると（メソッドのように）エラーになります。
Proc.new は引数を多重代入に近い扱い方をします。
</p>
<pre class="highlight ruby">
<span class="caption">Proc.new は引数の数が違っていてもエラーにならない</span>
<code>
b <span class="o">=</span> <span class="no">Proc</span><span class="p">.</span><span class="nf">new</span><span class="p">{</span><span class="o">|</span>a,b,c<span class="o">|</span>
  <span class="nb">p</span> a,b,c
<span class="p">}</span>
b<span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="mi">2</span>, <span class="mi">4</span><span class="p">)</span>
<span class="c1">#=&gt; 2
</span>    <span class="mi">4</span>
    <span class="k">nil</span>
</code></pre>
<pre class="highlight ruby">
<span class="caption">lambda は引数の数が違うとエラーになる</span>
<code>
b <span class="o">=</span> <span class="nb">lambda</span><span class="p">{</span><span class="o">|</span>a,b,c<span class="o">|</span>
  <span class="nb">p</span> a,b,c
<span class="p">}</span>
b<span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="mi">2</span>, <span class="mi">4</span><span class="p">)</span>
<span class="c1"># =&gt; wrong number of arguments (given 2, expected 3)
</span></code></pre>
<p>
<a href="../doc/spec=2fcall.html#block_arg">メソッド呼び出し(super・ブロック付き・yield)/ブロックパラメータの挙動</a> も参照してください。
</p>
<h4 >ジャンプ構文の挙動の違い</h4>
<p>
return と break は、lambda と Proc.new では挙動が異なります。例えば return を行った場合、lambda では手続きオブジェクト自身を抜けますが、
Proc.new では手続きオブジェクトを囲むメソッドを抜けます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">test_proc</span>
  f <span class="o">=</span> <span class="no">Proc</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="k">return</span> <span class="ss">:from_proc</span> <span class="p">}</span>
  f<span class="p">.</span><span class="nf">call</span>
  <span class="k">return</span> <span class="ss">:from_method</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">test_lambda</span>
  f <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span> <span class="k">return</span> <span class="ss">:from_lambda</span> <span class="p">}</span>
  f<span class="p">.</span><span class="nf">call</span>
  <span class="k">return</span> <span class="ss">:from_method</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">test_block</span>
  tap <span class="p">{</span> <span class="k">return</span> <span class="ss">:from_block</span> <span class="p">}</span>
  <span class="k">return</span> <span class="ss">:from_method</span>
<span class="k">end</span>

<span class="nb">p</span> test_proc<span class="p">(</span><span class="p">)</span>   <span class="c1">#=&gt; :from_proc
</span><span class="nb">p</span> test_lambda<span class="p">(</span><span class="p">)</span> <span class="c1">#=&gt; :from_method
</span><span class="nb">p</span> test_block<span class="p">(</span><span class="p">)</span>  <span class="c1">#=&gt; :from_block
</span></code></pre>
<p>
以下の表は、手続きオブジェクトの実行を上の例と同じように、手続きオブジェクトが定義されたのと同じメソッド内で行った場合の結果です。
</p>
<pre>
               return                          next                        break
Proc.new   メソッドを抜ける            手続きオブジェクトを抜ける   例外が発生する
proc       メソッドを抜ける            手続きオブジェクトを抜ける   例外が発生する
lambda     手続きオブジェクトを抜ける  手続きオブジェクトを抜ける   手続きオブジェクトを抜ける
イテレータ メソッドを抜ける            手続きオブジェクトを抜ける   手続きオブジェクトを抜ける
</pre>
<h3 id='orphan'>orphan な手続きオブジェクトの挙動</h3>
<p>
Proc を生成したメソッドから脱出した後、手続きオブジェクトからの
return, break は例外 <a href="../class/-local-jump-error.html">LocalJumpError</a> を発生させます。ただし、上でも説明した通り lambda で生成した手続きオブジェクトはメソッドと同じように振る舞うことを意図されているため、例外 <a href="../class/-local-jump-error.html">LocalJumpError</a> は発生しません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span>
  <span class="no">Proc</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
<span class="k">end</span>

foo<span class="p">.</span><span class="nf">call</span>
<span class="c1"># =&gt; in `call': return from proc-closure (LocalJumpError)
</span></code></pre>
<p>
以下の表は、手続きオブジェクトの実行を上の例と同じように、手続きオブジェクトが定義されたメソッドを脱出してから行った場合の結果です。
</p>
<pre>
               return                          next                        break
Proc.new   例外が発生する              手続きオブジェクトを抜ける   例外が発生する
proc       例外が発生する              手続きオブジェクトを抜ける   例外が発生する
lambda     手続きオブジェクトを抜ける  手続きオブジェクトを抜ける   手続きオブジェクトを抜ける
</pre>
</dd>


<dt class="method-heading" id="M_LOAD"><code>load(file, priv = false) -&gt; true</code><span class="permalink">[<a href="../method/-kernel/m/load.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-load">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Ruby プログラム file をロードして実行します。再ロード可能です。
</p>
<p>
file が絶対パスのときは file からロードします。
file が相対パスのときは組み込み変数 <a href="../method/-kernel/v/=3a.html">$:</a>
に示されるパスとカレントディレクトリを順番に探し、最初に見付かったファイルをロードします。このとき、<a href="../method/-kernel/v/=3a.html">$:</a> の要素文字列の先頭文字が
`~' (チルダ) だと、環境変数 HOME の値に展開されます。また `~USER' はそのユーザのホームディレクトリに展開されます。
</p>
<p>
ロードに成功した場合は true を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] file:</dt>
<dd>
ファイル名の文字列です。
</dd>
<dt class='method-param'>[PARAM] priv:</dt>
<dd>
真のとき、ロード・実行は内部的に生成される無名モジュールをトップレベルとして行われ、グローバルな名前空間を汚染しません。
</dd>
<dt>[EXCEPTION] LoadError:</dt>
<dd>
ロードに失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/require.html">Kernel.#require</a>
</p>
<h3 >require と load の違い</h3>
<p>
<a href="../method/-kernel/m/require.html">Kernel.#require</a> は同じファイルは一度だけしかロードしませんが、
<a href="../method/-kernel/m/load.html">Kernel.#load</a> は無条件にロードします。また、require は拡張子.rb や .so を自動的に補完しますが、
load は行いません。
require はライブラリのロード、load は設定ファイルの読み込みなどに使うのが典型的な用途です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">load</span> <span class="s2">"</span><span class="si">#{</span><span class="no">ENV</span><span class="p">[</span><span class="s1">'HOME'</span><span class="p">]</span><span class="si">}</span><span class="s2">/.myapprc</span><span class="s2">"</span>
<span class="nb">load</span> <span class="s2">"</span><span class="s2">/etc/myapprc</span><span class="s2">"</span>
</code></pre>
<p>
なお、特定のディレクトリからファイルをロードしたい場合、
load 'filename' とするのは不適切です。必ず絶対パスを使ってください。
</p>
</dd>


<dt class="method-heading" id="M_LOCAL_VARIABLES"><code>local_variables -&gt; [Symbol]</code><span class="permalink">[<a href="../method/-kernel/m/local_variables.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-local_variables">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで定義されているローカル変数名の配列を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
yuyu <span class="o">=</span> <span class="mi">0</span>
<span class="nb">p</span> <span class="nb">local_variables</span> <span class="c1">#=&gt; [:yuyu]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/global_variables.html">Kernel.#global_variables</a>,<a href="../method/-object/i/instance_variables.html">Object#instance_variables</a>,<a href="../method/-module/s/constants.html">Module.constants</a>,<a href="../method/-module/i/constants.html">Module#constants</a>,<a href="../method/-module/i/class_variables.html">Module#class_variables</a>
</p>
</dd>


<dt class="method-heading" id="M_LOOP"><code>loop -&gt; Enumerator</code><span class="permalink">[<a href="../method/-kernel/m/loop.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-loop">rdoc</a>]</span></dt>
<dt class="method-heading"><code>loop { ... } -&gt; object | nil</code></dt>
<dd class="method-description">
<p>
(中断されない限り)永遠にブロックの評価を繰り返します。ブロックが指定されなければ、代わりに <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">loop</span> <span class="k">do</span>
  <span class="nb">print</span> <span class="s2">"</span><span class="s2">Input: </span><span class="s2">"</span>
  line <span class="o">=</span> <span class="nb">gets</span>
  <span class="k">break</span> <span class="k">if</span> <span class="o">!</span>line <span class="k">or</span> line <span class="o">=~</span> <span class="sr">/^qQ/</span>
  <span class="c1"># ...
</span><span class="k">end</span>
</code></pre>
<p>
与えられたブロック内で <a href="../class/-stop-iteration.html">StopIteration</a> を <a href="../method/-kernel/m/raise.html">Kernel.#raise</a> するとループを終了して <a href="../class/-enumerator.html">Enumerator</a> が最後に返した値を返します。ループを終了させる場合、通常は break を使用してください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
enum <span class="o">=</span> <span class="no">Enumerator</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="o">|</span>y<span class="o">|</span>
  y <span class="o">&lt;&lt;</span> <span class="s2">"</span><span class="s2">one</span><span class="s2">"</span>
  y <span class="o">&lt;&lt;</span> <span class="s2">"</span><span class="s2">two</span><span class="s2">"</span>
  <span class="ss">:ok</span>
<span class="p">}</span>

result <span class="o">=</span> <span class="nb">loop</span> <span class="p">{</span>
  <span class="nb">puts</span> enum<span class="p">.</span><span class="nf">next</span>
<span class="p">}</span> <span class="c1"># =&gt; :ok
</span></code></pre>
<dl>
<dt>[RETURN]</dt>
<dd>
break の引数など、ループ脱出時の値を返します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="M_OPEN"><code>open(name, mode = 'r', perm = nil, options = {}) -&gt; StringIO | Tempfile | IO</code><span class="permalink">[<a href="../method/-kernel/m/open.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-open">rdoc</a>]</span> <span class="kindinfo">[redefined by <a href="../library/open=2duri.html">open-uri</a>]</span>
</dt>
<dt class="method-heading"><code>open(name, mode = 'r', perm = nil, options = {}) {|ouri| ...} -&gt; object</code> <span class="kindinfo">[redefined by <a href="../library/open=2duri.html">open-uri</a>]</span>
</dt>
<dd class="method-description">
<p>
name が http:// や ftp:// で始まっている文字列なら URI のリソースを取得した上で <a href="../class/-string-i-o.html">StringIO</a> オブジェクトまたは <a href="../class/-tempfile.html">Tempfile</a> オブジェクトとして返します。返されるオブジェクトは <a href="../class/-open-u-r-i=3a=3a-meta.html">OpenURI::Meta</a> モジュールで extend されています。
</p>
<p>
name に open メソッドが定義されている場合は、*rest を引数として渡し
name.open(*rest, &amp;block) のように name の open メソッドが呼ばれます。
</p>
<p>
これ以外の場合は、name はファイル名として扱われ、従来の
<a href="../method/-kernel/m/open.html">Kernel.#open</a>(name, *rest) が呼ばれます。
</p>
<p>
ブロックを与えた場合は上の場合と同様、name が http:// や ftp:// で始まっている文字列なら URI のリソースを取得した上で <a href="../class/-string-i-o.html">StringIO</a> オブジェクトまたは <a href="../class/-tempfile.html">Tempfile</a> オブジェクトを引数としてブロックを評価します。後は同様です。引数のオブジェクトは <a href="../class/-open-u-r-i=3a=3a-meta.html">OpenURI::Meta</a> モジュールで extend されています。
</p>
<dl>
<dt class='method-param'>[PARAM] name:</dt>
<dd>
オープンしたいリソースを文字列で与えます。
</dd>
<dt class='method-param'>[PARAM] mode:</dt>
<dd>
モードを文字列で与えます。<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同じです。
</dd>
<dt class='method-param'>[PARAM] perm:</dt>
<dd>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/open.html">open(2)</a> の第 3 引数のように、ファイルを生成する場合のファイルのパーミッションを整数で指定します。<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同じです
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
ハッシュを与えます。詳しくは <a href="../method/-open-u-r-i/s/open_uri.html">OpenURI.open_uri</a> を参照してください。
</dd>
<dt>[EXCEPTION] OpenURI::HTTPError:</dt>
<dd>
対象となる URI のスキームが http であり、かつリソースの取得に失敗した時に発生します。
</dd>
<dt>[EXCEPTION] Net::FTPError:</dt>
<dd>
対象となる URI のスキームが ftp であり、かつリソースの取得に失敗した時に
<a href="../class/-net=3a=3a-f-t-p-error.html">Net::FTPError</a> のサブクラスが発生します。詳しくは <a href="../library/net=2fftp.html">net/ftp</a>
を参照して下さい。
</dd>
</dl>
<p>
例:
</p>
<pre>
require 'open-uri'
sio = open('http://www.example.com') { |sio|
  p sio.is_a?(OpenURI::Meta) # =&gt; true
  p sio.content_type
  puts sio.read
}
</pre>
<p>
[SEE_ALSO] <a href="../method/-open-u-r-i/s/open_uri.html">OpenURI.open_uri</a>, <a href="../method/-u-r-i/s/open.html">URI.open</a>
</p>
</dd>


<dt class="method-heading" id="M_OPEN"><code>open(file, mode_enc = &quot;r&quot;, perm = 0666) -&gt; IO</code><span class="permalink">[<a href="../method/-kernel/m/open.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-open">rdoc</a>]</span></dt>
<dt class="method-heading"><code>open(file, mode_enc = &quot;r&quot;, perm = 0666) {|io| ... } -&gt; object</code></dt>
<dd class="method-description">
<p>
file をオープンして、<a href="../class/-i-o.html">IO</a>（<a href="../class/-file.html">File</a>を含む）クラスのインスタンスを返します。
</p>
<p>
ブロックが与えられた場合、指定されたファイルをオープンし、生成した <a href="../class/-i-o.html">IO</a> オブジェクトを引数としてブロックを実行します。ブロックの終了時や例外によりブロックを脱出するとき、ファイルをクローズします。ブロックを評価した結果を返します。
</p>
<p>
ファイル名 file が `|' で始まる時には続く文字列をコマンドとして起動し、コマンドの標準入出力に対してパイプラインを生成します
</p>
<p>
ファイル名が &quot;|-&quot; である時、open は Ruby の子プロセスを生成し、その子プロセスとの間のパイプ(<a href="../class/-i-o.html">IO</a>オブジェクト)を返します。(このときの動作は、<a href="../method/-i-o/s/popen.html">IO.popen</a> と同じです。
<a href="../method/-file/s/open.html">File.open</a> にはパイプラインを生成する機能はありません)。
</p>
<p>
Perlと異なりコマンドは常に `|' で始まります。
</p>
<dl>
<dt class='method-param'>[PARAM] file:</dt>
<dd>
ファイルを文字列で指定します。整数を指定した場合はファイルディスクリプタとして扱います。
</dd>
<dt class='method-param'>[PARAM] mode_enc:</dt>
<dd>
モード・エンコーディングを文字列か定数の論理和で指定します。後述。
</dd>
<dt class='method-param'>[PARAM] perm:</dt>
<dd>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/open.html">open(2)</a> の第 3 引数のように、ファイルを生成する場合のファイルのパーミッションを整数で指定します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
ファイルのオープンに失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-file/s/open.html">File.open</a>,<a href="../method/-i-o/s/popen.html">IO.popen</a>,<a href="../method/-i-o/s/open.html">IO.open</a>
</p>
<h3 >第二引数のオープンモード・エンコーディング</h3>
<p>
文字列(&quot;mode&quot; か &quot;mode:ext_enc&quot; か &quot;mode:ext_enc:int_enc&quot; という形式)か整数(<a href="../class/-file=3a=3a-constants.html">File::Constants</a> モジュールの定数の論理和)を組み合わせて指定します。
</p>
<p>
mode は以下の三つのうちのいずれかです。
</p>
<dl>
<dt>&quot;r&quot;, RDONLY</dt>
<dd>
<p>
ファイルを読み込みモードでオープンします。（デフォルトのモード）
</p>
</dd>
<dt>&quot;w&quot;, WRONLY|CREAT|TRUNC</dt>
<dd>
<p>
ファイルを書き込みモードでオープンします。オープン時にファイルがすでに存在していればその内容を空にします。
</p>
</dd>
<dt>&quot;a&quot;, WRONLY|CREAT|APPEND</dt>
<dd>
<p>
ファイルを書き込みモードでオープンします。出力は 常に ファイルの末尾に追加されます。例えば、ファイルオープン中にファイルのサイズが小さくなってもその末尾に出力されます。
</p>
</dd>
</dl>
<p>
以上の3つの後に &quot;+&quot; があれば、ファイルは読み書き両用モード (RDWR)
でオープンされます。
</p>
<dl>
<dt>&quot;r+&quot;</dt>
<dd>
<p>
ファイルの読み書き位置は先頭にセットされます。
</p>
</dd>
<dt>&quot;w+&quot;</dt>
<dd>
<p>
&quot;r+&quot; と同じですが、オープン時にファイルがすでに存在していればその内容を空にします。
</p>
</dd>
<dt>&quot;a+&quot;</dt>
<dd>
<p>
&quot;r+&quot;と同様、ファイルの読み込み位置は先頭にセットされますが、書き込みは常にファイル末尾に行われます。書き込みは
<a href="../method/-i-o/i/seek.html">IO#seek</a> などの影響を受けません。
</p>
</dd>
</dl>
<p>
これらのいずれに対しても &quot;b&quot; フラグを (&quot;r+b&quot;のように) つけることができます (整数なら File::BINARY )。この場合、バイナリモードでオープンします (ただし、DOS/Windowsのようにシステムがテキスト／バイナリでファイルを区別する場合に限ります)
</p>
<h3 >Universal Newline</h3>
<p>
改行をLFに揃えます。一言で言えばPEP:278 <a class="external" href="https://www.python.org/dev/peps/pep-0278/">https://www.python.org/dev/peps/pep-0278/</a>のことです。
</p>
<dl>
<dt>&quot;rt&quot;</dt>
<dd>
<p>
CR、LF、CRLFのいずれをもLFとして読み込む。
</p>
</dd>
<dt>&quot;rb&quot;</dt>
<dd>
<p>
CR、LF、CRLFはいずれもそのまま読み込まれる。
</p>
</dd>
<dt>&quot;r&quot;</dt>
<dd>
<p>
&quot;rt&quot;と&quot;rb&quot;のどちらの扱いになるかはプラットフォーム依存。
(Unix系ならばなら&quot;rb&quot;、mswinやmingwなら&quot;rt&quot;扱いとなる)
</p>
</dd>
<dt>&quot;wb&quot;</dt>
<dd>
<p>
LFはそのままLFとして書き込まれる。
</p>
</dd>
<dt>&quot;wt&quot; または &quot;w&quot;</dt>
<dd>
<p>
LFはLFのままか、CR+LFか、どちらかになる。どちらになるかはプラットフォーム依存。
(Unix系ならばLFのまま、mswinやmingwならばCRLFとなる)
</p>
</dd>
</dl>
<p>
なお、以上のCR、LF、CRLFは入力のエンコーディングを解釈した後に処理されます。例えば、UTF-16LEでは、LFはバイト列&quot;\x0a\x00&quot;のことになります。
</p>
<h3 >エンコーディングの指定</h3>
<p>
ext_enc(外部エンコーディング)が指定されている場合、読み込まれた文字列にはこのエンコーディングが指定され、出力する文字列はそのエンコーディングに変換されます。
</p>
<p>
ext_encが'BOM|'で始まる場合、その入力に含まれるBOMはあらかじめ削られます。また、BOMがあった場合、入力された文字列にはそのBOMに対応するエンコーディングが設定されます。
</p>
<pre class="highlight ruby">
<span class="caption">BOMでUTF-16BEかLEかを判別する例</span>
<code>
<span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">utf16.txt</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">rb:BOM|utf-16</span><span class="s2">"</span><span class="p">)</span><span class="p">{</span><span class="o">|</span>file<span class="o">|</span> <span class="s2">"</span><span class="s2">...</span><span class="s2">"</span> <span class="p">}</span>
</code></pre>
<p>
int_encも指定されていた場合、入力された文字列をext_encでエンコーディングされた文字列とみなしてint_encへと変換し、その結果にint_encを設定して返します。
</p>
</dd>


<dt class="method-heading" id="M_P"><code>p(*arg) -&gt; object | Array</code><span class="permalink">[<a href="../method/-kernel/m/p.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-p">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を人間に読みやすい形に整形して改行と順番に標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。主にデバッグに使用します。
</p>
<p>
引数の inspect メソッドの返り値と改行を順番に出力します。つまり以下のコードと同じです。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">print</span> arg<span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">inspect</span>, <span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span>, arg<span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="nf">inspect</span>, <span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span> <span class="c1">#, ...
</span></code></pre>
<p>
整形に用いられる<a href="../method/-object/i/inspect.html">Object#inspect</a>は普通に文字列に変換すると区別がつかなくなるようなクラス間の差異も表現できるように工夫されています。
</p>
<p>
p に引数を与えずに呼び出した場合は特に何もしません。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
出力するオブジェクトを任意個指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
<dt>[RETURN]</dt>
<dd>
指定された引数 arg を返します。複数の引数が指定された場合はそれらを要素とする配列を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">puts</span> <span class="s2">"</span><span class="s2">"</span> <span class="c1">#=&gt; （空行）
</span><span class="nb">p</span> <span class="s2">"</span><span class="s2">"</span> <span class="c1">#=&gt; &quot;&quot;
</span>
<span class="nb">puts</span> <span class="mi">50</span>,<span class="s2">"</span><span class="s2">50</span><span class="s2">"</span>
<span class="c1">#=&gt; 50
</span><span class="c1">#=&gt; 50
</span><span class="nb">p</span> <span class="mi">50</span>,<span class="s2">"</span><span class="s2">50</span><span class="s2">"</span>
<span class="c1">#=&gt; 50
</span><span class="c1">#=&gt; &quot;50&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-object/i/inspect.html">Object#inspect</a>,<a href="../method/-kernel/m/puts.html">Kernel.#puts</a>,<a href="../method/-kernel/m/print.html">Kernel.#print</a>
</p>
</dd>


<dt class="method-heading" id="M_PP"><code>pp(*obj) -&gt; object</code><span class="permalink">[<a href="../method/-kernel/m/pp.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-pp">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
指定されたオブジェクト obj を標準出力に見やすい形式(プリティプリント)で出力します。
obj それぞれを引数として <a href="../method/-p-p/s/pp.html">PP.pp</a> を呼ぶことと同等です。
</p>
<p>
初回呼び出し時に自動的に <a href="../library/pp.html">pp</a> を require します。
</p>
<dl>
<dt class='method-param'>[PARAM] obj:</dt>
<dd>
表示したいオブジェクトを指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'pp'</span>

b <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span>
a <span class="o">=</span> <span class="p">[</span>b, b<span class="p">]</span>
a <span class="o">&lt;&lt;</span> a
pp a

<span class="c1">#=&gt; [[1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3],
</span><span class="c1">#    [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3],
</span><span class="c1">#    [...]]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-p-p/s/pp.html">PP.pp</a>
</p>
</dd>


<dt class="method-heading" id="M_PRINT"><code>print(*arg) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/print.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-print">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を順に標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。引数が与えられない時には変数
<a href="../method/-kernel/v/_.html">$_</a> の値を出力します。
</p>
<p>
文字列以外のオブジェクトが引数として与えられた場合には、
to_s メソッドにより文字列に変換してから出力します。
</p>
<p>
変数 <a href="../method/-kernel/v/=2c.html">$,</a> (出力フィールドセパレータ)に nil でない値がセットされている時には、各引数の間にその文字列を出力します。変数 <a href="../method/-kernel/v/=5c.html">$\</a> (出力レコードセパレータ)に nil でない値がセットされている時には、最後にそれを出力します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
出力するオブジェクトを任意個指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">print</span> <span class="s2">"</span><span class="s2">Hello, world!</span><span class="s2">"</span>
<span class="nb">print</span> <span class="s2">"</span><span class="s2">Regexp is</span><span class="s2">"</span>,<span class="sr">/ant/</span>
<span class="nb">print</span> <span class="k">nil</span>
<span class="nb">print</span> <span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span>
<span class="c1">#=&gt; Hello, world!Regexp is(?-mix:ant)
</span>
<span class="vg">$_</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">input</span><span class="s2">"</span>
<span class="vg">$,</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">&lt;and&gt;</span><span class="s2">"</span>
<span class="vg">$\</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">&lt;end&gt;\n</span><span class="s2">"</span>
<span class="nb">print</span>
<span class="nb">print</span> <span class="s2">"</span><span class="s2">AA</span><span class="s2">"</span>,<span class="s2">"</span><span class="s2">BB</span><span class="s2">"</span>
<span class="c1">#=&gt; input&lt;end&gt;
</span><span class="c1">#=&gt; AA&lt;and&gt;BB&lt;end&gt;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/puts.html">Kernel.#puts</a>,<a href="../method/-kernel/m/p.html">Kernel.#p</a>,<a href="../method/-i-o/i/print.html">IO#print</a>
</p>
</dd>


<dt class="method-heading" id="M_PRINTF"><code>printf(format, *arg) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/printf.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-printf">rdoc</a>]</span></dt>
<dt class="method-heading"><code>printf(port, format, *arg) -&gt; nil</code></dt>
<dd class="method-description">
<p>
C 言語の printf と同じように、format に従い引数を文字列に変換して port に出力します。
</p>
<p>
port を省略した場合は標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。
</p>
<p>
引数を 1 つも指定しなければ何もしません。
</p>
<p>
Ruby における format 文字列の拡張については
<a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>の項を参照してください。
</p>
<dl>
<dt class='method-param'>[PARAM] port:</dt>
<dd>
出力先になる<a href="../class/-i-o.html">IO</a> のサブクラスのインスタンスです。
</dd>
<dt class='method-param'>[PARAM] format:</dt>
<dd>
フォーマット文字列です。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
フォーマットされる引数です。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
port を指定したのに format を省略した場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
port が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="s2">calculate%3s%-6s%.15f</span><span class="s2">"</span>, <span class="s1">'PI'</span>, <span class="s1">'...'</span>, <span class="no">Math</span><span class="o">::</span><span class="no">PI</span><span class="p">)</span>
<span class="c1">#=&gt; calculate PI...   3.141592653589793
</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%d %04x</span><span class="s2">"</span>, <span class="mi">123</span>, <span class="mi">123</span><span class="p">)</span>               <span class="c1">#=&gt; &quot;123 007b&quot;
</span><span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%08b '%4s'</span><span class="s2">"</span>, <span class="mi">123</span>, <span class="mi">123</span><span class="p">)</span>            <span class="c1">#=&gt; &quot;01111011 ' 123'&quot;
</span><span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%1$*2$s %2$d %1$s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span>, <span class="mi">8</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;   hello 8 hello&quot;
</span><span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%1$*2$s %2$d</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">hello</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">8</span><span class="p">)</span>       <span class="c1">#=&gt; &quot;hello    -8&quot;
</span><span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%+g:% g:%-g</span><span class="s2">"</span>, <span class="mf">1.23</span>, <span class="mf">1.23</span>, <span class="mf">1.23</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;+1.23: 1.23:1.23&quot;
</span><span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="s2">%u</span><span class="s2">"</span>, <span class="o">-</span><span class="mi">123</span><span class="p">)</span>                        <span class="c1">#=&gt; &quot;..4294967173&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>,<a href="../method/-i-o/i/printf.html">IO#printf</a>
</p>
</dd>


<dt class="method-heading" id="M_PUTC"><code>putc(ch) -&gt; object</code><span class="permalink">[<a href="../method/-kernel/m/putc.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-putc">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字 ch を 標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。
</p>
<p>
ch が数値なら 0 〜 255 の範囲の対応する文字を出力します。
ch が文字列なら、その先頭1文字を出力します。どちらでもない場合は、ch.to_int で整数に変換を試みます。
</p>
<dl>
<dt class='method-param'>[PARAM] ch:</dt>
<dd>
出力する文字です。数または文字列で指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
ch を返します
</dd>
<dt>[EXCEPTION] RangeError:</dt>
<dd>
<a href="../class/-bignum.html">Bignum</a> を引数にした場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
<a href="../class/-integer.html">Integer</a> に変換できないオブジェクトを引数に指定した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">putc</span><span class="p">(</span><span class="s2">"</span><span class="s2">ch</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">putc</span><span class="p">(</span><span class="sc">?c</span><span class="p">)</span>
<span class="nb">putc</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>
<span class="nb">putc</span><span class="p">(</span><span class="mi">355</span><span class="p">)</span>
<span class="c1">#=&gt; cccc
</span>
<span class="nb">putc</span><span class="p">(</span><span class="mf">99.00</span><span class="p">)</span> <span class="c1">#=&gt; c
</span><span class="nb">putc</span><span class="p">(</span><span class="mi">33333333333333333333333333333333333</span><span class="p">)</span> <span class="c1"># bignum too big to convert into `long' (RangeError)
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-i-o/i/putc.html">IO#putc</a>
</p>
</dd>


<dt class="method-heading" id="M_PUTS"><code>puts(*arg) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/puts.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-puts">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数と改行を順番に 標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。引数がなければ改行のみを出力します。
</p>
<p>
引数が配列の場合、その要素と改行を順に出力します。配列や文字列以外のオブジェクトが引数として与えられた場合には、当該オブジェクトを最初に to_ary により配列へ、次に to_s メソッドにより文字列へ変換を試みます。末尾が改行で終っている引数や配列の要素に対しては puts 自身は改行を出力しません。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
出力するオブジェクトを任意個指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">puts</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">bar\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">baz</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="s2">"</span><span class="s2">"</span>    <span class="c1"># 改行のみ出力
</span><span class="nb">puts</span>       <span class="c1"># 改行のみ出力
</span><span class="nb">puts</span> <span class="k">nil</span>   <span class="c1"># 改行のみ出力
</span><span class="nb">puts</span> <span class="p">[</span><span class="s2">"</span><span class="s2">oui</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">non</span><span class="s2">"</span><span class="p">]</span>
<span class="c1">#=&gt; foo
</span><span class="c1">#   bar
</span><span class="c1">#   baz
</span><span class="c1">#
</span><span class="c1">#
</span><span class="c1">#
</span><span class="c1">#   oui
</span><span class="c1">#   non
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/print.html">Kernel.#print</a>, <a href="../method/-kernel/m/p.html">Kernel.#p</a>, <a href="../method/-i-o/i/puts.html">IO#puts</a>
</p>
</dd>


<dt class="method-heading" id="M_RAND"><code>rand(max = 0) -&gt; Integer | Float</code><span class="permalink">[<a href="../method/-kernel/m/rand.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-rand">rdoc</a>]</span></dt>
<dt class="method-heading"><code>rand(range) -&gt; Integer | Float | nil</code></dt>
<dd class="method-description">
<p>
擬似乱数を発生させます。
</p>
<p>
最初の形式では
max が 0 の場合は 0.0 以上 1.0 未満の実数を、正の整数の場合は 0 以上 max 未満の整数を返します。それ以外の値を指定した場合は max.to_int の絶対値が指定されたものとして扱います。
</p>
<p>
二番目の形式では range で指定された範囲の値を返します。
range の始端と終端が共に整数の場合は整数を、少なくとも片方が実数の場合は実数を返します。
range に含まれる数が無い場合は nil を返します。
</p>
<p>
まだ <a href="../method/-kernel/m/srand.html">Kernel.#srand</a> が呼ばれていなければ自動的に呼び出します。
</p>
<p>
擬似乱数生成器として <a href="../method/-random/c/-d-e-f-a-u-l-t.html">Random::DEFAULT</a> を使用します。これは <a href="../method/-random/s/rand.html">Random.rand</a> と共通です。
</p>
<dl>
<dt class='method-param'>[PARAM] max:</dt>
<dd>
乱数値の上限を正の整数で指定します。
max 自体は乱数値の範囲に含まれません。
0 を指定すると実数値の乱数を返します。
</dd>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
発生させる乱数値の範囲を <a href="../class/-range.html">Range</a> オブジェクトで指定します。
range の境界は数値でなければなりません。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">srand</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>     <span class="c1"># 乱数の種を設定する。
</span><span class="nb">rand</span>            <span class="c1">#=&gt; 0.1915194503788923
</span><span class="nb">rand</span>            <span class="c1">#=&gt; 0.6221087710398319
</span><span class="nb">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>        <span class="c1">#=&gt; 4
</span><span class="nb">rand</span><span class="p">(</span><span class="mf">5.5</span><span class="p">)</span>       <span class="c1">#=&gt; 0
</span>                <span class="c1"># rand(5) と同じ。 5 が乱数値の範囲に含まれないことに注意。
</span>
<span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">6</span><span class="p">)</span>      <span class="c1">#=&gt; 2                   (1 から 6 までの整数)
</span><span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="o">...</span><span class="mi">10</span><span class="p">)</span>    <span class="c1">#=&gt; 1                   (0 から 9 までの整数。終端を含まない)
</span><span class="nb">rand</span><span class="p">(</span><span class="mf">1.0</span><span class="o">..</span><span class="mf">1.5</span><span class="p">)</span>  <span class="c1">#=&gt; 1.1362963047752432  (1.0 以上 1.5 以下の実数)
</span><span class="nb">rand</span><span class="p">(</span><span class="mf">1.0</span><span class="o">...</span><span class="mf">1.5</span><span class="p">)</span> <span class="c1">#=&gt; 1.1382321275715483  (1.0 以上 1.5 未満の実数)
</span><span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">0</span><span class="p">)</span>      <span class="c1">#=&gt; nil
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/srand.html">Kernel.#srand</a>, <a href="../method/-random/i/rand.html">Random#rand</a>, <a href="../class/-random.html">Random</a>
</p>
</dd>


<dt class="method-heading" id="M_READLINE"><code>readline(rs = $/) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/readline.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-readline">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-a-r-g-f.html">ARGF</a>から一行読み込んで、それを返します。行の区切りは引数 rs で指定した文字列になります。
</p>
<p>
rs に nil を指定すると行区切りなしとみなしてファイルの内容をすべて読み込みます。ARGVに複数のファイル名が存在する場合は1度に1ファイルずつ読み込みます。空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします
(パラグラフモード)。
</p>
<p>
読み込んだ文字列は組み込み変数 <a href="../method/-kernel/v/_.html">$_</a> にもセットされます。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りとなる文字列です。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
読み込みに失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] EOFError:</dt>
<dd>
readline でファイル末端(EOF)を検出すると発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># ---main.rb---
</span><span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span> <span class="o">&lt;&lt;</span> <span class="s1">'c.txt'</span>
<span class="nb">p</span> <span class="nb">readline</span> <span class="c1">#=&gt; &quot;hello\n&quot;
</span><span class="nb">p</span> <span class="nb">readline</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span> <span class="c1">#=&gt; &quot;it\ncommon\n&quot;
</span><span class="nb">p</span> <span class="nb">readline</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; &quot;ARGF\n\n&quot;
</span><span class="nb">p</span> <span class="nb">readline</span><span class="p">(</span><span class="s1">'、'</span><span class="p">)</span> <span class="c1">#=&gt; &quot;スクリプトに指定した引数 (Object::ARGV を参照) をファイル名と\nみなして、&quot;
</span><span class="nb">p</span> <span class="nb">readline</span> <span class="c1">#=&gt; &quot;それらのファイルを連結した 1 つの仮想ファイルを表すオブジェクトです。 \n&quot;
</span><span class="nb">p</span> <span class="nb">readline</span> <span class="c1"># end of file reached (EOFError)
</span><span class="c1"># --- b.txt ---
</span>hello
it
common
<span class="c1"># --- c.txt ---
</span><span class="no">ARGF</span>
<span class="c1"># スクリプトに指定した引数 (Object::ARGV を参照) をファイル名と
</span><span class="c1"># みなして、それらのファイルを連結した 1 つの仮想ファイルを表すオブジェクトです。
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>,<a href="../class/-a-r-g-f.html">ARGF</a>,<a href="../method/-kernel/m/readlines.html">Kernel.#readlines</a>,<a href="../method/-kernel/m/gets.html">Kernel.#gets</a>
</p>
</dd>


<dt class="method-heading" id="M_READLINES"><code>readlines(rs = $/) -&gt; [String]</code><span class="permalink">[<a href="../method/-kernel/m/readlines.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-readlines">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-a-r-g-f.html">ARGF</a>を <a href="../method/-kernel/m/gets.html">Kernel.#gets</a>(rs) でEOFまで読み込んで、その各行を要素としてもつ配列を返します。行の区切りは引数 rs で指定した文字列になります。
</p>
<p>
rs に nil を指定すると行区切りなしとみなします。空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします
(パラグラフモード)。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りとなる文字列です。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
読み込みに失敗した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">main.rb</span>
<code>
<span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span>
<span class="nb">p</span> <span class="nb">readlines</span>       <span class="c1">#=&gt; [&quot;hello\n&quot;, &quot;it\n&quot;, &quot;\n&quot;, &quot;common\n&quot;, &quot;hello\n&quot;, &quot;it\n&quot;, &quot;\n&quot;, &quot;common\n&quot;]
</span>
<span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span>
<span class="nb">p</span> <span class="nb">readlines</span><span class="p">(</span><span class="k">nil</span><span class="p">)</span>  <span class="c1">#=&gt; [&quot;hello\nit\n\ncommon\n&quot;, &quot;hello\nit\n\ncommon\n&quot;]
</span>
<span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span>
<span class="nb">p</span> <span class="nb">readlines</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>   <span class="c1">#=&gt; [&quot;hello\nit\n\n&quot;, &quot;common\n&quot;, &quot;hello\nit\n\n&quot;, &quot;common\n&quot;]
</span>
<span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span> <span class="o">&lt;&lt;</span> <span class="s1">'b.txt'</span>
<span class="nb">p</span> <span class="nb">readlines</span><span class="p">(</span><span class="s1">'it'</span><span class="p">)</span> <span class="c1">#=&gt; [&quot;hello\nit&quot;, &quot;\n\ncommon\n&quot;, &quot;hello\nit&quot;, &quot;\n\ncommon\n&quot;]
</span><span class="nb">p</span> <span class="nb">readlines</span>       <span class="c1">#=&gt; []
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">b.txt</span>
<code>
hello
it

common
</code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>,<a href="../class/-a-r-g-f.html">ARGF</a>,<a href="../method/-kernel/m/gets.html">Kernel.#gets</a>, <a href="../method/-kernel/m/readline.html">Kernel.#readline</a>
</p>
</dd>


<dt class="method-heading" id="M_REQUIRE"><code>require(feature) -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/m/require.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-require">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Ruby ライブラリ feature をロードします。拡張子補完を行い、同じファイルの複数回ロードはしません。
</p>
<p>
feature が絶対パスのときは feature からロードします。
feature が相対パスのときは組み込み変数 <a href="../method/-kernel/v/=3a.html">$:</a>
に示されるパスを順番に探し、最初に見付かったファイルをロードします。このとき、$: の要素文字列の先頭文字が
`~' (チルダ) だと、環境変数 HOME の値に展開されます。また `~USER' はそのユーザのホームディレクトリに展開されます。
</p>
<p>
Ruby ライブラリとは Ruby スクリプト (*.rb) か拡張ライブラリ
(*.so,*.o,*.dll など) であり、feature の拡張子が省略された場合はその両方から探します( *.rb が優先されます)。省略されなかった場合は指定された種別のみを探します。また、feature の拡張子にはアーキテクチャで実際に使われる拡張子に関らず拡張ライブラリの拡張子として常に .so を用いることができます（内部で適切に変換されます）。
</p>
<p>
ライブラリのロードに成功した時には true を返し、ロードした feature の名前を(拡張子も含めて) 変数 <a href="../method/-kernel/v/=22.html">$&quot;</a> に追加します。ただし、feature の名前が既に $&quot;
に含まれていた場合はロードせずに false を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] feature:</dt>
<dd>
ファイル名の文字列です。
</dd>
<dt>[EXCEPTION] LoadError:</dt>
<dd>
ロードに失敗した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$LOADED_FEATURES</span><span class="p">.</span><span class="nf">grep</span><span class="p">(</span><span class="sr">/prime/</span><span class="p">)</span><span class="p">.</span><span class="nf">size</span> <span class="c1"># =&gt; 0
</span><span class="nb">require</span> <span class="s2">"</span><span class="s2">prime</span><span class="s2">"</span>       <span class="c1"># =&gt; true
</span><span class="vg">$LOADED_FEATURES</span><span class="p">.</span><span class="nf">grep</span><span class="p">(</span><span class="sr">/prime/</span><span class="p">)</span><span class="p">.</span><span class="nf">size</span> <span class="c1"># =&gt; 1
</span><span class="nb">require</span> <span class="s2">"</span><span class="s2">prime</span><span class="s2">"</span>       <span class="c1"># =&gt; false
</span><span class="k">begin</span>
  <span class="nb">require</span> <span class="s2">"</span><span class="s2">invalid</span><span class="s2">"</span>
<span class="k">rescue</span> <span class="no">LoadError</span> <span class="o">=&gt;</span> e
  e<span class="p">.</span><span class="nf">message</span> <span class="c1"># =&gt; &quot;cannot load such file -- invalid&quot;
</span><span class="k">end</span>
</code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/load.html">Kernel.#load</a>,<a href="../method/-kernel/m/autoload.html">Kernel.#autoload</a>,<a href="../method/-kernel/m/require_relative.html">Kernel.#require_relative</a>
</p>
</dd>


<dt class="method-heading" id="M_REQUIRE_RELATIVE"><code>require_relative(relative_feature) -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/m/require_relative.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-require_relative">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のファイルからの相対パスで require します。
</p>
<pre>
require File.expand_path(relative_feature, File.dirname(__FILE__))
</pre>
<p>
とほぼ同じです。
</p>
<p>
<a href="../method/-kernel/m/eval.html">Kernel.#eval</a> などで文字列を評価した場合に、そこから
require_relative を呼出すと必ず失敗します。
</p>
<dl>
<dt class='method-param'>[PARAM] relative_feature:</dt>
<dd>
ファイル名の文字列です。
</dd>
<dt>[EXCEPTION] LoadError:</dt>
<dd>
ロードに失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/require.html">Kernel.#require</a>
</p>
<h3 >require と load のスコープ</h3>
<p>
ローカル変数はファイル間では共有されません。ですので、ロードしたライブラリのローカル変数をロード元のスクリプトから直接取得することはできません。このスコープの扱い方は<a href="../method/-kernel/m/load.html">Kernel.#load</a>でも同様です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># ---------- some.rb -----------
</span><span class="vg">$a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="vi">@a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="no">A</span> <span class="o">=</span> <span class="mi">1</span>
a <span class="o">=</span> <span class="mi">1</span>
<span class="c1"># ---------- end some.rb -------
</span>
<span class="nb">require</span> <span class="s1">'some'</span>
<span class="nb">p</span> <span class="vg">$a</span> <span class="c1">#=&gt; 1
</span><span class="nb">p</span> <span class="vi">@a</span> <span class="c1">#=&gt; 1
</span><span class="nb">p</span> <span class="no">A</span> <span class="c1">#=&gt; 1
</span><span class="nb">p</span> a <span class="c1"># undefined local variable or method `a' for #&lt;Object:0x294f9ec @a=1&gt; (NameError)
</span></code></pre>
</dd>


<dt class="method-heading" id="M_SELECT"><code>select(reads, writes = [], excepts = [], timeout = nil) -&gt; [[IO]] | nil</code><span class="permalink">[<a href="../method/-kernel/m/select.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-select">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-i-o/s/select.html">IO.select</a> と同じです。
</p>
<dl>
<dt class='method-param'>[PARAM] reads:</dt>
<dd>
<a href="../method/-i-o/s/select.html">IO.select</a> 参照
</dd>
<dt class='method-param'>[PARAM] writes:</dt>
<dd>
<a href="../method/-i-o/s/select.html">IO.select</a> 参照
</dd>
<dt class='method-param'>[PARAM] excepts:</dt>
<dd>
<a href="../method/-i-o/s/select.html">IO.select</a> 参照
</dd>
<dt class='method-param'>[PARAM] timeout:</dt>
<dd>
<a href="../method/-i-o/s/select.html">IO.select</a> 参照
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-i-o/s/select.html">IO.select</a>
</p>
</dd>


<dt class="method-heading" id="M_SET_TRACE_FUNC"><code>set_trace_func(proc) -&gt; Proc</code><span class="permalink">[<a href="../method/-kernel/m/set_trace_func.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-set_trace_func">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Ruby インタプリタのイベントをトレースする <a href="../class/-proc.html">Proc</a> オブジェクトとして指定された proc を登録します。 nil を指定するとトレースがオフになります。
</p>
<p>
Ruby インタプリタがプログラムを実行する過程で、メソッドの呼び出しや式の評価などのイベントが発生する度に、以下で説明する6個の引数とともに登録された <a href="../class/-proc.html">Proc</a> オブジェクトを実行します。
</p>
<p>
標準添付の <a href="../library/debug.html">debug</a>、<a href="../library/tracer.html">tracer</a>、
<a href="../library/profile.html">profile</a> はこの組み込み関数を利用して実現されています。
</p>
<h3 >ブロックパラメータの意味</h3>
<p>
渡す Proc オブジェクトのパラメータは
</p>
<pre class="highlight ruby">
<code>
<span class="nb">proc</span><span class="p">{</span><span class="o">|</span>event, file, line, <span class="nb">id</span>, <span class="nb">binding</span>, klass<span class="o">|</span> <span class="s2">"</span><span class="s2">...</span><span class="s2">"</span> <span class="p">}</span>
</code></pre>
<p>
で、意味は以下の通りです。
</p>
<dl>
<dt>event</dt>
<dd>
<p>
実行のタイプを表す、以下のいずれかの文字列。
</p>
<pre>
  &quot;line&quot;:      式の評価。
  &quot;call&quot;:      メソッドの呼び出し。
  &quot;return&quot;:    メソッド呼び出しからのリターン。
  &quot;c-call&quot;:    Cで記述されたメソッドの呼び出し。
  &quot;c-return&quot;:  Cで記述されたメソッド呼び出しからのリターン。
  &quot;class&quot;:     クラス定義、特異クラス定義、モジュール定義への突入。
  &quot;end&quot;:       クラス定義、特異クラス定義、モジュール定義の終了。
  &quot;raise&quot;:     例外の発生。
</pre>
</dd>
<dt>file</dt>
<dd>
<p>
実行中のプログラムのソースファイル名 (文字列)。
</p>
</dd>
<dt>line</dt>
<dd>
<p>
実行中のプログラムのソースファイル上の行番号 (整数)。
</p>
</dd>
<dt>id</dt>
<dd>
<p>
event に応じ、以下のものが渡されます。第六ブロック引数の klass と対応しています。
</p>
<pre>
    line
        最後に呼び出されたメソッドを表す Symbol オブジェクト。
        トップレベルでは nil。
    call/return/c-call/c-return
        呼び出された/リターンするメソッドを表す Symbol オブジェクト。
    class/end
        nil。
    raise
        最後に呼び出されたメソッドを表す Symbol オブジェクト。
        トップレベルでは nil。
</pre>
</dd>
<dt>binding</dt>
<dd>
<p>
実行中のプログラムのコンテキストを表す <a href="../class/-binding.html">Binding</a> オブジェクト。
</p>
</dd>
<dt>klass</dt>
<dd>
<p>
event に応じ、以下のものが渡されます。第四ブロック引数の id と対応しています。
</p>
<pre>
    line
        最後に呼び出されたメソッドが属するクラスを表す
        Class オブジェクト。トップレベルでは nil。
    call/return/c-call/c-return
        呼び出された/リターンするメソッドが属するクラス
        を表す Class オブジェクト。
    class/end
        nil。
    raise
        最後に呼び出されたメソッドが属するクラスを表す
        Class オブジェクト。トップレベルでは nil。
</pre>
</dd>
</dl>
<dl>
<dt class='method-param'>[PARAM] proc:</dt>
<dd>
トレース用 <a href="../class/-proc.html">Proc</a> オブジェクトを指定します。nil を指定した場合、トレースをオフにします。
</dd>
<dt>[RETURN]</dt>
<dd>
proc を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">set_trace_func</span> <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="o">*</span>arg<span class="o">|</span>
  <span class="nb">p</span> arg
<span class="p">}</span>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Foo</span>
<span class="k">end</span>
<span class="mi">43</span><span class="p">.</span><span class="nf">to_s</span>

<span class="c1"># ----結果----
</span><span class="c1"># [&quot;c-return&quot;, &quot;..&quot;, 1, :set_trace_func, #&lt;Binding:0xf6ceb8&gt;, Kernel]
</span><span class="c1"># [&quot;line&quot;, &quot;..&quot;, 4, nil, #&lt;Binding:0x10cbcd8&gt;, nil]
</span><span class="c1"># [&quot;c-call&quot;, &quot;..&quot;, 4, :inherited, #&lt;Binding:0x10cba98&gt;, Class]
</span><span class="c1"># [&quot;c-return&quot;, &quot;..&quot;, 4, :inherited, #&lt;Binding:0x10cb858&gt;, Class]
</span><span class="c1"># [&quot;class&quot;, &quot;..&quot;, 4, nil, #&lt;Binding:0x10cb600&gt;, nil]
</span><span class="c1"># [&quot;end&quot;, &quot;..&quot;, 5, nil, #&lt;Binding:0x10cb3f0&gt;, nil]
</span><span class="c1"># [&quot;line&quot;, &quot;..&quot;, 6, nil, #&lt;Binding:0x10cb1e0&gt;, nil]
</span><span class="c1"># [&quot;c-call&quot;, &quot;..&quot;, 6, :to_s, #&lt;Binding:0x10cafd0&gt;, Fixnum]
</span><span class="c1"># [&quot;c-return&quot;, &quot;..&quot;, 6, :to_s, #&lt;Binding:0x10cad78&gt;, Fixnum]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/caller.html">Kernel.#caller</a>
</p>
</dd>


<dt class="method-heading" id="M_SLEEP"><code>sleep -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/sleep.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-sleep">rdoc</a>]</span></dt>
<dt class="method-heading"><code>sleep(sec) -&gt; Integer</code></dt>
<dd class="method-description">
<p>
sec 秒だけプログラムの実行を停止します。
</p>
<p>
sec が省略された場合、他スレッドからの <a href="../method/-thread/i/run.html">Thread#run</a>
などで明示的に起こさない限り永久にスリープします。Thread#runを呼ぶとその時点で
sleepの実行が中断されます。
</p>
<dl>
<dt class='method-param'>[PARAM] sec:</dt>
<dd>
停止する秒数を非負の数値で指定します。浮動小数点数も指定できます。省略された場合、永久にスリープします。
</dd>
<dt>[RETURN]</dt>
<dd>
実際に停止していた秒数 (整数に丸められた値) です。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
it <span class="o">=</span> <span class="no">Thread</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span>
  <span class="nb">sleep</span>
  <span class="nb">puts</span> <span class="s1">'it_end'</span>
<span class="k">end</span>

re <span class="o">=</span> <span class="nb">sleep</span> <span class="mf">2.11</span>
<span class="nb">puts</span> re
it<span class="p">.</span><span class="nf">run</span>
re2 <span class="o">=</span> <span class="nb">sleep</span> <span class="mf">0.76</span>
<span class="nb">puts</span> re2
<span class="c1">#=&gt; 2
</span><span class="c1">#   it_end
</span><span class="c1">#   1
</span></code></pre>
</dd>


<dt class="method-heading" id="M_SPAWN"><code>spawn(command, options={}) -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/spawn.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-spawn">rdoc</a>]</span></dt>
<dt class="method-heading"><code>spawn(env, command, options={}) -&gt; Integer</code></dt>
<dd class="method-description">
<p>
引数を外部コマンドとして実行しますが、生成した子プロセスの終了を待ち合わせません。生成した子プロセスのプロセスIDを返します。
</p>
<h3 >引数の解釈</h3>
<p>
この形式では command が shell のメタ文字
</p>
<pre>
  * ? {} [] &lt;&gt; () ~ &amp; | \ $ ; ' ` &quot; \n
</pre>
<p>
を含む場合、shell 経由で実行されます。そうでなければインタプリタから直接実行されます。
</p>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
コマンドを文字列で指定します。
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
起動に失敗し、ruby インタプリタに制御が戻った場合に発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
コマンドが実行できなかった場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/system.html">Kernel.#system</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>
</p>
</dd>
<dt class="method-heading" id="M_SPAWN"><code>spawn(program, *args) -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/spawn.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-spawn">rdoc</a>]</span></dt>
<dt class="method-heading"><code>spawn(env, program, *args, options={}) -&gt; Integer</code></dt>
<dd class="method-description">
<p>
引数を外部コマンドとして実行しますが、生成した子プロセスの終了を待ち合わせません。生成した子プロセスのプロセスIDを返します。
</p>
<p>
env に Hash を渡すことで、<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/exec.html">exec(2)</a> で子プロセス内でファイルを実行する前に環境変数を変更することができます。
Hash のキーは環境変数名文字列、Hash の値に設定する値とします。
nil とすることで環境変数が削除(<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/unsetenv.html">unsetenv(3)</a>)されます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># FOO を BAR にして BAZ を削除する
</span>pid <span class="o">=</span> spawn<span class="p">(</span><span class="p">{</span><span class="s2">"</span><span class="s2">FOO</span><span class="s2">"</span><span class="o">=&gt;</span><span class="s2">"</span><span class="s2">BAR</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">BAZ</span><span class="s2">"</span><span class="o">=&gt;</span><span class="k">nil</span><span class="p">}</span>, command<span class="p">)</span>
</code></pre>
<p>
親プロセスは <a href="../method/-process/m/waitpid.html">Process.#waitpid</a> で子プロセスの終了を待ち合わせるかもしくは <a href="../method/-process/m/detach.html">Process.#detach</a> で子プロセスを切り離すかしてください。そうでないとゾンビプロセスが残る場合があります。
</p>
<h3 >引数の解釈</h3>
<p>
この形式で呼び出した場合、空白や shell のメタキャラクタもそのまま program の引数に渡されます。先頭の引数が2要素の配列であった場合、第1要素の文字列が実際に起動するプログラムのパスであり、第2要素が「みせかけ」のプログラム名になります。また、第1要素はフルパスで指定しなくても環境変数 PATH から探します。
</p>
<h3 >option引数の概要</h3>
<p>
Hash を options として渡すことで、起動される子プロセスの
</p>
<ul>
<li>プロセスグループ</li>
<li>resource limit</li>
<li>カレントディレクトリ</li>
<li>umask</li>
<li>子プロセスでのリダイレクト</li>
</ul>
<p>
などを変更できます。環境変数のクリアなども指定できます。
</p>
<p>
以下のオプションが指定できます。
</p>
<dl>
<dt>:unsetenv_others</dt>
<dd>
<p>
これを true にすると、envで指定した環境変数以外をすべてクリアします。
false だとクリアしません。false がデフォルトです。
</p>
</dd>
<dt>:pgroup</dt>
<dd>
<p>
引数に true or 0 を渡すと新しいプロセスグループを作成し、そこで動きます。整数を渡すと、指定したプロセスグループに属します。
nil を渡すとプロセスグループを変更しません。デフォルトは nil です。
</p>
</dd>
<dt>:rlimit_core, :rlimit_cpu, etc</dt>
<dd>
<p>
resource limit を設定します。詳しくは <a href="../method/-process/m/setrlimit.html">Process.#setrlimit</a> を見てください。引数には整数、もしくは整数2つの配列を渡します。
</p>
</dd>
<dt>:chdir</dt>
<dd>
<p>
指定した文字列をカレントディレクトリにします。
</p>
</dd>
<dt>:umask</dt>
<dd>
<p>
指定した整数を umask に設定します。
</p>
</dd>
<dt>リダイレクト関連</dt>
<dd>
<p>
Hash のキーに子プロセス側のファイルデスクリプタを、対応する値に親プロセス側のファイルデスクリプタやファイル名を指定することでリダイレクトを実現できます。
</p>
</dd>
<dt>:close_others</dt>
<dd>
<p>
これを true に設定するとリダイレクトされていない、0(stdin), 1(stdout), 2(stderr) 以外のファイルデスクリプタをすべて閉じます。
true がデフォルトです。
</p>
</dd>
</dl>
<h3 >option引数によるリダイレクトの概要</h3>
<p>
Hash のキー(子プロセス側)には以下のいずれかが指定できます。
</p>
<ul>
<li>単一のファイルデスクリプタ</li>
<li>ファイルデスクリプタの配列</li>
</ul>
<p>
配列を渡すことで複数のファイルデスクリプタを同時にリダイレクトできます。
</p>
<p>
Hash の値(親プロセス側)には以下のいずれかが指定できます。
</p>
<ul>
<li>単一のファイルデスクリプタ</li>
<li>リダイレクト先のファイル名文字列</li>
<li>[リダイレクト先のファイル名文字列]、配列の要素にすることで
<a href="../method/-file=3a=3a-constants/c/-r-d-o-n-l-y.html">File::Constants::RDONLY</a> でファイルを開いてリダイレクトします。</li>
<li>[リダイレクト先のファイル名文字列, モード文字列]
open(ファイル名, モード, 0644) でファイルを開いてリダイレクト
します。</li>
<li>[リダイレクト先のファイル名文字列, モード文字列, パーミション(整数)]
open(ファイル名, モード, パーミッション) でファイルを
開いてリダイレクトします。</li>
<li>[:child, ファイルデスクリプタ]
子プロセス側のファイルデスクリプタを指定できます。</li>
<li>:close キーで指定したファイルデスクリプタを子プロセス側で閉じます</li>
</ul>
<p>
ファイルデスクリプタを表すためには、以下が利用できます。
</p>
<ul>
<li>:in  標準入力, ファイルデスクリプタ0</li>
<li>:out 標準出力, ファイルデスクリプタ1</li>
<li>:err 標準エラー出力, ファイルデスクリプタ2</li>
<li>整数 指定した整数が表すファイルデスクリプタ</li>
<li><a href="../class/-i-o.html">IO</a> <a href="../method/-i-o/i/fileno.html">IO#fileno</a> で表されるファイルデスクリプタ</li>
</ul>
<h3 >option引数の詳細および例</h3>
<p>
「:unsetenv_others」を使うと、envで指定したもの以外の環境変数をクリアします。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># すべての環境変数をクリア
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:unsetenv_others</span><span class="o">=&gt;</span><span class="k">true</span><span class="p">)</span>
<span class="c1"># FOO だけ
</span>pid <span class="o">=</span> spawn<span class="p">(</span><span class="p">{</span><span class="s2">"</span><span class="s2">FOO</span><span class="s2">"</span><span class="o">=&gt;</span><span class="s2">"</span><span class="s2">BAR</span><span class="s2">"</span><span class="p">}</span>, command, <span class="ss">:unsetenv_others</span><span class="o">=&gt;</span><span class="k">true</span><span class="p">)</span>
</code></pre>
<p>
「:pgroup」でプロセスグループを指定できます。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># true, 0 で新しいプロセスグループを作りそのリーダーになります。
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:pgroup</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="c1"># 整数を渡すとそのグループに所属します。
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:pgroup</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">)</span>
</code></pre>
<p>
「:rlimit_core」「:rlimit_cpu」などで、resource limit を指定します。詳しくは <a href="../method/-process/m/setrlimit.html">Process.#setrlimit</a> を見てください。このオプションには 整数 or 整数2つの配列、を渡すことができます。それぞれ <a href="../method/-process/m/setrlimit.html">Process.#setrlimit</a> の引数が2個、3個の場合に対応します。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># 現プロセスの core の resource limit を取得
</span>cur, max <span class="o">=</span> <span class="no">Process</span><span class="p">.</span><span class="nf">getrlimit</span><span class="p">(</span><span class="ss">:CORE</span><span class="p">)</span>
<span class="c1"># 一時的に子プロセスの core dump を止める
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:rlimit_core</span><span class="o">=&gt;</span><span class="p">[</span><span class="mi">0</span>,max<span class="p">]</span><span class="p">)</span> <span class="c1"># disable core temporary.
</span><span class="c1"># 子プロセスで core dump を出せるようにする
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:rlimit_core</span><span class="o">=&gt;</span>max<span class="p">)</span> <span class="c1"># enable core dump
</span><span class="c1"># 子プロセスで core dump を出せなくする
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:rlimit_core</span><span class="o">=&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># never dump core.
</span></code></pre>
<p>
「:chdir」で子プロセスのカレントディレクトリを変更できます。
</p>
<pre class="highlight ruby">
<code>
pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:chdir</span><span class="o">=&gt;</span><span class="s2">"</span><span class="s2">/var/tmp</span><span class="s2">"</span><span class="p">)</span>
</code></pre>
<p>
「:umask」で子プロセスの umask を指定できます。
</p>
<pre class="highlight ruby">
<code>
pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:umask</span><span class="o">=&gt;</span><span class="mi">077</span><span class="p">)</span>
</code></pre>
<p>
リダイレクトは様々なやりかたが使えます。
Hash のキーが子プロセス側、値が親プロセス側です。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># 以下の例はすべて stderr を stdout にリダイレクトします
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:err</span><span class="o">=&gt;</span><span class="ss">:out</span><span class="p">)</span>
pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="mi">2</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">)</span>
pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="no">STDERR</span><span class="o">=&gt;</span><span class="ss">:out</span><span class="p">)</span>
pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="no">STDERR</span><span class="o">=&gt;</span><span class="no">STDOUT</span><span class="p">)</span>
</code></pre>
<p>
この例では子プロセス側の stdout には触れていないので、親プロセスから引き継がれます。
</p>
<p>
Hash の値にはファイル名も指定できます。
</p>
<pre class="highlight ruby">
<code>
pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:in</span><span class="o">=&gt;</span><span class="s2">"</span><span class="s2">/dev/null</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># read mode
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:out</span><span class="o">=&gt;</span><span class="s2">"</span><span class="s2">/dev/null</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># write mode
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:err</span><span class="o">=&gt;</span><span class="s2">"</span><span class="s2">log</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># write mode
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="mi">3</span><span class="o">=&gt;</span><span class="s2">"</span><span class="s2">/dev/null</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># read mode
</span></code></pre>
<p>
stdout と stderr をリダイレクトした場合は、ファイルは write mode で open されます。それ以外の場合は
read mode で open されます。
</p>
<p>
ファイルのフラグ(write/read mode)やパーミッションを明示したい場合は、配列を用います。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># なにも指定がなければデフォルトで read mode が使われる。
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:in</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"</span><span class="s2">file</span><span class="s2">"</span><span class="p">]</span><span class="p">)</span>
<span class="c1"># read mode で file を open し、リダイレクトする。
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:in</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"</span><span class="s2">file</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">r</span><span class="s2">"</span><span class="p">]</span><span class="p">)</span>
<span class="c1"># write mode で file を open し、リダイレクトする。
</span><span class="c1"># パーミッションはデフォルトで 644。
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:out</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"</span><span class="s2">log</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">]</span><span class="p">)</span> <span class="c1"># 0644 assumed
</span><span class="c1"># write mode、パーミッション 0600 でファイルをオープンし、リダイレクトする。
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:out</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"</span><span class="s2">log</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span>, <span class="mi">0600</span><span class="p">]</span><span class="p">)</span>
<span class="c1"># flagを文字列でなくビットで指定する
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:out</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"</span><span class="s2">log</span><span class="s2">"</span>, <span class="no">File</span><span class="o">::</span><span class="no">WRONLY</span><span class="o">|</span><span class="no">File</span><span class="o">::</span><span class="no">EXCL</span><span class="o">|</span><span class="no">File</span><span class="o">::</span><span class="no">CREAT</span>, <span class="mi">0600</span><span class="p">]</span><span class="p">)</span>
</code></pre>
<p>
配列で複数のファイルデスクリプタを同時にリダイレクトできます。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># stdout と stderr を &quot;log&quot; ファイルにリダイレクト
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="p">[</span><span class="ss">:out</span>, <span class="ss">:err</span><span class="p">]</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"</span><span class="s2">log</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">]</span><span class="p">)</span>
</code></pre>
<p>
複数のファイルデスクリプタを合わせてリダイレクトするには、
[ :child, FileDescriptor ] を使うこともできます。これは子プロセス側で FileDescriptor にリダイレクトすることを意味します。これはファイルデスクリプタを直接指定するのと異なるということに注意してください。例えば、
</p>
<pre>
:err =&gt; :out
</pre>
<p>
とすると、子プロセスの stderr を親プロセスの stdout にリダイレクトします。
</p>
<pre>
:err =&gt; [:child, :out]
</pre>
<p>
とすると、子プロセスの stderr を子プロセスの stdout にリダイレクトします。これを用いて、<a href="../method/-i-o/s/popen.html">IO.popen</a> で、子プロセスの
stderr と stdout を混ぜる例を以下に示します。
</p>
<pre class="highlight ruby">
<code>
io <span class="o">=</span> <span class="no">IO</span><span class="p">.</span><span class="nf">popen</span><span class="p">(</span><span class="p">[</span><span class="s2">"</span><span class="s2">sh</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">-c</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">echo out; echo err &gt;&amp;2</span><span class="s2">"</span>, <span class="ss">:err</span><span class="o">=&gt;</span><span class="p">[</span><span class="ss">:child</span>, <span class="ss">:out</span><span class="p">]</span><span class="p">]</span><span class="p">)</span>
<span class="nb">p</span> io<span class="p">.</span><span class="nf">read</span> <span class="c1">#=&gt; &quot;out\nerr\n
</span></code></pre>
<p>
spawn と IO.popen ではデフォルトでは非標準的なファイルデスクリプタ(3以降)をすべて閉じます。「:close_others」オプションでこの挙動を制御できます。標準的ファイルデスクリプタ(0,1,2)は :close で明示的に閉じない限り、このオプションの影響を受けません。
</p>
<p>
「:close_others」とは無関係に ruby が open する IO にはデフォルトでは close_on_exec が設定されていて、自動的に閉じられることに注意してください。
</p>
<pre class="highlight ruby">
<code>
pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:close_others</span><span class="o">=&gt;</span><span class="k">true</span><span class="p">)</span>  <span class="c1"># close 3,4,5,... (default)
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:close_others</span><span class="o">=&gt;</span><span class="k">false</span><span class="p">)</span> <span class="c1"># don't close 3,4,5,...
</span></code></pre>
<p>
これを利用して spawn を <a href="../method/-i-o/s/popen.html">IO.popen</a> のように使うことができます。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># similar to r = IO.popen(command)
</span>r, w <span class="o">=</span> <span class="no">IO</span><span class="p">.</span><span class="nf">pipe</span>
pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:out</span><span class="o">=&gt;</span>w<span class="p">)</span>   <span class="c1"># r は子プロセスで閉じられる
</span>w<span class="p">.</span><span class="nf">close</span>
</code></pre>
<p>
「:close」を使ってファイルデスクリプタを明示的に閉じることもできます。
</p>
<pre class="highlight ruby">
<code>
f <span class="o">=</span> <span class="nb">open</span><span class="p">(</span>foo<span class="p">)</span>
<span class="c1"># f は継承されない
</span><span class="c1"># system は :close_others=&gt;false がデフォルトなのでそれ以外は継承される
</span><span class="nb">system</span><span class="p">(</span>command, f<span class="o">=&gt;</span><span class="ss">:close</span><span class="p">)</span>        <span class="c1"># don't inherit f.
</span></code></pre>
<p>
spawn で特定のファイルデスクリプタだけを継承したい場合は、
io =&gt; io という形のオプションを指定します。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># valgrind は --log-fd というオプションでログの出力先を指定できます。
</span><span class="c1"># これで指定したファイルデスクリプタは親プロセスから
</span><span class="c1"># 子プロセスに継承されなければならないため、 log_w=&gt;log_w とします。
</span>log_r, log_w <span class="o">=</span> <span class="no">IO</span><span class="p">.</span><span class="nf">pipe</span>
pid <span class="o">=</span> spawn<span class="p">(</span><span class="s2">"</span><span class="s2">valgrind</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">--log-fd=</span><span class="si">#{</span><span class="n">log_w</span><span class="p">.</span><span class="nf">fileno</span><span class="si">}</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">echo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">a</span><span class="s2">"</span>, log_w<span class="o">=&gt;</span>log_w<span class="p">)</span>
log_w<span class="p">.</span><span class="nf">close</span>
<span class="nb">p</span> log_r<span class="p">.</span><span class="nf">read</span>
</code></pre>
<p>
ファイルデスクリプタを入れ替えることもできます。
</p>
<pre class="highlight ruby">
<code>
<span class="c1"># stdout と stderr を入れ替えリダイレクト
</span>pid <span class="o">=</span> spawn<span class="p">(</span>command, <span class="ss">:out</span><span class="o">=&gt;</span><span class="ss">:err</span>, <span class="ss">:err</span><span class="o">=&gt;</span><span class="ss">:out</span><span class="p">)</span>
</code></pre>
<p>
このような相互参照を解決するため、spawnの内部で新しいファイルデスクリプタを作り、利用します。
</p>
<p>
:close_others と :close オプションが意味を持つのは、子プロセスに閉じていないファイルデスクリプタが全て渡される環境
(Unix 系統の環境)のみです。例えば Windows では元々子プロセスにはファイルデスクリプタ 0 1 2 のみ渡されるので :close_others や :close オプションは意味を持ちません。
</p>
<dl>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] program:</dt>
<dd>
文字列か2要素の配列を指定します。
</dd>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
渡される引数です。0 個以上の文字列を指定します。
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
第一引数が配列かつ要素数が 2 でない場合に発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
コマンドが実行できなかった場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/system.html">Kernel.#system</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>
</p>
</dd>


<dt class="method-heading" id="M_SRAND"><code>srand -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/srand.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-srand">rdoc</a>]</span></dt>
<dt class="method-heading"><code>srand(seed) -&gt; Integer</code></dt>
<dd class="method-description">
<p>
<a href="../method/-kernel/m/rand.html">Kernel.#rand</a> や <a href="../method/-random/s/rand.html">Random.rand</a> で使用される擬似乱数生成器の種を設定し、古い種を返します。
</p>
<p>
seed に整数を指定するとその絶対値を乱数の種に設定します。それ以外の値を指定した場合は seed.to_int が指定されたものとして扱います。
seed に既知の値を与えると、以前の Kernel.#rand の値を再現できます。
</p>
<p>
seed が省略された時には現在の時刻やプロセス ID、srand を呼び出した回数、また可能なら /dev/urandom から読み出したデータなどを元に種を作ります。
</p>
<dl>
<dt class='method-param'>[PARAM] seed:</dt>
<dd>
乱数の種となる整数を指定します。
<a href="../class/-bignum.html">Bignum</a> も指定可能です。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
num <span class="o">=</span> <span class="mi">455675</span>
seeds <span class="o">=</span> <span class="p">[</span><span class="p">]</span>

<span class="nb">srand</span><span class="p">(</span>num<span class="p">)</span>

<span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="c1">#=&gt; 3
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="c1">#=&gt; 0
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#=&gt; 0.445804380918972
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#=&gt; 0.422248634121701
</span>
seeds <span class="o">&lt;&lt;</span> <span class="nb">srand</span>

<span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="c1">#=&gt; 3
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="c1">#=&gt; 3
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#=&gt; 0.938911141393347
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#=&gt; 0.915824970865251
</span>
seeds <span class="o">&lt;&lt;</span> <span class="nb">srand</span><span class="p">(</span>num<span class="p">)</span>

<span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="c1">#=&gt; 3
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="c1">#=&gt; 0
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#=&gt; 0.445804380918972
</span><span class="nb">p</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#=&gt; 0.422248634121701
</span>
seeds <span class="o">&lt;&lt;</span> <span class="nb">srand</span>

<span class="nb">p</span> seeds <span class="c1">#=&gt; [455675, 2995620310703489221660585195204777696, 455675]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/rand.html">Kernel.#rand</a>, <a href="../method/-random/c/-d-e-f-a-u-l-t.html">Random::DEFAULT</a>
</p>
</dd>


<dt class="method-heading" id="M_SUB"><code>sub(pattern, replace) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/sub.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-sub">rdoc</a>]</span></dt>
<dt class="method-heading"><code>sub(pattern) {|matched| ... } -&gt; String</code></dt>
<dd class="method-description">
<p>
$_.sub とほぼ同じですが、置換が発生したときは、$_の内容を置き換える点が異なります。コマンドラインオプションで -p または -n を指定した時のみ定義されます。
</p>
<p>
暗号的になりすぎるきらいがあるため、このメソッドの使用は推奨されていません。今後はより明示的な $_.sub を使ってください。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
replace を指定しなかった場合に発生します。
</dd>
</dl>
<p>
$_.sub とこのメソッド sub は以下の点で違いがあります。
</p>
<ul>
<li>sub は $_ の値をコピーして、コピーの方を更新し、
$_ に再代入します。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字列と置き換える文字列
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$_</span>               <span class="c1"># =&gt; &quot;testtest\n&quot;
</span><span class="nb">sub</span><span class="p">(</span><span class="sr">/es/</span>, <span class="s1">'!!'</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;t!!ttest\n&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/sub.html">String#sub</a>,<a href="../method/-kernel/v/_.html">$_</a>
</p>
</dd>


<dt class="method-heading" id="M_SYSCALL"><code>syscall(num, *arg) -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/syscall.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-syscall">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
numで指定された番号のシステムコールを実行します。第2引数以降をシステムコールの引数として渡します。
</p>
<p>
どの数値がどのシステムコールに対応するかは、
syscall(2) や
/usr/include/sys/syscall.h を参照してください。
</p>
<p>
システムコールの慣習に従い、syscall(2)
が -1 を返す場合には例外 <a href="../class/-errno=3a=3a-e-x-x-x.html">Errno::EXXX</a> が発生します。それ以外では、返した値をそのまま数値で返します。
</p>
<p>
ライブラリ <a href="../library/fiddle.html">fiddle</a> を使えばより高レベルな操作ができます。
</p>
<dl>
<dt class='method-param'>[PARAM] num:</dt>
<dd>
システムコール番号です。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
文字列か、整数です。最大 9 個まで渡すことができます。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
syscall(2) が -1 を返した場合に発生します。
</dd>
<dt>[EXCEPTION] NotImplementedError:</dt>
<dd>
実行環境がこのメソッドに対応していないとき発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">syscall</span> <span class="mi">4</span>, <span class="mi">1</span>, <span class="s2">"</span><span class="s2">hello\n</span><span class="s2">"</span>, <span class="mi">6</span>   <span class="c1"># '4' is write(2) on our box
</span><span class="c1"># =&gt; hello
</span></code></pre>
<p>
[SEE_ALSO] <a href="../library/fiddle.html">fiddle</a>, <a class="external" href="http://www.freebsd.org/cgi/man.cgi?query=syscall&amp;sektion=2&amp;manpath=FreeBSD+9.0-RELEASE">syscall(2freebsd)</a>, <a class="external" href="http://man7.org/linux/man-pages/man2/syscall.2.html">syscall(2linux)</a>
</p>
</dd>


<dt class="method-heading" id="M_SYSTEM"><code>system(command, options={}) -&gt; bool | nil</code><span class="permalink">[<a href="../method/-kernel/m/system.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-system">rdoc</a>]</span></dt>
<dt class="method-heading"><code>system(env, command, options={}) -&gt; bool | nil</code></dt>
<dd class="method-description">
<p>
引数を外部コマンドとして実行して、成功した時に真を返します。
</p>
<p>
子プロセスが終了ステータス 0 で終了すると成功とみなし true を返します。それ以外の終了ステータスの場合は false を返します。コマンドを実行できなかった場合は nil を返します。
</p>
<p>
終了ステータスは変数 <a href="../method/-kernel/v/=3f.html">$?</a> で参照できます。
</p>
<p>
コマンドを実行することができなかった場合、多くのシェルはステータス
127 を返します。シェルを介さない場合は Ruby の子プロセスがステータス
127 で終了します。コマンドが実行できなかったのか、コマンドが失敗したのかは、普通
<a href="../method/-kernel/v/=3f.html">$?</a> を参照することで判別可能です。
</p>
<h3 >引数の解釈</h3>
<p>
この形式では command が shell のメタ文字
</p>
<pre>
  * ? {} [] &lt;&gt; () ~ &amp; | \ $ ; ' ` &quot; \n
</pre>
<p>
を含む場合、shell 経由で実行されます。そうでなければインタプリタから直接実行されます。
</p>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
command コマンドを文字列で指定します。
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">シェル経由でコマンドを実行</span>
<code>
<span class="nb">system</span><span class="p">(</span><span class="s2">"</span><span class="s2">echo *</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; true
</span><span class="c1"># fileA fileB fileC ...
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/=60.html">Kernel.#`</a>,<a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>,<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/system.html">system(3)</a>
</p>
</dd>
<dt class="method-heading" id="M_SYSTEM"><code>system(program, *args, options={}) -&gt; bool | nil</code><span class="permalink">[<a href="../method/-kernel/m/system.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-system">rdoc</a>]</span></dt>
<dt class="method-heading"><code>system(env, program, *args, options={}) -&gt; bool | nil</code></dt>
<dd class="method-description">
<p>
引数を外部コマンドとして実行して、成功した時に真を返します。
</p>
<p>
子プロセスが終了ステータス 0 で終了すると成功とみなし true を返します。それ以外の終了ステータスの場合は false を返します。コマンドを実行できなかった場合は nil を返します。
</p>
<p>
終了ステータスは変数 <a href="../method/-kernel/v/=3f.html">$?</a> で参照できます。
</p>
<p>
コマンドを実行することができなかった場合、多くのシェルはステータス
127 を返します。シェルを介さない場合は Ruby の子プロセスがステータス
127 で終了します。コマンドが実行できなかったのか、コマンドが失敗したのかは、普通 <a href="../method/-kernel/v/=3f.html">$?</a> を参照することで判別可能です。
</p>
<p>
Hash を options として渡すことで、起動される子プロセスの
</p>
<ul>
<li>プロセスグループ</li>
<li>resource limit</li>
<li>カレントディレクトリ</li>
<li>umask</li>
<li>子プロセスでのリダイレクト</li>
</ul>
<p>
などを変更できます。環境変数のクリアなども指定できます。詳しくは <a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a> を参照してください。
</p>
<h3 >引数の解釈</h3>
<p>
この形式で呼び出した場合、空白や shell のメタキャラクタもそのまま program の引数に渡されます。先頭の引数が2要素の配列であった場合、第1要素の文字列が実際に起動するプログラムのパスであり、第2要素が「みせかけ」のプログラム名になります。また、第1要素はフルパスで指定しなくても環境変数 PATH から探します。
</p>
<dl>
<dt class='method-param'>[PARAM] program:</dt>
<dd>
文字列か2要素の配列です。
</dd>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
program に渡す引数を 0 個以上指定する
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
第一引数が配列かつ要素数が 2 でない場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">インタプリタから直接コマンドを実行</span>
<code>
<span class="nb">system</span><span class="p">(</span><span class="s2">"</span><span class="s2">echo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">*</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; true
</span><span class="c1"># *
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/=60.html">Kernel.#`</a>,<a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>,<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/system.html">system(3)</a>
</p>
</dd>


<dt class="method-heading" id="M_TEST"><code>test(cmd, file) -&gt; bool | Time | Integer | nil</code><span class="permalink">[<a href="../method/-kernel/m/test.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-test">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
単体のファイルでファイルテストを行います。
</p>
<dl>
<dt class='method-param'>[PARAM] cmd:</dt>
<dd>
以下に示す文字リテラル、文字列、あるいは同じ文字を表す数値です。文字列の場合はその先頭の文字だけをコマンドとみなします。
</dd>
<dt class='method-param'>[PARAM] file:</dt>
<dd>
テストするファイルのパスを表す文字列か IO オブジェクトを指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
下表に特に明記していないものは、真偽値を返します。
</dd>
</dl>
<p>
以下は cmd として指定できる文字リテラルとその意味です。
</p>
<dl>
<dt>?r</dt>
<dd>
<p>
ファイルを実効 uid で読むことができる
</p>
</dd>
<dt>?w</dt>
<dd>
<p>
ファイルに実効 uid で書くことができる
</p>
</dd>
<dt>?x</dt>
<dd>
<p>
ファイルを実効 uid で実行できる
</p>
</dd>
<dt>?o</dt>
<dd>
<p>
ファイルの所有者が実効 uid である
</p>
</dd>
<dt>?G</dt>
<dd>
<p>
ファイルのグループ所有者が実効 gid である
</p>
</dd>
<dt>?R</dt>
<dd>
<p>
ファイルを実 uid で読むことができる
</p>
</dd>
<dt>?W</dt>
<dd>
<p>
ファイルに実 uid で書くことができる
</p>
</dd>
<dt>?X</dt>
<dd>
<p>
ファイルを実 uid で実行できる
</p>
</dd>
<dt>?O</dt>
<dd>
<p>
ファイルの所有者が実 uid である
</p>
</dd>
<dt>?e</dt>
<dd>
<p>
ファイルが存在する
</p>
</dd>
<dt>?z</dt>
<dd>
<p>
ファイルサイズが 0 である
</p>
</dd>
<dt>?s</dt>
<dd>
<p>
ファイルサイズが 0 でない (ファイルサイズを返す、0 ならば nil) -&gt; Integer|nil
</p>
</dd>
<dt>?f</dt>
<dd>
<p>
ファイルはプレーンファイルである
</p>
</dd>
<dt>?d</dt>
<dd>
<p>
ファイルはディレクトリである
</p>
</dd>
<dt>?l</dt>
<dd>
<p>
ファイルはシンボリックリンクである
</p>
</dd>
<dt>?p</dt>
<dd>
<p>
ファイルは名前つきパイプ(FIFO)である
</p>
</dd>
<dt>?S</dt>
<dd>
<p>
ファイルはソケットである
</p>
</dd>
<dt>?b</dt>
<dd>
<p>
ファイルはブロックスペシャルファイルである
</p>
</dd>
<dt>?c</dt>
<dd>
<p>
ファイルはキャラクタースペシャルファイルである
</p>
</dd>
<dt>?u</dt>
<dd>
<p>
ファイルに setuid ビットがセットされている
</p>
</dd>
<dt>?g</dt>
<dd>
<p>
ファイルに setgid ビットがセットされている
</p>
</dd>
<dt>?k</dt>
<dd>
<p>
ファイルに sticky ビットがセットされている
</p>
</dd>
<dt>?M</dt>
<dd>
<p>
ファイルの最終更新時刻を返す -&gt; Time
</p>
</dd>
<dt>?A</dt>
<dd>
<p>
ファイルの最終アクセス時刻を返す -&gt; Time
</p>
</dd>
<dt>?C</dt>
<dd>
<p>
ファイルの inode 変更時刻を返す -&gt; Time
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">IO</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">"</span><span class="s2">testfile</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">test</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">test</span><span class="p">(</span><span class="s2">"</span><span class="s2">r</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">testfile</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; true
</span><span class="nb">test</span><span class="p">(</span><span class="s2">"</span><span class="s2">s</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">testfile</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; 4
</span><span class="nb">test</span><span class="p">(</span><span class="s2">"</span><span class="s2">M</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">testfile</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># =&gt; 2018-03-31 07:38:40 +0900
</span></code></pre>
</dd>
</dl>
</dd>
<dt class="method-heading" id="M_TEST"><code>test(cmd, file1, file2) -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/m/test.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-test">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
２ファイル間のファイルテストを行います。
</p>
<dl>
<dt class='method-param'>[PARAM] cmd:</dt>
<dd>
以下に示す文字リテラル、文字列、あるいは同じ文字を表す数値です。文字列の場合はその先頭の文字だけをコマンドとみなします。
</dd>
<dt class='method-param'>[PARAM] file1:</dt>
<dd>
テストするファイルのパスを表す文字列か IO オブジェクトを指定します。
</dd>
<dt class='method-param'>[PARAM] file2:</dt>
<dd>
テストするファイルのパスを表す文字列か IO オブジェクトを指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
真偽値を返します。
</dd>
</dl>
<p>
以下は cmd として指定できる文字リテラルとその意味です。
</p>
<dl>
<dt>?=</dt>
<dd>
<p>
ファイル1とファイル2の最終更新時刻が等しい
</p>
</dd>
<dt>?&gt;</dt>
<dd>
<p>
ファイル1の方がファイル2より最終更新時刻が新しい
</p>
</dd>
<dt>?&lt;</dt>
<dd>
<p>
ファイル1の方がファイル2より最終更新時刻が古い
</p>
</dd>
<dt>?-</dt>
<dd>
<p>
ファイル1とファイル2が同一のファイルである
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">IO</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">"</span><span class="s2">testfile1</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">test1</span><span class="s2">"</span><span class="p">)</span>
<span class="no">IO</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">"</span><span class="s2">testfile2</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">test2</span><span class="s2">"</span><span class="p">)</span>
<span class="sx">%w(= &lt; &gt; -)</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span>e<span class="o">|</span>
  result <span class="o">=</span> <span class="nb">test</span><span class="p">(</span>e, <span class="s2">"</span><span class="s2">testfile1</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">testfile2</span><span class="s2">"</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">e</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">result</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre>
</dd>
</dl>
<p>
# =&gt; =: true
# =&gt; &lt;: false
# =&gt; &gt;: false
# =&gt; -: false
</p>
</dd>


<dt class="method-heading" id="M_THROW"><code>throw(tag, value = nil) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/throw.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-throw">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-kernel/m/catch.html">Kernel.#catch</a>との組み合わせで大域脱出を行います。 throw
は同じ tag を指定した catch のブロックの終わりまでジャンプします。
</p>
<p>
throw は探索時に呼び出しスタックをさかのぼるので、ジャンプ先は同じメソッド内にあるとは限りません。もし ensure節 が存在するならジャンプ前に実行します。
</p>
<p>
同じ tag で待っている catch が存在しない場合は、例外でスレッドが終了します。
</p>
<p>
同じ tag であるとは <a href="../method/-object/i/object_id.html">Object#object_id</a> が同じであるという意味です。
</p>
<dl>
<dt class='method-param'>[PARAM] tag:</dt>
<dd>
catch の引数に対応する任意のオブジェクトです。
</dd>
<dt class='method-param'>[PARAM] value:</dt>
<dd>
catch の戻り値になります。
</dd>
<dt>[EXCEPTION] UncaughtThrowError:</dt>
<dd>
同じ tag で待っている catch が存在しない場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">throw</span> <span class="ss">:exit</span>, <span class="mi">25</span>
<span class="k">end</span>

ret <span class="o">=</span> <span class="nb">catch</span><span class="p">(</span><span class="ss">:exit</span><span class="p">)</span> <span class="k">do</span>
  <span class="k">begin</span>
    foo
    some_process<span class="p">(</span><span class="p">)</span>    <span class="c1"># 絶対に実行されない
</span>    <span class="mi">10</span>
  <span class="k">ensure</span>
    <span class="nb">puts</span> <span class="s2">"</span><span class="s2">ensure</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="nb">puts</span> ret
<span class="c1">#=&gt; ensure
</span><span class="c1">#   25
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/catch.html">Kernel.#catch</a>
</p>
</dd>


<dt class="method-heading" id="M_TRACE_VAR"><code>trace_var(varname, hook) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/trace_var.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-trace_var">rdoc</a>]</span></dt>
<dt class="method-heading"><code>trace_var(varname) {|new_val| .... } -&gt; nil</code></dt>
<dt class="method-heading"><code>trace_var(varname, hook) -&gt; [String|Proc]</code></dt>
<dd class="method-description">
<p>
グローバル変数 varname への代入のフックを登録します。
</p>
<p>
ここでの「グローバル変数」は、特殊変数
(<a href="../doc/spec=2fvariables.html#builtin">変数と定数/組み込み変数</a> を参照)も含めた `$' で始まる変数のことです。
</p>
<p>
この呼び出し以降、varname で指定したグローバル変数に値が代入されるたびに hook かブロックが評価されます。hook が Proc オブジェクトの場合代入された値がブロック引数に渡されます。文字列の場合はRubyコードとして評価されます。
</p>
<p>
trace_var がフックするのは明示的な代入だけです。フックは複数登録できます。
</p>
<p>
フックを解除するには、hook に nil を指定するか、<a href="../method/-kernel/m/untrace_var.html">Kernel.#untrace_var</a> を用います。
</p>
<p>
hook が nil ならば、設定されていた
hook をすべて解除してその配列を返します(ブロックで登録されていれば
<a href="../class/-proc.html">Proc</a> オブジェクトで返されます)
それ以外は、nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] varname:</dt>
<dd>
グローバル変数名を文字列か <a href="../class/-symbol.html">Symbol</a> で指定します。
</dd>
<dt class='method-param'>[PARAM] hook:</dt>
<dd>
フックになる文字列または <a href="../class/-proc.html">Proc</a> オブジェクトです。
</dd>
<dt>[RETURN]</dt>
<dd>
フックを登録した場合は nil を返します。解除した場合は解除したフックを並べた配列を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">trace_var</span><span class="p">(</span><span class="ss">:<span class="vg">$v</span><span class="p">)</span><span class="p">{</span><span class="o">|</span>val</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"</span><span class="s2">hook: $v=</span><span class="si">#{</span><span class="n">val</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="vg">$v</span> <span class="o">=</span> <span class="mi">1</span>       <span class="c1">#=&gt; hook: $v=1
</span><span class="vg">$v</span> <span class="o">=</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>   <span class="c1">#=&gt; hook: $v=&quot;foo&quot;
</span><span class="vg">$v</span><span class="p">.</span><span class="nf">upcase!</span>
<span class="nb">p</span> <span class="vg">$v</span>         <span class="c1">#=&gt; &quot;FOO&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/untrace_var.html">Kernel.#untrace_var</a>
</p>
</dd>


<dt class="method-heading" id="M_TRAP"><code>trap(signal, command) -&gt; String | Proc | nil</code><span class="permalink">[<a href="../method/-kernel/m/trap.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-trap">rdoc</a>]</span></dt>
<dt class="method-heading"><code>trap(signal) { ... } -&gt; String | Proc | nil</code></dt>
<dd class="method-description">
<p>
signal で指定された割り込みにたいするハンドラとして
command を登録します。<a href="../method/-signal/m/trap.html">Signal.#trap</a>と同じです。
</p>
<p>
<a href="../method/-signal/m/trap.html">Signal.#trap</a>の使用を推奨します。
</p>
<dl>
<dt class='method-param'>[PARAM] signal:</dt>
<dd>
<a href="../method/-signal/m/trap.html">Signal.#trap</a> 参照
</dd>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
<a href="../method/-signal/m/trap.html">Signal.#trap</a> 参照
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-signal/m/trap.html">Signal.#trap</a>,<a href="../class/-signal.html">Signal</a>
</p>
</dd>


<dt class="method-heading" id="M_UNTRACE_VAR"><code>untrace_var(varname, hook = nil) -&gt; [String|Proc]</code><span class="permalink">[<a href="../method/-kernel/m/untrace_var.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-untrace_var">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
グローバル変数 varname に関連付けられたフックを解除します。
</p>
<p>
hook が指定された場合にはそのフックだけを解除します。省略するか nil を与えた場合は
varname のフックを全て解除します。
</p>
<dl>
<dt class='method-param'>[PARAM] varname:</dt>
<dd>
グローバル変数名を文字列か <a href="../class/-symbol.html">Symbol</a> で指定します。
</dd>
<dt class='method-param'>[PARAM] hook:</dt>
<dd>
文字列または <a href="../class/-proc.html">Proc</a> オブジェクトです。
</dd>
<dt>[RETURN]</dt>
<dd>
解除されたフックの配列を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">trace_var</span><span class="p">(</span><span class="ss">:<span class="vg">$v</span><span class="p">)</span><span class="p">{</span><span class="o">|</span>val</span><span class="o">|</span> <span class="nb">print</span> <span class="s2">"</span><span class="s2">hookA.</span><span class="si">#{</span><span class="n">val</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">,\n</span><span class="s2">"</span> <span class="p">}</span>
block <span class="o">=</span> <span class="nb">proc</span><span class="p">{</span><span class="o">|</span>val<span class="o">|</span> <span class="nb">print</span> <span class="s2">"</span><span class="s2">hookB.</span><span class="si">#{</span><span class="n">val</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">,</span><span class="s2">"</span> <span class="p">}</span>
<span class="nb">trace_var</span><span class="p">(</span><span class="ss">:<span class="vg">$v</span>,<span class="o">&amp;</span>block</span><span class="p">)</span>
<span class="vg">$v</span> <span class="o">=</span> <span class="s1">'str'</span>        <span class="c1">#=&gt; hookB.&quot;str&quot;,hookA.&quot;str&quot;,
</span>
<span class="nb">untrace_var</span><span class="p">(</span><span class="ss">:<span class="vg">$v</span>,block</span><span class="p">)</span>
<span class="vg">$v</span> <span class="o">=</span> <span class="s1">'str'</span>        <span class="c1">#=&gt; hookA.&quot;str&quot;,
</span>
<span class="nb">trace_var</span><span class="p">(</span><span class="ss">:<span class="vg">$v</span><span class="p">)</span><span class="p">{</span><span class="o">|</span>val</span><span class="o">|</span> <span class="nb">print</span> <span class="s2">"</span><span class="s2">hookC.</span><span class="si">#{</span><span class="n">val</span><span class="p">.</span><span class="nf">inspect</span><span class="si">}</span><span class="s2">,</span><span class="s2">"</span> <span class="p">}</span>
<span class="nb">p</span> <span class="nb">untrace_var</span><span class="p">(</span><span class="ss">:<span class="vg">$v</span><span class="p">)</span> <span class="c1">#=&gt; [#&lt;Proc:0x02b68f58@..:9&gt;, #&lt;Proc:0x02b6978c@..:3&gt;]
</span><span class="vg">$v</span> <span class="o">=</span> <span class="s1">'str'</span>        <span class="c1"># なにも出力されない
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/trace_var.html">Kernel.#trace_var</a>
</p>
</dd>


<dt class="method-heading" id="M_WARN"><code>warn(*message, uplevel: nil) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/warn.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-warn">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
message を 標準エラー出力 <a href="../method/-kernel/v/stderr.html">$stderr</a> に出力します。 <a href="../method/-kernel/v/-v-e-r-b-o-s-e.html">$VERBOSE</a>
フラグ が nil のときは何も出力しません。
</p>
<p>
文字列以外のオブジェクトが引数として与えられた場合には、
to_s メソッドにより文字列に変換してから出力します。
</p>
<p>
uplevel を指定しない場合は、このメソッドは以下と同じです。
</p>
<pre class="highlight ruby">
<code>
<span class="vg">$stderr</span><span class="p">.</span><span class="nf">puts</span><span class="p">(</span><span class="o">*</span>message<span class="p">)</span> <span class="k">if</span> <span class="o">!</span><span class="vg">$VERBOSE</span><span class="p">.</span><span class="nf">nil?</span> <span class="o">&amp;&amp;</span> <span class="o">!</span>message<span class="p">.</span><span class="nf">empty?</span>
<span class="k">nil</span>
</code></pre>
<dl>
<dt class='method-param'>[PARAM] message:</dt>
<dd>
出力するオブジェクトを任意個指定します。
</dd>
<dt class='method-param'>[PARAM] uplevel:</dt>
<dd>
いくつ前の呼び出し元のファイル名と行番号を表示するかを0以上の数値で指定します。 nil の場合は表示しません。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準エラー出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">warn</span> <span class="s2">"</span><span class="s2">caution!</span><span class="s2">"</span> <span class="c1">#=&gt; caution!
</span><span class="vg">$VERBOSE</span> <span class="o">=</span> <span class="k">nil</span>
<span class="nb">warn</span> <span class="s2">"</span><span class="s2">caution!</span><span class="s2">"</span> <span class="c1"># 何もしない
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">uplevel の例</span>
<code>
<span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">warn</span><span class="p">(</span><span class="s2">"</span><span class="s2">test message</span><span class="s2">"</span>, <span class="ss">uplevel:</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># =&gt; test.rb:2: warning: test message
</span>  <span class="nb">warn</span><span class="p">(</span><span class="s2">"</span><span class="s2">test message</span><span class="s2">"</span>, <span class="ss">uplevel:</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># =&gt; test.rb:6: warning: test message
</span>  <span class="nb">warn</span><span class="p">(</span><span class="s2">"</span><span class="s2">test message</span><span class="s2">"</span>, <span class="ss">uplevel:</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; test message
</span><span class="k">end</span>
foo
</code></pre>
<p>
[SEE_ALSO] <a href="../method/-warning/i/warn.html">Warning#warn</a>, <a href="../method/-kernel/v/stderr.html">$stderr</a>,<a href="../method/-kernel/v/-v-e-r-b-o-s-e.html">$VERBOSE</a>
</p>
</dd>


</dl>

<h2>特殊変数</h2>
<dl>

<dt class="method-heading" id="V_--21"><code>$! -&gt; Exception | nil</code><span class="permalink">[<a href="../method/-kernel/v/=21.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
最後に例外が発生したときの <a href="../class/-exception.html">Exception</a> オブジェクトです。該当する例外がないときは nil です。
</p>
<p>
<a href="../method/-kernel/m/raise.html">Kernel.#raise</a> によって設定されます。
</p>
<p>
この変数はスレッドローカル、読み取り専用です。
</p>
</dd>


<dt class="method-heading" id="V_--22"><code>$&quot; -&gt; [String]</code><span class="permalink">[<a href="../method/-kernel/v/=22.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-22">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$LOADED_FEATURES -&gt; [String]</code></dt>
<dd class="method-description">
<p>
<a href="../method/-kernel/m/require.html">Kernel.#require</a> でロードされたファイル名を含む配列です。
</p>
<p>
<a href="../method/-kernel/m/require.html">Kernel.#require</a> で同じファイルを複数回ロードしないようにするためのロックとして使われます。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--24"><code>$$ -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/v/=24.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-24">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在実行中の Ruby プロセスのプロセス ID です。
<a href="../method/-process/m/pid.html">Process.#pid</a> と同じです。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--26"><code>$&amp; -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=26.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-26">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功した正規表現のパターンマッチでマッチした文字列です。最後のマッチが失敗していた場合には nil となります。
</p>
<p>
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>[0] と同じです。
</p>
<p>
この変数はローカルスコープかつスレッドローカル、読み取り専用です。
Ruby起動時の初期値は nil です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s1">'&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'</span>
<span class="k">if</span> <span class="sr">%r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;]</span> <span class="o">=~</span> str
  <span class="nb">p</span> <span class="vg">$&amp;</span> 
<span class="k">end</span>
<span class="c1">#=&gt; &quot;&lt;a href=\&quot;http://example.com\&quot;&gt;example.com&lt;/a&gt;&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="V_--27"><code>$' -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=27.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-27">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功した正規表現のパターンマッチでマッチした部分より後ろの文字列です。最後のマッチが失敗していた場合には nil となります。
</p>
<p>
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>.post_match と同じです。
</p>
<p>
この変数はローカルスコープかつスレッドローカル、読み取り専用です。
Ruby起動時の初期値は nil です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s1">'&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'</span>
<span class="k">if</span> <span class="sr">%r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;]</span> <span class="o">=~</span> str
  <span class="nb">p</span> <span class="vg">$'</span>
<span class="k">end</span>
<span class="c1">#=&gt; &quot;&lt;/p&gt;&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="V_--2A"><code>$* -&gt; [String]</code><span class="permalink">[<a href="../method/-kernel/v/=2a.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2A">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Rubyスクリプトに与えられた引数を表す配列です。組み込み定数 <a href="../method/-object/c/-a-r-g-v.html">Object::ARGV</a> の別名です。
</p>
<p>
Ruby 自身に対する引数は取り除かれています。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--2B"><code>$+ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2b.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2B">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功した正規表現のパターンマッチでマッチした中で最後の括弧に対応する部分文字列です。
</p>
<p>
最後のマッチが失敗していた場合には nil。いくつかある選択型のパターンのどれがマッチしたのか分からない時に便利です。
</p>
<p>
この変数はローカルスコープかつスレッドローカルです。
</p>
</dd>


<dt class="method-heading" id="V_--2C"><code>$, -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2c.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2C">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
デフォルトの出力フィールド区切り文字列です。
<a href="../method/-array/i/join.html">Array#join</a> で引数を省略した場合と、
<a href="../method/-kernel/m/print.html">Kernel.#print</a> の各引数の間で出力されます。
</p>
<p>
デフォルト値は nil で、空文字列と同じ結果になります。
</p>
<p>
Ruby 2.7からは nil 以外に変更することは非推奨になったため、
nil 以外を代入すると警告がでるようになりました。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--2D0"><code>$/ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2d0.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2D0">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-0 -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
入力レコード区切りを表す文字列です。
awk の RS 変数のように働きます。
</p>
<p>
<a href="../method/-kernel/m/gets.html">Kernel.#gets</a> のような「行」単位の読み込みメソッドが「行」の区切りとして使用します。
Rubyがコマンドオプション -0 付きで起動されたときには -0 で指定された値が既定値となります。そうでないとき、既定値は &quot;\n&quot; です。
</p>
<p>
この変数に nil を設定すると読み込みメソッドはファイル全体を一度に読み込みます。空文字列 &quot;&quot; を設定するとパラグラフモードとみなされ、
2 つ以上連続した改行が「行」の区切りになります。
</p>
<p>
$/ には正規表現は使えません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2D-F"><code>$; -&gt; Regexp | String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2d-f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2DF">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-F -&gt; Regexp | String | nil</code></dt>
<dd class="method-description">
<p>
<a href="../method/-string/i/split.html">String#split</a> で引数を省略した場合の区切り文字です。
</p>
<p>
Ruby 2.7からは nil 以外に変更することは非推奨になったため、
nil 以外を代入すると警告がでるようになりました。
</p>
<p>
nilを設定すると特殊な分割を行います。詳細は <a href="../method/-string/i/split.html">String#split</a> を参照してください。
</p>
<p>
コマンドラインオプション -F を指定して Ruby を起動した場合、初期値は -F で指定した値です。それ以外の時には初期値は nil です。
</p>
<p>
$; には任意のオブジェクトを代入できます。ただし、<a href="../method/-string/i/split.html">String#split</a> の仕様変更を考慮すると常に正規表現を指定すべきです。
</p>
<p>
Ruby のバージョンによらず動作するプログラムを書くときは
$; に頼らないコードを書くべきです。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2D-I"><code>$: -&gt; [String]</code><span class="permalink">[<a href="../method/-kernel/v/=2d-i.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2DI">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$LOAD_PATH -&gt; [String]</code></dt>
<dt class="method-heading"><code>$-I -&gt; [String]</code></dt>
<dd class="method-description">
<p>
Rubyライブラリをロードするときの検索パスです。
</p>
<p>
<a href="../method/-kernel/m/load.html">Kernel.#load</a> や <a href="../method/-kernel/m/require.html">Kernel.#require</a>
がファイルをロードする時に検索するディレクトリのリストを含む配列です。
</p>
<p>
起動時にはコマンドラインオプション -I で指定したディレクトリ、環境変数 RUBYLIB の値、コンパイル時に指定したデフォルト値をこの順番で含みます。
</p>
<p>
以下に典型的な UNIX システム上でのロードパスを示します。
</p>
<pre>
-I で指定したパス
環境変数 RUBYLIB の値
/usr/local/lib/ruby/site_ruby/VERSION        サイト固有、バージョン依存のライブラリ
/usr/local/lib/ruby/site_ruby/VERSION/ARCH   サイト固有、システム依存、拡張ライブラリ
/usr/local/lib/ruby/site_ruby                サイト固有ライブラリ
/usr/local/lib/ruby/VERSION                  標準ライブラリ
/usr/local/lib/ruby/VERSION/ARCH             標準、システム依存、拡張ライブラリ
</pre>
<p>
上記表中の VERSION は Ruby のバージョンを表す文字列で、「1.6」や「1.8」です。
ARCH はハードウェアと OS を表す文字列で、「i686-linux」や「alpha-osf5.1」などです。
ARCH の値は Config::CONFIG['arch'] で得られます。
</p>
<p>
コンパイル時のデフォルトパスは多くの UNIX システムでは &quot;/usr/local/lib/ruby&quot; です。
<a href="../doc/platform=2fmswin32.html">mswin32</a>、<a href="../doc/platform=2fmingw32.html">mingw32</a>、<a href="../doc/platform=2f-cygwin.html">Cygwin</a>
環境では
ruby.dll の位置からの相対で決まります。
</p>
<p>
require 'foo' を実行すると、以下のように foo.rb と foo.so が交互に探索されます。
</p>
<pre>
/usr/local/lib/ruby/site_ruby/VERSION/foo.rb
/usr/local/lib/ruby/site_ruby/VERSION/foo.so
/usr/local/lib/ruby/site_ruby/VERSION/ARCH/foo.rb
/usr/local/lib/ruby/site_ruby/VERSION/ARCH/foo.so
  :
  :
</pre>
<p>
なお、共有ライブラリの拡張子が .so でないシステムでは「.so」が適切な拡張子に変更されます。例えば HP-UX では require 'foo.so' とすると foo.sl を検索します。したがって Ruby で記述されたコードでは常に .so を使うべきです。
</p>
<p>
なお、ロードパスをコマンドラインから調べるには
</p>
<pre>
$ ruby -e 'puts $:'
</pre>
<p>
とします。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>, <a href="../doc/spec=2fenvvars.html">環境変数</a>
</p>
</dd>


<dt class="method-heading" id="V_--2D-K"><code>$KCODE -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/v/=2d-k.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2DK">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-K -&gt; nil</code></dt>
<dd class="method-description">
<p>
この特殊変数は何の影響も持たなくなりました。
</p>
<p>
値を代入しても無視され、参照すると常に nil です。
</p>
<pre>
&gt;&gt; $KCODE = true
(irb):1: warning: variable $KCODE is no longer effective; ignored
=&gt; true
&gt;&gt; $KCODE
(irb):2: warning: variable $KCODE is no longer effective
=&gt; nil
</pre>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2D-W"><code>$-W -&gt; 0 | 1 | 2</code><span class="permalink">[<a href="../method/-kernel/v/=2d-w.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2DW">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
コマンドラインオプション -W を指定したとき、そのコマンドライン引数の値が設定されます。
</p>
<p>
つまり、<a href="../method/-kernel/v/-v-e-r-b-o-s-e.html">$VERBOSE</a> の値によって以下の値を返します。
</p>
<dl>
<dt>nil</dt>
<dd>
<p>
0。警告を出力しない。
</p>
</dd>
<dt>false</dt>
<dd>
<p>
1。重要な警告のみ出力する。(デフォルト)
</p>
</dd>
<dt>true</dt>
<dd>
<p>
2。すべての警告を出力する。
</p>
</dd>
</dl>
<p>
この変数には代入できません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DA"><code>$-a -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2da.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2Da">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自動 split モードを表すフラグです。
</p>
<p>
コマンドラインオプション -a を使ったとき true に設定されます。この変数には代入できません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DD"><code>$DEBUG -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2dd.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2Dd">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-d -&gt; bool</code></dt>
<dd class="method-description">
<p>
この値が真のときはインタプリタがデバッグモードになります。
</p>
<p>
コマンドラインオプション -d でセットされます。スクリプトから代入することもできます。
</p>
<p>
デバッグモードでは、通常モードに比べて以下の違いがあります。
</p>
<ul>
<li>通常時はいずれかのスレッドが例外によって終了しても
他のスレッドは実行を続けますが、デバッグモードでは
いずれかのスレッドが例外によって終了した時に
インタプリタ全体が中断されるようになります。
<a href="../method/-thread/s/abort_on_exception.html">Thread.abort_on_exception</a> を
true にセットするのと同じ効果です。</li>
<li>Thread.abort_on_exception= の効果がなくなります。</li>
<li>例外を捕捉しているかどうかに関係なく、
例外が発生した時点で <a href="../method/-kernel/v/stderr.html">$stderr</a> にそれが出力されます。
スクリプトの処理は続行されます。</li>
</ul>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DI"><code>$-i -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2di.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2Di">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
in-place 置換モードで用いられます。
</p>
<p>
コマンドラインオプション -i を指定したとき、空文字列になります。
-i オプションに拡張子を渡した場合にはその拡張子が文字列として格納されます。
</p>
<p>
-i オプションが指定されていない時の値は nil です。
</p>
<p>
スクリプト内で $-i に代入することもでき、その場合は <a href="../method/-object/c/-a-r-g-v.html">Object::ARGV</a> の次のファイルを読み込み始めるタイミングで in-place 置換を開始します。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DL"><code>$-l -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2dl.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2Dl">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
コマンドラインオプション -l を指定したとき true に設定されます。この変数には代入できません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DP"><code>$-p -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2dp.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2Dp">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
コマンドラインオプション -p を指定したとき true に設定されます。この変数には代入できません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DV"><code>$VERBOSE -&gt; bool | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2dv.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-2Dv">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-v -&gt; bool | nil</code></dt>
<dt class="method-heading"><code>$-w -&gt; bool | nil</code></dt>
<dd class="method-description">
<p>
冗長メッセージフラグです。Rubyインタプリタへのコマンドラインオプション -v でセットされます。
</p>
<p>
警告レベルは三段階あり、それぞれ以下の通りです。
</p>
<dl>
<dt>nil</dt>
<dd>
<p>
警告を出力しない
</p>
</dd>
<dt>false</dt>
<dd>
<p>
重要な警告のみ出力 (デフォルト)
</p>
</dd>
<dt>true</dt>
<dd>
<p>
すべての警告を出力する
</p>
</dd>
</dl>
<p>
$VERBOSE に nil, false 以外を代入すると値は true になります。
</p>
<p>
$VERBOSE の値はコマンドラインオプション
-W でも設定できます。
-W0 オプションで nil、
-W1 オプションで false、
-W2, -W オプションで true が設定されます。
-v オプションや
-w オプションを指定した場合は
true が設定されます。
</p>
<p>
$VERBOSE はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2E"><code>$. -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/v/=2e.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-.">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
いずれかの <a href="../class/-i-o.html">IO</a> オブジェクトが最後に読んだ行の行番号です。
<a href="../method/-object/c/-a-r-g-f.html">Object::ARGF</a> などの IO 互換のオブジェクトも $. を更新します。
</p>
<p>
IO からの読み込みが起きるタイミングが予測不能であるような複雑なプログラムでは使用すべきではありません。特に、マルチスレッドプログラムではスレッド間で競合を起こす可能性があります。そのような場合には、 <a href="../method/-i-o/i/lineno.html">IO#lineno</a> を使用してください。
</p>
<p>
この変数はグローバルスコープです。
Ruby起動時の初期値は 0 です。
</p>
</dd>


<dt class="method-heading" id="V_0"><code>$0 -&gt; String</code><span class="permalink">[<a href="../method/-kernel/v/0.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-0">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$PROGRAM_NAME -&gt; String</code></dt>
<dd class="method-description">
<p>
現在実行中の Ruby スクリプトの名前を表す文字列です。
</p>
<p>
OS と Ruby のバージョンによっては、この変数に代入すると <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/ps.html">ps(1)</a> の出力が変化します。この機能はプログラムの現在の状態を表示するのに便利です。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_1"><code>$1 -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/1.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-1">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$2 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$3 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$4 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$5 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$6 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$7 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$8 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$9 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$10 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$11 -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
最後に成功したパターンマッチで n 番目の括弧にマッチした値が格納されます。該当する括弧がなければ nil が入っています。(覚え方: \数字 のようなもの)
</p>
<p>
番号 n はいくらでも大きな正整数を利用できます。
</p>
<p>
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>(1),
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>(2), ... と同じ。
</p>
<p>
これらの変数はローカルスコープかつスレッドローカル、読み取り専用です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s1">'&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'</span>
<span class="k">if</span> <span class="sr">%r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;]</span> <span class="o">=~</span> str
  <span class="nb">print</span> <span class="vg">$1</span>
  <span class="nb">print</span> <span class="vg">$2</span>
<span class="k">end</span>
<span class="c1">#=&gt; &quot;http://example.com&quot;
</span><span class="c1">#=&gt; &quot;example.com&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="V_--3C"><code>$&lt; -&gt; IO</code><span class="permalink">[<a href="../method/-kernel/v/=3c.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-3C">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
すべての引数または標準入力で構成される仮想ファイルです。定数 <a href="../method/-object/c/-a-r-g-f.html">Object::ARGF</a> の別名です。
</p>
<p>
この変数はグローバルスコープ、読み取り専用です。
</p>
</dd>


<dt class="method-heading" id="V_--3D"><code>$= -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
過去との互換性のために残されていますが、もはや何の意味もありません。
</p>
<p>
値は常に false です。代入しても無視されます。
</p>
<p>
この変数はグローバルスコープです。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$=</span> <span class="o">=</span> <span class="k">true</span> <span class="c1"># =&gt; warning: variable $= is no longer effective; ignored
</span><span class="vg">$=</span>        <span class="c1"># =&gt; warning: variable $= is no longer effective
</span>          <span class="c1">#    false
</span></code></pre>
</dd>


<dt class="method-heading" id="V_--3E"><code>$&gt; -&gt; object</code><span class="permalink">[<a href="../method/-kernel/v/=3e.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-3E">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$stdout -&gt; object</code></dt>
<dd class="method-description">
<p>
標準出力です。
</p>
<p>
組み込み関数 <a href="../method/-kernel/m/print.html">Kernel.#print</a>、<a href="../method/-kernel/m/puts.html">Kernel.#puts</a> や
<a href="../method/-kernel/m/p.html">Kernel.#p</a> などのデフォルトの出力先となります。初期値は <a href="../method/-object/c/-s-t-d-o-u-t.html">Object::STDOUT</a> です。コマンドラインオプションオプション -i を指定した場合には読み込み元と同じ名前のファイルを表します。
</p>
<p>
$stdout に代入するオブジェクトには
write という名前のメソッドが定義されていなければいけません。
</p>
<p>
自プロセスの標準出力をリダイレクトしたいときには、以下のように $stdout に代入すれば十分です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 標準出力の出力先を /tmp/foo に変更
</span><span class="vg">$stdout</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>         <span class="c1"># 出力する
</span><span class="vg">$stdout</span> <span class="o">=</span> <span class="no">STDOUT</span>   <span class="c1"># 元に戻す
</span></code></pre>
<p>
自プロセスだけでなく、子プロセスの標準出力もリダイレクトしたいときは以下のように <a href="../method/-i-o/i/reopen.html">IO#reopen</a> を使います。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">STDOUT</span><span class="p">.</span><span class="nf">reopen</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>
</code></pre>
<p>
また、リダイレクトしたあと出力先をまた元に戻したい場合は以下のようにします。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
stdout_old <span class="o">=</span> <span class="vg">$stdout</span><span class="p">.</span><span class="nf">dup</span>        <span class="c1"># 元の $stdout を保存する
</span><span class="vg">$stdout</span><span class="p">.</span><span class="nf">reopen</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># $stdout を /tmp/foo にリダイレクトする
</span><span class="nb">puts</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>                      <span class="c1"># /tmp/foo に出力
</span><span class="vg">$stdout</span><span class="p">.</span><span class="nf">flush</span>                   <span class="c1"># 念のためフラッシュする
</span><span class="vg">$stdout</span><span class="p">.</span><span class="nf">reopen</span> stdout_old       <span class="c1"># 元に戻す
</span></code></pre>
<p>
$stdout はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--3F"><code>$? -&gt; Process::Status | nil</code><span class="permalink">[<a href="../method/-kernel/v/=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
このスレッドで最後に終了した子プロセスのステータスです。
</p>
<p>
<a href="../class/-process=3a=3a-status.html">Process::Status</a> オブジェクトが入っています。子プロセスの終了時ステータスは <a href="../method/-process=3a=3a-status/i/exitstatus.html">Process::Status#exitstatus</a> で得られます。
</p>
<p>
この変数はスレッドローカルで読み取り専用です。
</p>
<p>
[SEE_ALSO] <a href="../method/-process/m/wait.html">Process.#wait</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-process/s/last_status.html">Process.last_status</a>
</p>
</dd>


<dt class="method-heading" id="V_--40"><code>$@ -&gt; [String] | nil</code><span class="permalink">[<a href="../method/-kernel/v/=40.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-40">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
最後に例外が発生した時のバックトレースを表す配列です。
<a href="../method/-kernel/m/raise.html">Kernel.#raise</a> によって設定されます。
</p>
<p>
配列の各要素はメソッドの呼び出し位置を示す文字列で形式は
</p>
<pre>
&quot;filename:line&quot;
</pre>
<p>
または
</p>
<pre>
&quot;filename:line:in `methodname'&quot;
</pre>
<p>
です。これは <a href="../method/-kernel/m/caller.html">Kernel.#caller</a> が返す値と同じ形式です。
</p>
<p>
$@ へ値を代入するときは、<a href="../method/-kernel/v/=21.html">$!</a> が nil であってはいけません。
$@ の値は、<a href="../method/-kernel/v/=21.html">$!</a>.backtrace の値と同じです。また、$@ への代入は <a href="../method/-kernel/v/=21.html">$!</a>.set_backtrace 呼び出しと同じです。
</p>
<p>
文字列の配列でも nil でもない値を代入しようとすると、 <a href="../class/-type-error.html">TypeError</a> 例外が発生します。
</p>
<p>
この変数はスレッドローカルです。
</p>
</dd>


<dt class="method-heading" id="V_-F-I-L-E-N-A-M-E"><code>$FILENAME -&gt; String</code><span class="permalink">[<a href="../method/-kernel/v/-f-i-l-e-n-a-m-e.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-FILENAME">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
仮想ファイル <a href="../method/-object/c/-a-r-g-f.html">Object::ARGF</a> で現在読み込み中のファイル名です。
<a href="../method/-a-r-g-f=2eclass/i/filename.html">ARGF.class#filename</a> と同じです。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_-S-A-F-E"><code>$SAFE -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/v/-s-a-f-e.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-SAFE">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
カレントスレッドのセーフレベルを表す整数です。
</p>
<p>
セーフレベルについては<a href="../doc/spec=2fsafelevel.html">セキュリティモデル</a> を参照してください。
</p>
<p>
Thread.current.safe_level と同じです。非整数を代入しようとすると <a href="../class/-type-error.html">TypeError</a> が発生します。
</p>
<p>
この変数はスレッドローカルです。
Ruby起動時の初期値は 0 です。
</p>
</dd>


<dt class="method-heading" id="V_--5C"><code>$\ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=5c.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-5C">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
出力レコード区切りを表す文字列です。
<a href="../method/-kernel/m/print.html">Kernel.#print</a> が最後にこの文字列を出力します。
</p>
<p>
デフォルトは nil で、何も出力しません。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V__"><code>$_ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/_.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-_">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
最後に <a href="../method/-kernel/m/gets.html">Kernel.#gets</a> または <a href="../method/-kernel/m/readline.html">Kernel.#readline</a> で読み込んだ文字列です。
EOF に達した場合には、 nil になります。
(覚え方: Perlと同じ)
</p>
<p>
<a href="../method/-kernel/m/print.html">Kernel.#print</a> のような Perl 由来の幾つかのメソッドは、引数を省略すると代わりに $_ を利用します。
</p>
<p>
この変数はローカルスコープかつスレッドローカルです。
Ruby起動時の初期値は nil です。
</p>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/print.html">Kernel.#print</a>, <a href="../method/-kernel/m/gets.html">Kernel.#gets</a>, <a href="../method/-kernel/m/readline.html">Kernel.#readline</a>, <a href="../method/-object/c/-a-r-g-f.html">Object::ARGF</a>
</p>
<h3 >例</h3>
<p>
example.txt:
</p>
<pre>
foo
bar
baz
</pre>
<p>
このとき、コマンド ruby -e 'print while gets' example.txt は次を出力します
</p>
<pre>
foo
bar
baz
</pre>
<p>
ただし、このプログラムは次のように書く方がよりRuby的です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">ARGF</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span>line<span class="o">|</span>
  <span class="nb">print</span> line
<span class="k">end</span>
</code></pre>
</dd>


<dt class="method-heading" id="V_--60"><code>$` -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=60.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-60">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功した正規表現のパターンマッチでマッチした部分より前の文字列です。最後のマッチが失敗していた場合には nil となります。
</p>
<p>
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>.pre_match と同じです。
</p>
<p>
この変数はローカルスコープかつスレッドローカル、読み取り専用です。
Ruby起動時の初期値は nil です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s1">'&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'</span>
<span class="k">if</span> <span class="sr">%r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;]</span> <span class="o">=~</span> str
  <span class="nb">p</span> <span class="vg">$`</span>
<span class="k">end</span>
<span class="c1">#=&gt; &quot;&lt;p&gt;&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="V_STDERR"><code>$stderr -&gt; object</code><span class="permalink">[<a href="../method/-kernel/v/stderr.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-stderr">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
標準エラー出力です。
</p>
<p>
Ruby インタプリタが出力するエラーメッセージや警告メッセージ、<a href="../method/-kernel/m/warn.html">Kernel.#warn</a> の出力先となります。初期値は <a href="../method/-object/c/-s-t-d-e-r-r.html">Object::STDERR</a> です。
</p>
<p>
$stderr に代入するオブジェクトには
write という名前のメソッドが定義されていなければいけません。
</p>
<p>
自プロセスの標準エラー出力をリダイレクトしたいときには、
$stderr に代入すれば十分です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 標準エラー出力の出力先を /tmp/foo に変更
</span><span class="vg">$stderr</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>         <span class="c1"># 出力する
</span><span class="vg">$stderr</span> <span class="o">=</span> <span class="no">STDERR</span>   <span class="c1"># 元に戻す
</span></code></pre>
<p>
自プロセスだけでなく、子プロセスの標準エラー出力もリダイレクトしたいときは以下のように <a href="../method/-i-o/i/reopen.html">IO#reopen</a> を使います。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$stderr</span><span class="p">.</span><span class="nf">reopen</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>
</code></pre>
<p>
また、リダイレクトしたあと出力先をまた元に戻したい場合は以下のようにします。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
stderr_old <span class="o">=</span> <span class="vg">$stderr</span><span class="p">.</span><span class="nf">dup</span>        <span class="c1"># 元の $stderr を保存する
</span><span class="vg">$stderr</span><span class="p">.</span><span class="nf">reopen</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span><span class="p">)</span>      <span class="c1"># $stderr を /tmp/foo にリダイレクトする
</span><span class="nb">puts</span> <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>                      <span class="c1"># /tmp/foo に出力
</span><span class="vg">$stderr</span><span class="p">.</span><span class="nf">flush</span>                   <span class="c1"># 念のためフラッシュする
</span><span class="vg">$stderr</span><span class="p">.</span><span class="nf">reopen</span> stderr_old       <span class="c1"># 元に戻す
</span></code></pre>
<p>
$stderr はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_STDIN"><code>$stdin -&gt; object</code><span class="permalink">[<a href="../method/-kernel/v/stdin.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-stdin">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
標準入力です。
</p>
<p>
自プロセスの標準入力をリダイレクトしたいときは
$stdin に代入すれば十分です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 標準入力の入力元 /tmp/foo に変更
</span><span class="vg">$stdin</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">w</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">gets</span>               <span class="c1"># 入力する
</span><span class="vg">$stdin</span> <span class="o">=</span> <span class="no">STDIN</span>     <span class="c1"># 元に戻す
</span></code></pre>
<p>
ただし、<a href="../method/-kernel/m/gets.html">Kernel.#gets</a> など、特定の組み込みメソッドは
$stdin オブジェクトにメソッドを転送して実装されています。従って、<a href="../method/-kernel/m/gets.html">Kernel.#gets</a> などが正しく動作するには、
$stdin オブジェクトに代入したオブジェクトが以下のメソッドを正しく実装していなければいけません。
</p>
<pre>
gets, readline, readlines, getc, readchar, tell, seek,
pos=, rewind, fileno, to_io, eof, each_line, each_byte,
binmode, closed?
</pre>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$stdin</span> <span class="o">=</span> <span class="no">Object</span><span class="p">.</span><span class="nf">new</span>
<span class="k">def</span> <span class="vg">$stdin</span><span class="p">.</span><span class="nf">gets</span>
  <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>
<span class="k">end</span>
<span class="nf">p</span> <span class="nb">gets</span><span class="p">(</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;foo&quot;
</span></code></pre>
<p>
自プロセスだけでなく、子プロセスの標準入力もリダイレクトしたいときは以下のように <a href="../method/-i-o/i/reopen.html">IO#reopen</a> を使います。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="vg">$stdin</span><span class="p">.</span><span class="nf">reopen</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span><span class="p">)</span>
</code></pre>
<p>
また、リダイレクトしたあと出力先をまた元に戻したい場合は以下のようにします。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
stdin_old <span class="o">=</span> <span class="vg">$stdin</span><span class="p">.</span><span class="nf">dup</span>       <span class="c1"># 元の $stdin を保存する
</span><span class="vg">$stdout</span><span class="p">.</span><span class="nf">reopen</span><span class="p">(</span><span class="s2">"</span><span class="s2">/tmp/foo</span><span class="s2">"</span><span class="p">)</span>   <span class="c1"># $stdin を /tmp/foo にリダイレクトする
</span><span class="nb">gets</span>                         <span class="c1"># /tmp/foo から入力
</span><span class="vg">$stdin</span><span class="p">.</span><span class="nf">reopen</span> stdin_old      <span class="c1"># 元に戻す
</span></code></pre>
<p>
$stdin はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--7E"><code>$~ -&gt; MatchData | nil</code><span class="permalink">[<a href="../method/-kernel/v/=7e.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.5.9/Kernel.html#method-c-7E">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功したマッチに関する <a href="../class/-match-data.html">MatchData</a>オブジェクトです。
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a> の別名です。
</p>
<p>
このデータから n 番目のマッチ ($n) を取り出すためには $~[n] を使います。
</p>
<p>
この値に代入すると Regexp.last_match や、 <a href="../method/-kernel/v/=26.html">$&amp;</a>, <a href="../method/-kernel/v/1.html">$1</a>, <a href="../method/-kernel/v/2.html">$2</a>, ... などの関連する組み込み変数の値が変化します。
MatchData オブジェクトでも nil でもない値を代入しようとすると <a href="../class/-type-error.html">TypeError</a> が発生します。
</p>
<p>
この変数はローカルスコープかつスレッドローカルです。
Ruby起動時の初期値は nil です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
str <span class="o">=</span> <span class="s1">'&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'</span>
<span class="k">if</span> <span class="sr">%r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;]</span> <span class="o">=~</span> str
  <span class="nb">p</span> <span class="vg">$~</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">end</span>
<span class="c1">#=&gt; &quot;http://example.com&quot;
</span></code></pre>
</dd>


</dl>

</main>

<footer id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>

  <a href="https://github.com/rurema/doctree/issues/new" id="feedback-link">フィードバックを送る</a>
  
  <script>if (window.URLSearchParams) { document.getElementById("feedback-link").search = new URLSearchParams({'body': document.location}); }</script>
</footer>
</body>
</html>
