<!DOCTYPE html>
<html lang="ja-JP">
<head>

<meta name="robots" content="noindex">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="../syntax-highlight.css">
<link rel="icon" type="image/png" href="../rurema.png">

<title>module Enumerable (Ruby 2.7.6 リファレンスマニュアル)</title>
<meta name="description" content="繰り返しを行なうクラスのための Mix-in。このモジュールの
メソッドは全て each を用いて定義されているので、インクルード
するクラスには each が定義されていなければなりません。">
<script src="../script.js"></script>
</head>
<body>


<header>
  <nav>
    <ol class="inline-breadcrumb-list">
      <li>
        <a href="../doc/index.html">Ruby 2.7.6 リファレンスマニュアル</a>
      </li>
      <li>
        <a href="../library/index.html">ライブラリ一覧</a>
      </li>
      <li>
        <a href="../library/_builtin.html">組み込みライブラリ</a>
      </li>
      <li>
        Enumerableモジュール
      </li>
    </ol>
  </nav>

<h1>module Enumerable</h1>
</header>

<main>



  <nav>
    クラス・モジュールの継承リスト:
    <ol class="inline-ancestors-list">
      
      <li>
        Enumerable
      </li>
    </ol>
  </nav>











<h2>要約</h2>
<p>
繰り返しを行なうクラスのための Mix-in。このモジュールのメソッドは全て each を用いて定義されているので、インクルードするクラスには each が定義されていなければなりません。
</p>
<p>
<a href="../class/-array.html">Array</a>, <a href="../class/-hash.html">Hash</a>, <a href="../class/-range.html">Range</a>, <a href="../class/-enumerator.html">Enumerator</a>等のクラスで、
Enumerableモジュールはインクルードされています。ただし、効率化のため、そのクラスでEnumerableと同名･同等の機能を再定義(オーバーライド)しているケースも少なくなく、特にArrayクラスでは同名のメソッドを再定義していることが多いです。
</p>



<h2>目次</h2>
<dl>

<dt>インスタンスメソッド</dt>
<dd>
<ul class="class-toc">

<li><a href="#I_ALL--3F">all?</a></li>

<li><a href="#I_ANY--3F">any?</a></li>

<li><a href="#I_CHAIN">chain</a></li>

<li><a href="#I_CHUNK">chunk</a></li>

<li><a href="#I_CHUNK_WHILE">chunk_while</a></li>

<li><a href="#I_COLLECT">collect</a></li>

<li><a href="#I_COLLECT_CONCAT">collect_concat</a></li>

<li><a href="#I_COUNT">count</a></li>

<li><a href="#I_CYCLE">cycle</a></li>

<li><a href="#I_DETECT">detect</a></li>

<li><a href="#I_DROP">drop</a></li>

<li><a href="#I_DROP_WHILE">drop_while</a></li>

<li><a href="#I_EACH_CONS">each_cons</a></li>

<li><a href="#I_EACH_ENTRY">each_entry</a></li>

<li><a href="#I_EACH_SLICE">each_slice</a></li>

<li><a href="#I_EACH_WITH_INDEX">each_with_index</a></li>

<li><a href="#I_EACH_WITH_OBJECT">each_with_object</a></li>

<li><a href="#I_ENTRIES">entries</a></li>

<li><a href="#I_FILTER">filter</a></li>

<li><a href="#I_FILTER_MAP">filter_map</a></li>

<li><a href="#I_DETECT">find</a></li>

<li><a href="#I_FILTER">find_all</a></li>

<li><a href="#I_FIND_INDEX">find_index</a></li>

<li><a href="#I_FIRST">first</a></li>

<li><a href="#I_COLLECT_CONCAT">flat_map</a></li>

<li><a href="#I_GREP">grep</a></li>

<li><a href="#I_GREP_V">grep_v</a></li>

<li><a href="#I_GROUP_BY">group_by</a></li>

<li><a href="#I_INCLUDE--3F">include?</a></li>

<li><a href="#I_INJECT">inject</a></li>

<li><a href="#I_LAZY">lazy</a></li>

<li><a href="#I_COLLECT">map</a></li>

<li><a href="#I_MAX">max</a></li>

<li><a href="#I_MAX_BY">max_by</a></li>

<li><a href="#I_INCLUDE--3F">member?</a></li>

<li><a href="#I_MIN">min</a></li>

<li><a href="#I_MIN_BY">min_by</a></li>

<li><a href="#I_MINMAX">minmax</a></li>

<li><a href="#I_MINMAX_BY">minmax_by</a></li>

<li><a href="#I_NONE--3F">none?</a></li>

<li><a href="#I_ONE--3F">one?</a></li>

<li><a href="#I_PARTITION">partition</a></li>

<li><a href="#I_INJECT">reduce</a></li>

<li><a href="#I_REJECT">reject</a></li>

<li><a href="#I_REVERSE_EACH">reverse_each</a></li>

<li><a href="#I_FILTER">select</a></li>

<li><a href="#I_SLICE_AFTER">slice_after</a></li>

<li><a href="#I_SLICE_BEFORE">slice_before</a></li>

<li><a href="#I_SLICE_WHEN">slice_when</a></li>

<li><a href="#I_SORT">sort</a></li>

<li><a href="#I_SORT_BY">sort_by</a></li>

<li><a href="#I_SUM">sum</a></li>

<li><a href="#I_TAKE">take</a></li>

<li><a href="#I_TAKE_WHILE">take_while</a></li>

<li><a href="#I_TALLY">tally</a></li>

<li><a href="#I_ENTRIES">to_a</a></li>

<li><a href="#I_TO_H">to_h</a></li>

<li><a href="#I_UNIQ">uniq</a></li>

<li><a href="#I_ZIP">zip</a></li>

</ul>
</dd>

</dl>




</dl>


<h2>インスタンスメソッド</h2>
<dl>

<dt class="method-heading" id="I_ALL--3F"><code>all? -&gt; bool</code><span class="permalink">[<a href="../method/-enumerable/i/all=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-all-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>all? {|item| ... } -&gt; bool</code></dt>
<dt class="method-heading"><code>all?(pattern) -&gt; bool</code></dt>
<dd class="method-description">
<p>
すべての要素が真である場合に true を返します。偽である要素があれば、ただちに false を返します。
</p>
<p>
ブロックを伴う場合は、各要素に対してブロックを評価し、すべての結果が真である場合に true を返します。ブロックが偽を返した時点で、ただちに false を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
ブロックの代わりに各要素に対して pattern === item を評価します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'set'</span>

<span class="c1"># すべて正の数か？
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="mi">5</span>,  <span class="mi">6</span>, <span class="mi">7</span><span class="p">]</span><span class="p">.</span><span class="nf">all?</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>      <span class="c1"># =&gt; true
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="mi">5</span>, <span class="o">-</span><span class="mi">1</span>, <span class="mi">7</span><span class="p">]</span><span class="p">.</span><span class="nf">all?</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>      <span class="c1"># =&gt; false
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="p">]</span><span class="p">.</span><span class="nf">all?</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>              <span class="c1"># =&gt; true
</span>
<span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="s1">'ant'</span>, <span class="s1">'bear'</span>, <span class="s1">'cat'</span><span class="p">]</span><span class="p">.</span><span class="nf">all?</span><span class="p">(</span><span class="sr">/t/</span><span class="p">)</span>  <span class="c1"># =&gt; false
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-array/i/all=3f.html">Array#all?</a>
</p>
</dd>


<dt class="method-heading" id="I_ANY--3F"><code>any? -&gt; bool</code><span class="permalink">[<a href="../method/-enumerable/i/any=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-any-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>any? {|item| ... } -&gt; bool</code></dt>
<dt class="method-heading"><code>any?(pattern) -&gt; bool</code></dt>
<dd class="method-description">
<p>
すべての要素が偽である場合に false を返します。真である要素があれば、ただちに true を返します。
</p>
<p>
ブロックを伴う場合は、各要素に対してブロックを評価し、すべての結果が偽である場合に false を返します。ブロックが真を返した時点で、ただちに true を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
ブロックの代わりに各要素に対して pattern === item を評価します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'set'</span>
<span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="p">]</span><span class="p">.</span><span class="nf">any?</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v <span class="o">&gt;</span> <span class="mi">3</span> <span class="p">}</span>         <span class="c1"># =&gt; false
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="p">]</span><span class="p">.</span><span class="nf">any?</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">}</span>         <span class="c1"># =&gt; true
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="p">]</span><span class="p">.</span><span class="nf">any?</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>                <span class="c1"># =&gt; false
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="s1">'ant'</span>, <span class="s1">'bear'</span>, <span class="s1">'cat'</span><span class="p">]</span><span class="p">.</span><span class="nf">any?</span><span class="p">(</span><span class="sr">/d/</span><span class="p">)</span>    <span class="c1"># =&gt; false
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="k">nil</span>, <span class="k">true</span>, <span class="mi">99</span><span class="p">]</span><span class="p">.</span><span class="nf">any?</span><span class="p">(</span><span class="no">Integer</span><span class="p">)</span>       <span class="c1"># =&gt; true
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="k">nil</span>, <span class="k">true</span>, <span class="mi">99</span><span class="p">]</span><span class="p">.</span><span class="nf">any?</span>                <span class="c1"># =&gt; true
</span><span class="nb">p</span> <span class="no">Set</span><span class="p">[</span><span class="p">]</span><span class="p">.</span><span class="nf">any?</span>                             <span class="c1"># =&gt; false
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-array/i/any=3f.html">Array#any?</a>
</p>
</dd>


<dt class="method-heading" id="I_CHAIN"><code>chain(*enums) -&gt; Enumerator::Chain</code><span class="permalink">[<a href="../method/-enumerable/i/chain.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-chain">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自身と enums 引数を続けて繰り返す <a href="../class/-enumerator=3a=3a-chain.html">Enumerator::Chain</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
e <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nf">chain</span><span class="p">(</span><span class="p">[</span><span class="mi">4</span>, <span class="mi">5</span><span class="p">]</span><span class="p">)</span>
e<span class="p">.</span><span class="nf">to_a</span> <span class="c1">#=&gt; [1, 2, 3, 4, 5]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerator/i/=2b.html">Enumerator#+</a>
</p>
</dd>


<dt class="method-heading" id="I_CHUNK"><code>chunk {|elt| ... } -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/chunk.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-chunk">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
要素を前から順にブロックで評価し、その結果によって要素をチャンクに分けた(グループ化した)要素を持つ
<a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
ブロックの評価値が同じ値が続くものを一つのチャンクとして取り扱います。すなわち、ブロックの評価値が一つ前と異なる所でチャンクが区切られます。
</p>
<p>
返り値の <a href="../class/-enumerator.html">Enumerator</a> は各チャンクのブロック評価値と各チャンクの要素を持つ配列のペアを各要素とします。そのため、eachだと以下のようになります。
</p>
<pre class="highlight ruby">
<code>
enum<span class="p">.</span><span class="nf">chunk</span> <span class="p">{</span><span class="o">|</span>elt<span class="o">|</span> key <span class="p">}</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>key, ary<span class="o">|</span> do_something <span class="p">}</span>
</code></pre>
<p>
例として、整数列を連続する奇数/偶数に分ける例を見てみます。「n.even?」の値が切り替わるところで区切られているのがわかるでしょう。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">[</span><span class="mi">3</span>, <span class="mi">1</span>, <span class="mi">4</span>, <span class="mi">1</span>, <span class="mi">5</span>, <span class="mi">9</span>, <span class="mi">2</span>, <span class="mi">6</span>, <span class="mi">5</span>, <span class="mi">3</span>, <span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">chunk</span> <span class="p">{</span><span class="o">|</span>n<span class="o">|</span>
  n<span class="p">.</span><span class="nf">even?</span>
<span class="p">}</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>even, ary<span class="o">|</span>
  <span class="nb">p</span> <span class="p">[</span>even, ary<span class="p">]</span>
<span class="p">}</span>
<span class="c1"># =&gt; [false, [3, 1]]
</span><span class="c1">#    [true, [4]]
</span><span class="c1">#    [false, [1, 5, 9]]
</span><span class="c1">#    [true, [2, 6]]
</span><span class="c1">#    [false, [5, 3, 5]]
</span></code></pre>
<p>
このメソッドは各要素が既にソートされている場合に便利です。
</p>
<p>
以下の例では、テキスト辞書ファイルに含まれる単語の頭文字の頻度を調べています。このファイルは、Linux や macOS などで、ソートされた英語（など）の単語のリストを改行で区切って収めたものです。大文字／小文字の違いを無視するため upcase しています。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># ファイルのエンコーディングは実際のファイルに合わせてください。
</span><span class="nb">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">/usr/share/dict/words</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">r:iso-8859-1</span><span class="s2">"</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>f<span class="o">|</span>
  f<span class="p">.</span><span class="nf">chunk</span> <span class="p">{</span><span class="o">|</span>line<span class="o">|</span> line<span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">upcase</span> <span class="p">}</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>ch, lines<span class="o">|</span> <span class="nb">p</span> <span class="p">[</span>ch, lines<span class="p">.</span><span class="nf">length</span><span class="p">]</span> <span class="p">}</span>
<span class="p">}</span>
<span class="c1"># =&gt; [&quot;A&quot;, 17096]
</span><span class="c1">#    [&quot;B&quot;, 11070]
</span><span class="c1">#    [&quot;C&quot;, 19901]
</span><span class="c1">#    [&quot;D&quot;, 10896]
</span><span class="c1">#    ...
</span></code></pre>
<p>
さらにこのメソッドは以下の値を特別扱いします。
</p>
<ul>
<li>ブロックの評価値が nil もしくは :_separator であった場合、
その要素を捨てます。チャンクはこの前後で区切られます。</li>
<li>ブロックの評価値 :_alone であった場合はその要素は
単独のチャンクをなすものと解釈されます。</li>
</ul>
<p>
それ以外のアンダースコアで始まるシンボルを指定した場合は例外が発生します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">chunk</span> <span class="p">{</span> <span class="o">|</span>item<span class="o">|</span> <span class="ss">:_underscore</span> <span class="p">}</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; RuntimeError: symbols beginning with an underscore are reserved
</span>
<span class="c1"># 「.to_a」無しだと Enumerator を返すのみで例外は発生しない
</span></code></pre>
<p>
nil、 :_separator はある要素を無視したい場合に用います。例として svn log の出力のハイフンの所で区切りたい場合を考えます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
sep <span class="o">=</span> <span class="s2">"</span><span class="s2">-</span><span class="s2">"</span><span class="o">*</span><span class="mi">72</span> <span class="o">+</span> <span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span> <span class="c1"># ハイフンが72個の行
</span><span class="no">IO</span><span class="p">.</span><span class="nf">popen</span><span class="p">(</span><span class="s2">"</span><span class="s2">svn log README</span><span class="s2">"</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>f<span class="o">|</span>
  f<span class="p">.</span><span class="nf">chunk</span> <span class="p">{</span><span class="o">|</span>line<span class="o">|</span>
    line <span class="o">!=</span> sep <span class="o">||</span> <span class="k">nil</span>
  <span class="p">}</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>_, lines<span class="o">|</span>
    pp lines
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1">#=&gt; [&quot;r20018 | knu | 2008-10-29 13:20:42 +0900 (Wed, 29 Oct 2008) | 2 lines\n&quot;,
</span><span class="c1">#    &quot;\n&quot;,
</span><span class="c1">#    &quot;* README, README.ja: Update the portability section.\n&quot;,
</span><span class="c1">#    &quot;\n&quot;]
</span><span class="c1">#   [&quot;r16725 | knu | 2008-05-31 23:34:23 +0900 (Sat, 31 May 2008) | 2 lines\n&quot;,
</span><span class="c1">#    &quot;\n&quot;,
</span><span class="c1">#    &quot;* README, README.ja: Add a note about default C flags.\n&quot;,
</span><span class="c1">#    &quot;\n&quot;]
</span><span class="c1">#   ...
</span></code></pre>
<p>
テキストを空行で区切られた段落に分けたい場合にも nil が使えます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="no">File</span><span class="p">.</span><span class="nf">foreach</span><span class="p">(</span><span class="s2">"</span><span class="s2">README</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">chunk</span> <span class="p">{</span><span class="o">|</span>line<span class="o">|</span>
  <span class="sr">/\A\s*\z/</span> <span class="o">!~</span> line <span class="o">||</span> <span class="k">nil</span>
<span class="p">}</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>_, lines<span class="o">|</span>
  pp lines
<span class="p">}</span>
</code></pre>
<p>
「:_alone」は要素を素通ししたい場合に用います。以下の例では「Foo#bar」という形式の行が連続している場合のみチャンク化し、それ以外は素通しします。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
pat <span class="o">=</span> <span class="sr">/\A[A-Z][A-Za-z0-9_]+\#/</span>
<span class="nb">open</span><span class="p">(</span>filename<span class="p">)</span> <span class="p">{</span><span class="o">|</span>f<span class="o">|</span>
  f<span class="p">.</span><span class="nf">chunk</span> <span class="p">{</span><span class="o">|</span>line<span class="o">|</span> pat <span class="o">=~</span> line <span class="o">?</span> <span class="vg">$&amp;</span> <span class="o">:</span> <span class="ss">:_alone</span> <span class="p">}</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>key, lines<span class="o">|</span>
    <span class="k">if</span> key <span class="o">!=</span> <span class="ss">:_alone</span>
      <span class="nb">print</span> lines<span class="p">.</span><span class="nf">sort</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="nb">print</span> lines<span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<dl>
<dt>[EXCEPTION] RuntimeError:</dt>
<dd>
予約されている値を用いた場合に発生します
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_CHUNK_WHILE"><code>chunk_while {|elt_before, elt_after| ... } -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/chunk_while.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-chunk_while">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
要素を前から順にブロックで評価し、その結果によって要素をチャンクに分けた(グループ化した)要素を持つ<a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
隣り合う値をブロックパラメータ elt_before、elt_after に渡し、ブロックの評価値が偽になる所でチャンクを区切ります。
</p>
<p>
ブロックは self の長さ - 1 回呼び出されます。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
チャンクごとの配列をブロックパラメータに渡す <a href="../class/-enumerator.html">Enumerator</a>
を返します。eachメソッドは以下のように呼び出します。
<pre>
  enum.chunk_while { |elt_before, elt_after| bool }.each { |ary| ... }
</pre>
to_a や map などのその他の <a href="../class/-enumerable.html">Enumerable</a> モジュールのメソッドも有用です。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 1ずつ増加する部分配列ごとに分ける。
</span>a <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">9</span>,<span class="mi">10</span>,<span class="mi">11</span>,<span class="mi">12</span>,<span class="mi">15</span>,<span class="mi">16</span>,<span class="mi">19</span>,<span class="mi">20</span>,<span class="mi">21</span><span class="p">]</span>
b <span class="o">=</span> a<span class="p">.</span><span class="nf">chunk_while</span> <span class="p">{</span><span class="o">|</span>i, j<span class="o">|</span> i<span class="o">+</span><span class="mi">1</span> <span class="o">==</span> j <span class="p">}</span>
<span class="nb">p</span> b<span class="p">.</span><span class="nf">to_a</span> <span class="c1"># =&gt; [[1, 2], [4], [9, 10, 11, 12], [15, 16], [19, 20, 21]]
</span>c <span class="o">=</span> b<span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span>a<span class="o">|</span> a<span class="p">.</span><span class="nf">length</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">?</span> a <span class="o">:</span> <span class="s2">"</span><span class="si">#{</span><span class="n">a</span><span class="p">.</span><span class="nf">first</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">a</span><span class="p">.</span><span class="nf">last</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="nb">p</span> c <span class="c1"># =&gt; [[1, 2], [4], &quot;9-12&quot;, [15, 16], &quot;19-21&quot;]
</span>d <span class="o">=</span> c<span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> d <span class="c1"># =&gt; &quot;1,2,4,9-12,15,16,19-21&quot;
</span>
<span class="c1"># 増加のみの部分配列ごとに分ける。
</span>a <span class="o">=</span> <span class="p">[</span><span class="mi">0</span>, <span class="mi">9</span>, <span class="mi">2</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">2</span>, <span class="mi">7</span>, <span class="mi">5</span>, <span class="mi">9</span>, <span class="mi">5</span><span class="p">]</span>
<span class="nb">p</span> a<span class="p">.</span><span class="nf">chunk_while</span> <span class="p">{</span><span class="o">|</span>i, j<span class="o">|</span> i <span class="o">&lt;=</span> j <span class="p">}</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[0, 9], [2, 2, 3], [2, 7], [5, 9], [5]]
</span>
<span class="c1"># 隣り合う偶数同士、奇数同士の部分配列ごとに分ける。
</span><span class="c1"># (Enumerable#chunk を使って実現する事も可能)
</span>a <span class="o">=</span> <span class="p">[</span><span class="mi">7</span>, <span class="mi">5</span>, <span class="mi">9</span>, <span class="mi">2</span>, <span class="mi">0</span>, <span class="mi">7</span>, <span class="mi">9</span>, <span class="mi">4</span>, <span class="mi">2</span>, <span class="mi">0</span><span class="p">]</span>
<span class="nb">p</span> a<span class="p">.</span><span class="nf">chunk_while</span> <span class="p">{</span><span class="o">|</span>i, j<span class="o">|</span> i<span class="p">.</span><span class="nf">even?</span> <span class="o">==</span> j<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[7, 5, 9], [2, 0], [7, 9], [4, 2, 0]]
</span></code></pre>
<p>
<a href="../method/-enumerable/i/slice_when.html">Enumerable#slice_when</a> はブロックの戻り値が真ではなく偽の時に要素を分ける事を除いて同じ処理を行います。
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/slice_when.html">Enumerable#slice_when</a>, <a href="../method/-enumerable/i/chunk.html">Enumerable#chunk</a>
</p>
</dd>


<dt class="method-heading" id="I_COLLECT"><code>collect -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/collect.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-collect">rdoc</a>]</span></dt>
<dt class="method-heading"><code>map -&gt; Enumerator</code></dt>
<dt class="method-heading"><code>collect {|item| ... } -&gt; [object]</code></dt>
<dt class="method-heading"><code>map {|item| ... } -&gt; [object]</code></dt>
<dd class="method-description">
<p>
各要素に対してブロックを評価した結果を全て含む配列を返します。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># すべて 3 倍にした配列を返す
</span><span class="nb">p</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span>n<span class="o">|</span> n <span class="o">*</span> <span class="mi">3</span> <span class="p">}</span>  <span class="c1"># =&gt; [3, 6, 9]
</span><span class="nb">p</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span> <span class="s2">"</span><span class="s2">cat</span><span class="s2">"</span> <span class="p">}</span> <span class="c1"># =&gt; [&quot;cat&quot;, &quot;cat&quot;, &quot;cat&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-hash/i/to_h.html">Hash#to_h</a>, <a href="../method/-array/i/collect.html">Array#collect</a>, <a href="../method/-array/i/map.html">Array#map</a>
</p>
</dd>


<dt class="method-heading" id="I_COLLECT_CONCAT"><code>flat_map -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/collect_concat.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-collect_concat">rdoc</a>]</span></dt>
<dt class="method-heading"><code>collect_concat -&gt; Enumerator</code></dt>
<dt class="method-heading"><code>flat_map {| obj | block } -&gt; Array</code></dt>
<dt class="method-heading"><code>collect_concat {| obj | block } -&gt; Array</code></dt>
<dd class="method-description">
<p>
各要素をブロックに渡し、その返り値を連結した配列を返します。
</p>
<p>
ブロックの返り値は基本的に配列を返すべきです。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">[</span><span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span><span class="p">]</span>, <span class="p">[</span><span class="mi">3</span>,<span class="mi">4</span><span class="p">]</span><span class="p">]</span><span class="p">.</span><span class="nf">flat_map</span><span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i<span class="p">.</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span>j<span class="o">|</span> j<span class="o">*</span><span class="mi">2</span><span class="p">}</span><span class="p">}</span> <span class="c1"># =&gt; [2,4,6,8]
</span></code></pre>
</dd>


<dt class="method-heading" id="I_COUNT"><code>count -&gt; Integer</code><span class="permalink">[<a href="../method/-enumerable/i/count.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-count">rdoc</a>]</span></dt>
<dt class="method-heading"><code>count(item) -&gt; Integer</code></dt>
<dt class="method-heading"><code>count {|obj| ... } -&gt; Integer</code></dt>
<dd class="method-description">
<p>
レシーバの要素数を返します。
</p>
<p>
引数を指定しない場合は、レシーバの要素数を返します。このとき、要素数を一つずつカウントします。
</p>
<p>
引数を一つ指定した場合は、レシーバの要素のうち引数に一致するものの個数をカウントして返します(一致は == で判定します)。
</p>
<p>
ブロックを指定した場合は、ブロックを評価して真になった要素の個数をカウントして返します。
</p>
<dl>
<dt class='method-param'>[PARAM] item:</dt>
<dd>
カウント対象となる値。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
enum <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">4</span>, <span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">each</span>
enum<span class="p">.</span><span class="nf">count</span>                  <span class="c1"># =&gt; 4
</span>enum<span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>               <span class="c1"># =&gt; 2
</span>enum<span class="p">.</span><span class="nf">count</span><span class="p">{</span><span class="o">|</span>x<span class="o">|</span>x<span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">}</span>       <span class="c1"># =&gt; 3
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-array/i/count.html">Array#count</a>
</p>
</dd>


<dt class="method-heading" id="I_CYCLE"><code>cycle(n=nil) -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/cycle.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-cycle">rdoc</a>]</span></dt>
<dt class="method-heading"><code>cycle(n=nil) {|obj| ... } -&gt; object | nil</code></dt>
<dd class="method-description">
<p>
Enumerable オブジェクトの各要素を n 回 or 無限回(n=nil)繰り返しブロックを呼びだします。
</p>
<p>
n に 0 もしくは負の値を渡した場合は何もしません。繰り返しが最後まで終了した場合(つまりbreakなどで中断しなかった場合)
は nil を返します。このメソッドは内部の配列に各要素を保存しておくため、一度 Enumerable の終端に到達した後に自分自身を変更してもこのメソッドの動作に影響を与えません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="p">[</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">b</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">c</span><span class="s2">"</span><span class="p">]</span>
a<span class="p">.</span><span class="nf">cycle</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span> <span class="nb">puts</span> x <span class="p">}</span>  <span class="c1"># print, a, b, c, a, b, c,.. forever.
</span>a<span class="p">.</span><span class="nf">cycle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span> <span class="nb">puts</span> x <span class="p">}</span>  <span class="c1"># print, a, b, c, a, b, c.
</span></code></pre>
<p>
ブロックを省略した場合は、n 回 or 無限回 enum の各要素を繰り返す <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
ブロックを指定しなかった場合は、<a href="../class/-enumerator.html">Enumerator</a> を返します。レシーバが空の場合は nil を返します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_DETECT"><code>find(ifnone = nil) -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/detect.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-detect">rdoc</a>]</span></dt>
<dt class="method-heading"><code>detect(ifnone = nil) -&gt; Enumerator</code></dt>
<dt class="method-heading"><code>find(ifnone = nil) {|item| ... } -&gt; object</code></dt>
<dt class="method-heading"><code>detect(ifnone = nil) {|item| ... } -&gt; object</code></dt>
<dd class="method-description">
<p>
要素に対してブロックを評価した値が真になった最初の要素を返します。
</p>
<p>
真になる要素が見つからず、ifnone も指定されていないときは nil を返します。真になる要素が見つからず、ifnone が指定されているときは ifnone を call した結果を返します。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] ifnone:</dt>
<dd>
call メソッドを持つオブジェクト (例えば <a href="../class/-proc.html">Proc</a>) を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 最初の 3 の倍数を探す
</span><span class="nb">p</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>   <span class="c1"># =&gt; 3
</span><span class="nb">p</span> <span class="p">[</span><span class="mi">2</span>, <span class="mi">2</span>, <span class="mi">2</span>, <span class="mi">2</span>, <span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>   <span class="c1"># =&gt; nil
</span>
<span class="c1"># ifnone の使用例
</span>ifnone <span class="o">=</span> <span class="nb">proc</span> <span class="p">{</span> <span class="nb">raise</span> <span class="no">ArgumentError</span>, <span class="s2">"</span><span class="s2">item not found</span><span class="s2">"</span> <span class="p">}</span>
<span class="nb">p</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span>ifnone<span class="p">)</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
    <span class="c1"># ArgumentError: item not found
</span></code></pre>
</dd>


<dt class="method-heading" id="I_DROP"><code>drop(n) -&gt; Array</code><span class="permalink">[<a href="../method/-enumerable/i/drop.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-drop">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Enumerable オブジェクトの先頭の n 要素を捨てて、残りの要素を配列として返します。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
捨てる要素数。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
e <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span>, <span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">each</span>
e<span class="p">.</span><span class="nf">drop</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>             <span class="c1"># =&gt; [4, 5, 0]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-array/i/drop.html">Array#drop</a>
</p>
</dd>


<dt class="method-heading" id="I_DROP_WHILE"><code>drop_while -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/drop_while.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-drop_while">rdoc</a>]</span></dt>
<dt class="method-heading"><code>drop_while {|element| ... } -&gt; Array</code></dt>
<dd class="method-description">
<p>
ブロックを評価して最初に偽となった要素の手前の要素まで捨て、残りの要素を配列として返します。
</p>
<p>
ブロックを指定しなかった場合は、<a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span>, <span class="mi">0</span><span class="p">]</span>
a<span class="p">.</span><span class="nf">drop_while</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">}</span>   <span class="c1"># =&gt; [3, 4, 5, 0]
</span></code></pre>
</dd>


<dt class="method-heading" id="I_EACH_CONS"><code>each_cons(n) -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/each_cons.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-each_cons">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_cons(n) {|list| ... } -&gt; nil</code></dt>
<dd class="method-description">
<p>
要素を重複ありで n 要素ずつに区切り、ブロックに渡して繰り返します。
</p>
<p>
ブロックを省略した場合は重複ありで
n 要素ずつ繰り返す <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
ブロックに渡す要素の数です。正の整数を与えます。要素数より大きな数を与えると、ブロックは一度も実行されません。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">each_cons</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="p">{</span><span class="o">|</span>v<span class="o">|</span> <span class="nb">p</span> v <span class="p">}</span>
<span class="c1"># =&gt; [1, 2, 3]
</span><span class="c1">#    [2, 3, 4]
</span><span class="c1">#    [3, 4, 5]
</span><span class="c1">#    [4, 5, 6]
</span><span class="c1">#    [5, 6, 7]
</span><span class="c1">#    [6, 7, 8]
</span><span class="c1">#    [7, 8, 9]
</span><span class="c1">#    [8, 9, 10]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/each_slice.html">Enumerable#each_slice</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_ENTRY"><code>each_entry -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/each_entry.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-each_entry">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_entry {|obj| block} -&gt; self</code></dt>
<dd class="method-description">
<p>
ブロックを各要素に一度ずつ適用します。
</p>
<p>
一要素として複数の値が渡された場合はブロックには配列として渡されます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Foo</span>
  include <span class="no">Enumerable</span>
  <span class="k">def</span> <span class="nf">each</span>
    <span class="k">yield</span> <span class="mi">1</span>
    <span class="k">yield</span> <span class="mi">1</span>,<span class="mi">2</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="no">Foo</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">each_entry</span><span class="p">{</span><span class="o">|</span>o<span class="o">|</span> <span class="nb">print</span> o, <span class="s2">"</span><span class="s2"> -- </span><span class="s2">"</span><span class="p">}</span>
<span class="c1"># =&gt; 1 -- [1, 2] --
</span></code></pre>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> が返されます。
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/slice_before.html">Enumerable#slice_before</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_SLICE"><code>each_slice(n) -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/each_slice.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-each_slice">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_slice(n) {|list| ... } -&gt; nil</code></dt>
<dd class="method-description">
<p>
n 要素ずつブロックに渡して繰り返します。
</p>
<p>
要素数が n で割り切れないときは、最後の回だけ要素数が減ります。
</p>
<p>
ブロックを省略した場合は
n 要素ずつ繰り返す <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
区切る要素数を示す整数です。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">each_slice</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>a<span class="o">|</span> <span class="nb">p</span> a<span class="p">}</span>
    <span class="c1"># =&gt; [1, 2, 3]
</span>    <span class="c1">#    [4, 5, 6]
</span>    <span class="c1">#    [7, 8, 9]
</span>    <span class="c1">#    [10]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/each_cons.html">Enumerable#each_cons</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_WITH_INDEX"><code>each_with_index(*args) -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/each_with_index.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-each_with_index">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_with_index(*args) {|item, index| ... } -&gt; self</code></dt>
<dd class="method-description">
<p>
要素とそのインデックスをブロックに渡して繰り返します。
</p>
<p>
ブロックを省略した場合は、要素とそのインデックスを繰り返すような
<a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
<a href="../method/-enumerator/i/with_index.html">Enumerator#with_index</a> は offset 引数を受け取りますが、
each_with_index は受け取りません (引数はイテレータメソッドにそのまま渡されます)。
</p>
<dl>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
イテレータメソッド (each など) にそのまま渡されます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">[</span><span class="mi">5</span>, <span class="mi">10</span>, <span class="mi">15</span><span class="p">]</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span>n, idx<span class="o">|</span>
  <span class="nb">p</span> <span class="p">[</span>n, idx<span class="p">]</span>
<span class="k">end</span>
<span class="c1"># =&gt; [5, 0]
</span><span class="c1">#    [10, 1]
</span><span class="c1">#    [15, 2]
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">引数ありの例</span>
<code>
<span class="nb">require</span> <span class="s1">'stringio'</span>
<span class="no">StringIO</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">foo|bar|baz</span><span class="s2">"</span><span class="p">)</span><span class="p">.</span><span class="nf">each_with_index</span><span class="p">(</span><span class="s2">"</span><span class="s2">|</span><span class="s2">"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span>s, i<span class="o">|</span>
  <span class="nb">p</span> <span class="p">[</span>s, i<span class="p">]</span>
<span class="k">end</span>
<span class="c1"># =&gt; [&quot;foo|&quot;, 0]
</span><span class="c1">#    [&quot;bar|&quot;, 1]
</span><span class="c1">#    [&quot;baz&quot;, 2]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerator/i/with_index.html">Enumerator#with_index</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_WITH_OBJECT"><code>each_with_object(obj) -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/each_with_object.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-each_with_object">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_with_object(obj) {|(*args), memo_obj| ... } -&gt; object</code></dt>
<dd class="method-description">
<p>
与えられた任意のオブジェクトと要素をブロックに渡し繰り返し、最初に与えられたオブジェクトを返します。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] obj:</dt>
<dd>
任意のオブジェクトを指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
evens <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">each_with_object</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>i, a<span class="o">|</span> a <span class="o">&lt;&lt;</span> i<span class="o">*</span><span class="mi">2</span> <span class="p">}</span>
<span class="c1"># =&gt; [2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerator/i/with_object.html">Enumerator#with_object</a>
</p>
</dd>


<dt class="method-heading" id="I_ENTRIES"><code>to_a(*args) -&gt; [object]</code><span class="permalink">[<a href="../method/-enumerable/i/entries.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-entries">rdoc</a>]</span></dt>
<dt class="method-heading"><code>entries(*args) -&gt; [object]</code></dt>
<dd class="method-description">
<p>
全ての要素を含む配列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
each の呼び出し時に引数として渡されます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">7</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span>                       <span class="c1">#=&gt; [1, 2, 3, 4, 5, 6, 7]
</span><span class="p">{</span> <span class="s1">'a'</span><span class="o">=&gt;</span><span class="mi">1</span>, <span class="s1">'b'</span><span class="o">=&gt;</span><span class="mi">2</span>, <span class="s1">'c'</span><span class="o">=&gt;</span><span class="mi">3</span> <span class="p">}</span><span class="p">.</span><span class="nf">to_a</span>   <span class="c1">#=&gt; [[&quot;a&quot;, 1], [&quot;b&quot;, 2], [&quot;c&quot;, 3]]
</span>
<span class="nb">require</span> <span class="s1">'prime'</span>
<span class="no">Prime</span><span class="p">.</span><span class="nf">entries</span> <span class="mi">10</span>                  <span class="c1">#=&gt; [2, 3, 5, 7]
</span></code></pre>
</dd>


<dt class="method-heading" id="I_FILTER"><code>find_all -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/filter.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-filter">rdoc</a>]</span></dt>
<dt class="method-heading"><code>select -&gt; Enumerator</code></dt>
<dt class="method-heading"><code>filter -&gt; Enumerator</code></dt>
<dt class="method-heading"><code>find_all {|item| ... } -&gt; [object]</code></dt>
<dt class="method-heading"><code>select {|item| ... } -&gt; [object]</code></dt>
<dt class="method-heading"><code>filter {|item| ... } -&gt; [object]</code></dt>
<dd class="method-description">
<p>
各要素に対してブロックを評価した値が真であった要素を全て含む配列を返します。真になる要素がひとつもなかった場合は空の配列を返します。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">find_all</span>                        <span class="c1"># =&gt; #&lt;Enumerator: 1..10:find_all&gt;
</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">find_all</span> <span class="p">{</span> <span class="o">|</span>i<span class="o">|</span> i <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>     <span class="c1"># =&gt; [3, 6, 9]
</span>
<span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">select</span>                      <span class="c1"># =&gt; #&lt;Enumerator: [1, 2, 3, 4, 5]:select&gt;
</span><span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span>num<span class="o">|</span> num<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span>  <span class="c1"># =&gt; [2, 4]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/reject.html">Enumerable#reject</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/grep.html">Enumerable#grep</a>
</p>
</dd>


<dt class="method-heading" id="I_FILTER_MAP"><code>filter_map {|item| ... } -&gt; [object]</code><span class="permalink">[<a href="../method/-enumerable/i/filter_map.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-filter_map">rdoc</a>]</span></dt>
<dt class="method-heading"><code>filter_map -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
各要素に対してブロックを評価した値のうち、真であった値の配列を返します。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">filter_map</span> <span class="p">{</span> <span class="o">|</span>i<span class="o">|</span> i <span class="o">*</span> <span class="mi">2</span> <span class="k">if</span> i<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span> <span class="c1">#=&gt; [4, 8, 12, 16, 20]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/filter.html">Enumerable#filter</a>, <a href="../method/-enumerable/i/map.html">Enumerable#map</a>
</p>
</dd>


<dt class="method-heading" id="I_FIND_INDEX"><code>find_index(val) -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-enumerable/i/find_index.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-find_index">rdoc</a>]</span></dt>
<dt class="method-heading"><code>find_index {|obj| ... } -&gt; Integer | nil</code></dt>
<dt class="method-heading"><code>find_index -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
条件に一致する最初の要素の位置を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
位置を知りたいオブジェクトを指定します。
</dd>
</dl>
<p>
指定された val と == で等しい最初の要素の位置を返します。等しい要素がひとつもなかった場合は nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">find_index</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="c1">#=&gt; nil
</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">find_index</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>   <span class="c1">#=&gt; 1
</span></code></pre>
<p>
ブロックが与えられた場合には、各要素を引数として先頭から順にブロックを実行し、ブロックが真を返した最初の要素の位置を返します。一つも真にならなかった場合は nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">find_index</span>  <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">and</span> i <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>   <span class="c1">#=&gt; nil
</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="p">)</span><span class="p">.</span><span class="nf">find_index</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">and</span> i <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>   <span class="c1">#=&gt; 34
</span></code></pre>
<p>
引数、ブロックのどちらも与えられなかった場合は、
<a href="../class/-enumerator.html">Enumerator</a> のインスタンスを返します。
</p>
</dd>


<dt class="method-heading" id="I_FIRST"><code>first -&gt; object | nil</code><span class="permalink">[<a href="../method/-enumerable/i/first.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-first">rdoc</a>]</span></dt>
<dt class="method-heading"><code>first(n) -&gt; Array</code></dt>
<dd class="method-description">
<p>
Enumerable オブジェクトの最初の要素、もしくは最初の n 要素を返します。
</p>
<p>
Enumerable オブジェクトが空の場合、引数を指定しない形式では nil を返します。引数を指定する形式では、空の配列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
取得する要素数。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
e <span class="o">=</span> <span class="s2">"</span><span class="s2">abcd</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_byte</span>
e<span class="p">.</span><span class="nf">first</span> <span class="c1">#=&gt; 97
</span>e<span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#=&gt; [97,98]
</span>e <span class="o">=</span> <span class="s2">"</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_byte</span>
e<span class="p">.</span><span class="nf">first</span> <span class="c1">#=&gt; nil
</span>e<span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#=&gt; []
</span></code></pre>
</dd>


<dt class="method-heading" id="I_GREP"><code>grep(pattern) -&gt; [object]</code><span class="permalink">[<a href="../method/-enumerable/i/grep.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-grep">rdoc</a>]</span></dt>
<dt class="method-heading"><code>grep(pattern) {|item| ... } -&gt; [object]</code></dt>
<dd class="method-description">
<p>
pattern === item が成立する要素を全て含んだ配列を返します。
</p>
<p>
ブロックとともに呼び出された時には条件の成立した要素に対してそれぞれブロックを評価し、その結果の配列を返します。マッチする要素がひとつもなかった場合は空の配列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
「===」メソッドを持つオブジェクトを指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">[</span><span class="s1">'aa'</span>, <span class="s1">'bb'</span>, <span class="s1">'cc'</span>, <span class="s1">'dd'</span>, <span class="s1">'ee'</span><span class="p">]</span><span class="p">.</span><span class="nf">grep</span><span class="p">(</span><span class="sr">/[bc]/</span><span class="p">)</span>  <span class="c1"># =&gt; [&quot;bb&quot;, &quot;cc&quot;]
</span>
  <span class="no">Array</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">grep</span><span class="p">(</span><span class="sr">/gr/</span><span class="p">)</span> <span class="c1"># =&gt; [:grep, :group_by]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/select.html">Enumerable#select</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/grep_v.html">Enumerable#grep_v</a>
</p>
</dd>


<dt class="method-heading" id="I_GREP_V"><code>grep_v(pattern) -&gt; [object]</code><span class="permalink">[<a href="../method/-enumerable/i/grep_v.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-grep_v">rdoc</a>]</span></dt>
<dt class="method-heading"><code>grep_v(pattern) { |item| ... } -&gt; [object]</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/grep.html">Enumerable#grep</a> のマッチの条件を逆にして、pattern === item が成立しない要素を全て含んだ配列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
「===」メソッドを持つオブジェクトを指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">grep_v</span> <span class="mi">2</span><span class="o">..</span><span class="mi">5</span>   <span class="c1"># =&gt; [1, 6, 7, 8, 9, 10]
</span>res <span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">grep_v</span><span class="p">(</span><span class="mi">2</span><span class="o">..</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span>v<span class="o">|</span> v <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span>
res                   <span class="c1"># =&gt; [2, 12, 14, 16, 18, 20]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/grep.html">Enumerable#grep</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/reject.html">Enumerable#reject</a>
</p>
</dd>


<dt class="method-heading" id="I_GROUP_BY"><code>group_by -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/group_by.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-group_by">rdoc</a>]</span></dt>
<dt class="method-heading"><code>group_by {|obj| ... } -&gt; Hash</code></dt>
<dd class="method-description">
<p>
ブロックを評価した結果をキー、対応する要素の配列を値とするハッシュを返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">6</span><span class="p">)</span><span class="p">.</span><span class="nf">group_by</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i<span class="o">%</span><span class="mi">3</span><span class="p">}</span>   <span class="c1">#=&gt; {0=&gt;[3, 6], 1=&gt;[1, 4], 2=&gt;[2, 5]}
</span></code></pre>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
</dd>


<dt class="method-heading" id="I_INCLUDE--3F"><code>member?(val) -&gt; bool</code><span class="permalink">[<a href="../method/-enumerable/i/include=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-include-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>include?(val) -&gt; bool</code></dt>
<dd class="method-description">
<p>
val と == の関係にある要素を含むとき真を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] val:</dt>
<dd>
任意のオブジェクト
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">[</span><span class="mi">2</span>, <span class="mi">4</span>, <span class="mi">6</span><span class="p">]</span><span class="p">.</span><span class="nf">include?</span> <span class="mi">2</span> <span class="c1">#=&gt; true
</span><span class="p">[</span><span class="mi">2</span>, <span class="mi">4</span>, <span class="mi">6</span><span class="p">]</span><span class="p">.</span><span class="nf">include?</span> <span class="mi">1</span> <span class="c1">#=&gt; false
</span><span class="p">[</span><span class="mi">2</span>, <span class="mi">4</span>, <span class="mi">6</span><span class="p">]</span><span class="p">.</span><span class="nf">member?</span> <span class="mi">2</span>  <span class="c1">#=&gt; true
</span><span class="p">[</span><span class="mi">2</span>, <span class="mi">4</span>, <span class="mi">6</span><span class="p">]</span><span class="p">.</span><span class="nf">member?</span> <span class="mi">1</span>  <span class="c1">#=&gt; false
</span></code></pre>
</dd>


<dt class="method-heading" id="I_INJECT"><code>inject(init = self.first) {|result, item| ... } -&gt; object</code><span class="permalink">[<a href="../method/-enumerable/i/inject.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-inject">rdoc</a>]</span></dt>
<dt class="method-heading"><code>inject(sym) -&gt; object</code></dt>
<dt class="method-heading"><code>inject(init, sym) -&gt; object</code></dt>
<dt class="method-heading"><code>reduce(init = self.first) {|result, item| ... } -&gt; object</code></dt>
<dt class="method-heading"><code>reduce(sym) -&gt; object</code></dt>
<dt class="method-heading"><code>reduce(init, sym) -&gt; object</code></dt>
<dd class="method-description">
<p>
リストのたたみこみ演算を行います。
</p>
<p>
最初に初期値 init と self の最初の要素を引数にブロックを実行します。
2 回目以降のループでは、前のブロックの実行結果と
self の次の要素を引数に順次ブロックを実行します。そうして最後の要素まで繰り返し、最後のブロックの実行結果を返します。
</p>
<p>
要素が存在しない場合は init を返します。
</p>
<p>
初期値 init を省略した場合は、最初に先頭の要素と 2 番目の要素をブロックに渡します。また要素が 1 つしかなければブロックを実行せずに最初の要素を返します。要素がなければブロックを実行せずに nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] init:</dt>
<dd>
最初の result の値です。任意のオブジェクトが渡せます。
</dd>
<dt class='method-param'>[PARAM] sym:</dt>
<dd>
ブロックの代わりに使われるメソッド名を表す <a href="../class/-symbol.html">Symbol</a> オブジェクトを指定します。実行結果に対して sym という名前のメソッドが呼ばれます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 合計を計算する。
</span><span class="nb">p</span> <span class="p">[</span><span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">inject</span> <span class="p">{</span><span class="o">|</span>result, item<span class="o">|</span> result <span class="o">+</span> item <span class="p">}</span>        <span class="c1">#=&gt; 14
</span>
<span class="c1"># 自乗和を計算する。初期値をセットする必要がある。
</span><span class="nb">p</span> <span class="p">[</span><span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">inject</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>result, item<span class="o">|</span> result <span class="o">+</span> item<span class="o">**</span><span class="mi">2</span> <span class="p">}</span>  <span class="c1">#=&gt; 54
</span></code></pre>
<p>
この式は以下のように書いても同じ結果が得られます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
result <span class="o">=</span> <span class="mi">0</span>
<span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> result <span class="o">+=</span> v <span class="p">}</span>
<span class="nb">p</span> result   <span class="c1"># =&gt; 15
</span>
<span class="nb">p</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span><span class="p">]</span><span class="p">.</span><span class="nf">inject</span><span class="p">(</span><span class="ss">:<span class="o">+</span><span class="p">)</span>                    <span class="c1">#=&gt; 15
</span>p</span> <span class="p">[</span><span class="s2">"</span><span class="s2">b</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">c</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">d</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">inject</span><span class="p">(</span><span class="s2">"</span><span class="s2">abbccddde</span><span class="s2">"</span>, <span class="ss">:squeeze</span><span class="p">)</span> <span class="c1">#=&gt; &quot;abcde&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_LAZY"><code>lazy -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerable/i/lazy.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-lazy">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自身を lazy な Enumerator に変換したものを返します。
</p>
<p>
この Enumerator は、以下のメソッドが遅延評価を行う (つまり、配列ではなくEnumeratorを返す) ように再定義されています。
</p>
<ul>
<li>map/collect</li>
<li>flat_map/collect_concat</li>
<li>select/find_all</li>
<li>reject</li>
<li>grep</li>
<li>take, take_while</li>
<li>drop, drop_while</li>
<li>zip (※一貫性のため、ブロックを渡さないケースのみlazy)</li>
<li>cycle (※一貫性のため、ブロックを渡さないケースのみlazy)</li>
</ul>
<p>
以下はピタゴラス数 (a**2 + b**2 = c**2 を満たす自然数 a, b, c の組) を列挙するプログラムです。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">def</span> <span class="nf">pythagorean_triples</span>
  <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span><span class="p">)</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">flat_map</span> <span class="p">{</span><span class="o">|</span>z<span class="o">|</span>
    <span class="p">(</span><span class="mi">1</span><span class="o">..</span>z<span class="p">)</span><span class="p">.</span><span class="nf">flat_map</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span>
      <span class="p">(</span>x<span class="o">..</span>z<span class="p">)</span><span class="p">.</span><span class="nf">select</span> <span class="p">{</span><span class="o">|</span>y<span class="o">|</span>
        x<span class="o">**</span><span class="mi">2</span> <span class="o">+</span> y<span class="o">**</span><span class="mi">2</span> <span class="o">==</span> z<span class="o">**</span><span class="mi">2</span>
      <span class="p">}</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span>y<span class="o">|</span>
        <span class="p">[</span>x, y, z<span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="k">end</span>
<span class="c1"># 最初の10個のピタゴラス数を表示する
</span><span class="nb">p</span> pythagorean_triples<span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span> <span class="c1"># takeはlazyなので、forceが必要です
</span><span class="nb">p</span> pythagorean_triples<span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>      <span class="c1"># firstはeagerです
</span><span class="c1"># 100より小さいピタゴラス数を表示する
</span><span class="nb">p</span> pythagorean_triples<span class="p">.</span><span class="nf">take_while</span> <span class="p">{</span> <span class="o">|</span><span class="o">*</span>, z<span class="o">|</span> z <span class="o">&lt;</span> <span class="mi">100</span> <span class="p">}</span><span class="p">.</span><span class="nf">force</span>
</code></pre>
<p>
[SEE_ALSO] <a href="../class/-enumerator=3a=3a-lazy.html">Enumerator::Lazy</a>
</p>
</dd>


<dt class="method-heading" id="I_MAX"><code>max -&gt; object | nil</code><span class="permalink">[<a href="../method/-enumerable/i/max.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-max">rdoc</a>]</span></dt>
<dt class="method-heading"><code>max(n) -&gt; Array</code></dt>
<dd class="method-description">
<p>
最大の要素、もしくは最大の n 要素が入った降順の配列を返します。全要素が互いに &lt;=&gt; メソッドで比較できることを仮定しています。
</p>
<p>
引数を指定しない形式では要素が存在しなければ nil を返します。引数を指定する形式では、空の配列を返します。該当する要素が複数存在する場合、どの要素を返すかは不定です。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
取得する要素数。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="sx">%w(albatross dog horse)</span>
a<span class="p">.</span><span class="nf">max</span>                        <span class="c1"># =&gt; &quot;horse&quot;
</span>a<span class="p">.</span><span class="nf">max</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                     <span class="c1"># =&gt; [&quot;horse&quot;, &quot;dog&quot;]
</span></code></pre>
</dd>
<dt class="method-heading" id="I_MAX"><code>max {|a, b| ... } -&gt; object | nil</code><span class="permalink">[<a href="../method/-enumerable/i/max.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-max">rdoc</a>]</span></dt>
<dt class="method-heading"><code>max(n) {|a, b| ... } -&gt; Array</code></dt>
<dd class="method-description">
<p>
ブロックの評価結果で各要素の大小判定を行い、最大の要素、もしくは最大の
n 要素が入った降順の配列を返します。引数を指定しない形式では要素が存在しなければ nil を返します。引数を指定する形式では、空の配列を返します。
</p>
<p>
ブロックの値は、a &gt; b のとき正、
a == b のとき 0、a &lt; b のとき負の整数を、期待しています。
</p>
<p>
該当する要素が複数存在する場合、どの要素を返すかは不定です。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
取得する要素数。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
ブロックが整数以外を返したときに発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Person</span>
  <span class="nb">attr_reader</span> <span class="ss">:name</span>, <span class="ss">:age</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span>, age<span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
    <span class="vi">@age</span> <span class="o">=</span> age
  <span class="k">end</span>
<span class="k">end</span>

people <span class="o">=</span> <span class="p">[</span>
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">sato</span><span class="s2">"</span>, <span class="mi">55</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">sato</span><span class="s2">"</span>, <span class="mi">33</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">sato</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">suzuki</span><span class="s2">"</span>, <span class="mi">55</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">suzuki</span><span class="s2">"</span>, <span class="mi">33</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">suzuki</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">tanaka</span><span class="s2">"</span>, <span class="mi">55</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">tanaka</span><span class="s2">"</span>, <span class="mi">33</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">tanaka</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span>
<span class="p">]</span>

<span class="c1"># 年齢が最大、名前が最小
</span>people<span class="p">.</span><span class="nf">max</span> <span class="p">{</span> <span class="o">|</span>x, y<span class="o">|</span> <span class="p">(</span>x<span class="p">.</span><span class="nf">age</span> <span class="o">&lt;=&gt;</span> y<span class="p">.</span><span class="nf">age</span><span class="p">)</span><span class="p">.</span><span class="nf">nonzero?</span> <span class="o">||</span> y<span class="p">.</span><span class="nf">name</span> <span class="o">&lt;=&gt;</span> x<span class="p">.</span><span class="nf">name</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Person:0x007fc54b0240a0 @name=&quot;sato&quot;, @age=55&gt;
</span>people<span class="p">.</span><span class="nf">max</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span>x, y<span class="o">|</span> <span class="p">(</span>x<span class="p">.</span><span class="nf">age</span> <span class="o">&lt;=&gt;</span> y<span class="p">.</span><span class="nf">age</span><span class="p">)</span><span class="p">.</span><span class="nf">nonzero?</span> <span class="o">||</span> y<span class="p">.</span><span class="nf">name</span> <span class="o">&lt;=&gt;</span> x<span class="p">.</span><span class="nf">name</span> <span class="p">}</span>
<span class="c1"># =&gt; [#&lt;Person:0x007fc54b0240a0 @name=&quot;sato&quot;, @age=55&gt;, #&lt;Person:0x007fc54c033ea0 @name=&quot;suzuki&quot;, @age=55&gt;]
</span></code></pre>
</dd>


<dt class="method-heading" id="I_MAX_BY"><code>max_by -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/max_by.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-max_by">rdoc</a>]</span></dt>
<dt class="method-heading"><code>max_by(n) -&gt; Enumerator</code></dt>
<dt class="method-heading"><code>max_by {|item| ... } -&gt; object | nil</code></dt>
<dt class="method-heading"><code>max_by(n) {|item| ... } -&gt; Array</code></dt>
<dd class="method-description">
<p>
各要素を順番にブロックに渡して実行し、その評価結果を &lt;=&gt; で比較して、最大であった値に対応する元の要素、もしくは最大の n 要素が降順で入った配列を返します。
</p>
<p>
引数を指定しない形式では要素が存在しなければ nil を返します。引数を指定する形式では、空の配列を返します。該当する要素が複数存在する場合、どの要素を返すかは不定です。
</p>
<p>
<a href="../method/-enumerable/i/max.html">Enumerable#max</a> と <a href="../method/-enumerable/i/max_by.html">Enumerable#max_by</a> の違いは <a href="../method/-enumerable/i/sort.html">Enumerable#sort</a> と <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a> の違いと同じです。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
取得する要素数。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="sx">%w(albatross dog horse)</span>
a<span class="p">.</span><span class="nf">max_by</span>                    <span class="c1"># =&gt; #&lt;Enumerator: [&quot;albatross&quot;, &quot;dog&quot;, &quot;horse&quot;]:max_by&gt;
</span>a<span class="p">.</span><span class="nf">max_by</span> <span class="p">{</span> <span class="o">|</span>x<span class="o">|</span> x<span class="p">.</span><span class="nf">length</span> <span class="p">}</span>   <span class="c1"># =&gt; &quot;albatross&quot;
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="sx">%w[albatross dog horse]</span>
a<span class="p">.</span><span class="nf">max_by</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                 <span class="c1"># =&gt; #&lt;Enumerator: [&quot;albatross&quot;, &quot;dog&quot;, &quot;horse&quot;]:max_by(2)&gt;
</span>a<span class="p">.</span><span class="nf">max_by</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span> x<span class="p">.</span><span class="nf">length</span> <span class="p">}</span> <span class="c1"># =&gt; [&quot;albatross&quot;, &quot;horse&quot;]
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">例: enum.max_by（n）は、重み付きランダムサンプリングを実装するために使用できます。次の実装例は、Enumerable#wsampleを使用します。</span>
<code>
<span class="k">module</span> <span class="nn">Enumerable</span>
  <span class="c1"># weighted random sampling.
</span>  <span class="c1">#
</span>  <span class="c1"># Pavlos S. Efraimidis, Paul G. Spirakis
</span>  <span class="c1"># Weighted random sampling with a reservoir
</span>  <span class="c1"># Information Processing Letters
</span>  <span class="c1"># Volume 97, Issue 5 (16 March 2006)
</span>  <span class="k">def</span> <span class="nf">wsample</span><span class="p">(</span>n<span class="p">)</span>
    <span class="nc">self</span><span class="p">.</span><span class="nf">max_by</span><span class="p">(</span>n<span class="p">)</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> <span class="nb">rand</span> <span class="o">**</span> <span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="k">yield</span><span class="p">(</span>v<span class="p">)</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
e <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="o">..</span><span class="mi">20</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span><span class="o">*</span><span class="mi">10000</span>
a <span class="o">=</span> e<span class="p">.</span><span class="nf">wsample</span><span class="p">(</span><span class="mi">20000</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span>
  <span class="no">Math</span><span class="p">.</span><span class="nf">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span>x<span class="o">/</span><span class="mf">5.0</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># normal distribution
</span><span class="p">}</span>
<span class="c1"># a is 20000 samples from e.
</span><span class="nb">p</span> a<span class="p">.</span><span class="nf">length</span> <span class="c1">#=&gt; 20000
</span>h <span class="o">=</span> a<span class="p">.</span><span class="nf">group_by</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span> x <span class="p">}</span>
<span class="o">-</span><span class="mi">10</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span> <span class="nb">puts</span> <span class="s2">"</span><span class="s2">*</span><span class="s2">"</span> <span class="o">*</span> <span class="p">(</span>h<span class="p">[</span>x<span class="p">]</span><span class="p">.</span><span class="nf">length</span><span class="o">/</span><span class="mf">30.0</span><span class="p">)</span><span class="p">.</span><span class="nf">to_i</span> <span class="k">if</span> h<span class="p">[</span>x<span class="p">]</span> <span class="p">}</span>
<span class="c1">#=&gt; *
</span><span class="c1">#   ***
</span><span class="c1">#   ******
</span><span class="c1">#   ***********
</span><span class="c1">#   ******************
</span><span class="c1">#   *****************************
</span><span class="c1">#   *****************************************
</span><span class="c1">#   ****************************************************
</span><span class="c1">#   ***************************************************************
</span><span class="c1">#   ********************************************************************
</span><span class="c1">#   ***********************************************************************
</span><span class="c1">#   ***********************************************************************
</span><span class="c1">#   **************************************************************
</span><span class="c1">#   ****************************************************
</span><span class="c1">#   ***************************************
</span><span class="c1">#   ***************************
</span><span class="c1">#   ******************
</span><span class="c1">#   ***********
</span><span class="c1">#   *******
</span><span class="c1">#   ***
</span><span class="c1">#   *
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a>
</p>
</dd>


<dt class="method-heading" id="I_MIN"><code>min -&gt; object | nil</code><span class="permalink">[<a href="../method/-enumerable/i/min.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-min">rdoc</a>]</span></dt>
<dt class="method-heading"><code>min(n) -&gt; Array</code></dt>
<dd class="method-description">
<p>
最小の要素、もしくは最小の n 要素が昇順で入った配列を返します。全要素が互いに &lt;=&gt; メソッドで比較できることを仮定しています。
</p>
<p>
引数を指定しない形式では要素が存在しなければ nil を返します。引数を指定する形式では、空の配列を返します。該当する要素が複数存在する場合、どの要素を返すかは不定です。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
取得する要素数。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="sx">%w(albatross dog horse)</span>
a<span class="p">.</span><span class="nf">min</span>                                <span class="c1"># =&gt; &quot;albatross&quot;
</span>a<span class="p">.</span><span class="nf">min</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                             <span class="c1"># =&gt; [&quot;albatross&quot;, &quot;dog&quot;]
</span></code></pre>
</dd>
<dt class="method-heading" id="I_MIN"><code>min {|a, b| ... } -&gt; object | nil</code><span class="permalink">[<a href="../method/-enumerable/i/min.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-min">rdoc</a>]</span></dt>
<dt class="method-heading"><code>min(n) {|a, b| ... } -&gt; Array</code></dt>
<dd class="method-description">
<p>
ブロックの評価結果で各要素の大小判定を行い、最小の要素、もしくは最小の
n 要素が昇順で入った配列を返します。引数を指定しない形式では要素が存在しなければ nil を返します。引数を指定する形式では、空の配列を返します。
</p>
<p>
ブロックの値は、a &gt; b のとき正、a == b のとき 0、
a &lt; b のとき負の整数を、期待しています。
</p>
<p>
該当する要素が複数存在する場合、どの要素を返すかは不定です。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
取得する要素数。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Person</span>
  <span class="nb">attr_reader</span> <span class="ss">:name</span>, <span class="ss">:age</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span>, age<span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
    <span class="vi">@age</span> <span class="o">=</span> age
  <span class="k">end</span>
<span class="k">end</span>

people <span class="o">=</span> <span class="p">[</span>
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">sato</span><span class="s2">"</span>, <span class="mi">55</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">sato</span><span class="s2">"</span>, <span class="mi">33</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">sato</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">suzuki</span><span class="s2">"</span>, <span class="mi">55</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">suzuki</span><span class="s2">"</span>, <span class="mi">33</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">suzuki</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">tanaka</span><span class="s2">"</span>, <span class="mi">55</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">tanaka</span><span class="s2">"</span>, <span class="mi">33</span><span class="p">)</span>,
  <span class="no">Person</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">tanaka</span><span class="s2">"</span>, <span class="mi">11</span><span class="p">)</span>
<span class="p">]</span>

<span class="c1"># 年齢が最小、名前が最大
</span>people<span class="p">.</span><span class="nf">min</span> <span class="p">{</span> <span class="o">|</span>x, y<span class="o">|</span> <span class="p">(</span>x<span class="p">.</span><span class="nf">age</span> <span class="o">&lt;=&gt;</span> y<span class="p">.</span><span class="nf">age</span><span class="p">)</span><span class="p">.</span><span class="nf">nonzero?</span> <span class="o">||</span> y<span class="p">.</span><span class="nf">name</span> <span class="o">&lt;=&gt;</span> x<span class="p">.</span><span class="nf">name</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Person:0x007fd6f0824190 @name=&quot;tanaka&quot;, @age=11&gt;
</span>
people<span class="p">.</span><span class="nf">min</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span>x, y<span class="o">|</span> <span class="p">(</span>x<span class="p">.</span><span class="nf">age</span> <span class="o">&lt;=&gt;</span> y<span class="p">.</span><span class="nf">age</span><span class="p">)</span><span class="p">.</span><span class="nf">nonzero?</span> <span class="o">||</span> y<span class="p">.</span><span class="nf">name</span> <span class="o">&lt;=&gt;</span> x<span class="p">.</span><span class="nf">name</span> <span class="p">}</span>
<span class="c1"># =&gt; [#&lt;Person:0x007fb5899ef4a8 @name=&quot;tanaka&quot;, @age=11&gt;, #&lt;Person:0x007fb5899ef728 @name=&quot;suzuki&quot;, @age=11&gt;]
</span></code></pre>
<dl>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
ブロックが整数以外を返したときに発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_MIN_BY"><code>min_by -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/min_by.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-min_by">rdoc</a>]</span></dt>
<dt class="method-heading"><code>min_by(n) -&gt; Enumerator</code></dt>
<dt class="method-heading"><code>min_by {|item| ... } -&gt; object | nil</code></dt>
<dt class="method-heading"><code>min_by(n) {|item| ... } -&gt; Array</code></dt>
<dd class="method-description">
<p>
各要素を順番にブロックに渡して評価し、その評価結果を &lt;=&gt; で比較して、最小であった値に対応する元の要素、もしくは最小の n 要素が昇順で入った配列を返します。
</p>
<p>
引数を指定しない形式では要素が存在しなければ nil を返します。引数を指定する形式では、空の配列を返します。
</p>
<p>
該当する要素が複数存在する場合、どの要素を返すかは不定です。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
<a href="../method/-enumerable/i/min.html">Enumerable#min</a> と <a href="../method/-enumerable/i/min_by.html">Enumerable#min_by</a> の違いは <a href="../method/-enumerable/i/sort.html">Enumerable#sort</a> と <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a> の違いと同じです。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
取得する要素数。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="sx">%w(albatross dog horse)</span>
a<span class="p">.</span><span class="nf">min_by</span>                    <span class="c1"># =&gt; #&lt;Enumerator: [&quot;albatross&quot;, &quot;dog&quot;, &quot;horse&quot;]:min_by&gt;
</span>a<span class="p">.</span><span class="nf">min_by</span> <span class="p">{</span> <span class="o">|</span>x<span class="o">|</span> x<span class="p">.</span><span class="nf">length</span> <span class="p">}</span>   <span class="c1"># =&gt; &quot;dog&quot;
</span>a<span class="p">.</span><span class="nf">min_by</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                 <span class="c1"># =&gt; #&lt;Enumerator: [&quot;albatross&quot;, &quot;dog&quot;, &quot;horse&quot;]:min_by(2)&gt;
</span>a<span class="p">.</span><span class="nf">min_by</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span> x<span class="p">.</span><span class="nf">length</span> <span class="p">}</span> <span class="c1"># =&gt; [&quot;dog&quot;, &quot;horse&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a>
</p>
</dd>


<dt class="method-heading" id="I_MINMAX"><code>minmax -&gt; [object, object]</code><span class="permalink">[<a href="../method/-enumerable/i/minmax.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-minmax">rdoc</a>]</span></dt>
<dt class="method-heading"><code>minmax {|a, b| ... } -&gt; [object, object]</code></dt>
<dd class="method-description">
<p>
Enumerable オブジェクトの各要素のうち最小の要素と最大の要素を要素とするサイズ 2 の配列を返します。
</p>
<p>
該当する要素が複数存在する場合、どの要素を返すかは不定です。
</p>
<p>
一つ目の形式は、Enumerable オブジェクトのすべての要素が Comparable を実装していることを仮定しています。二つ目の形式では、要素同士の比較をブロックを用いて行います。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="sx">%w(albatross dog horse)</span>
a<span class="p">.</span><span class="nf">minmax</span>                                 <span class="c1">#=&gt; [&quot;albatross&quot;, &quot;horse&quot;]
</span>a<span class="p">.</span><span class="nf">minmax</span><span class="p">{</span><span class="o">|</span>a,b<span class="o">|</span> a<span class="p">.</span><span class="nf">length</span> <span class="o">&lt;=&gt;</span> b<span class="p">.</span><span class="nf">length</span> <span class="p">}</span>   <span class="c1">#=&gt; [&quot;dog&quot;, &quot;albatross&quot;]
</span><span class="p">[</span><span class="p">]</span><span class="p">.</span><span class="nf">minmax</span> <span class="c1"># =&gt; [nil, nil]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/sort.html">Enumerable#sort</a>, <a href="../method/-array/i/minmax.html">Array#minmax</a>
</p>
</dd>


<dt class="method-heading" id="I_MINMAX_BY"><code>minmax_by -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/minmax_by.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-minmax_by">rdoc</a>]</span></dt>
<dt class="method-heading"><code>minmax_by {|obj| ... } -&gt; [object, object]</code></dt>
<dd class="method-description">
<p>
Enumerable オブジェクトの各要素をブロックに渡して評価し、その結果を &lt;=&gt; で比較して最小の要素と最大の要素を要素とするサイズ 2 の配列を返します。
</p>
<p>
該当する要素が複数存在する場合、どの要素を返すかは不定です。
</p>
<p>
<a href="../method/-enumerable/i/minmax.html">Enumerable#minmax</a> と <a href="../method/-enumerable/i/minmax_by.html">Enumerable#minmax_by</a> の違いは sort と sort_by の違いと同じです。詳細は <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a> を参照してください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
a <span class="o">=</span> <span class="sx">%w(albatross dog horse)</span>
a<span class="p">.</span><span class="nf">minmax_by</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span> x<span class="p">.</span><span class="nf">length</span> <span class="p">}</span>   <span class="c1">#=&gt; [&quot;dog&quot;, &quot;albatross&quot;]
</span>
<span class="p">[</span><span class="p">]</span><span class="p">.</span><span class="nf">minmax_by</span><span class="p">{</span><span class="p">}</span> <span class="c1"># =&gt; [nil, nil]
</span></code></pre>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a>
</p>
</dd>


<dt class="method-heading" id="I_NONE--3F"><code>none? -&gt; bool</code><span class="permalink">[<a href="../method/-enumerable/i/none=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-none-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>none? {|obj| ... } -&gt; bool</code></dt>
<dt class="method-heading"><code>none?(pattern) -&gt; bool</code></dt>
<dd class="method-description">
<p>
ブロックを指定しない場合は、 Enumerable オブジェクトのすべての要素が偽であれば真を返します。そうでなければ偽を返します。
</p>
<p>
ブロックを指定した場合は、Enumerable オブジェクトのすべての要素をブロックで評価した結果が、すべて偽であれば真を返します。そうでなければ偽を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
ブロックの代わりに各要素に対して pattern === item を評価します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'set'</span>
<span class="no">Set</span><span class="p">[</span><span class="s1">'ant'</span>, <span class="s1">'bear'</span>, <span class="s1">'cat'</span><span class="p">]</span><span class="p">.</span><span class="nf">none?</span> <span class="p">{</span><span class="o">|</span>word<span class="o">|</span> word<span class="p">.</span><span class="nf">length</span> <span class="o">==</span> <span class="mi">5</span><span class="p">}</span>  <span class="c1"># =&gt; true
</span><span class="no">Set</span><span class="p">[</span><span class="s1">'ant'</span>, <span class="s1">'bear'</span>, <span class="s1">'cat'</span><span class="p">]</span><span class="p">.</span><span class="nf">none?</span> <span class="p">{</span><span class="o">|</span>word<span class="o">|</span> word<span class="p">.</span><span class="nf">length</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">}</span>  <span class="c1"># =&gt; false
</span><span class="no">Set</span><span class="p">[</span><span class="s1">'ant'</span>, <span class="s1">'bear'</span>, <span class="s1">'cat'</span><span class="p">]</span><span class="p">.</span><span class="nf">none?</span><span class="p">(</span><span class="sr">/d/</span><span class="p">)</span>                       <span class="c1"># =&gt; true
</span><span class="no">Set</span><span class="p">[</span><span class="p">]</span><span class="p">.</span><span class="nf">none?</span>                                                <span class="c1"># =&gt; true
</span><span class="no">Set</span><span class="p">[</span><span class="k">nil</span><span class="p">]</span><span class="p">.</span><span class="nf">none?</span>                                             <span class="c1"># =&gt; true
</span><span class="no">Set</span><span class="p">[</span><span class="k">nil</span>,<span class="k">false</span><span class="p">]</span><span class="p">.</span><span class="nf">none?</span>                                       <span class="c1"># =&gt; true
</span><span class="no">Set</span><span class="p">[</span><span class="k">nil</span>, <span class="k">false</span>, <span class="k">true</span><span class="p">]</span><span class="p">.</span><span class="nf">none?</span>                                <span class="c1"># =&gt; false
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-array/i/none=3f.html">Array#none?</a>
</p>
</dd>


<dt class="method-heading" id="I_ONE--3F"><code>one? -&gt; bool</code><span class="permalink">[<a href="../method/-enumerable/i/one=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-one-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>one? {|obj| ... } -&gt; bool</code></dt>
<dt class="method-heading"><code>one?(pattern) -&gt; bool</code></dt>
<dd class="method-description">
<p>
ブロックを指定しない場合は、 Enumerable オブジェクトの要素のうちちょうど一つだけが真であれば、真を返します。そうでなければ偽を返します。
</p>
<p>
ブロックを指定した場合は、Enumerable オブジェクトの要素をブロックで評価した結果、一つの要素だけが真であれば真を返します。そうでなければ偽を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
ブロックの代わりに各要素に対して pattern === item を評価します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'set'</span>
<span class="no">Set</span><span class="p">[</span><span class="s1">'ant'</span>, <span class="s1">'bear'</span>, <span class="s1">'cat'</span><span class="p">]</span><span class="p">.</span><span class="nf">one?</span> <span class="p">{</span><span class="o">|</span>word<span class="o">|</span> word<span class="p">.</span><span class="nf">length</span> <span class="o">==</span> <span class="mi">4</span><span class="p">}</span>  <span class="c1"># =&gt; true
</span><span class="no">Set</span><span class="p">[</span><span class="s1">'ant'</span>, <span class="s1">'bear'</span>, <span class="s1">'cat'</span><span class="p">]</span><span class="p">.</span><span class="nf">one?</span> <span class="p">{</span><span class="o">|</span>word<span class="o">|</span> word<span class="p">.</span><span class="nf">length</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">}</span>   <span class="c1"># =&gt; false
</span><span class="no">Set</span><span class="p">[</span><span class="s1">'ant'</span>, <span class="s1">'bear'</span>, <span class="s1">'cat'</span><span class="p">]</span><span class="p">.</span><span class="nf">one?</span><span class="p">(</span><span class="sr">/t/</span><span class="p">)</span>                       <span class="c1"># =&gt; false
</span><span class="no">Set</span><span class="p">[</span><span class="k">nil</span>, <span class="k">true</span>, <span class="mi">99</span><span class="p">]</span><span class="p">.</span><span class="nf">one?</span>                                   <span class="c1"># =&gt; false
</span><span class="no">Set</span><span class="p">[</span><span class="k">nil</span>, <span class="k">true</span>, <span class="k">false</span><span class="p">]</span><span class="p">.</span><span class="nf">one?</span>                                <span class="c1"># =&gt; true
</span><span class="no">Set</span><span class="p">[</span><span class="k">nil</span>, <span class="k">true</span>, <span class="mi">99</span><span class="p">]</span><span class="p">.</span><span class="nf">one?</span><span class="p">(</span><span class="no">Integer</span><span class="p">)</span>                          <span class="c1"># =&gt; true
</span><span class="no">Set</span><span class="p">[</span><span class="p">]</span><span class="p">.</span><span class="nf">one?</span>                                                <span class="c1"># =&gt; false
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-array/i/one=3f.html">Array#one?</a>
</p>
</dd>


<dt class="method-heading" id="I_PARTITION"><code>partition -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/partition.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-partition">rdoc</a>]</span></dt>
<dt class="method-heading"><code>partition {|item| ... } -&gt; [[object], [object]]</code></dt>
<dd class="method-description">
<p>
各要素を、ブロックの条件を満たす要素と満たさない要素に分割します。各要素に対してブロックを評価して、その値が真であった要素の配列と、偽であった要素の配列の 2 つを配列に入れて返します。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">[</span><span class="mi">10</span>, <span class="mi">9</span>, <span class="mi">8</span>, <span class="mi">7</span>, <span class="mi">6</span>, <span class="mi">5</span>, <span class="mi">4</span>, <span class="mi">3</span>, <span class="mi">2</span>, <span class="mi">1</span>, <span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">partition</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
 <span class="c1">#=&gt; [[9, 6, 3, 0], [10, 8, 7, 5, 4, 2, 1]]
</span></code></pre>
</dd>


<dt class="method-heading" id="I_REJECT"><code>reject -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/reject.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-reject">rdoc</a>]</span></dt>
<dt class="method-heading"><code>reject {|item| ... } -&gt; [object]</code></dt>
<dd class="method-description">
<p>
各要素に対してブロックを評価し、その値が偽であった要素を集めた新しい配列を返します。条件を反転させた select です。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 偶数を除外する (奇数を集める)
</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">6</span><span class="p">)</span><span class="p">.</span><span class="nf">reject</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span> <span class="c1"># =&gt; [1, 3, 5]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/select.html">Enumerable#select</a>, <a href="../method/-array/i/reject.html">Array#reject</a>
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/grep_v.html">Enumerable#grep_v</a>
</p>
</dd>


<dt class="method-heading" id="I_REVERSE_EACH"><code>reverse_each -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/reverse_each.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-reverse_each">rdoc</a>]</span></dt>
<dt class="method-heading"><code>reverse_each {|element| ... } -&gt; self</code></dt>
<dd class="method-description">
<p>
逆順に各要素に対してブロックを評価します。
</p>
<p>
内部で各要素を保持した配列を作ります。
</p>
<p>
ブロックを省略した場合は、各要素を逆順に辿る
<a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nf">reverse_each</span> <span class="c1"># =&gt; #&lt;Enumerator: 1..3:reverse_each&gt;
</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nf">reverse_each</span> <span class="p">{</span> <span class="o">|</span>v<span class="o">|</span> <span class="nb">p</span> v <span class="p">}</span>
<span class="c1"># =&gt; 3
</span><span class="c1">#    2
</span><span class="c1">#    1
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SLICE_AFTER"><code>slice_after(pattern) -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/slice_after.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-slice_after">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice_after {|elt| bool } -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
パターンがマッチした要素、もしくはブロックが真を返した要素を末尾の要素としてチャンク化(グループ化)したものを繰り返す <a href="../class/-enumerator.html">Enumerator</a> を 返します。
</p>
<p>
パターンを渡した場合は各要素に対し === が呼び出され、 それが真になったところをチャンクの末尾と見なします。 ブロックを渡した場合は、各要素に対しブロックを適用し 返り値が真であった要素をチャンクの末尾と見なします。
</p>
<p>
パターンもブロックも最初から最後の要素まで呼び出されます。
</p>
<p>
各チャンクは配列として表現されます。そのため、以下のような呼び出しを行う事もできます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
enum<span class="p">.</span><span class="nf">slice_after</span><span class="p">(</span>pattern<span class="p">)</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span>ary<span class="o">|</span>
  <span class="c1"># ...
</span><span class="p">}</span>
enum<span class="p">.</span><span class="nf">slice_after</span> <span class="p">{</span> <span class="o">|</span>elt<span class="o">|</span> bool <span class="p">}</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span>ary<span class="o">|</span>
  <span class="c1"># ...
</span><span class="p">}</span>
</code></pre>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 偶数要素をチャンクの末尾と見なす
</span><span class="p">[</span><span class="mi">0</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">3</span>,<span class="mi">1</span>,<span class="mi">4</span>,<span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">slice_after</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:even?</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[0], [2], [4], [1, 2], [4], [5, 3, 1, 4], [2]]
</span>
<span class="c1"># 奇数要素をチャンクの末尾と見なす
</span><span class="p">[</span><span class="mi">0</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">3</span>,<span class="mi">1</span>,<span class="mi">4</span>,<span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">slice_after</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:odd?</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[0, 2, 4, 1], [2, 4, 5], [3], [1], [4, 2]]
</span>
<span class="c1"># バックスラッシュで終わる行を継続
</span>lines <span class="o">=</span> <span class="p">[</span><span class="s2">"</span><span class="s2">foo\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">bar\\\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">baz\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">qux\n</span><span class="s2">"</span><span class="p">]</span>
e <span class="o">=</span> lines<span class="p">.</span><span class="nf">slice_after</span><span class="p">(</span><span class="sr">/(?&lt;!\\)\n\z/</span><span class="p">)</span>
<span class="nb">p</span> e<span class="p">.</span><span class="nf">to_a</span>
<span class="c1">#=&gt; [[&quot;foo\n&quot;], [&quot;bar\\\n&quot;, &quot;baz\n&quot;], [&quot;\n&quot;], [&quot;qux\n&quot;]]
</span><span class="nb">p</span> e<span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span>ll<span class="o">|</span> ll<span class="p">[</span><span class="mi">0</span><span class="o">...</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span>l<span class="o">|</span> l<span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/\\\n\z/</span>, <span class="s2">"</span><span class="s2">"</span><span class="p">)</span> <span class="p">}</span><span class="p">.</span><span class="nf">join</span> <span class="o">+</span> ll<span class="p">.</span><span class="nf">last</span> <span class="p">}</span>
<span class="c1">#=&gt;[&quot;foo\n&quot;, &quot;barbaz\n&quot;, &quot;\n&quot;, &quot;qux\n&quot;]
</span></code></pre>
<p>
<a href="../method/-enumerable/i/map.html">Enumerable#map</a> のようなメソッドを使うこともできます。
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/chunk.html">Enumerable#chunk</a>, <a href="../method/-enumerable/i/slice_before.html">Enumerable#slice_before</a>
</p>
</dd>


<dt class="method-heading" id="I_SLICE_BEFORE"><code>slice_before(pattern) -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/slice_before.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-slice_before">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice_before {|elt| bool } -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
パターンがマッチした要素、もしくはブロックが真を返した要素から次にマッチする手前までをチャンク化(グループ化)したものを繰り返す <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
パターンを渡した場合は各要素に対し === が呼び出され、それが真になったところをチャンクの先頭と見なします。ブロックを渡した場合は、各要素に対しブロックを適用し返り値が真であった要素をチャンクの先頭と見なします。
</p>
<p>
より厳密にいうと、「先頭要素」の手前で分割していきます。最初の要素の評価は無視されます。
</p>
<p>
各チャンクは配列として表現されます。
</p>
<p>
<a href="../method/-enumerable/i/to_a.html">Enumerable#to_a</a> や <a href="../method/-enumerable/i/map.html">Enumerable#map</a> のようなメソッドを使うこともできます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 偶数要素をチャンクの先頭と見なす
</span><span class="p">[</span><span class="mi">0</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">3</span>,<span class="mi">1</span>,<span class="mi">4</span>,<span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">slice_before</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:even?</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[0], [2], [4, 1], [2], [4, 5, 3, 1], [4], [2]]
</span>
<span class="c1"># 奇数要素をチャンクの先頭と見なす
</span><span class="p">[</span><span class="mi">0</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">3</span>,<span class="mi">1</span>,<span class="mi">4</span>,<span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">slice_before</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:odd?</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[0, 2, 4], [1, 2, 4], [5], [3], [1, 4, 2]]
</span>
<span class="c1"># ChangeLog のエントリーを順に取る
</span><span class="nb">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">ChangeLog</span><span class="s2">"</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>f<span class="o">|</span>
  f<span class="p">.</span><span class="nf">slice_before</span><span class="p">(</span><span class="sr">/\A\S/</span><span class="p">)</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>e<span class="o">|</span> pp e<span class="p">}</span>
<span class="p">}</span>

<span class="c1"># 上と同じだが、パターンでなくブロックを使う
</span><span class="nb">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">ChangeLog</span><span class="s2">"</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>f<span class="o">|</span>
  f<span class="p">.</span><span class="nf">slice_before</span> <span class="p">{</span><span class="o">|</span>line<span class="o">|</span> <span class="sr">/\A\S/</span> <span class="o">===</span> line <span class="p">}</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>e<span class="o">|</span> pp e<span class="p">}</span>
<span class="p">}</span>

<span class="c1"># &quot;svn proplist -R&quot; の結果を分割する
</span><span class="c1"># これは一要素が複数行にまたがっている
</span>
<span class="no">IO</span><span class="p">.</span><span class="nf">popen</span><span class="p">(</span><span class="p">[</span><span class="p">{</span><span class="s2">"</span><span class="s2">LC_ALL</span><span class="s2">"</span><span class="o">=&gt;</span><span class="s2">"</span><span class="s2">C</span><span class="s2">"</span><span class="p">}</span>, <span class="s2">"</span><span class="s2">svn</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">proplist</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">-R</span><span class="s2">"</span><span class="p">]</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>f<span class="o">|</span>
  f<span class="p">.</span><span class="nf">lines</span><span class="p">.</span><span class="nf">slice_before</span><span class="p">(</span><span class="sr">/\AProp/</span><span class="p">)</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span>lines<span class="o">|</span> <span class="nb">p</span> lines <span class="p">}</span>
<span class="p">}</span>
<span class="c1">#=&gt; [&quot;Properties on '.':\n&quot;, &quot;  svn:ignore\n&quot;, &quot;  svk:merge\n&quot;]
</span><span class="c1">#   [&quot;Properties on 'goruby.c':\n&quot;, &quot;  svn:eol-style\n&quot;]
</span><span class="c1">#   [&quot;Properties on 'complex.c':\n&quot;, &quot;  svn:mime-type\n&quot;, &quot;  svn:eol-style\n&quot;]
</span><span class="c1">#   [&quot;Properties on 'regparse.c':\n&quot;, &quot;  svn:eol-style\n&quot;]
</span><span class="c1">#   ...
</span></code></pre>
<p>
複数要素にわたる状態遷移が必要な場合は、ローカル変数でこれを実現することができます。例えば、連続に増える数値が3つ以上ある場合、これをまとめる処理をするためには以下のようにします
(<a href="../method/-enumerable/i/chunk_while.html">Enumerable#chunk_while</a> のより簡単な例も参照)。
</p>
<pre class="highlight ruby">
<code>
a <span class="o">=</span> <span class="p">[</span><span class="mi">0</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">6</span>,<span class="mi">7</span>,<span class="mi">9</span><span class="p">]</span>
prev <span class="o">=</span> a<span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">p</span> a<span class="p">.</span><span class="nf">slice_before</span> <span class="p">{</span><span class="o">|</span>e<span class="o">|</span>
  prev, prev2 <span class="o">=</span> e, prev
  prev2 <span class="o">+</span> <span class="mi">1</span> <span class="o">!=</span> e
<span class="p">}</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span>es<span class="o">|</span>
  es<span class="p">.</span><span class="nf">length</span> <span class="o">&lt;=</span> <span class="mi">2</span> <span class="o">?</span> es<span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span> <span class="o">:</span> <span class="s2">"</span><span class="si">#{</span><span class="n">es</span><span class="p">.</span><span class="nf">first</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">es</span><span class="p">.</span><span class="nf">last</span><span class="si">}</span><span class="s2">"</span>
<span class="p">}</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span>
<span class="c1">#=&gt; &quot;0,2-4,6,7,9&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/chunk.html">Enumerable#chunk</a>, <a href="../method/-enumerable/i/slice_after.html">Enumerable#slice_after</a>
</p>
</dd>


<dt class="method-heading" id="I_SLICE_WHEN"><code>slice_when {|elt_before, elt_after| bool } -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/slice_when.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-slice_when">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
要素を前から順にブロックで評価し、その結果によって要素をチャンクに分けた(グループ化した)要素を持つ<a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
隣り合う値をブロックパラメータ elt_before、elt_after に渡し、ブロックの評価値が真になる所でチャンクを区切ります。
</p>
<p>
ブロックは self の長さ - 1 回呼び出されます。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
チャンクごとの配列をブロックパラメータに渡す <a href="../class/-enumerator.html">Enumerator</a>
を返します。eachメソッドは以下のように呼び出します。
<pre>
  enum.slice_when { |elt_before, elt_after| bool }.each { |ary| ... }
</pre>
to_a や map などのその他の <a href="../class/-enumerable.html">Enumerable</a> モジュールのメソッドも有用です。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 1ずつ増加する部分配列ごとに分ける。
</span>a <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">9</span>,<span class="mi">10</span>,<span class="mi">11</span>,<span class="mi">12</span>,<span class="mi">15</span>,<span class="mi">16</span>,<span class="mi">19</span>,<span class="mi">20</span>,<span class="mi">21</span><span class="p">]</span>
b <span class="o">=</span> a<span class="p">.</span><span class="nf">slice_when</span> <span class="p">{</span><span class="o">|</span>i, j<span class="o">|</span> i<span class="o">+</span><span class="mi">1</span> <span class="o">!=</span> j <span class="p">}</span>
<span class="nb">p</span> b<span class="p">.</span><span class="nf">to_a</span> <span class="c1"># =&gt; [[1, 2], [4], [9, 10, 11, 12], [15, 16], [19, 20, 21]]
</span>c <span class="o">=</span> b<span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span>a<span class="o">|</span> a<span class="p">.</span><span class="nf">length</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">?</span> a <span class="o">:</span> <span class="s2">"</span><span class="si">#{</span><span class="n">a</span><span class="p">.</span><span class="nf">first</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">a</span><span class="p">.</span><span class="nf">last</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="nb">p</span> c <span class="c1"># =&gt; [[1, 2], [4], &quot;9-12&quot;, [15, 16], &quot;19-21&quot;]
</span>d <span class="o">=</span> c<span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">p</span> d <span class="c1"># =&gt; &quot;1,2,4,9-12,15,16,19-21&quot;
</span>
<span class="c1"># ソート済の配列を近い値(差が6以内)の部分配列ごとに分ける。
</span>a <span class="o">=</span> <span class="p">[</span><span class="mi">3</span>, <span class="mi">11</span>, <span class="mi">14</span>, <span class="mi">25</span>, <span class="mi">28</span>, <span class="mi">29</span>, <span class="mi">29</span>, <span class="mi">41</span>, <span class="mi">55</span>, <span class="mi">57</span><span class="p">]</span>
<span class="nb">p</span> a<span class="p">.</span><span class="nf">slice_when</span> <span class="p">{</span><span class="o">|</span>i, j<span class="o">|</span> <span class="mi">6</span> <span class="o">&lt;</span> j <span class="o">-</span> i <span class="p">}</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[3], [11, 14], [25, 28, 29, 29], [41], [55, 57]]
</span>
<span class="c1"># 増加のみの部分配列ごとに分ける。
</span>a <span class="o">=</span> <span class="p">[</span><span class="mi">0</span>, <span class="mi">9</span>, <span class="mi">2</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">2</span>, <span class="mi">7</span>, <span class="mi">5</span>, <span class="mi">9</span>, <span class="mi">5</span><span class="p">]</span>
<span class="nb">p</span> a<span class="p">.</span><span class="nf">slice_when</span> <span class="p">{</span><span class="o">|</span>i, j<span class="o">|</span> i <span class="o">&gt;</span> j <span class="p">}</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[0, 9], [2, 2, 3], [2, 7], [5, 9], [5]]
</span>
<span class="c1"># 隣り合う偶数同士、奇数同士の部分配列ごとに分ける。
</span><span class="c1"># (Enumerable#chunk を使って実現する事も可能)
</span>a <span class="o">=</span> <span class="p">[</span><span class="mi">7</span>, <span class="mi">5</span>, <span class="mi">9</span>, <span class="mi">2</span>, <span class="mi">0</span>, <span class="mi">7</span>, <span class="mi">9</span>, <span class="mi">4</span>, <span class="mi">2</span>, <span class="mi">0</span><span class="p">]</span>
<span class="nb">p</span> a<span class="p">.</span><span class="nf">slice_when</span> <span class="p">{</span><span class="o">|</span>i, j<span class="o">|</span> i<span class="p">.</span><span class="nf">even?</span> <span class="o">!=</span> j<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[7, 5, 9], [2, 0], [7, 9], [4, 2, 0]]
</span>
<span class="c1"># 段落(空行が後ろに続く非空行の文字列)ごとに分ける。
</span><span class="c1"># (Enumerable#chunk で空行を無視して実現する事も可能)
</span>lines <span class="o">=</span> <span class="p">[</span><span class="s2">"</span><span class="s2">foo\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">bar\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">baz\n</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">qux\n</span><span class="s2">"</span><span class="p">]</span>
<span class="nb">p</span> lines<span class="p">.</span><span class="nf">slice_when</span> <span class="p">{</span><span class="o">|</span>l1, l2<span class="o">|</span> <span class="sr">/\A\s*\z/</span> <span class="o">=~</span> l1 <span class="o">&amp;&amp;</span> <span class="sr">/\S/</span> <span class="o">=~</span> l2 <span class="p">}</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [[&quot;foo\n&quot;, &quot;bar\n&quot;, &quot;\n&quot;], [&quot;baz\n&quot;, &quot;qux\n&quot;]]
</span></code></pre>
<p>
<a href="../method/-enumerable/i/chunk_while.html">Enumerable#chunk_while</a> はブロックの戻り値が偽ではなく真の時に要素を分ける事を除いて同じ処理を行います。
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/chunk_while.html">Enumerable#chunk_while</a>, <a href="../method/-enumerable/i/chunk.html">Enumerable#chunk</a>
</p>
</dd>


<dt class="method-heading" id="I_SORT"><code>sort -&gt; [object]</code><span class="permalink">[<a href="../method/-enumerable/i/sort.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-sort">rdoc</a>]</span></dt>
<dt class="method-heading"><code>sort {|a, b| ... } -&gt; [object]</code></dt>
<dd class="method-description">
<p>
全ての要素を昇順にソートした配列を生成して返します。
</p>
<p>
ブロックなしのときは &lt;=&gt; メソッドを要素に対して呼び、その結果をもとにソートします。
</p>
<p>
&lt;=&gt; 以外でソートしたい場合は、ブロックを指定します。この場合、ブロックの評価結果を元にソートします。ブロックの値は、a &gt; b のとき正、a == b のとき 0、
a &lt; b のとき負の整数を、期待しています。ブロックが整数以外を返したときは例外 <a href="../class/-type-error.html">TypeError</a> が発生します。
</p>
<p>
Enumerable#sort は安定ではありません (unstable sort)。安定なソートが必要な場合は <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a> を使って工夫する必要があります。詳しくは <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a> の項目を参照してください。
</p>
<p>
※ 比較結果が同じ要素は元の順序通りに並ぶソートを「安定なソート (stable sort)」と言います。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="sx">%w(rhea kea flea)</span><span class="p">.</span><span class="nf">sort</span>           <span class="c1"># =&gt; [&quot;flea&quot;, &quot;kea&quot;, &quot;rhea&quot;]
</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">sort</span> <span class="p">{</span> <span class="o">|</span>a, b<span class="o">|</span> b <span class="o">&lt;=&gt;</span> a <span class="p">}</span>  <span class="c1"># =&gt; [10, 9, 8, 7, 6, 5, 4, 3, 2, 1]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/sort_by.html">Enumerable#sort_by</a>
</p>
</dd>


<dt class="method-heading" id="I_SORT_BY"><code>sort_by -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/sort_by.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-sort_by">rdoc</a>]</span></dt>
<dt class="method-heading"><code>sort_by {|item| ... } -&gt; [object]</code></dt>
<dd class="method-description">
<p>
ブロックの評価結果を &lt;=&gt; メソッドで比較することで、self を昇順にソートします。ソートされた配列を新たに生成して返します。
</p>
<p>
つまり、以下とほぼ同じ動作をします。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Array</span>
  <span class="k">def</span> <span class="nf">sort_by</span>
    <span class="nc">self</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> <span class="p">[</span><span class="k">yield</span><span class="p">(</span>i<span class="p">)</span>, i<span class="p">]</span> <span class="p">}</span><span class="p">.</span>
       <span class="nf">sort</span> <span class="p">{</span><span class="o">|</span>a, b<span class="o">|</span> a<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> b<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">}</span><span class="p">.</span>
       <span class="nf">map</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i<span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<p>
<a href="../method/-enumerable/i/sort.html">Enumerable#sort</a> と比較して sort_by が優れている点として、比較条件が複雑な場合の速度が挙げられます。
sort_by を使わない以下の例では比較を行う度に downcase が実行されます。従って downcase の実行速度が遅ければ sort の速度が致命的に低下します。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="p">[</span><span class="s2">"</span><span class="s2">BAR</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">FOO</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">sort</span> <span class="p">{</span><span class="o">|</span>a, b<span class="o">|</span> a<span class="p">.</span><span class="nf">downcase</span> <span class="o">&lt;=&gt;</span> b<span class="p">.</span><span class="nf">downcase</span> <span class="p">}</span>
</code></pre>
<p>
一方、次のように sort_by を使うと downcase の実行回数は要素数と同じです。つまり、その部分の実行時間は O(n) のオーダーです。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">p</span> <span class="p">[</span><span class="s2">"</span><span class="s2">BAR</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">FOO</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">sort_by</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v<span class="p">.</span><span class="nf">downcase</span> <span class="p">}</span>
</code></pre>
<p>
以下の、実行回数の検証結果を参照してみてください。
</p>
<pre class="highlight ruby">
<code>
<span class="k">class</span> <span class="nn"></span><span class="o"></span><span class="nc">Integer</span>
  <span class="k">def</span> <span class="nf">count</span>
    <span class="vg">$n</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nc">self</span>
  <span class="k">end</span>
<span class="k">end</span>

ary <span class="o">=</span> <span class="p">[</span><span class="p">]</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> ary <span class="o">&lt;&lt;</span> <span class="nb">rand</span><span class="p">(</span>v<span class="p">)</span> <span class="p">}</span>

<span class="vg">$n</span> <span class="o">=</span> <span class="mi">0</span>
ary<span class="p">.</span><span class="nf">sort</span> <span class="p">{</span><span class="o">|</span>a,b<span class="o">|</span> a<span class="p">.</span><span class="nf">count</span> <span class="o">&lt;=&gt;</span> b<span class="p">.</span><span class="nf">count</span> <span class="p">}</span>
<span class="nb">p</span> <span class="vg">$n</span>          <span class="c1"># =&gt; 18200
</span>
<span class="vg">$n</span> <span class="o">=</span> <span class="mi">0</span>
ary<span class="p">.</span><span class="nf">sort_by</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v<span class="p">.</span><span class="nf">count</span> <span class="p">}</span>
<span class="nb">p</span> <span class="vg">$n</span>          <span class="c1"># =&gt; 1000
</span></code></pre>
<p>
Enumerable#sort_by は安定ではありません (unstable sort)。ただし、sort_by を以下のように使うと安定なソートを実装できます。
</p>
<pre class="highlight ruby">
<code>
i <span class="o">=</span> <span class="mi">0</span>
ary<span class="p">.</span><span class="nf">sort_by</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> <span class="p">[</span>v, i <span class="o">+=</span> <span class="mi">1</span><span class="p">]</span> <span class="p">}</span>
</code></pre>
<p>
※ 比較結果が同じ要素は元の順序通りに並ぶソートを「安定なソート (stable sort)」と言います。
</p>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/sort.html">Enumerable#sort</a>
</p>
</dd>


<dt class="method-heading" id="I_SUM"><code>sum(init=0) -&gt; object</code><span class="permalink">[<a href="../method/-enumerable/i/sum.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-sum">rdoc</a>]</span></dt>
<dt class="method-heading"><code>sum(init=0) {|e| expr } -&gt; object</code></dt>
<dd class="method-description">
<p>
要素の合計を返します。
</p>
<p>
ブロックが与えられた場合、加算する前に各要素にブロックが適用されます。
</p>
<p>
selfが空の場合、initを返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">{</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">10</span>, <span class="mi">2</span> <span class="o">=&gt;</span> <span class="mi">20</span> <span class="p">}</span><span class="p">.</span><span class="nf">sum</span> <span class="p">{</span><span class="o">|</span>k, v<span class="o">|</span> k <span class="o">*</span> v <span class="p">}</span>  <span class="c1"># =&gt; 50
</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">sum</span>                               <span class="c1"># =&gt; 55
</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">sum</span> <span class="p">{</span><span class="o">|</span>v<span class="o">|</span> v <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span>                  <span class="c1"># =&gt; 110
</span><span class="p">(</span><span class="s1">'a'</span><span class="o">..</span><span class="s1">'z'</span><span class="p">)</span><span class="p">.</span><span class="nf">sum</span>                            <span class="c1"># =&gt; TypeError
</span></code></pre>
<p>
init 引数を明示的に指名すると数値以外のオブジェクトにも使えます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">{</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">10</span>, <span class="mi">2</span> <span class="o">=&gt;</span> <span class="mi">20</span> <span class="p">}</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="p">)</span>                   <span class="c1">#=&gt; [1, 10, 2, 20]
</span><span class="s2">"</span><span class="s2">a\nb\nc</span><span class="s2">"</span><span class="p">.</span><span class="nf">each_line</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:chomp</span><span class="p">)</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;abc&quot;
</span><span class="p">[</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>, <span class="p">[</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="p">]</span>, <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="p">]</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="p">)</span>          <span class="c1">#=&gt; [1, [2], 3]
</span></code></pre>
<p>
&quot;+&quot; メソッドが再定義されている場合、Enumerable#sum は再定義を無視することがあります(例えばInteger#+)。
</p>
<p>
[SEE_ALSO] <a href="../method/-array/i/sum.html">Array#sum</a>
</p>
</dd>


<dt class="method-heading" id="I_TAKE"><code>take(n) -&gt; Array</code><span class="permalink">[<a href="../method/-enumerable/i/take.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-take">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Enumerable オブジェクトの先頭から n 要素を配列として返します。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
要素数を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
e <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span>, <span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">each</span>
e<span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>             <span class="c1"># =&gt; [1, 2, 3]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-array/i/take.html">Array#take</a>
</p>
</dd>


<dt class="method-heading" id="I_TAKE_WHILE"><code>take_while -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerable/i/take_while.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-take_while">rdoc</a>]</span></dt>
<dt class="method-heading"><code>take_while {|element| ... } -&gt; Array</code></dt>
<dd class="method-description">
<p>
Enumerable オブジェクトの要素を順に偽になるまでブロックで評価します。最初に偽になった要素の手前の要素までを配列として返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
e <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span>, <span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">each</span>
e<span class="p">.</span><span class="nf">take_while</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">}</span>   <span class="c1"># =&gt; [1, 2]
</span></code></pre>
<p>
ブロックを省略した場合は <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<p>
[SEE_ALSO] <a href="../method/-array/i/take_while.html">Array#take_while</a>
</p>
</dd>


<dt class="method-heading" id="I_TALLY"><code>tally -&gt; Hash</code><span class="permalink">[<a href="../method/-enumerable/i/tally.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-tally">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self に含まれる要素を数え上げた結果を Hash で返します。
Hash のキーは self に含まれる要素で、Hash の値は対応する要素が出現する回数です。
</p>
<p>
返り値は Hash であり、内部でも Hash と同等に要素を区別し数えます。そのため、独自で定義するクラスでも <a href="../method/-object/i/hash.html">Object#hash</a> と <a href="../method/-object/i/eql=3f.html">Object#eql?</a> を適切に定義することで数えることができます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">b</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">c</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">b</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">tally</span>  <span class="c1">#=&gt; {&quot;a&quot;=&gt;1, &quot;b&quot;=&gt;2, &quot;c&quot;=&gt;1}
</span>
</code></pre>
</dd>


<dt class="method-heading" id="I_TO_H"><code>to_h(*args) -&gt; Hash</code><span class="permalink">[<a href="../method/-enumerable/i/to_h.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-to_h">rdoc</a>]</span></dt>
<dt class="method-heading"><code>to_h(*args) { ... } -&gt; Hash</code></dt>
<dd class="method-description">
<p>
self を [key, value] のペアの配列として解析した結果を <a href="../class/-hash.html">Hash</a> にして返します。
</p>
<dl>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
each の呼び出し時に引数として渡されます。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
%i[hello world<span class="s2">]</span><span class="p">.</span><span class="nf">each_with_index</span><span class="p">.</span><span class="nf">to_h</span> <span class="c1"># =&gt; {:hello =&gt; 0, :world =&gt; 1}
</span></code></pre>
<p>
ブロックを指定すると各要素でブロックを呼び出し、その結果をペアとして使います。
</p>
<pre class="highlight ruby">
<span class="caption">ブロック付きの例</span>
<code>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">to_h</span> <span class="p">{</span><span class="o">|</span>x<span class="o">|</span> <span class="p">[</span>x, x <span class="o">**</span> <span class="mi">2</span><span class="p">]</span><span class="p">}</span> <span class="c1"># =&gt; {1=&gt;1, 2=&gt;4, 3=&gt;9, 4=&gt;16, 5=&gt;25}
</span></code></pre>
</dd>


<dt class="method-heading" id="I_UNIQ"><code>uniq -&gt; Array</code><span class="permalink">[<a href="../method/-enumerable/i/uniq.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-uniq">rdoc</a>]</span></dt>
<dt class="method-heading"><code>uniq { |item| ... } -&gt; Array</code></dt>
<dd class="method-description">
<p>
self から重複した値を取り除いた配列を返します。
</p>
<p>
ブロックが与えられた場合、ブロックが返した値が重複した要素を取り除いた配列を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
olympics <span class="o">=</span> <span class="p">{</span>
  <span class="mi">1896</span> <span class="o">=&gt;</span> <span class="s1">'Athens'</span>,
  <span class="mi">1900</span> <span class="o">=&gt;</span> <span class="s1">'Paris'</span>,
  <span class="mi">1904</span> <span class="o">=&gt;</span> <span class="s1">'Chicago'</span>,
  <span class="mi">1906</span> <span class="o">=&gt;</span> <span class="s1">'Athens'</span>,
  <span class="mi">1908</span> <span class="o">=&gt;</span> <span class="s1">'Rome'</span>,
<span class="p">}</span>
olympics<span class="p">.</span><span class="nf">uniq</span><span class="p">{</span><span class="o">|</span>k,v<span class="o">|</span> v<span class="p">}</span> <span class="c1"># =&gt; [[1896, &quot;Athens&quot;], [1900, &quot;Paris&quot;], [1904, &quot;Chicago&quot;], [1908, &quot;Rome&quot;]]
</span>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="p">)</span><span class="p">.</span><span class="nf">uniq</span><span class="p">{</span><span class="o">|</span>x<span class="o">|</span> <span class="p">(</span>x<span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="p">}</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 10]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-array/i/uniq.html">Array#uniq</a>
</p>
</dd>


<dt class="method-heading" id="I_ZIP"><code>zip(*lists) -&gt; [[object]]</code><span class="permalink">[<a href="../method/-enumerable/i/zip.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/2.7.6/Enumerable.html#method-i-zip">rdoc</a>]</span></dt>
<dt class="method-heading"><code>zip(*lists) {|v1, v2, ...| ...} -&gt; nil</code></dt>
<dd class="method-description">
<p>
self と引数に渡した配列の各要素からなる配列の配列を生成して返します。生成される配列の要素数は self の要素数と同じです。
</p>
<p>
ブロック付きで呼び出した場合は、
self と引数に渡した配列の各要素を順番にブロックに渡します。
</p>
<dl>
<dt class='method-param'>[PARAM] lists:</dt>
<dd>
配列を指定します。配列でない場合は to_ary メソッドにより配列に変換します。
to_ary メソッドが無い場合は each を試します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="p">[</span><span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">6</span><span class="p">]</span>, <span class="p">[</span><span class="mi">7</span>,<span class="mi">8</span>,<span class="mi">9</span><span class="p">]</span><span class="p">)</span>
<span class="c1"># =&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]
</span>
<span class="nb">p</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="p">)</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="p">[</span><span class="ss">:a</span>,<span class="ss">:b</span>,<span class="ss">:c</span><span class="p">]</span>, <span class="p">[</span><span class="ss">:A</span>,<span class="ss">:B</span>,<span class="ss">:C</span>,<span class="ss">:D</span><span class="p">]</span><span class="p">)</span>
<span class="c1"># =&gt; [[1, :a, :A], [2, :b, :B]]
</span>
<span class="nb">p</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="p">[</span><span class="ss">:a</span>,<span class="ss">:b</span>,<span class="ss">:c</span><span class="p">]</span>, <span class="p">[</span><span class="ss">:A</span>,<span class="ss">:B</span>,<span class="ss">:C</span>,<span class="ss">:D</span><span class="p">]</span><span class="p">)</span>
<span class="c1"># =&gt; [[1, :a, :A], [2, :b, :B],
</span><span class="c1">#     [3, :c, :C], [4, nil, :D], [5, nil, nil]]
</span></code></pre>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">p</span> <span class="p">[</span><span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span><span class="p">]</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="p">[</span><span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">6</span><span class="p">]</span>, <span class="p">[</span><span class="mi">7</span>,<span class="mi">8</span>,<span class="mi">9</span><span class="p">]</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span>ary<span class="o">|</span>
  <span class="nb">p</span> ary
<span class="p">}</span>
<span class="c1"># =&gt; [1, 4, 7]
</span><span class="c1">#    [2, 5, 8]
</span><span class="c1">#    [3, 6, 9]
</span><span class="c1">#    nil
</span></code></pre>
</dd>


</dl>

</main>

<footer id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>

  <a href="https://github.com/rurema/doctree/issues/new" id="feedback-link">フィードバックを送る</a>
  
  <script>if (window.URLSearchParams) { document.getElementById("feedback-link").search = new URLSearchParams({'body': document.location}); }</script>
</footer>
</body>
</html>
