<!DOCTYPE html>
<html lang="ja-JP">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="ja-JP">
  <link rel="stylesheet" type="text/css" href="../style.css">
  <link rel="icon" type="image/png" href="../rurema.png">
  <title>class StringScanner</title>
</head>
<body>

<p>
<a href="../doc/index.html">Ruby 2.0.0 リファレンスマニュアル</a>
&gt; <a href="../library/index.html">ライブラリ一覧</a>
&gt; <a href="../library/strscan.html">strscanライブラリ</a>
&gt; StringScannerクラス
</p>


<h1>class StringScanner</h1>
<p>


クラスの継承リスト: StringScanner

      &lt; <a href="../class/-object.html">Object</a>
      

      &lt; <a href="../class/-kernel.html">Kernel</a>
      

      &lt; <a href="../class/-basic-object.html">BasicObject</a>
      







</p>

<h2>要約</h2>
<p>
StringScanner は文字列スキャナクラスです。
簡単に高速なスキャナを記述できます。
</p>
<pre>
s = StringScanner.new('This is an example string')
s.eos?            #=&gt; false

p s.scan(/\w+/)   #=&gt; &quot;This&quot;
p s.scan(/\w+/)   #=&gt; nil
p s.scan(/\s+/)   #=&gt; &quot; &quot;
p s.scan(/\s+/)   #=&gt; nil
p s.scan(/\w+/)   #=&gt; &quot;is&quot;
s.eos?            #=&gt; false

p s.scan(/\s+/)   #=&gt; &quot; &quot;
p s.scan(/\w+/)   #=&gt; &quot;an&quot;
p s.scan(/\s+/)   #=&gt; &quot; &quot;
p s.scan(/\w+/)   #=&gt; &quot;example&quot;
p s.scan(/\s+/)   #=&gt; &quot; &quot;
p s.scan(/\w+/)   #=&gt; &quot;string&quot;
s.eos?            #=&gt; true

p s.scan(/\s+/)   #=&gt; nil
p s.scan(/\w+/)   #=&gt; nil
</pre>
<p>
StringScanner オブジェクトはスキャンする文字列と「スキャンポインタ」のセットです。
スキャンポインタとはスキャンしおわったところを示すインデックスのことです。
オブジェクト作成直後にはスキャンポインタは文字列先頭にあり、
その地点でのみマッチを試します。マッチしたらその後ろにポインタを進めます。
</p>
<pre>
## a string and a scan pointer   (&quot;_&quot; = scan pointer)

s = StringScanner.new('This is an example string')
_This is an example string     s.eos? = false
s.scan(/\w+/)
This_ is an example string     s.eos? = false
s.scan(/\s+/)
This _is an example string     s.eos? = false
s.scan(/\w+/)
This is_ an example string     s.eos? = false
s.scan(/\s+/)
This is _an example string     s.eos? = false
s.scan(/\w+/)
This is an_ example string     s.eos? = false
s.scan(/\s+/)
This is an _example string     s.eos? = false
s.scan(/\w+/)
This is an example_ string     s.eos? = false
s.scan(/\s+/)
This is an example _string     s.eos? = false
s.scan(/\w+/)
This is an example string_     s.eos? = true
</pre>
<p>
現在のスキャンポインタがさす地点以外でもマッチしたい場合は、<a href="../method/-string-scanner/i/scan_until.html">StringScanner#scan_until</a>など
を使ってください。
</p>
<p>
例: scan, scan_full の動作の違い
</p>
<pre>
def case1
  s = StringScanner.new('test string')
  p s.scan(/t/)       #=&gt; &quot;t&quot;
  p s.scan(/\w+/)     #=&gt; &quot;est&quot;
  p s.scan(/string/)  #=&gt; nil
  p s.scan(/\s+/)     #=&gt; &quot; &quot;
  p s.scan(/string/)  #=&gt; &quot;string&quot;
end

def case2
  s = StringScanner.new('test string')
  p s.scan_until(/t/)       #=&gt; &quot;t&quot;
  p s.scan_until(/\w+/)     #=&gt; &quot;est&quot;
  p s.scan_until(/string/)  #=&gt; &quot; string&quot;
  p s.scan_until(/\s+/)     #=&gt; nil
  p s.scan_until(/string/)  #=&gt; nil
end

p &quot;case1&quot;
case1
p &quot;case2&quot;
case2
</pre>
<p>
スキャンポインタの位置は文字単位でなくバイト単位となります。
</p>
<pre>
# vim:set fileencoding=euc-jp:
require 'strscan'
s = StringScanner.new(&quot;るびい&quot;) # 文字コードはEUC-JPとします
p s.exist?(/び/) #=&gt; 4
</pre>
<p>
StringScanner は $~ $&amp; $1 $2 …… などの正規表現関連変数を
セットしません。代わりに <a href="../method/-string-scanner/i/=5b=5d.html">StringScanner#[]</a>, <a href="../method/-string-scanner/i/matched=3f.html">StringScanner#matched?</a> などの
マッチデータ関連メソッドを使ってください。
</p>



<h2>目次</h2>
<dl>

<dt>特異メソッド</dt>
<dd>

<a href="#S_MUST_-C_VERSION">must_C_version</a>

<a href="#S_NEW">new</a>

</dd>

<dt>インスタンスメソッド</dt>
<dd>

<a href="#I_--3C--3C"><<</a>

<a href="#I_--3C--3C">concat</a>

<a href="#I_--5B--5D">[]</a>

<a href="#I_BEGINNING_OF_LINE--3F">beginning_of_line?</a>

<a href="#I_BEGINNING_OF_LINE--3F">bol?</a>

<a href="#I_CHARPOS">charpos</a>

<a href="#I_CHECK">check</a>

<a href="#I_CHECK_UNTIL">check_until</a>

<a href="#I_CLEAR">clear</a>

<a href="#I_CLEAR">terminate</a>

<a href="#I_EMPTY--3F">empty?</a>

<a href="#I_EMPTY--3F">eos?</a>

<a href="#I_EXIST--3F">exist?</a>

<a href="#I_GET_BYTE">get_byte</a>

<a href="#I_GET_BYTE">getbyte</a>

<a href="#I_GETCH">getch</a>

<a href="#I_INSPECT">inspect</a>

<a href="#I_MATCH--3F">match?</a>

<a href="#I_MATCHED">matched</a>

<a href="#I_MATCHED--3F">matched?</a>

<a href="#I_MATCHED_SIZE">matched_size</a>

<a href="#I_MATCHEDSIZE">matchedsize</a>

<a href="#I_PEEK">peek</a>

<a href="#I_PEEK">peep</a>

<a href="#I_POINTER">pointer</a>

<a href="#I_POINTER">pos</a>

<a href="#I_POINTER--3D">pointer=</a>

<a href="#I_POINTER--3D">pos=</a>

<a href="#I_POST_MATCH">post_match</a>

<a href="#I_PRE_MATCH">pre_match</a>

<a href="#I_RESET">reset</a>

<a href="#I_REST">rest</a>

<a href="#I_REST--3F">rest?</a>

<a href="#I_REST_SIZE">rest_size</a>

<a href="#I_REST_SIZE">restsize</a>

<a href="#I_SCAN">scan</a>

<a href="#I_SCAN_FULL">scan_full</a>

<a href="#I_SCAN_UNTIL">scan_until</a>

<a href="#I_SEARCH_FULL">search_full</a>

<a href="#I_SKIP">skip</a>

<a href="#I_SKIP_UNTIL">skip_until</a>

<a href="#I_STRING">string</a>

<a href="#I_STRING--3D">string=</a>

<a href="#I_UNSCAN">unscan</a>

</dd>

<dt>定数</dt>
<dd>

<a href="#C_-ID">Id</a>

<a href="#C_-VERSION">Version</a>

</dd>

</dl>


<h2>特異メソッド</h2>
<dl>

<dt class="method-heading" id="S_MUST_-C_VERSION"><code>must_C_version -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/s/must_-c_version.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-c-must_C_version">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
このメソッドは後方互換性のために定義されています。
</p>
</dd>


<dt class="method-heading" id="S_NEW"><code>new(str, dup = false) -&gt; StringScanner</code><span class="permalink">[<a href="../method/-string-scanner/s/new.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-c-new">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
新しい StringScanner オブジェクトを生成します。
</p>
<dl>
<dt class='method-param'>[PARAM] str:</dt>
<dd>
スキャン対象の文字列を指定します。
</dd>
<dt class='method-param'>[PARAM] dup:</dt>
<dd>
dup は単に無視します。
引数の文字列は複製も freeze もされず、そのまま使います。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('This is an example string')
s.eos?            #=&gt; false

p s.scan(/\w+/)   #=&gt; &quot;This&quot;
p s.scan(/\w+/)   #=&gt; nil
p s.scan(/\s+/)   #=&gt; &quot; &quot;
</pre>
</dd>


</dl>

<h2>インスタンスメソッド</h2>
<dl>

<dt class="method-heading" id="I_--3C--3C"><code>self &lt;&lt; str -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/i/=3c=3c.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-3C-3C">rdoc</a>]</span></dt>
<dt class="method-heading"><code>concat(str) -&gt; self</code></dt>
<dd class="method-description">
<p>
操作対象の文字列に対し str を破壊的に連結します。
マッチ記録は変更されません。
</p>
<p>
selfを返します。
</p>
<dl>
<dt class='method-param'>[PARAM] str:</dt>
<dd>
操作対象の文字列に対し str を破壊的に連結します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test') # =&gt; #&lt;StringScanner 0/4 @ &quot;test&quot;&gt;
s.match(/\w(\w*)/)            # =&gt; &quot;test&quot;
s[0]                          # =&gt; &quot;test&quot;
s[1]                          # =&gt; &quot;est&quot;
s &lt;&lt; ' string'                # =&gt; #&lt;StringScanner 4/11 &quot;test&quot; @ &quot; stri...&quot;&gt;
s[0]                          # =&gt; &quot;test&quot;
s[1]                          # =&gt; &quot;est&quot;
s.match(/\s+/)                # =&gt; &quot; &quot;
s.match(/\w+/)                # =&gt; &quot;string&quot;
</pre>
<p>
この操作は StringScanner.new に渡した文字列にも影響することがあります。
</p>
<pre>
str = 'test'
s = StringScanner.new(str) # =&gt; #&lt;StringScanner 0/4 @ &quot;test&quot;&gt;
s &lt;&lt; ' string'             # =&gt; #&lt;StringScanner 0/11 @ &quot;test ...&quot;&gt;
str                        # =&gt; &quot;test string&quot;
</pre>
</dd>


<dt class="method-heading" id="I_--5B--5D"><code>self[nth] -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/=5b=5d.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-5B-5D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチした正規表現の nth 番目のかっこに対応する部分文字列を
返します。インデックス 0 はマッチした部分全体です。前回のマッチが
失敗していると常に nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
前回マッチした正規表現の nth 番目のかっこに対応する部分文字列を
返します。
</dd>
</dl>
<pre>
s = StringScanner.new('test string')
s.scan(/\w(\w)(\w*)/) # =&gt; &quot;test&quot;
s[0]                  # =&gt; &quot;test&quot;
s[1]                  # =&gt; &quot;e&quot;
s[2]                  # =&gt; &quot;st&quot;
s.scan(/\w+/)         # =&gt; nil
s[0]                  # =&gt; nil
s[1]                  # =&gt; nil
s[2]                  # =&gt; nil
s.scan(/\s+/)         # =&gt; &quot; &quot;
s[0]                  # =&gt; &quot; &quot;
s[1]                  # =&gt; nil
s[2]                  # =&gt; nil
s.scan(/\w(\w)(\w*)/) # =&gt; &quot;string&quot;
s[0]                  # =&gt; &quot;string&quot;
s[1]                  # =&gt; &quot;t&quot;
s[2]                  # =&gt; &quot;ring&quot;
</pre>
</dd>


<dt class="method-heading" id="I_BEGINNING_OF_LINE--3F"><code>beginning_of_line? -&gt; bool</code><span class="permalink">[<a href="../method/-string-scanner/i/beginning_of_line=3f.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-beginning_of_line-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>bol? -&gt; bool</code></dt>
<dd class="method-description">
<p>
スキャンポインタが行頭を指しているなら true を、
行頭以外を指しているなら false を返します。
</p>
<p>
行頭の定義は、文字列先頭かまたは \n の直後を指していることです。
文字列末尾は必ずしも行頭ではありません。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new(&quot;test\nstring&quot;)
s.bol?        # =&gt; true
s.scan(/\w+/)
s.bol?        # =&gt; false
s.scan(/\n/)
s.bol?        # =&gt; true
s.scan(/\w+/)
s.bol?        # =&gt; false
</pre>
</dd>


<dt class="method-heading" id="I_CHARPOS"><code>charpos -&gt; Fixnum</code><span class="permalink">[<a href="../method/-string-scanner/i/charpos.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-charpos">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスキャンポインタのインデックスを文字単位で返します。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new(&quot;abcädeföghi&quot;)
s.charpos           # =&gt; 0
s.scan_until(/ä/)   # =&gt; &quot;abcä&quot;
s.pos               # =&gt; 5
s.charpos           # =&gt; 4
</pre>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/pos.html">StringScanner#pos</a>
</p>
</dd>


<dt class="method-heading" id="I_CHECK"><code>check(regexp) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/check.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-check">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在位置から regexp とのマッチを試みます。
マッチに成功したらマッチした部分文字列を返します。
マッチに失敗したら nil を返します。
</p>
<p>
このメソッドはマッチが成功してもスキャンポインタを進めません。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.check(/\w+/) # =&gt; &quot;test&quot;
s.pos          # =&gt; 0
s.matched      # =&gt; &quot;test&quot;
s.check(/\s+/) # =&gt; nil
s.matched      # =&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_CHECK_UNTIL"><code>check_until(regexp) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/check_until.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-check_until">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp が一致するまで文字列をスキャンします。
マッチに成功したらスキャン開始位置からマッチ部分の末尾までの部分文字列を返します。
マッチに失敗したら nil を返します。
</p>
<p>
このメソッドはマッチが成功してもスキャンポインタを進めません。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.check_until(/str/) # =&gt; &quot;test str&quot;
s.matched            # =&gt; &quot;str&quot;
s.pos                # =&gt; 0
s.pre_match          # =&gt; &quot;test &quot;
</pre>
</dd>


<dt class="method-heading" id="I_CLEAR"><code>terminate -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/i/clear.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-clear">rdoc</a>]</span></dt>
<dt class="method-heading"><code>clear -&gt; self</code></dt>
<dd class="method-description">
<p>
スキャンポインタを文字列末尾後まで進め、マッチ記録を捨てます。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
self を返します。
</dd>
</dl>
<p>
pos = self.string.size と同じ動作です。
</p>
<pre>
s = StringScanner.new('test string')
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.matched     # =&gt; &quot;test&quot;
s.pos         # =&gt; 4
s[0]          # =&gt; &quot;test&quot;
s.terminate
s.matched     # =&gt; nil
s[0]          # =&gt; nil
s.pos         # =&gt; 11
</pre>
<p>
<a href="../method/-string-scanner/i/clear.html">StringScanner#clear</a> は将来のバージョンで削除される予定です。
代わりに <a href="../method/-string-scanner/i/terminate.html">StringScanner#terminate</a> を使ってください。
</p>
</dd>


<dt class="method-heading" id="I_EMPTY--3F"><code>eos? -&gt; bool</code><span class="permalink">[<a href="../method/-string-scanner/i/empty=3f.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-empty-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>empty? -&gt; bool</code></dt>
<dd class="method-description">
<p>
スキャンポインタが文字列の末尾を指しているなら true を、
末尾以外を指しているなら false を返します。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.eos?        # =&gt; false
s.scan(/\w+/)
s.scan(/\s+/)
s.scan(/\w+/)
s.eos?        # =&gt; true
</pre>
<p>
<a href="../method/-string-scanner/i/empty=3f.html">StringScanner#empty?</a> は将来のバージョンで削除される予定です。
代わりに <a href="../method/-string-scanner/i/eos=3f.html">StringScanner#eos?</a> を使ってください。
</p>
</dd>


<dt class="method-heading" id="I_EXIST--3F"><code>exist?(regexp) -&gt; Fixnum | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/exist=3f.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-exist-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの位置から，次にマッチする文字列の末尾までの長さを返します。
</p>
<p>
マッチに失敗したら nil を返します。
</p>
<p>
このメソッドはマッチが成功してもスキャンポインタを進めません。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.exist?(/s/) # =&gt; 3
s.exist?(//)  # =&gt; 0
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.exist?(/s/) # =&gt; 2
s.exist?(/e/) # =&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_GET_BYTE"><code>get_byte -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/get_byte.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-get_byte">rdoc</a>]</span></dt>
<dt class="method-heading"><code>getbyte -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
1 バイトスキャンして文字列で返します。
スキャンポインタをその後ろに進めます。
スキャンポインタが文字列の末尾を指すなら nil を返します。
</p>
<p>
<a href="../method/-string-scanner/i/getbyte.html">StringScanner#getbyte</a> は将来のバージョンで削除される予定です。
代わりに <a href="../method/-string-scanner/i/get_byte.html">StringScanner#get_byte</a> を使ってください。
</p>
<p>
使用例
</p>
<pre>
require 'strscan'

utf8 = &quot;\u{308B 3073 3044}&quot;
s = StringScanner.new(utf8.encode(&quot;EUC-JP&quot;))
p s.get_byte       #=&gt; &quot;\xA4&quot;
p s.get_byte       #=&gt; &quot;\xEB&quot;
p s.get_byte       #=&gt; &quot;\xA4&quot;
p s.get_byte       #=&gt; &quot;\xD3&quot;
p s.get_byte       #=&gt; &quot;\xA4&quot;
p s.get_byte       #=&gt; &quot;\xA4&quot;
p s.get_byte       #=&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_GETCH"><code>getch -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/getch.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-getch">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
一文字スキャンして文字列で返します。
スキャンポインタをその後ろに進めます。
スキャンポインタが文字列の末尾を指すならnilを返します。
</p>
<p>
一文字の定義は、与えた文字列のエンコードに依存します。
</p>
<p>
使用例
</p>
<pre>
require 'strscan'

utf8 = &quot;\u{308B 3073 3044}&quot;
s = StringScanner.new(utf8.encode(&quot;UTF-8&quot;))
p s.getch                         # =&gt; &quot;る&quot;
p s.getch                         # =&gt; &quot;び&quot;
p s.getch                         # =&gt; &quot;い&quot;
p s.getch                         # =&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_INSPECT"><code>inspect -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/i/inspect.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-inspect">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
StringScannerオブジェクトを表す文字列を返します。
</p>
<p>
文字列にはクラス名の他、以下の情報が含まれます。
</p>
<ul>
<li>スキャナポインタの現在位置。</li>
<li>スキャン対象の文字列の長さ。</li>
<li>スキャンポインタの前後にある文字。上記実行例の @ がスキャンポインタを表します。</li>
</ul>
<p>
使用例
</p>
<pre>
require 'strscan'

s = StringScanner.new('test string')
s.inspect                            # =&gt; &quot;#&lt;StringScanner 0/11 @ \&quot;test ...\&quot;&gt;&quot;
s.scan(/\w+/)                        # =&gt; &quot;test&quot;
s.inspect                            # =&gt; &quot;#&lt;StringScanner 4/11 \&quot;test\&quot; @ \&quot; stri...\&quot;&gt;&quot;
s.scan(/\s+/)                        # =&gt; &quot; &quot;
s.inspect                            # =&gt; &quot;#&lt;StringScanner 5/11 \&quot;test \&quot; @ \&quot;strin...\&quot;&gt;&quot;
s.scan(/\w+/)                        # =&gt; &quot;string&quot;
s.inspect                            # =&gt; &quot;#&lt;StringScanner fin&gt;&quot;
</pre>
</dd>


<dt class="method-heading" id="I_MATCH--3F"><code>match?(regexp) -&gt; Fixnum | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/match=3f.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-match-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの地点だけで regexp と文字列のマッチを試します。
マッチしたら、スキャンポインタは進めずにマッチした
部分文字列の長さを返します。マッチしなかったら nil を
返します。
</p>
<p>
マッチしたサイズは文字単位でなくバイト単位となります。
</p>
<pre>
require 'strscan'
def case1(encode)
  utf8 = &quot;\u{308B 3073 3044}&quot;
  s = StringScanner.new(utf8.encode(encode))
  s.match?(/#{&quot;\u{308B}&quot;.encode(encode)}/)
end

p case1(&quot;EUC-JP&quot;)     #=&gt; 2
</pre>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
p s.match?(/\w+/)   #=&gt; 4
p s.match?(/\w+/)   #=&gt; 4
p s.match?(/\s+/)   #=&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_MATCHED"><code>matched -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/matched.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-matched">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチした部分文字列を返します。
前回のマッチに失敗していると nil を返します。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.matched     # =&gt; nil
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.matched     # =&gt; &quot;test&quot;
s.scan(/\w+/) # =&gt; nil
s.matched     # =&gt; nil
s.scan(/\s+/) # =&gt; &quot; &quot;
s.matched     # =&gt; &quot; &quot;
</pre>
</dd>


<dt class="method-heading" id="I_MATCHED--3F"><code>matched? -&gt; bool</code><span class="permalink">[<a href="../method/-string-scanner/i/matched=3f.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-matched-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回のマッチが成功していたら true を、
失敗していたら false を返します。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.matched?    # =&gt; false
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.matched?    # =&gt; true
s.scan(/\w+/) # =&gt; nil
s.matched?    # =&gt; false
s.scan(/\s+/) # =&gt; &quot; &quot;
s.matched?    # =&gt; true
</pre>
</dd>


<dt class="method-heading" id="I_MATCHED_SIZE"><code>matched_size -&gt; Fixnum | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/matched_size.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-matched_size">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチした部分文字列の長さを返します。
前回マッチに失敗していたら nil を返します。
</p>
<p>
マッチしたサイズは文字単位でなくバイト単位となります。
</p>
<pre>
def run(encode)
  utf8 = &quot;\u{308B 3073 3044}&quot; # るびい
  s = StringScanner.new(utf8.encode(encode))
  s.scan(/#{&quot;\u{308B}&quot;.encode(encode)}/)
  s.matched_size
end

p run(&quot;UTF-8&quot;)     #=&gt; 3
p run(&quot;EUC-JP&quot;)    #=&gt; 2
p run(&quot;Shift_Jis&quot;) #=&gt; 2
</pre>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.matched_size # =&gt; nil
s.scan(/\w+/)  # =&gt; &quot;test&quot;
s.matched_size # =&gt; 4
s.scan(/\w+/)  # =&gt; nil
s.matched_size # =&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_MATCHEDSIZE"><code>matchedsize -&gt; Fixnum | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/matchedsize.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-matchedsize">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-string-scanner/i/matched_size.html">StringScanner#matched_size</a> と同じです。
</p>
<p>
このメソッドは は将来のバージョンで削除される予定です。
代わりに <a href="../method/-string-scanner/i/matched_size.html">StringScanner#matched_size</a> を使ってください。
</p>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/matched_size.html">StringScanner#matched_size</a>
</p>
</dd>


<dt class="method-heading" id="I_PEEK"><code>peek(bytes) -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/i/peek.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-peek">rdoc</a>]</span></dt>
<dt class="method-heading"><code>peep(bytes) -&gt; String</code></dt>
<dd class="method-description">
<p>
スキャンポインタから長さ bytes バイト分だけ文字列を返します。
</p>
<p>
動作例:
</p>
<pre>
require 'strscan'
s = StringScanner.new('test string')
s.peek(4)   # =&gt; &quot;test&quot;
</pre>
<p>
また、このメソッドを実行してもスキャンポインタは移動しません。
</p>
<p>
<a href="../method/-string-scanner/i/peep.html">StringScanner#peep</a> は将来のバージョンでは削除される予定です。
代わりに <a href="../method/-string-scanner/i/peek.html">StringScanner#peek</a> を使ってください。
</p>
<dl>
<dt class='method-param'>[PARAM] bytes:</dt>
<dd>
0 以上の整数を指定します。
ただし、スキャン対象の文字列の長さを超える分は無視されます。
bytes が 0 のとき、またはスキャンポインタが文字列の末尾を
指しているときは空文字列 (&quot;&quot;) を返します。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
bytes に負数を与えると発生します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
require 'strscan'

s = StringScanner.new('test string')
p s.peek(4)     # =&gt; &quot;test&quot;
p s.peek(20)    # =&gt; &quot;test string&quot;
p s.peek(0)     # =&gt; &quot;&quot;
begin
  s.peek(-1)
rescue ArgumentError =&gt; err
  puts err # negative string size (or size too big)
end
p s.scan(/\w+/) # =&gt; &quot;test&quot;
p s.scan(/\s+/) # =&gt; &quot; &quot;
p s.scan(/\w+/) # =&gt; &quot;string&quot;
p s.peek(4)     # =&gt; &quot;&quot;

# このメソッドを実行してもスキャンポインタは移動しません。

s = StringScanner.new('test string')
p s.peek(4)     # =&gt; &quot;test&quot;
p s.peek(4)     # =&gt; &quot;test&quot;
p s.scan(/\w+/) # =&gt; &quot;test&quot;
p s.peek(4)     # =&gt; &quot; str&quot;
p s.peek(4)     # =&gt; &quot; str&quot;
</pre>
</dd>


<dt class="method-heading" id="I_POINTER"><code>pointer -&gt; Fixnum</code><span class="permalink">[<a href="../method/-string-scanner/i/pointer.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-pointer">rdoc</a>]</span></dt>
<dt class="method-heading"><code>pos -&gt; Fixnum</code></dt>
<dd class="method-description">
<p>
現在のスキャンポインタのインデックスを返します。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.pos         # =&gt; 0
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.pos         # =&gt; 4
s.scan(/\w+/) # =&gt; nil
s.pos         # =&gt; 4
s.scan(/\s+/) # =&gt; &quot; &quot;
s.pos         # =&gt; 5
</pre>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/charpos.html">StringScanner#charpos</a>
</p>
</dd>


<dt class="method-heading" id="I_POINTER--3D"><code>pointer=(n)</code><span class="permalink">[<a href="../method/-string-scanner/i/pointer=3d.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-pointer-3D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>pos=(n)</code></dt>
<dd class="method-description">
<p>
スキャンポインタのインデックスを n にセットします。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
整数で、バイト単位で指定します。
負数を指定すると文字列の末尾からのオフセットとして扱います。
</dd>
<dt>[EXCEPTION] RangeError:</dt>
<dd>
マッチ対象の文字列の長さを超える値を指定すると発生します。
</dd>
<dt>[RETURN]</dt>
<dd>
n を返します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
require 'strscan'

s = StringScanner.new('test string')
p s.scan(/\w+/) # =&gt; &quot;test&quot;
p s.pos = 1     # =&gt; 1
p s.scan(/\w+/) # =&gt; &quot;est&quot;
p s.pos = 7     # =&gt; 7
p s.scan(/\w+/) # =&gt; &quot;ring&quot;

begin
  s.pos = 20
rescue RangeError =&gt; err
  puts err #=&gt; index out of range
end
p s.pos = -4    # =&gt; -4
p s.scan(/\w+/) # =&gt; &quot;ring&quot;
</pre>
</dd>


<dt class="method-heading" id="I_POST_MATCH"><code>post_match -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/post_match.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-post_match">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチを行った文字列のうち、マッチしたところよりも後ろの
部分文字列を返します。前回のマッチが失敗していると常に nil を
返します。
</p>
<pre>
s = StringScanner.new('test string')
s.post_match  # =&gt; nil
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.post_match  # =&gt; &quot; string&quot;
s.scan(/\w+/) # =&gt; nil
s.post_match  # =&gt; nil
s.scan(/\s+/) # =&gt; &quot; &quot;
s.post_match  # =&gt; &quot;string&quot;
s.scan(/\w+/) # =&gt; &quot;string&quot;
s.post_match  # =&gt; &quot;&quot;
s.scan(/\w+/) # =&gt; nil
s.post_match  # =&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_PRE_MATCH"><code>pre_match -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/pre_match.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-pre_match">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチを行った文字列のうち、マッチしたところよりも前の
部分文字列を返します。前回のマッチが失敗していると常に nil を
返します。
</p>
<pre>
s = StringScanner.new('test string')
s.pre_match   # =&gt; nil
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.pre_match   # =&gt; &quot;&quot;
s.scan(/\w+/) # =&gt; nil
s.pre_match   # =&gt; nil
s.scan(/\s+/) # =&gt; &quot; &quot;
s.pre_match   # =&gt; &quot;test&quot;
s.scan(/\w+/) # =&gt; &quot;string&quot;
s.pre_match   # =&gt; &quot;test &quot;
s.scan(/\w+/) # =&gt; nil
s.pre_match   # =&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_RESET"><code>reset -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/i/reset.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-reset">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタを文字列の先頭 (インデックス 0) に戻し、
マッチ記録を捨てます。
</p>
<p>
pos = 0と同じ動作です。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
self を返します。
</dd>
</dl>
<pre>
s = StringScanner.new('test string')
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.matched     # =&gt; &quot;test&quot;
s.pos         # =&gt; 4
s[0]          # =&gt; &quot;test&quot;
s.reset
s.matched     # =&gt; nil
s[0]          # =&gt; nil
s.pos         # =&gt; 0
</pre>
</dd>


<dt class="method-heading" id="I_REST"><code>rest -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/i/rest.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-rest">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の残り (rest) を返します。
具体的には、スキャンポインタが指す位置からの文字列を返します。
</p>
<p>
スキャンポインタが文字列の末尾を指していたら空文字列 (&quot;&quot;) を返します。
</p>
<pre>
s = StringScanner.new('test string')
s.rest         # =&gt; &quot;test string&quot;
s.scan(/\w+/)  # =&gt; &quot;test&quot;
s.rest         # =&gt; &quot; string&quot;
s.scan(/\s+/)  # =&gt; &quot; &quot;
s.rest         # =&gt; &quot;string&quot;
s.scan(/\w+/)  # =&gt; &quot;string&quot;
s.rest         # =&gt; &quot;&quot;
</pre>
</dd>


<dt class="method-heading" id="I_REST--3F"><code>rest? -&gt; bool</code><span class="permalink">[<a href="../method/-string-scanner/i/rest=3f.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-rest-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列が残っているならば trueを、
残っていないならば false を返します。
</p>
<p>
<a href="../method/-string-scanner/i/eos=3f.html">StringScanner#eos?</a> と逆の結果を返します。
</p>
<p>
<a href="../method/-string-scanner/i/rest=3f.html">StringScanner#rest?</a> は将来のバージョンで削除される予定です。
代わりに <a href="../method/-string-scanner/i/eos=3f.html">StringScanner#eos?</a> を使ってください。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
p s.eos?        # =&gt; false
p s.rest?       # =&gt; true
s.scan(/\w+/)
s.scan(/\s+/)
s.scan(/\w+/)
p s.eos?        # =&gt; true
p s.rest?       # =&gt; false
</pre>
</dd>


<dt class="method-heading" id="I_REST_SIZE"><code>rest_size -&gt; Fixnum</code><span class="permalink">[<a href="../method/-string-scanner/i/rest_size.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-rest_size">rdoc</a>]</span></dt>
<dt class="method-heading"><code>restsize -&gt; Fixnum</code></dt>
<dd class="method-description">
<p>
文字列の残りの長さを返します。
stringscanner.rest.size と同じです。
</p>
<p>
<a href="../method/-string-scanner/i/restsize.html">StringScanner#restsize</a> は将来のバージョンで削除される予定です。
代わりに<a href="../method/-string-scanner/i/rest_size.html">StringScanner#rest_size</a> を使ってください。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
p s.rest_size # =&gt; 11
p s.rest.size # =&gt; 11
</pre>
</dd>


<dt class="method-heading" id="I_SCAN"><code>scan(regexp) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/scan.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-scan">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの地点だけで regexp と文字列のマッチを試します。
マッチしたら、スキャンポインタを進めて正規表現にマッチした
部分文字列を返します。マッチしなかったら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
p s.scan(/\w+/)   #=&gt; &quot;test&quot;
p s.scan(/\w+/)   #=&gt; nil
p s.scan(/\s+/)   #=&gt; &quot; &quot;
p s.scan(/\w+/)   #=&gt; &quot;string&quot;
p s.scan(/./)     #=&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_SCAN_FULL"><code>scan_full(regexp, s, f) -&gt; object</code><span class="permalink">[<a href="../method/-string-scanner/i/scan_full.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-scan_full">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの位置から regexp と文字列のマッチを試します。
</p>
<p>
マッチに成功すると、s と f の値によって以下のように動作します。
</p>
<ul>
<li>s が true ならばスキャンポインタを進めます。</li>
<li>s が false ならばスキャンポインタを進めません。</li>
<li>f が true ならばマッチした部分文字列を返します。</li>
<li>f が false ならばマッチした部分文字列の長さを返します。</li>
</ul>
<p>
マッチに失敗すると s や f に関係なく nil を返します。
</p>
<p>
このメソッドは s と f の組み合わせにより、
他のメソッドと同等の動作になります。
</p>
<ul>
<li>scan_full(regexp, true, true) は <a href="../method/-string-scanner/i/scan.html">StringScanner#scan</a> と同等。</li>
<li>scan_full(regexp, true, false) は <a href="../method/-string-scanner/i/skip.html">StringScanner#skip</a> と同等。</li>
<li>scan_full(regexp, false, true) は <a href="../method/-string-scanner/i/check.html">StringScanner#check</a> と同等。</li>
<li>scan_full(regexp, false, false) は <a href="../method/-string-scanner/i/match=3f.html">StringScanner#match?</a> と同等。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
<dt class='method-param'>[PARAM] s:</dt>
<dd>
true ならばスキャンポインタを進めます。
false ならばスキャンポインタを進めません。
</dd>
<dt class='method-param'>[PARAM] f:</dt>
<dd>
true ならばマッチした部分文字列を返します。
false ならばマッチした部分文字列の長さを返します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
p s.scan_full(/\w+/, true, true)     #=&gt; &quot;test&quot;
p s.scan_full(/\s+/, false, true)    #=&gt; &quot; &quot;
p s.scan_full(/\s+/, true, false)    #=&gt; 1
p s.scan_full(/\w+/, false, false)   #=&gt; 6
p s.scan_full(/\w+/, true, true)     #=&gt; &quot;string&quot;
</pre>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/scan.html">StringScanner#scan</a> <a href="../method/-string-scanner/i/skip.html">StringScanner#skip</a> <a href="../method/-string-scanner/i/check.html">StringScanner#check</a>  <a href="../method/-string-scanner/i/match=3f.html">StringScanner#match?</a>
</p>
</dd>


<dt class="method-heading" id="I_SCAN_UNTIL"><code>scan_until(regexp) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/scan_until.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-scan_until">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp で指定された正規表現とマッチするまで文字列をスキャンします。
マッチに成功したらスキャンポインタを進めて、
スキャン開始位置からマッチ部分の末尾までの部分文字列を返します。
マッチに失敗したら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.scan_until(/str/) # =&gt; &quot;test str&quot;
s.matched           # =&gt; &quot;str&quot;
s.pos               # =&gt; 8
s.pre_match         # =&gt; &quot;test &quot;
</pre>
</dd>


<dt class="method-heading" id="I_SEARCH_FULL"><code>search_full(regexp, s, f) -&gt; object</code><span class="permalink">[<a href="../method/-string-scanner/i/search_full.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-search_full">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp で指定された正規表現とマッチするまで文字列をスキャンします。
</p>
<p>
マッチに成功すると、s と f の値によって以下のように動作します。
</p>
<ul>
<li>s が true ならばスキャンポインタを進めます。</li>
<li>s が false ならばスキャンポインタを進めません。</li>
<li>f が true ならばスキャン開始位置からマッチした部分の末尾までの部分文字列を返します。</li>
<li>f が false ならばスキャン開始位置からマッチした部分の末尾までの部分文字列の長さを返します。</li>
</ul>
<p>
マッチに失敗すると s や f に関係なく nil を返します。
</p>
<p>
このメソッドは s と f の組み合わせにより、
他のメソッドと同等の動作になります。
</p>
<ul>
<li>search_full(regexp, true, true) は <a href="../method/-string-scanner/i/scan_until.html">StringScanner#scan_until</a> と同等。</li>
<li>search_full(regexp, true, false) は <a href="../method/-string-scanner/i/skip_until.html">StringScanner#skip_until</a> と同等。</li>
<li>search_full(regexp, false, true) は <a href="../method/-string-scanner/i/check_until.html">StringScanner#check_until</a> と同等。</li>
<li>search_full(regexp, false, false) は <a href="../method/-string-scanner/i/exist=3f.html">StringScanner#exist?</a> と同等。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
<dt class='method-param'>[PARAM] s:</dt>
<dd>
true ならばスキャンポインタを進めます。
false ならばスキャンポインタを進めません。
</dd>
<dt class='method-param'>[PARAM] f:</dt>
<dd>
true ならばマッチした部分文字列を返します。
false ならばマッチした部分文字列の長さを返します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
p s.search_full(/t/, true, true)       #=&gt; &quot;t&quot;
p s.search_full(/str/, false, true)    #=&gt; &quot;est str&quot;
p s.search_full(/string/, true, true)  #=&gt; &quot;est string&quot;
</pre>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/scan_until.html">StringScanner#scan_until</a> <a href="../method/-string-scanner/i/skip_until.html">StringScanner#skip_until</a> <a href="../method/-string-scanner/i/check_until.html">StringScanner#check_until</a> <a href="../method/-string-scanner/i/exist=3f.html">StringScanner#exist?</a>
</p>
</dd>


<dt class="method-heading" id="I_SKIP"><code>skip(regexp) -&gt; Fixnum | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/skip.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-skip">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの地点だけで regexp と文字列のマッチを試します。
マッチしたらスキャンポインタを進めマッチした部分文字列の
長さを返します。マッチしなかったら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに使用する正規表現を指定します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
p s.skip(/\w+/)   #=&gt; 4
p s.skip(/\w+/)   #=&gt; nil
p s.skip(/\s+/)   #=&gt; 1
p s.skip(/\w+/)   #=&gt; 6
p s.skip(/./)     #=&gt; nil
</pre>
</dd>


<dt class="method-heading" id="I_SKIP_UNTIL"><code>skip_until(regexp) -&gt; Fixnum | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/skip_until.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-skip_until">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp が一致するまで文字列をスキャンします。
マッチに成功したらスキャンポインタを進めて、
スキャン開始位置からマッチ部分の末尾までの部分文字列の長さを返します。
マッチに失敗したら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに使用する正規表現を指定します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.scan_until(/str/) # =&gt; 8
s.matched           # =&gt; &quot;str&quot;
s.pos               # =&gt; 8
s.pre_match         # =&gt; &quot;test &quot;
</pre>
</dd>


<dt class="method-heading" id="I_STRING"><code>string -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/i/string.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-string">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャン対象にしている文字列を返します。
</p>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
s.string # =&gt; &quot;test string&quot;
</pre>
<p>
返り値は freeze されていません。
</p>
<pre>
s = StringScanner.new('test string')
s.string.frozen? # =&gt; false
</pre>
<p>
なお、このメソッドは StringScanner.new に渡した
文字列をそのまま返しますが、この仕様が将来に渡って保証されるわけではありません。
この仕様に依存したコードを書かないようにしましょう。
</p>
<pre>
str = 'test string'
s = StringScanner.new(str)
s.string == str    # =&gt; true
s.string.eql?(str) # =&gt; true (将来は false になる可能性がある)
</pre>
<p>
また、返り値の文字列に対して破壊的な変更もできますが、
この操作がスキャン対象の文字列を変更することも保証されません。
この仕様に依存したコードを書かないでください。
</p>
<pre>
str = 'test string'
s = StringScanner.new(str)
s.string.replace(&quot;0123&quot;)
s.scan(/\w+/)     # =&gt; &quot;0123&quot; (将来は &quot;test&quot; が返る可能性あり)
str               # =&gt; &quot;0123&quot; (将来は &quot;test string&quot; が返る可能性あり)
</pre>
</dd>


<dt class="method-heading" id="I_STRING--3D"><code>string=(str)</code><span class="permalink">[<a href="../method/-string-scanner/i/string=3d.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-string-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャン対象の文字列を str に変更して、マッチ記録を捨てます。
</p>
<dl>
<dt class='method-param'>[PARAM] str:</dt>
<dd>
スキャン対象の文字列を str に変更して、マッチ記録を捨てます。
</dd>
<dt>[RETURN]</dt>
<dd>
str を返します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
str = '0123'
s = StringScanner.new('test string')
s.string = str     # =&gt; &quot;0123&quot;
s.scan(/\w+/)      # =&gt; &quot;0123&quot;
</pre>
</dd>


<dt class="method-heading" id="I_UNSCAN"><code>unscan -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/i/unscan.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-i-unscan">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタを前回のマッチの前の位置に戻します。
</p>
<pre>
s = StringScanner.new('test string')
s.scan(/\w+/) # =&gt; &quot;test&quot;
s.unscan
s.scan(/\w+/) # =&gt; &quot;test&quot;
</pre>
<dl>
<dt>[RETURN]</dt>
<dd>
selfを返します。
</dd>
</dl>
<p>
このメソッドでポインタを戻せるのは 1 回分だけです。
2 回分以上戻そうとしたときは例外 StringScanner::Error が発生します。
また、まだマッチを一度も行っていないときや、
前回のマッチが失敗していたときも例外 StringScanner::Error が発生します。
</p>
<dl>
<dt>[EXCEPTION] StringScanner::Error:</dt>
<dd>
2 回分以上戻そうとした時や、
まだマッチを一度も行っていない時、
前回のマッチが失敗していた時に発生します。
</dd>
</dl>
<p>
使用例
</p>
<pre>
s = StringScanner.new('test string')
begin
  # マッチを一度も行っていないので、例外が発生する。
  s.unscan
rescue StringScanner::Error =&gt; err
  puts err
  # 出力例
  #=&gt; unscan failed: previous match had failed
end
p s.scan(/\w+/) # =&gt; &quot;test&quot;
s.unscan
begin
  # 二回以上戻そうとしたので、例外が発生する。
  s.unscan
rescue StringScanner::Error =&gt; err
  puts err
  # 出力例
  #=&gt; unscan failed: previous match had failed
end
p s.scan(/\w+/) # =&gt; &quot;test&quot;
p s.scan(/\w+/) # =&gt; nil
begin
  # 前回のマッチが失敗しているので、例外が発生する。
  s.unscan
rescue =&gt; err
  puts err
  # 出力例
  #=&gt; unscan failed: previous match had failed
end
</pre>
</dd>


</dl>

<h2>定数</h2>
<dl>

<dt class="method-heading" id="C_-ID"><code>Id -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/c/-id.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-c-Id">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-string-scanner.html">StringScanner</a> クラスの詳しいバージョンを文字列で返します。
この文字列は <a href="../method/-object/i/freeze.html">Object#freeze</a> されています。
</p>
</dd>


<dt class="method-heading" id="C_-VERSION"><code>Version -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/c/-version.html">permalink</a>][<a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/strscan/rdoc/StringScanner.html#method-c-Version">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-string-scanner.html">StringScanner</a> クラスのバージョンを文字列で返します。
この文字列は <a href="../method/-object/i/freeze.html">Object#freeze</a> されています。
</p>
<pre>
StringScanner::Version           # =&gt; &quot;0.7.0&quot;
StringScanner::Version.frozen?   # =&gt; true
</pre>
</dd>


</dl>



<div id="footer">
  <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>
</div>
</body>
</html>
