<!DOCTYPE html>
<html lang="ja-JP">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="ja-JP">
  <link rel="stylesheet" type="text/css" href="../style.css">
  <link rel="icon" type="image/png" href="../rurema.png">
  
  <title>class IO (Ruby 1.8.7)</title>
</head>
<body>

<p>
<a href="../doc/index.html">Ruby 1.8.7 リファレンスマニュアル</a>
&gt; <a href="../library/index.html">ライブラリ一覧</a>
&gt; <a href="../library/_builtin.html">組み込みライブラリ</a>
&gt; IOクラス
</p>


<h1>class IO</h1>
<p>


クラスの継承リスト: IO

      &lt; <a href="../class/-enumerable.html">Enumerable</a>
      

      &lt; <a href="../class/-file=3a=3a-constants.html">File::Constants</a>
      

      &lt; <a href="../class/-object.html">Object</a>
      

      &lt; <a href="../class/-kernel.html">Kernel</a>
      







</p>

<h2>要約</h2>
<p>
基本的な入出力機能のためのクラスです。
</p>
<p>
File::Constants は、<a href="../class/-file.html">File</a> から IO へ移動しました。
</p>
<h2 >EOF での読み込みメソッドの振る舞いの違い</h2>
<p>
空ファイルや EOF での各読み込みメソッドの振る舞いは以下のとおりです。
ただし、length を指定できるメソッドに関しては、length に nil または 0 を指定した場合、
EOF であっても常に空文字列 &quot;&quot; を返します。
ただし、<a href="../method/-i-o/i/read.html">IO#read</a>(0) は EOF では nil を返します。
</p>
<pre>
メソッド                      空のファイルに対して

IO.read(空ファイル)           &quot;&quot;
IO.read(空ファイル, length)   nil
IO.readlines(空ファイル)      []
IO.foreach(空ファイル)        何もしない
</pre>
<pre>
メソッド                      既にEOFだったら

IO#each                       何もしない
IO#each_byte                  何もしない
IO#getc                       nil
IO#gets                       nil
IO#read()                     &quot;&quot;
IO#read(length)               nil
IO#read_nonblock              EOFError
IO#readchar                   EOFError
IO#readline                   EOFError
IO#readlines                  []
IO#readpartial                EOFError
IO#sysread                    EOFError
</pre>



<h2>目次</h2>
<dl>

<dt>特異メソッド</dt>
<dd>

<a href="#S_FOR_FD">for_fd</a>

<a href="#S_FOR_FD">new</a>

<a href="#S_FOR_FD">open</a>

<a href="#S_FOREACH">foreach</a>

<a href="#S_PIPE">pipe</a>

<a href="#S_POPEN">popen</a>

<a href="#S_READ">read</a>

<a href="#S_READLINES">readlines</a>

<a href="#S_SELECT">select</a>

<a href="#S_SYSOPEN">sysopen</a>

</dd>

<dt>インスタンスメソッド</dt>
<dd>

<a href="#I_--3C--3C"><<</a>

<a href="#I_BINMODE">binmode</a>

<a href="#I_BYTES">bytes</a>

<a href="#I_CHARS">chars</a>

<a href="#I_CLONE">clone</a>

<a href="#I_CLONE">dup</a>

<a href="#I_CLOSE">close</a>

<a href="#I_CLOSE_READ">close_read</a>

<a href="#I_CLOSE_WRITE">close_write</a>

<a href="#I_CLOSED--3F">closed?</a>

<a href="#I_EACH">each</a>

<a href="#I_EACH">each_line</a>

<a href="#I_EACH_BYTE">each_byte</a>

<a href="#I_EACH_CHAR">each_char</a>

<a href="#I_EOF">eof</a>

<a href="#I_EOF">eof?</a>

<a href="#I_FCNTL">fcntl</a>

<a href="#I_FILENO">fileno</a>

<a href="#I_FILENO">to_i</a>

<a href="#I_FLUSH">flush</a>

<a href="#I_FSYNC">fsync</a>

<a href="#I_GETBYTE">getbyte</a>

<a href="#I_GETC">getc</a>

<a href="#I_GETS">gets</a>

<a href="#I_IOCTL">ioctl</a>

<a href="#I_ISATTY">isatty</a>

<a href="#I_ISATTY">tty?</a>

<a href="#I_LINENO">lineno</a>

<a href="#I_LINENO--3D">lineno=</a>

<a href="#I_LINES">lines</a>

<a href="#I_PID">pid</a>

<a href="#I_POS">pos</a>

<a href="#I_POS">tell</a>

<a href="#I_POS--3D">pos=</a>

<a href="#I_PRINT">print</a>

<a href="#I_PRINTF">printf</a>

<a href="#I_PUTC">putc</a>

<a href="#I_PUTS">puts</a>

<a href="#I_READ">read</a>

<a href="#I_READ_NONBLOCK">read_nonblock</a>

<a href="#I_READBYTE">readbyte</a>

<a href="#I_READCHAR">readchar</a>

<a href="#I_READLINE">readline</a>

<a href="#I_READLINES">readlines</a>

<a href="#I_READPARTIAL">readpartial</a>

<a href="#I_REOPEN">reopen</a>

<a href="#I_REWIND">rewind</a>

<a href="#I_SEEK">seek</a>

<a href="#I_STAT">stat</a>

<a href="#I_SYNC">sync</a>

<a href="#I_SYNC--3D">sync=</a>

<a href="#I_SYSREAD">sysread</a>

<a href="#I_SYSSEEK">sysseek</a>

<a href="#I_SYSWRITE">syswrite</a>

<a href="#I_TO_IO">to_io</a>

<a href="#I_UNGETC">ungetc</a>

<a href="#I_WRITE">write</a>

<a href="#I_WRITE_NONBLOCK">write_nonblock</a>

</dd>

<dt>定数</dt>
<dd>

<a href="#C_-S-E-E-K_-C-U-R">SEEK_CUR</a>

<a href="#C_-S-E-E-K_-E-N-D">SEEK_END</a>

<a href="#C_-S-E-E-K_-S-E-T">SEEK_SET</a>

</dd>

</dl>


<h2>特異メソッド</h2>
<dl>

<dt class="method-heading" id="S_FOR_FD"><code>new(fd, mode = &quot;r&quot;) -&gt; IO</code><span class="permalink">[<a href="../method/-i-o/s/for_fd.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-for_fd">rdoc</a>]</span></dt>
<dt class="method-heading"><code>for_fd(fd, mode = &quot;r&quot;) -&gt; IO</code></dt>
<dt class="method-heading"><code>open(fd, mode = &quot;r&quot;) -&gt; IO</code></dt>
<dt class="method-heading"><code>open(fd, mode = &quot;r&quot;) {|io| ... } -&gt; object</code></dt>
<dd class="method-description">
<p>
オープン済みのファイルディスクリプタ fd に対する新しい
IO オブジェクトを生成して返します。
</p>
<p>
IO.open にブロックが与えられた場合、IO オブジェクトを生成しそれを引数としてブロックを
実行します。ブロックの終了とともに fd はクローズされます。ブロックの結果を返します。
IO.new, IO.for_fd はブロックを受け付けません。
</p>
<dl>
<dt class='method-param'>[PARAM] fd:</dt>
<dd>
ファイルディスクリプタである整数を指定します。
</dd>
<dt class='method-param'>[PARAM] mode:</dt>
<dd>
<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同じ形式で IO のモードを指定します。<a href="../method/-file=3a=3a-constants/c/-r-d-o-n-l-y.html">File::Constants::RDONLY</a> などの
定数(数値)でモードを指定できます。詳細は組み込み関数 <a href="../method/-kernel/m/open.html">Kernel.#open</a> を参照
してください。
mode は省略可能で、省略時のデフォルトのモードは、
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fcntl.html">fcntl(2)</a> で F_GETFL フラグが利用できる環境では第一引数で指定した fd のモードを引き継ぎ、
利用できない環境では &quot;r&quot; になります。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
IO オブジェクトの生成に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="S_FOREACH"><code>foreach(path, rs = $/) {|line| ... } -&gt; nil</code><span class="permalink">[<a href="../method/-i-o/s/foreach.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-foreach">rdoc</a>]</span></dt>
<dt class="method-heading"><code>foreach(path, rs = $/) -&gt; Enumerable::Enumerator</code></dt>
<dd class="method-description">
<p>
path で指定されたファイルの各行を引数としてブロックを繰り返し実行します。
path のオープンに成功すれば nil を返します。
</p>
<p>
ブロックが与えられなかった場合は、path で指定されたファイルの各行を繰り返す
<a href="../class/-enumerable=3a=3a-enumerator.html">Enumerable::Enumerator</a> オブジェクトを生成して返します。
</p>
<p>
path が空ファイルの場合、何もせずに nil を返します。
<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同様 path の先頭が &quot;|&quot; ならば、&quot;|&quot; に続くコマンドの出力を読み取ります。
</p>
<dl>
<dt class='method-param'>[PARAM] path:</dt>
<dd>
ファイル名を表す文字列か &quot;|コマンド名&quot; を指定します。
</dd>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りを文字列で指定します。rs に nil を指定すると行区切りなしとみなします。
空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします(パラグラフモード)。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
path のオープンに失敗した場合、発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>
</p>
</dd>


<dt class="method-heading" id="S_PIPE"><code>pipe -&gt; [IO]</code><span class="permalink">[<a href="../method/-i-o/s/pipe.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-pipe">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/pipe.html">pipe(2)</a> を実行して、相互につながった2つの
<a href="../class/-i-o.html">IO</a> オブジェクトを要素とする配列を返します。
</p>
<p>
戻り値の配列は最初の要素が読み込み側で、次の要素が書き込み側です。
</p>
<dl>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
IO オブジェクトの作成に失敗した場合に発生します。
</dd>
</dl>
<pre>
r, w = IO.pipe
p [r, w]            # =&gt; [#&lt;IO:0x401b90f8&gt;, #&lt;IO:0x401b7718&gt;]
Thread.new do
  w.puts &quot;foo&quot;
  w.close
end
p r.gets           # =&gt; &quot;foo\n&quot;
</pre>
</dd>


<dt class="method-heading" id="S_POPEN"><code>popen(command, mode = &quot;r&quot;) -&gt; IO</code><span class="permalink">[<a href="../method/-i-o/s/popen.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-popen">rdoc</a>]</span></dt>
<dt class="method-heading"><code>popen(command, mode = &quot;r&quot;) {|f| ... } -&gt; object</code></dt>
<dd class="method-description">
<p>
サブプロセスを実行し、そのプロセスの標準入出力
との間にパイプラインを確立します。生成したパイプを <a href="../class/-i-o.html">IO</a> オブジェクトとして返します。
</p>
<pre>
p io = IO.popen(&quot;cat&quot;, &quot;r+&quot;)  # =&gt; #&lt;IO:fd 4&gt;
io.puts &quot;foo&quot;
io.close_write
p io.gets                     # =&gt; &quot;foo\n&quot;
</pre>
<p>
command でサブプロセスを指定します。command はシェルを経由して実行されます。
</p>
<p>
ブロックが与えられた場合は生成した IO オブジェクトを引数にブ
ロックを実行し、ブロックの実行結果を返します。ブロックの実行後、生成したパイ
プは自動的にクローズされます。
</p>
<pre>
p IO.popen(&quot;cat&quot;, &quot;r+&quot;) {|io|
  io.puts &quot;foo&quot;
  io.close_write
  io.gets
}
# =&gt; &quot;foo\n&quot;
</pre>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
コマンド名を文字列で指定します。シェルを経由して実行されます。
</dd>
<dt class='method-param'>[PARAM] mode:</dt>
<dd>
オープンする IO ポートのモードを指定します。mode の詳細は <a href="../method/-kernel/m/open.html">Kernel.#open</a> 参照して下さい。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
パイプ、あるいは子プロセスの生成に失敗した場合に発生します。
</dd>
</dl>
</dd>
<dt class="method-heading" id="S_POPEN"><code>popen(&quot;-&quot;, mode = &quot;r&quot;) -&gt; IO</code><span class="permalink">[<a href="../method/-i-o/s/popen.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-popen">rdoc</a>]</span></dt>
<dt class="method-heading"><code>popen(&quot;-&quot;, mode = &quot;r&quot;) {|io| ... } -&gt; object</code></dt>
<dd class="method-description">
<p>
第一引数に文字列 &quot;-&quot; が指定された時、<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fork.html">fork(2)</a> を
行い子プロセスの標準入出力との間にパイプラインを確立します。
親プロセスでは IO オブジェクトを返し、子プロセスでは
nil を返します。
</p>
<pre>
io = IO.popen(&quot;-&quot;, &quot;r+&quot;)
if io  # parent
  io.puts &quot;foo&quot;
  p io.gets                   # =&gt; &quot;child output: foo\n&quot;
  io.close
else   # child
  s = gets
  print &quot;child output: &quot; + s
  exit
end
</pre>
<p>
ブロックを与えられた場合、親プロセスでは生成した IO オブジェクトを引数に
ブロックを実行し、その結果を返します。ブロックの実行後、生成したパイ
プは自動的にクローズされます。
子プロセスでは nil を引数にブロックを実行し終了します。
</p>
<pre>
p IO.popen(&quot;-&quot;, &quot;r+&quot;) {|io|
  if io   # parent
    io.puts &quot;foo&quot;
    io.gets
  else    # child
    s = gets
    puts &quot;child output: &quot; + s
  end
}
# =&gt; &quot;child output: foo\n&quot;
</pre>
<dl>
<dt class='method-param'>[PARAM] mode:</dt>
<dd>
オープンする IO ポートのモードを指定します。mode の詳細は <a href="../method/-kernel/m/open.html">Kernel.#open</a> 参照して下さい。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
パイプ、あるいは子プロセスの生成に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="S_READ"><code>read(path, length = nil, offset = 0) -&gt; String | nil</code><span class="permalink">[<a href="../method/-i-o/s/read.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-read">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
path で指定されたファイルを offset 位置から
length バイト分読み込んで返します。
</p>
<p>
既に EOF に達している場合は nil を返します。ただし、length に nil か 0 が指定されている場合は、空文字列 &quot;&quot; を返します。例えば、IO.read(空ファイル) は &quot;&quot; を返します。
</p>
<p>
<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同様 path の先頭が &quot;|&quot; ならば、&quot;|&quot; に続くコマンドの出力を読み取ります。
</p>
<dl>
<dt class='method-param'>[PARAM] path:</dt>
<dd>
ファイル名を表す文字列か &quot;|コマンド名&quot; を指定します。
</dd>
<dt class='method-param'>[PARAM] length:</dt>
<dd>
読み込む長さを整数で指定します。nil であるか省略した場合には、EOF まで読み込みます。
</dd>
<dt class='method-param'>[PARAM] offset:</dt>
<dd>
読み込みを始めるオフセットを整数で指定します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
path のオープン、offset 位置への設定、ファイルの読み込みに失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
length が負の場合に発生します。
</dd>
</dl>
<p>
例:
</p>
<pre>
IO.read(empty_file)             #=&gt; &quot;&quot;
IO.read(empty_file, 1)          #=&gt; nil
IO.read(one_byte_file, 0, 10)   #=&gt; &quot;&quot;
IO.read(one_byte_file, nil, 10) #=&gt; &quot;&quot;
IO.read(one_byte_file, 1, 10)   #=&gt; nil
</pre>
</dd>


<dt class="method-heading" id="S_READLINES"><code>readlines(path, rs = $/) -&gt; [String]</code><span class="permalink">[<a href="../method/-i-o/s/readlines.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-readlines">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
path で指定されたファイルを全て読み込んで、その各行を要素としてもつ配列を返します。
</p>
<p>
<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同様 path の先頭が &quot;|&quot; ならば、&quot;|&quot; に続くコマンドの出力を読み取ります。
</p>
<dl>
<dt class='method-param'>[PARAM] path:</dt>
<dd>
ファイル名を表す文字列か &quot;|コマンド名&quot; を指定します。
</dd>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りを文字列で指定します。rs に nil を指定すると行区切りなしとみなします。空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします(パラグラフモード)。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
path のオープン、ファイルの読み込みに失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="S_SELECT"><code>select(reads, writes = [], excepts = [], timeout = nil) -&gt; [[IO]] | nil</code><span class="permalink">[<a href="../method/-i-o/s/select.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-select">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/select.html">select(2)</a> を実行します。
</p>
<p>
与えられた入力/出力/例外待ちの  IO オブジェクトの中から準備ができたものを
それぞれ配列にして、配列の配列として返します。
タイムアウトした時には nil を返します。
</p>
<p>
<a href="../method/-kernel/m/select.html">Kernel.#select</a> と同じです。
</p>
<dl>
<dt class='method-param'>[PARAM] reads:</dt>
<dd>
入力待ちする <a href="../class/-i-o.html">IO</a> オブジェクトの配列を渡します。
</dd>
<dt class='method-param'>[PARAM] writes:</dt>
<dd>
出力待ちする <a href="../class/-i-o.html">IO</a> オブジェクトの配列を渡します。
</dd>
<dt class='method-param'>[PARAM] excepts:</dt>
<dd>
例外待ちする <a href="../class/-i-o.html">IO</a> オブジェクトの配列を渡します。
</dd>
<dt class='method-param'>[PARAM] timeout:</dt>
<dd>
タイムアウトまでの時間を表す数値または nil を指定します。数値で指定したときの単位は秒です。nil を指定した時には IO がどれかひとつレディ状態になるまで待ち続けます。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
与えられた IO オブジェクトが閉じられていた時に発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/select.html">select(2)</a> に失敗した場合に発生します。
</dd>
</dl>
<pre>
rp, wp = IO.pipe
mesg = &quot;ping &quot;
100.times{
  rs, ws, = IO.select([rp], [wp])
  if r = rs[0]
    ret = r.read(5)
    print ret
    case ret
    when /ping/
      mesg = &quot;pong\n&quot;
    when /pong/
      mesg = &quot;ping &quot;
    end
  end
  if w = ws[0]
    w.write(mesg)
  end
}
</pre>
</dd>


<dt class="method-heading" id="S_SYSOPEN"><code>sysopen(path, mode = &quot;r&quot;, perm = 0666) -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/s/sysopen.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-sysopen">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
path で指定されるファイルをオープンし、ファイル記述子を返しま
す。
</p>
<p>
<a href="../method/-i-o/s/for_fd.html">IO.for_fd</a> などで IO オブジェクトにしない限り、このメソッ
ドでオープンしたファイルをクローズする手段はありません。
</p>
<dl>
<dt class='method-param'>[PARAM] path:</dt>
<dd>
ファイル名を表す文字列を指定します。
</dd>
<dt class='method-param'>[PARAM] mode:</dt>
<dd>
モードを文字列か定数の論理和で指定します。<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同じです。
</dd>
<dt class='method-param'>[PARAM] perm:</dt>
<dd>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/open.html">open(2)</a> の第 3 引数のように、ファイルを生成する場合の
ファイルのパーミッションを整数で指定します。<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同じです。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
ファイルのオープンに失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/open.html">Kernel.#open</a>
</p>
</dd>


</dl>

<h2>インスタンスメソッド</h2>
<dl>

<dt class="method-heading" id="I_--3C--3C"><code>self &lt;&lt; object -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/=3c=3c.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-3C-3C">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
object を出力します。object が文字列でない時にはメソッ
ド to_s を用いて文字列に変換します。
</p>
<p>
以下のような &lt;&lt; の連鎖を使うことができます。
</p>
<pre>
STDOUT &lt;&lt; 1 &lt;&lt; &quot; is a &quot; &lt;&lt; Fixnum &lt;&lt; &quot;\n&quot;
</pre>
<dl>
<dt class='method-param'>[PARAM] object:</dt>
<dd>
出力したいオブジェクトを与えます。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_BINMODE"><code>binmode -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/binmode.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-binmode">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
ストリームをバイナリモードにします。MSDOS などバイナリモードの存在
する OS でのみ有効です。そうでない場合このメソッドは何もしません。
</p>
<p>
バイナリモードから通常のモードに戻す方法は再オープンしかありません。
</p>
<dl>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
モードの変更に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_BYTES"><code>bytes {|ch| ... } -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/bytes.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-bytes">rdoc</a>]</span></dt>
<dt class="method-heading"><code>bytes -&gt; Enumerable::Enumerator</code></dt>
<dd class="method-description">
<p>
このメソッドは obsolete です。
代わりに <a href="../method/-i-o/i/each_byte.html">IO#each_byte</a> を使用してください。
</p>
<p>
IO の現在位置から 1 バイトずつ読み込み、それを整数として与え、ブロックを実行します。
</p>
<p>
ブロックが与えられなかった場合は、自身から生成した
<a href="../class/-enumerable=3a=3a-enumerator.html">Enumerable::Enumerator</a> オブジェクトを返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-i-o/i/each_byte.html">IO#each_byte</a>
</p>
</dd>


<dt class="method-heading" id="I_CHARS"><code>chars {|c| ... } -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/chars.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-chars">rdoc</a>]</span></dt>
<dt class="method-heading"><code>chars -&gt; Enumerable::Enumerator</code></dt>
<dd class="method-description">
<p>
このメソッドは obsolete です。
代わりに <a href="../method/-i-o/i/each_char.html">IO#each_char</a> を使用してください。
</p>
<p>
self に含まれる文字を一文字ずつブロックに渡して評価します。
</p>
<p>
self は読み込み用にオープンされていなければなりません。
</p>
<p>
また、マルチバイト文字列を使用する場合は <a href="../method/-kernel/v/-k-c-o-d-e.html">$KCODE</a> を適切に設定してください。
</p>
<p>
ブロックを省略した場合は各文字について繰り返す <a href="../class/-enumerable=3a=3a-enumerator.html">Enumerable::Enumerator</a>
を返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
self が読み込み用にオープンされていない場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-i-o/i/each_char.html">IO#each_char</a>
</p>
</dd>


<dt class="method-heading" id="I_CLONE"><code>clone -&gt; IO</code><span class="permalink">[<a href="../method/-i-o/i/clone.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-clone">rdoc</a>]</span></dt>
<dt class="method-heading"><code>dup -&gt; IO</code></dt>
<dd class="method-description">
<p>
レシーバと同じ IO を参照する新しい IO オブジェクトを返します。
参照しているファイル記述子は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/dup.html">dup(2)</a> されます。
</p>
<p>
clone の際に self は一旦 <a href="../method/-i-o/i/flush.html">IO#flush</a> されます。
フリーズした IO の clone は同様にフリーズされた IO を返しますが、
dup は内容の等しいフリーズされていない IO を返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されていた場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_CLOSE"><code>close -&gt; nil</code><span class="permalink">[<a href="../method/-i-o/i/close.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-close">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
入出力ポートをクローズします。
</p>
<p>
以後このポートに対して入出力を行うと例外 <a href="../class/-i-o-error.html">IOError</a> が発生しま
す。ガーベージコレクトの際にはクローズされていない IO ポートはクロー
ズされます。
self がパイプでプロセスにつながっていれば、そのプロセスの終
了を待ち合わせます。
</p>
<dl>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
close に失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されていた場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_CLOSE_READ"><code>close_read -&gt; nil</code><span class="permalink">[<a href="../method/-i-o/i/close_read.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-close_read">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
読み込み用の IO を close します。主にパイプや読み書き両用に作成し
た IO オブジェクトで使用します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
close に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_CLOSE_WRITE"><code>close_write -&gt; nil</code><span class="permalink">[<a href="../method/-i-o/i/close_write.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-close_write">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
書き込み用の IO を close します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
close に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_CLOSED--3F"><code>closed? -&gt; bool</code><span class="permalink">[<a href="../method/-i-o/i/closed=3f.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-closed-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
ポートがクローズされている時に真を返します。
</p>
</dd>


<dt class="method-heading" id="I_EACH"><code>each(rs = $/) {|line| ... } -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/each.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-each">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_line(rs = $/) {|line| ... } -&gt; self</code></dt>
<dt class="method-heading"><code>each(rs = $/) -&gt; Enumerable::Enumerator</code></dt>
<dt class="method-heading"><code>each_line(rs = $/) -&gt; Enumerable::Enumerator</code></dt>
<dd class="method-description">
<p>
IO の現在位置から 1 行ずつ文字列として読み込み、それを引数として
与えられたブロックを実行します。
</p>
<p>
ブロックが与えられなかった場合は、自身から生成した
<a href="../class/-enumerable=3a=3a-enumerator.html">Enumerable::Enumerator</a> オブジェクトを返します。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りを文字列で指定します。rs に nil を指定すると行区切りなしとみなします。
空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします(パラグラフモード)。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>, <a href="../method/-i-o/i/gets.html">IO#gets</a>
</p>
</dd>


<dt class="method-heading" id="I_EACH_BYTE"><code>each_byte {|ch| ... } -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/each_byte.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-each_byte">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_byte -&gt; Enumerable::Enumerator</code></dt>
<dd class="method-description">
<p>
IO の現在位置から 1 バイトずつ読み込み、それを整数として与え、ブロックを実行します。
</p>
<p>
ブロックが与えられなかった場合は、自身から生成した
<a href="../class/-enumerable=3a=3a-enumerator.html">Enumerable::Enumerator</a> オブジェクトを返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_EACH_CHAR"><code>each_char {|c| ... } -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/each_char.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-each_char">rdoc</a>]</span></dt>
<dt class="method-heading"><code>each_char -&gt; Enumerable::Enumerator</code></dt>
<dd class="method-description">
<p>
self に含まれる文字を一文字ずつブロックに渡して評価します。
</p>
<p>
self は読み込み用にオープンされていなければなりません。
</p>
<p>
また、マルチバイト文字列を使用する場合は <a href="../method/-kernel/v/-k-c-o-d-e.html">$KCODE</a> を適切に設定してください。
</p>
<p>
ブロックを省略した場合は各文字について繰り返す <a href="../class/-enumerable=3a=3a-enumerator.html">Enumerable::Enumerator</a>
を返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
self が読み込み用にオープンされていない場合に発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;testfile&quot;)
f.each_char {|c| print c, ' ' }   #=&gt; #&lt;File:testfile&gt;
</pre>
</dd>


<dt class="method-heading" id="I_EOF"><code>eof -&gt; bool</code><span class="permalink">[<a href="../method/-i-o/i/eof.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-eof">rdoc</a>]</span></dt>
<dt class="method-heading"><code>eof? -&gt; bool</code></dt>
<dd class="method-description">
<p>
ストリームがファイルの終端に達した場合、true を返します。そうでない場合、false を返します。
</p>
<pre>
f = File.new(&quot;testfile&quot;)
dummy = f.readlines
f.eof   #=&gt; true
</pre>
<p>
自身がパイプやソケットなどのストリームであった場合、相手がデータを送るか close するまでブロックします。
</p>
<pre>
r, w = IO.pipe
Thread.new { sleep 10; w.close }
r.eof?  #=&gt; 10秒ブロックしてから true を返す。

r, w = IO.pipe
Thread.new { sleep 10; w.puts &quot;a&quot; }
r.eof?  #=&gt; 10秒ブロックしてから false を返す。

r, w = IO.pipe
r.eof?  # 永久にブロックします。
</pre>
<p>
eof, eof? は入力バッファにデータを読み込むので、<a href="../method/-i-o/i/sysread.html">IO#sysread</a> と同時に使うと正常に
動作しません。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_FCNTL"><code>fcntl(cmd, arg = 0) -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/fcntl.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-fcntl">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IOに対してシステムコール fcntl を実行します。
機能の詳細は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fcntl.html">fcntl(2)</a> を参照してください。
fcntl(2) が返した整数を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] cmd:</dt>
<dd>
IO に対するコマンドを、添付ライブラリ <a href="../library/fcntl.html">fcntl</a> が提供している定数で指定します。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
cmd に対する引数を整数、文字列、booleanのいずれかで指定します。
整数の時にはその値を <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fcntl.html">fcntl(2)</a> に渡します。
文字列の場合には Array#pack した構造体だとみなして渡します。
arg が nil か false の場合には 0を、true の場合には 1 を渡します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
fcntl の実行に失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_FILENO"><code>fileno -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/fileno.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-fileno">rdoc</a>]</span></dt>
<dt class="method-heading"><code>to_i -&gt; Integer</code></dt>
<dd class="method-description">
<p>
ファイル記述子を表す整数を返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_FLUSH"><code>flush -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/flush.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-flush">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO ポートの内部バッファをフラッシュします。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fflush.html">fflush(3)</a> が失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_FSYNC"><code>fsync -&gt; 0 | nil</code><span class="permalink">[<a href="../method/-i-o/i/fsync.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-fsync">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
書き込み用の IO に対して、システムコール <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fsync.html">fsync(2)</a>
を実行します。<a href="../method/-i-o/i/flush.html">IO#flush</a> を行ったあと、(OSレベルで)まだディスクに
書き込まれていないメモリ上にあるデータをディスクに書き出します。
</p>
<p>
成功すれば 0 を返します。
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fsync.html">fsync(2)</a> がサポートされていない場合は nil を返します。
</p>
<dl>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_GETBYTE"><code>getbyte -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-i-o/i/getbyte.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-getbyte">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO から1バイトを読み込み整数として返します。
既に EOF に達していれば nil を返します。
</p>
<pre>
f = File.new(&quot;testfile&quot;)
f.getbyte   #=&gt; 84
f.getbyte   #=&gt; 104
</pre>
</dd>


<dt class="method-heading" id="I_GETC"><code>getc -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-i-o/i/getc.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-getc">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO ポートから 1 文字読み込んで、その文字に対応する <a href="../class/-fixnum.html">Fixnum</a> を
返します。EOF に到達した時には nil を返します。
</p>
<p>
<a href="../method/-i-o/i/readchar.html">IO#readchar</a> との違いは EOF での振る舞いのみです。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;testfile&quot;)
f.getc                   #=&gt; 84
f.getc                   #=&gt; 104
f.read
f.getc                   #=&gt; nil
</pre>
<p>
[SEE_ALSO] <a href="../method/-i-o/i/readchar.html">IO#readchar</a>
</p>
</dd>


<dt class="method-heading" id="I_GETS"><code>gets(rs = $/) -&gt; String | nil</code><span class="permalink">[<a href="../method/-i-o/i/gets.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-gets">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
一行読み込んで、読み込みに成功した時にはその文字列を返します。
EOF に到達した時には nil を返します。
</p>
<p>
読み込んだ文字列を変数 <a href="../method/-kernel/v/_.html">$_</a> にセットします。
<a href="../method/-i-o/i/readline.html">IO#readline</a> との違いは EOF での振る舞いのみです。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りを文字列で指定します。rs に nil を指定すると行区切りなしとみなします。
空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします(パラグラフモード)。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;oneline_file&quot;)
f.gets                          #=&gt; &quot;This is line one\n&quot;
$_                              #=&gt; &quot;This is line one\n&quot;
f.gets                          #=&gt; nil
$_                              #=&gt; nil
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>, <a href="../method/-i-o/i/readline.html">IO#readline</a>
</p>
</dd>


<dt class="method-heading" id="I_IOCTL"><code>ioctl(cmd, arg = 0) -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/ioctl.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-ioctl">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO に対してシステムコール ioctl を実行し、その結果を返します。
機能の詳細は <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/ioctl.html">ioctl(2)</a> を参照してください。
</p>
<dl>
<dt class='method-param'>[PARAM] cmd:</dt>
<dd>
IO に対するコマンドを整数で指定します。どのようなコマンドが使えるかはプラットフォームに依存します。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
cmd に対する引数を指定します。整数の時にはその値を ioctl に渡します。
文字列の場合には <a href="../method/-array/i/pack.html">Array#pack</a> した構造体だとみなして渡します。
arg が nil か false の場合には 0を、true の場合には 1 を渡します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_ISATTY"><code>isatty -&gt; bool</code><span class="permalink">[<a href="../method/-i-o/i/isatty.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-isatty">rdoc</a>]</span></dt>
<dt class="method-heading"><code>tty? -&gt; bool</code></dt>
<dd class="method-description">
<p>
入出力ポートがttyに結合している時、真を返します。そうでない場合 false を返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_LINENO"><code>lineno -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/lineno.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-lineno">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在の行番号を整数で返します。実際には <a href="../method/-i-o/i/gets.html">IO#gets</a> が呼ばれた回数です。
改行以外のセパレータで gets が呼ばれた場合など、実際の行番号と異なる場合があります。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;testfile&quot;)
f.lineno                 #=&gt; 0
f.gets                   #=&gt; &quot;This is line one\n&quot;
f.lineno                 #=&gt; 1
f.gets                   #=&gt; &quot;This is line two\n&quot;
f.lineno                 #=&gt; 2
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2e.html">$.</a>
</p>
</dd>


<dt class="method-heading" id="I_LINENO--3D"><code>lineno=(number)</code><span class="permalink">[<a href="../method/-i-o/i/lineno=3d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-lineno-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在の行番号を number にセットします。 <a href="../method/-kernel/v/=2e.html">$.</a> は次回の読み込みの時に更新されます。
</p>
<dl>
<dt class='method-param'>[PARAM] number:</dt>
<dd>
行番号を整数で指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;testfile&quot;)
f.gets                     #=&gt; &quot;This is line one\n&quot;
$.                         #=&gt; 1
f.lineno = 1000
f.lineno                   #=&gt; 1000
$.                         #=&gt; 1
f.gets                     #=&gt; &quot;This is line two\n&quot;
$.                         #=&gt; 1001
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2e.html">$.</a>
</p>
</dd>


<dt class="method-heading" id="I_LINES"><code>lines(rs = $/) -&gt; Enumerable::Enumerator</code><span class="permalink">[<a href="../method/-i-o/i/lines.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-lines">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
このメソッドは obsolete です。
代わりに <a href="../method/-i-o/i/each_line.html">IO#each_line</a> を使用してください。
</p>
<p>
自身を 1 行ずつイテレートするような
<a href="../class/-enumerable=3a=3a-enumerator.html">Enumerable::Enumerator</a> オブジェクトを生成して返します。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りを文字列で指定します。rs に nil を指定すると行区切りなしとみなします。
空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします(パラグラフモード)。
</dd>
</dl>
<pre>
&quot;foo\nbar\n&quot;.lines.to_a   #=&gt; [&quot;foo\n&quot;, &quot;bar\n&quot;]
&quot;foo\nb ar&quot;.lines.sort    #=&gt; [&quot;b ar&quot;, &quot;foo\n&quot;]
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>, <a href="../method/-i-o/i/each_line.html">IO#each_line</a>
</p>
</dd>


<dt class="method-heading" id="I_PID"><code>pid -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-i-o/i/pid.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-pid">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自身が <a href="../method/-i-o/s/popen.html">IO.popen</a> で作られたIOポートなら、子プロセスのプロセス ID を
返します。それ以外は nil を返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_POS"><code>pos -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/pos.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-pos">rdoc</a>]</span></dt>
<dt class="method-heading"><code>tell -&gt; Integer</code></dt>
<dd class="method-description">
<p>
ファイルポインタの現在の位置を整数で返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_POS--3D"><code>pos=(n)</code><span class="permalink">[<a href="../method/-i-o/i/pos=3d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-pos-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
ファイルポインタを指定位置に移動します。
<a href="../method/-i-o/i/seek.html">IO#seek</a>(n, IO::SEEK_SET) と同じです。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
先頭からのオフセットを整数で指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_PRINT"><code>print(*arg) -&gt; nil</code><span class="permalink">[<a href="../method/-i-o/i/print.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-print">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を IO ポートに順に出力します。引数を省略した場合は、<a href="../method/-kernel/v/_.html">$_</a> を出力します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
<a href="../method/-kernel/m/print.html">Kernel.#print</a> と同じです。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_PRINTF"><code>printf(format, *arg) -&gt; nil</code><span class="permalink">[<a href="../method/-i-o/i/printf.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-printf">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
C 言語の printf と同じように、format に従い引数
を文字列に変換して、self に出力します。
</p>
<p>
第一引数に IO を指定できないこと、引数を省略できないことを除けば <a href="../method/-kernel/m/printf.html">Kernel.#printf</a> と同じです。
</p>
<dl>
<dt class='method-param'>[PARAM] format:</dt>
<dd>
<a href="../method/-kernel/m/printf.html">Kernel.#printf</a> と同じです。<a href="../doc/print_format.html">sprintf フォーマット</a> を参照してください。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
<a href="../method/-kernel/m/printf.html">Kernel.#printf</a> と同じです。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/printf.html">Kernel.#printf</a>
</p>
</dd>


<dt class="method-heading" id="I_PUTC"><code>putc(ch) -&gt; object</code><span class="permalink">[<a href="../method/-i-o/i/putc.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-putc">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字 ch を self に出力します。
引数の扱いは <a href="../method/-kernel/m/putc.html">Kernel.#putc</a> と同じです。詳細はこちらを参照し
てください。ch を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] ch:</dt>
<dd>
出力したい文字を、文字列か文字コード(整数)で与えます。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/putc.html">Kernel.#putc</a>
</p>
</dd>


<dt class="method-heading" id="I_PUTS"><code>puts(*obj) -&gt; nil</code><span class="permalink">[<a href="../method/-i-o/i/puts.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-puts">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
各 obj を self に出力し、それぞれの後に改行を出力します。
引数の扱いは <a href="../method/-kernel/m/puts.html">Kernel.#puts</a> と同じです。詳細はこちらを参照し
てください。
</p>
<dl>
<dt class='method-param'>[PARAM] obj:</dt>
<dd>
出力したいオブジェクトを指定します。<a href="../method/-kernel/m/puts.html">Kernel.#puts</a> と同じです。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre>
$stdout.puts(&quot;this&quot;, &quot;is&quot;, &quot;a&quot;, &quot;test&quot;, [1, [nil, 3]])

#=&gt;
this
is
a
test
1
nil
3
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/puts.html">Kernel.#puts</a>
</p>
</dd>


<dt class="method-heading" id="I_READ"><code>read(length = nil, outbuf = &quot;&quot;) -&gt; String | nil</code><span class="permalink">[<a href="../method/-i-o/i/read.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-read">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
length バイト読み込んで、その文字列を返します。
</p>
<p>
既に EOF に達していれば nil を返します。
ただし、length に nil が指定されている場合は、空文字列 &quot;&quot; を返します。
例えば、open(空ファイル) {|f| f.read } は &quot;&quot; となります。
</p>
<dl>
<dt class='method-param'>[PARAM] length:</dt>
<dd>
読み込むサイズを整数で指定します。
nil が指定された場合、EOF までの全てのデータを読み込んで、その文字列を返します。
</dd>
<dt class='method-param'>[PARAM] outbuf:</dt>
<dd>
出力用のバッファを文字列で指定します。IO#read は読み込んだ
データをその文字列オブジェクトに上書きして返します。指定し
た文字列オブジェクトがあらかじめ length 長の領域であれば、
余計なメモリの割当てが行われません。指定した文字列の長さが
length と異なる場合、その文字列は一旦 length 長に拡張(ある
いは縮小)されたあと、実際に読み込んだデータのサイズになります。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
データの読み込みに失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
length が負の場合に発生します。
</dd>
</dl>
<p>
第二引数を指定した read の呼び出しでデータが空であった場合
(read が nil を返す場合)、outbuf は空文字列になります。
</p>
<pre>
outbuf = &quot;x&quot; * 20;
io = File.open(&quot;/dev/null&quot;)
p io.read(10,outbuf)
p outbuf
=&gt; nil
   &quot;&quot;
</pre>
</dd>


<dt class="method-heading" id="I_READ_NONBLOCK"><code>read_nonblock(maxlen, outbuf = nil) -&gt; String</code><span class="permalink">[<a href="../method/-i-o/i/read_nonblock.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-read_nonblock">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO をノンブロッキングモードに設定し、
その後で <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/read.html">read(2)</a> システムコールにより
長さ maxlen を上限として読み込み、文字列として返します。
EAGAIN, EINTR などは <a href="../class/-errno=3a=3a-e-x-x-x.html">Errno::EXXX</a> 例外として呼出元に報告されます。
</p>
<p>
なお、バッファが空でない場合は、read_nonblock はバッファから読み込みます。この場合、read(2) システムコールは呼ばれません。
</p>
<p>
このメソッドはノンブロッキングモードにする点を除いて <a href="../method/-i-o/i/readpartial.html">IO#readpartial</a> と
同じであることに注意してください。
</p>
<p>
既に EOF に達していれば EOFError が発生します。ただし、maxlen に 0 が指定されている場合は、空文字列 &quot;&quot; を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] maxlen:</dt>
<dd>
読み込む長さの上限を整数で指定します。
</dd>
<dt class='method-param'>[PARAM] outbuf:</dt>
<dd>
文字列で指定します。IO#read_nonblock は読み込んだデータを outbuf に破壊的に格納し、
返り値は outbuf となります。outbuf は一旦 maxlen 長に拡張(あるいは縮小)されたあと、
実際に読み込んだデータのサイズになります。read(2) システムコールが 0 を返した場合は、空文字列になります。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
read(2) システムコールの結果としてエラーが起きた場合に発生します。
</dd>
<dt>[EXCEPTION] EOFError:</dt>
<dd>
read(2) システムコールが 0 を返した場合に発生します。これは、IO が既に EOF に達していることを意味します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_READBYTE"><code>readbyte -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/readbyte.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-readbyte">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO から1バイトを読み込み整数として返します。
既に EOF に達していれば EOFError が発生します。
</p>
<dl>
<dt>[EXCEPTION] EOFError:</dt>
<dd>
既に EOF に達している場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_READCHAR"><code>readchar -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/readchar.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-readchar">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO ポートから 1 文字読み込んで、その文字に対応する <a href="../class/-fixnum.html">Fixnum</a> を
返します。
EOF に到達した時には EOFError が発生します。
</p>
<p>
<a href="../method/-i-o/i/getc.html">IO#getc</a> との違いは EOF での振る舞いのみです。
</p>
<dl>
<dt>[EXCEPTION] EOFError:</dt>
<dd>
EOF に到達した時に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;testfile&quot;)
f.readchar                   #=&gt; 84
f.readchar                   #=&gt; 104
f.read
f.readchar                   #=&gt; EOFError
</pre>
<p>
[SEE_ALSO] <a href="../method/-i-o/i/getc.html">IO#getc</a>
</p>
</dd>


<dt class="method-heading" id="I_READLINE"><code>readline(rs = $/) -&gt; String</code><span class="permalink">[<a href="../method/-i-o/i/readline.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-readline">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
一行読み込んで、読み込みに成功した時にはその文字列を返します。
EOF に到達した時には EOFError が発生します。
</p>
<p>
読み込んだ文字列を変数 <a href="../method/-kernel/v/_.html">$_</a> にセットします。<a href="../method/-i-o/i/gets.html">IO#gets</a> との違いは EOF での振る舞いのみです。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りを文字列で指定します。rs に nil を指定すると行区切りなしとみなします。空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします(パラグラフモード)。
</dd>
<dt>[EXCEPTION] EOFError:</dt>
<dd>
EOF に到達した時に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;oneline_file&quot;)
f.readline                      #=&gt; &quot;This is line one\n&quot;
$_                              #=&gt; &quot;This is line one\n&quot;
f.readline                      #=&gt; EOFError
$_                              #=&gt; nil
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>, <a href="../method/-i-o/i/gets.html">IO#gets</a>
</p>
</dd>


<dt class="method-heading" id="I_READLINES"><code>readlines(rs = $/) -&gt; [String]</code><span class="permalink">[<a href="../method/-i-o/i/readlines.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-readlines">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
データを全て読み込んで、その各行を要素としてもつ配列を返します。
既に EOF に達していれば空配列 [] を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りを文字列で指定します。rs に nil を指定すると行区切りなしとみなします。
空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします(パラグラフモード)。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>, <a href="../method/-i-o/i/gets.html">IO#gets</a>
</p>
</dd>


<dt class="method-heading" id="I_READPARTIAL"><code>readpartial(maxlen, outbuf = &quot;&quot;) -&gt; String</code><span class="permalink">[<a href="../method/-i-o/i/readpartial.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-readpartial">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO から長さ maxlen を上限として読み込み、文字列として返します。
即座に得られるデータが存在しないときにはブロックしてデータの到着を待ちます。
即座に得られるデータが 1byte でも存在すればブロックしません。
</p>
<p>
既に EOF に達していれば EOFError が発生します。
ただし、maxlen に 0 が指定されている場合は、空文字列 &quot;&quot; を返します。
</p>
<p>
readpartial はブロックを最小限に抑えることによって、
パイプ、ソケット、端末などのストリームに対して適切に動作するよう設計されています。
readpartial がブロックするのは次の全ての条件が満たされたときだけです。
</p>
<ul>
<li>IO オブジェクト内のバッファが空</li>
<li>ストリームにデータが到着していない</li>
<li>ストリームが EOF になっていない</li>
</ul>
<p>
これらの条件が満たされる場合、何らかのデータが到着するか EOF になるまで readpartial はブロックします。
</p>
<p>
readpartial の結果は以下のようになります。
</p>
<ol>
<li>バッファが空でなければ、そのバッファのデータを読み込んで返します。</li>
<li>ストリームにデータがあれば、ストリームからデータを読み込んで返します。</li>
<li>ストリームが EOF になっていれば、例外 <a href="../class/-e-o-f-error.html">EOFError</a> を発生させます。</li>
</ol>
<p>
例えば、パイプに対しては次のように動作します。
</p>
<pre>
r, w = IO.pipe           #               buffer          pipe content
w &lt;&lt; &quot;abc&quot;               #               &quot;&quot;              &quot;abc&quot;.
r.readpartial(4096)      #=&gt; &quot;abc&quot;       &quot;&quot;              &quot;&quot;
r.readpartial(4096)      # バッファにもパイプにもデータがないのでブロックする

r, w = IO.pipe           #               buffer          pipe content
w &lt;&lt; &quot;abc&quot;               #               &quot;&quot;              &quot;abc&quot;
w.close                  #               &quot;&quot;              &quot;abc&quot; EOF
r.readpartial(4096)      #=&gt; &quot;abc&quot;       &quot;&quot;              EOF
r.readpartial(4096)      # 例外 EOFError 発生

r, w = IO.pipe           #               buffer          pipe content
w &lt;&lt; &quot;abc\ndef\n&quot;        #               &quot;&quot;              &quot;abc\ndef\n&quot;
r.gets                   #=&gt; &quot;abc\n&quot;     &quot;def\n&quot;         &quot;&quot;
w &lt;&lt; &quot;ghi\n&quot;             #               &quot;def\n&quot;         &quot;ghi\n&quot;
r.readpartial(4096)      #=&gt; &quot;def\n&quot;     &quot;&quot;              &quot;ghi\n&quot;
r.readpartial(4096)      #=&gt; &quot;ghi\n&quot;     &quot;&quot;              &quot;&quot;
</pre>
<p>
なお、readpartial は nonblock フラグに影響されません。
つまり、nonblock フラグが設定されていて sysread であれば Errno::EAGAIN になる場合でもブロックします。
</p>
<p>
また、readpartial の挙動は sysread によく似ています。
とくに、バッファが空の場合には同じ挙動を示します。
ただし、EAGAIN および EINTR エラーは内部で発生したとしても通知されず、データが到着するまでブロックし続けます。
</p>
<dl>
<dt class='method-param'>[PARAM] maxlen:</dt>
<dd>
読み込む長さの上限を整数で指定します。
</dd>
<dt class='method-param'>[PARAM] outbuf:</dt>
<dd>
文字列で指定します。IO#readpartial は読み込んだデータを outbuf に破壊的に格納し、
返り値は outbuf となります。outbuf は一旦 maxlen 長に拡張(あるいは縮小)されたあと、
実際に読み込んだデータのサイズになります。IO が既に EOF に達していれば、空文字列になります。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] EOFError:</dt>
<dd>
IO が既に EOF に達していれば発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_REOPEN"><code>reopen(io) -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/reopen.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-reopen">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自身を指定された io に繋ぎ換えます。
</p>
<p>
クラスも io に等しくなることに注意してください。
<a href="../method/-i-o/i/pos.html">IO#pos</a>, <a href="../method/-i-o/i/lineno.html">IO#lineno</a> などは指定された io と等しくなります。
</p>
<dl>
<dt class='method-param'>[PARAM] io:</dt>
<dd>
自身を繋ぎ換えたい IO オブジェクトを指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
指定された io が close されている場合に発生します。
</dd>
</dl>
</dd>
<dt class="method-heading" id="I_REOPEN"><code>reopen(path) -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/reopen.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-reopen">rdoc</a>]</span></dt>
<dt class="method-heading"><code>reopen(path, mode) -&gt; self</code></dt>
<dd class="method-description">
<p>
path で指定されたファイルにストリームを繋ぎ換えます。
</p>
<p>
第二引数を省略したとき self のモードをそのまま引き継ぎます。
<a href="../method/-i-o/i/pos.html">IO#pos</a>, <a href="../method/-i-o/i/lineno.html">IO#lineno</a> などはリセットされます。
</p>
<dl>
<dt class='method-param'>[PARAM] path:</dt>
<dd>
パスを表す文字列を指定します。
</dd>
<dt class='method-param'>[PARAM] mode:</dt>
<dd>
パスを開く際のモードを文字列で指定します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/open.html">Kernel.#open</a>
</p>
</dd>


<dt class="method-heading" id="I_REWIND"><code>rewind -&gt; 0</code><span class="permalink">[<a href="../method/-i-o/i/rewind.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-rewind">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
ファイルポインタを先頭に移動します。<a href="../method/-i-o/i/lineno.html">IO#lineno</a> は 0 になります。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されている場合に発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;testfile&quot;)
f.readline               #=&gt; &quot;This is line one\n&quot;
f.rewind                 #=&gt; 0
f.lineno                 #=&gt; 0
f.readline               #=&gt; &quot;This is line one\n&quot;
</pre>
</dd>


<dt class="method-heading" id="I_SEEK"><code>seek(offset, whence = IO::SEEK_SET) -&gt; 0</code><span class="permalink">[<a href="../method/-i-o/i/seek.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-seek">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
ファイルポインタを whence の位置から offset だけ移動させます。
offset 位置への移動が成功すれば 0 を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] offset:</dt>
<dd>
ファイルポインタを移動させるオフセットを整数で指定します。
</dd>
<dt class='method-param'>[PARAM] whence:</dt>
<dd>
値は以下のいずれかです。
</dd>
</dl>
<ul>
<li>IO::SEEK_SET: ファイルの先頭から (デフォルト)</li>
<li>IO::SEEK_CUR: 現在のファイルポインタから</li>
<li>IO::SEEK_END: ファイルの末尾から</li>
</ul>
<dl>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
ファイルポインタの移動に失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されていた場合に発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;testfile&quot;)
f.seek(-13, IO::SEEK_END)   #=&gt; 0
f.readline                  #=&gt; &quot;And so on...\n&quot;
</pre>
<p>
[SEE_ALSO] <a href="../method/-i-o/i/sysseek.html">IO#sysseek</a>
</p>
</dd>


<dt class="method-heading" id="I_STAT"><code>stat -&gt; File::Stat</code><span class="permalink">[<a href="../method/-i-o/i/stat.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-stat">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
ファイルのステータスを含む <a href="../class/-file=3a=3a-stat.html">File::Stat</a> オブジェクトを生成して
返します。
</p>
<dl>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
ステータスの読み込みに失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されていた場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-file/i/lstat.html">File#lstat</a>, <a href="../method/-file/s/stat.html">File.stat</a>, <a href="../method/-file/s/lstat.html">File.lstat</a>
</p>
</dd>


<dt class="method-heading" id="I_SYNC"><code>sync -&gt; bool</code><span class="permalink">[<a href="../method/-i-o/i/sync.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-sync">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在の出力が同期モードならば true を返します。そうでない場合は false を返します。
</p>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されていた場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_SYNC--3D"><code>sync=(newstate)</code><span class="permalink">[<a href="../method/-i-o/i/sync=3d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-sync-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自身を同期モードに設定すると、出力関数の呼出毎にバッファがフラッシュされます。
</p>
<dl>
<dt class='method-param'>[PARAM] newstate:</dt>
<dd>
自身を同期モードに設定するかを boolean で指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
既に close されていた場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_SYSREAD"><code>sysread(maxlen, outbuf = &quot;&quot;) -&gt; String</code><span class="permalink">[<a href="../method/-i-o/i/sysread.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-sysread">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/read.html">read(2)</a> を用いて入力を行ない、入力されたデータを
含む文字列を返します。stdio を経由しないので gets や getc や eof? などと混用すると思わぬ動作
をすることがあります。
</p>
<p>
既に EOF に達していれば EOFError が発生します。ただし、maxlen に 0 が指定されている場合は、空文字列 &quot;&quot; を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] maxlen:</dt>
<dd>
入力のサイズを整数で指定します。
</dd>
<dt class='method-param'>[PARAM] outbuf:</dt>
<dd>
出力用のバッファを文字列で指定します。IO#sysread は読み込んだデータを
その文字列オブジェクトに上書きして返します。指定した文字列オブジェクト
があらかじめ maxlen 長の領域であれば、余計なメモリの割当てが行われません。
指定した文字列の長さが maxlen と異なる場合、その文字列は一旦 maxlen 長に
拡張(あるいは縮小)されたあと、実際に読み込んだデータのサイズになります。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が読み込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] EOFError:</dt>
<dd>
IO が既に EOF に達していれば発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
データの読み込みに失敗した場合に発生します。
</dd>
</dl>
<p>
第二引数を指定した sysread の呼び出しでデータが空であった場
合(sysread が例外 <a href="../class/-e-o-f-error.html">EOFError</a> を発生させる場合)、
outbuf は空文字列になります。
</p>
<pre>
outbuf = &quot;x&quot; * 20;
io = File.open(&quot;/dev/null&quot;)
p((io.sysread(10,outbuf) rescue nil))
p outbuf
=&gt; nil
   &quot;&quot;
</pre>
</dd>


<dt class="method-heading" id="I_SYSSEEK"><code>sysseek(offset, whence = IO::SEEK_SET) -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/sysseek.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-sysseek">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/lseek.html">lseek(2)</a> と同じです。<a href="../method/-i-o/i/seek.html">IO#seek</a> では、
<a href="../method/-i-o/i/sysread.html">IO#sysread</a>, <a href="../method/-i-o/i/syswrite.html">IO#syswrite</a> と併用すると正しく動作しないので代わりにこのメソッドを使います。
位置 offset への移動が成功すれば移動した位置(ファイル先頭からのオフセット)を返します。
</p>
<p>
書き込み用にバッファリングされた IO に対して実行すると警告が出ます。
</p>
<pre>
File.open(&quot;/dev/zero&quot;) {|f|
  buf = f.read(3)
  f.sysseek(0)
}
# =&gt; -:3:in `sysseek': sysseek for buffered IO (IOError)

File.open(&quot;/dev/null&quot;, &quot;w&quot;) {|f|
  f.print &quot;foo&quot;
  f.sysseek(0)
}
# =&gt; -:3: warning: sysseek for buffered IO
</pre>
<dl>
<dt class='method-param'>[PARAM] offset:</dt>
<dd>
ファイルポインタを移動させるオフセットを整数で指定します。
</dd>
<dt class='method-param'>[PARAM] whence:</dt>
<dd>
値は以下のいずれかです。
</dd>
</dl>
<ul>
<li>IO::SEEK_SET: ファイルの先頭から (デフォルト)</li>
<li>IO::SEEK_CUR: 現在のファイルポインタから</li>
<li>IO::SEEK_END: ファイルの末尾から</li>
</ul>
<dl>
<dt>[EXCEPTION] IOError:</dt>
<dd>
読み込み用にバッファリングされた IO に対して実行すると発生します。
既に close されていた場合にも発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
移動に失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-i-o/i/seek.html">IO#seek</a>
</p>
</dd>


<dt class="method-heading" id="I_SYSWRITE"><code>syswrite(string) -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/syswrite.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-syswrite">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/write.html">write(2)</a> を用いて string を出力します。
string が文字列でなければ to_s による文字列化を試みます。
実際に出力できたバイト数を返します。
</p>
<p>
stdio を経由しないので他の出力メソッドと混用すると思わぬ動作
をすることがあります。
</p>
<dl>
<dt class='method-param'>[PARAM] string:</dt>
<dd>
自身に書き込みたい文字列を指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_TO_IO"><code>to_io -&gt; self</code><span class="permalink">[<a href="../method/-i-o/i/to_io.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-to_io">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self を返します。
</p>
</dd>


<dt class="method-heading" id="I_UNGETC"><code>ungetc(char) -&gt; nil</code><span class="permalink">[<a href="../method/-i-o/i/ungetc.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-ungetc">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
指定された char を読み戻します。
2バイト以上の読み戻しは保証されません。
</p>
<dl>
<dt class='method-param'>[PARAM] char:</dt>
<dd>
読み戻したい1バイト文字に対応する <a href="../class/-fixnum.html">Fixnum</a> を指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
読み戻しに失敗した場合に発生します。また、自身が読み込み用にオープンされていない時、
自身がまだ一度も read されていない時に発生します。
</dd>
</dl>
<pre>
f = File.new(&quot;testfile&quot;)   #=&gt; #&lt;File:testfile&gt;
c = f.getc                 #=&gt; 84
f.ungetc(c)                #=&gt; nil
f.getc                     #=&gt; 84
</pre>
</dd>


<dt class="method-heading" id="I_WRITE"><code>write(str) -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/write.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-write">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IOポートに対して str を出力します。str が文字列でなけ
れば to_s による文字列化を試みます。
実際に出力できたバイト数を返します。
</p>
<p>
<a href="../method/-i-o/i/syswrite.html">IO#syswrite</a> を除く全ての出力メソッドは、最終的に
&quot;write&quot; という名のメソッドを呼び出すので、このメソッドを置き換える
ことで出力関数の挙動を変更することができます。
</p>
<dl>
<dt class='method-param'>[PARAM] str:</dt>
<dd>
自身に書き込みたい文字列を指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_WRITE_NONBLOCK"><code>write_nonblock(string) -&gt; Integer</code><span class="permalink">[<a href="../method/-i-o/i/write_nonblock.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-i-write_nonblock">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
IO をノンブロッキングモードに設定し、string を <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/write.html">write(2)</a> システムコールで書き出します。
</p>
<p>
write(2) が成功した場合、書き込んだ長さを返します。
EAGAIN, EINTR などは例外 <a href="../class/-errno=3a=3a-e-x-x-x.html">Errno::EXXX</a> として呼出元に報告されます。
書き込んだバイト数(つまり返り値)は <a href="../method/-string/i/bytesize.html">String#bytesize</a> の
値より小さい可能性があります。
</p>
<dl>
<dt class='method-param'>[PARAM] string:</dt>
<dd>
自身に書き込みたい文字列を指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
自身が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/write.html">write(2)</a> が失敗した場合に発生します。
</dd>
</dl>
</dd>


</dl>

<h2>定数</h2>
<dl>

<dt class="method-heading" id="C_-S-E-E-K_-C-U-R"><code>SEEK_CUR -&gt; Fixnum</code><span class="permalink">[<a href="../method/-i-o/c/-s-e-e-k_-c-u-r.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-SEEK_CUR">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-i-o/i/seek.html">IO#seek</a> を参照してください。
</p>
</dd>


<dt class="method-heading" id="C_-S-E-E-K_-E-N-D"><code>SEEK_END -&gt; Fixnum</code><span class="permalink">[<a href="../method/-i-o/c/-s-e-e-k_-e-n-d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-SEEK_END">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-i-o/i/seek.html">IO#seek</a> を参照してください。
</p>
</dd>


<dt class="method-heading" id="C_-S-E-E-K_-S-E-T"><code>SEEK_SET -&gt; Fixnum</code><span class="permalink">[<a href="../method/-i-o/c/-s-e-e-k_-s-e-t.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/1.8.7/IO.html#method-c-SEEK_SET">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-i-o/i/seek.html">IO#seek</a> を参照してください。
</p>
</dd>


</dl>



<div id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>
</div>
</body>
</html>
