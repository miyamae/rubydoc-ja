<!DOCTYPE html>
<html lang="ja-JP">
<head>

<meta name="robots" content="noindex">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="../syntax-highlight.css">
<link rel="icon" type="image/png" href="../rurema.png">

<title>class Enumerator::Lazy (Ruby 3.1.2 リファレンスマニュアル)</title>
<meta name="description" content="map や select などのメソッドの遅延評価版を提供するためのクラス。">
<script src="../script.js"></script>
</head>
<body>


<header>
  <nav>
    <ol class="inline-breadcrumb-list">
      <li>
        <a href="../doc/index.html">Ruby 3.1.2 リファレンスマニュアル</a>
      </li>
      <li>
        <a href="../library/index.html">ライブラリ一覧</a>
      </li>
      <li>
        <a href="../library/_builtin.html">組み込みライブラリ</a>
      </li>
      <li>
        Enumerator::Lazyクラス
      </li>
    </ol>
  </nav>

<h1>class Enumerator::Lazy</h1>
</header>

<main>



  <nav>
    クラス・モジュールの継承リスト:
    <ol class="inline-ancestors-list">
      
        <li>
          <a href="../class/-basic-object.html">BasicObject</a>
        </li>
        
      
        <li>
          <a href="../class/-kernel.html">Kernel</a>
        </li>
        
      
        <li>
          <a href="../class/-object.html">Object</a>
        </li>
        
      
        <li>
          <a href="../class/-enumerable.html">Enumerable</a>
        </li>
        
      
        <li>
          <a href="../class/-enumerator.html">Enumerator</a>
        </li>
        
      
      <li>
        Enumerator::Lazy
      </li>
    </ol>
  </nav>











<h2>要約</h2>
<p>
map や select などのメソッドの遅延評価版を提供するためのクラス。
</p>
<p>
動作は通常の Enumerator と同じですが、以下のメソッドが遅延評価を行う
(つまり、配列ではなく Enumerator を返す) ように再定義されています。
</p>
<ul>
<li>map/collect</li>
<li>flat_map/collect_concat</li>
<li>filter_map</li>
<li>select/find_all</li>
<li>reject</li>
<li>grep, grep_v</li>
<li>take, take_while</li>
<li>drop, drop_while</li>
<li>slice_before, slice_after, slice_when</li>
<li>chunk, chunk_while</li>
<li>uniq</li>
<li>compact</li>
<li>zip (※互換性のため、ブロックを渡さないケースのみlazy)</li>
</ul>
<p>
Lazyオブジェクトは、<a href="../method/-enumerable/i/lazy.html">Enumerable#lazy</a>メソッドによって生成されます。
</p>
<p>
Lazyから値を取り出すには、<a href="../method/-enumerator=3a=3a-lazy/i/force.html">Enumerator::Lazy#force</a> または
<a href="../method/-enumerable/i/first.html">Enumerable#first</a> を呼びます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="c1"># 二乗して偶数になるような整数を、小さい方から5個表示する
</span><span class="nb">p</span> <span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">select</span><span class="p">{</span><span class="o">|</span>n<span class="o">|</span> <span class="p">(</span>n<span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="p">.</span><span class="nf">even?</span><span class="p">}</span><span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># LTSV (http://ltsv.org/) 形式のログファイルから検索を行う
</span><span class="c1"># Enumerator::Lazy#map は配列ではなく Enumerator を返すため、
</span><span class="c1"># 巨大な配列を確保しようとしてメモリを使い切ったりはしない
</span><span class="nb">open</span><span class="p">(</span><span class="s2">"</span><span class="s2">log.txt</span><span class="s2">"</span><span class="p">)</span><span class="p">{</span><span class="o">|</span>f<span class="o">|</span>
  f<span class="p">.</span><span class="nf">each_line</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span>line<span class="o">|</span>
    <span class="no">Hash</span><span class="p">[</span>line<span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/\t/</span><span class="p">)</span><span class="p">.</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span>s<span class="o">|</span> s<span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/:/</span>, <span class="mi">2</span><span class="p">)</span><span class="p">}</span><span class="p">]</span>
  <span class="p">}</span><span class="p">.</span><span class="nf">select</span><span class="p">{</span><span class="o">|</span><span class="nb">hash</span><span class="o">|</span>
    <span class="nb">hash</span><span class="p">[</span><span class="s2">"</span><span class="s2">req</span><span class="s2">"</span><span class="p">]</span> <span class="o">=~</span> <span class="sr">/GET/</span> <span class="o">&amp;&amp;</span> <span class="nb">hash</span><span class="p">[</span><span class="s2">"</span><span class="s2">status</span><span class="s2">"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"</span><span class="s2">200</span><span class="s2">"</span>
  <span class="p">}</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span><span class="o">|</span><span class="nb">hash</span><span class="o">|</span>
    <span class="nb">p</span> <span class="nb">hash</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>



<h2>目次</h2>
<dl>

<dt>特異メソッド</dt>
<dd>
<ul class="class-toc">

<li><a href="#S_NEW">new</a></li>

</ul>
</dd>

<dt>インスタンスメソッド</dt>
<dd>
<ul class="class-toc">

<li><a href="#I_CHUNK">chunk</a></li>

<li><a href="#I_CHUNK_WHILE">chunk_while</a></li>

<li><a href="#I_COLLECT">collect</a></li>

<li><a href="#I_COLLECT_CONCAT">collect_concat</a></li>

<li><a href="#I_COMPACT">compact</a></li>

<li><a href="#I_DROP">drop</a></li>

<li><a href="#I_DROP_WHILE">drop_while</a></li>

<li><a href="#I_EAGER">eager</a></li>

<li><a href="#I_ENUM_FOR">enum_for</a></li>

<li><a href="#I_FILTER">filter</a></li>

<li><a href="#I_FILTER_MAP">filter_map</a></li>

<li><a href="#I_FILTER">find_all</a></li>

<li><a href="#I_COLLECT_CONCAT">flat_map</a></li>

<li><a href="#I_FORCE">force</a></li>

<li><a href="#I_GREP">grep</a></li>

<li><a href="#I_GREP_V">grep_v</a></li>

<li><a href="#I_LAZY">lazy</a></li>

<li><a href="#I_COLLECT">map</a></li>

<li><a href="#I_REJECT">reject</a></li>

<li><a href="#I_FILTER">select</a></li>

<li><a href="#I_SLICE_AFTER">slice_after</a></li>

<li><a href="#I_SLICE_BEFORE">slice_before</a></li>

<li><a href="#I_SLICE_WHEN">slice_when</a></li>

<li><a href="#I_TAKE">take</a></li>

<li><a href="#I_TAKE_WHILE">take_while</a></li>

<li><a href="#I_ENUM_FOR">to_enum</a></li>

<li><a href="#I_UNIQ">uniq</a></li>

<li><a href="#I_WITH_INDEX">with_index</a></li>

<li><a href="#I_ZIP">zip</a></li>

</ul>
</dd>

</dl>




  <h2>継承しているメソッド</h2>
<dl>
  
<dt>Enumeratorから継承しているメソッド</dt>
<dd>
  <ul class="class-toc">
    
      <li><a href="../method/-enumerator/i/=2b.html">+</a></li>
      
    
      <li><a href="../method/-enumerator/i/each.html">each</a></li>
      
    
      <li><a href="../method/-enumerator/i/feed.html">feed</a></li>
      
    
      <li><a href="../method/-enumerator/i/next.html">next</a></li>
      
    
      <li><a href="../method/-enumerator/i/next_values.html">next_values</a></li>
      
    
      <li><a href="../method/-enumerator/i/peek.html">peek</a></li>
      
    
      <li><a href="../method/-enumerator/i/peek_values.html">peek_values</a></li>
      
    
      <li><a href="../method/-enumerator/i/rewind.html">rewind</a></li>
      
    
      <li><a href="../method/-enumerator/i/size.html">size</a></li>
      
    
      <li><a href="../method/-enumerator/i/with_object.html">with_object</a></li>
      
    
  </ul>
</dd>

<dt>Enumerableから継承しているメソッド</dt>
<dd>
  <ul class="class-toc">
    
      <li><a href="../method/-enumerable/i/all=3f.html">all?</a></li>
      
    
      <li><a href="../method/-enumerable/i/any=3f.html">any?</a></li>
      
    
      <li><a href="../method/-enumerable/i/chain.html">chain</a></li>
      
    
      <li><a href="../method/-enumerable/i/count.html">count</a></li>
      
    
      <li><a href="../method/-enumerable/i/cycle.html">cycle</a></li>
      
    
      <li><a href="../method/-enumerable/i/detect.html">detect</a></li>
      
    
      <li><a href="../method/-enumerable/i/each_cons.html">each_cons</a></li>
      
    
      <li><a href="../method/-enumerable/i/each_entry.html">each_entry</a></li>
      
    
      <li><a href="../method/-enumerable/i/each_slice.html">each_slice</a></li>
      
    
      <li><a href="../method/-enumerable/i/each_with_index.html">each_with_index</a></li>
      
    
      <li><a href="../method/-enumerable/i/each_with_object.html">each_with_object</a></li>
      
    
      <li><a href="../method/-enumerable/i/entries.html">entries</a></li>
      
    
      <li><a href="../method/-enumerable/i/detect.html">find</a></li>
      
    
      <li><a href="../method/-enumerable/i/find_index.html">find_index</a></li>
      
    
      <li><a href="../method/-enumerable/i/first.html">first</a></li>
      
    
      <li><a href="../method/-enumerable/i/group_by.html">group_by</a></li>
      
    
      <li><a href="../method/-enumerable/i/include=3f.html">include?</a></li>
      
    
      <li><a href="../method/-enumerable/i/inject.html">inject</a></li>
      
    
      <li><a href="../method/-enumerable/i/max.html">max</a></li>
      
    
      <li><a href="../method/-enumerable/i/max_by.html">max_by</a></li>
      
    
      <li><a href="../method/-enumerable/i/include=3f.html">member?</a></li>
      
    
      <li><a href="../method/-enumerable/i/min.html">min</a></li>
      
    
      <li><a href="../method/-enumerable/i/min_by.html">min_by</a></li>
      
    
      <li><a href="../method/-enumerable/i/minmax.html">minmax</a></li>
      
    
      <li><a href="../method/-enumerable/i/minmax_by.html">minmax_by</a></li>
      
    
      <li><a href="../method/-enumerable/i/none=3f.html">none?</a></li>
      
    
      <li><a href="../method/-enumerable/i/one=3f.html">one?</a></li>
      
    
      <li><a href="../method/-enumerable/i/partition.html">partition</a></li>
      
    
      <li><a href="../method/-enumerable/i/inject.html">reduce</a></li>
      
    
      <li><a href="../method/-enumerable/i/reverse_each.html">reverse_each</a></li>
      
    
      <li><a href="../method/-enumerable/i/sort.html">sort</a></li>
      
    
      <li><a href="../method/-enumerable/i/sort_by.html">sort_by</a></li>
      
    
      <li><a href="../method/-enumerable/i/sum.html">sum</a></li>
      
    
      <li><a href="../method/-enumerable/i/tally.html">tally</a></li>
      
    
      <li><a href="../method/-enumerable/i/entries.html">to_a</a></li>
      
    
      <li><a href="../method/-enumerable/i/to_h.html">to_h</a></li>
      
    
  </ul>
</dd>

</dl>


<h2>特異メソッド</h2>
<dl>

<dt class="method-heading" id="S_NEW"><code>new(obj, size=nil) {|yielder, *values| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/s/new.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-c-new">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Lazy Enumerator を作成します。<a href="../method/-enumerator=3a=3a-lazy/i/force.html">Enumerator::Lazy#force</a> メソッドなどによって列挙が実行されたとき、objのeachメソッドが実行され、値が一つずつブロックに渡されます。ブロックは、yielder を使って最終的に yield される値を指定できます。
</p>
<pre class="highlight ruby">
<span class="caption">Enumerable#filter_map と、その遅延評価版を定義する例</span>
<code>
<span class="k">module</span> <span class="nn">Enumerable</span>
  <span class="k">def</span> <span class="nf">filter_map</span><span class="p">(</span><span class="o">&amp;</span>block<span class="p">)</span>
    map<span class="p">(</span><span class="o">&amp;</span>block<span class="p">)</span><span class="p">.</span><span class="nf">compact</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nn">Enumerator</span><span class="o">::</span><span class="nc">Lazy</span>
  <span class="k">def</span> <span class="nf">filter_map</span>
    <span class="no">Lazy</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nc">self</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span>yielder, <span class="o">*</span>values<span class="o">|</span>
      result <span class="o">=</span> <span class="k">yield</span> <span class="o">*</span>values
      yielder <span class="o">&lt;&lt;</span> result <span class="k">if</span> result
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">filter_map</span><span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i<span class="o">*</span>i <span class="k">if</span> i<span class="p">.</span><span class="nf">even?</span><span class="p">}</span><span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># =&gt; [4, 16, 36, 64, 100]
</span></code></pre>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
引数を指定しなかった場合、ブロックを指定しなかった場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-enumerator/s/new.html">Enumerator.new</a>
</p>
</dd>


</dl>

<h2>インスタンスメソッド</h2>
<dl>

<dt class="method-heading" id="I_CHUNK"><code>chunk {|elt| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/chunk.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-chunk">rdoc</a>]</span></dt>
<dt class="method-heading"><code>chunk(initial_state) {|elt, state| ... } -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/chunk.html">Enumerable#chunk</a> と同じですが、配列ではなく Enumerator::Lazy を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">chunk</span><span class="p">{</span> <span class="o">|</span>n<span class="o">|</span> n <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator: #&lt;Enumerator::Generator:0x007f8bf18118f0&gt;:each&gt;&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">chunk</span><span class="p">{</span> <span class="o">|</span>n<span class="o">|</span> n <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [[false, [1, 2]], [true, [3]], [false, [4, 5]], [true, [6]], [false, [7, 8]]]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/chunk.html">Enumerable#chunk</a>
</p>
</dd>


<dt class="method-heading" id="I_CHUNK_WHILE"><code>chunk_while {|elt_before, elt_after| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/chunk_while.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-chunk_while">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/chunk_while.html">Enumerable#chunk_while</a> と同じですが、Enumerator ではなく Enumerator::Lazy を返します。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
ブロックを指定しなかった場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="I_COLLECT"><code>map {|item| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/collect.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-collect">rdoc</a>]</span></dt>
<dt class="method-heading"><code>collect {|item| ... } -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/map.html">Enumerable#map</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
ブロックを指定しなかった場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">map</span><span class="p">{</span> <span class="o">|</span>n<span class="o">|</span> n <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator: 1:step&gt;&gt;:map&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">collect</span><span class="p">{</span> <span class="o">|</span>n<span class="o">|</span> n<span class="p">.</span><span class="nf">succ</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/map.html">Enumerable#map</a>
</p>
</dd>


<dt class="method-heading" id="I_COLLECT_CONCAT"><code>flat_map {|item| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/collect_concat.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-collect_concat">rdoc</a>]</span></dt>
<dt class="method-heading"><code>collect_concat {|item| ... } -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
ブロックの実行結果をひとつに繋げたものに対してイテレートするような
Enumerator::Lazy のインスタンスを返します。
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="s2">"</span><span class="s2">foo</span><span class="s2">"</span>, <span class="s2">"</span><span class="s2">bar</span><span class="s2">"</span><span class="p">]</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">flat_map</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i<span class="p">.</span><span class="nf">each_char</span><span class="p">.</span><span class="nf">lazy</span><span class="p">}</span><span class="p">.</span><span class="nf">force</span>
<span class="c1">#=&gt; [&quot;f&quot;, &quot;o&quot;, &quot;o&quot;, &quot;b&quot;, &quot;a&quot;, &quot;r&quot;]
</span></code></pre>
<p>
ブロックの返した値 x は、以下の場合にのみ分解され、連結されます。
</p>
<ul>
<li>x が配列であるか、to_ary メソッドを持つとき</li>
<li>x が each および force メソッドを持つ (例：Enumerator::Lazy) とき</li>
</ul>
<p>
それ以外のときは、x は分解されず、そのままの値として使われます。
</p>
<pre class="highlight ruby">
<code>
<span class="p">[</span><span class="p">{</span><span class="ss">a:</span><span class="mi">1</span><span class="p">}</span>, <span class="p">{</span><span class="ss">b:</span><span class="mi">2</span><span class="p">}</span><span class="p">]</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">flat_map</span> <span class="p">{</span><span class="o">|</span>i<span class="o">|</span> i<span class="p">}</span><span class="p">.</span><span class="nf">force</span>
<span class="c1">#=&gt; [{:a=&gt;1}, {:b=&gt;2}]
</span></code></pre>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
ブロックを指定しなかった場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/flat_map.html">Enumerable#flat_map</a>
</p>
</dd>


<dt class="method-heading" id="I_COMPACT"><code>compact -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/compact.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-compact">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/compact.html">Enumerable#compact</a> と同じですが、配列ではなく Enumerator::Lazy を返します。
</p>
</dd>


<dt class="method-heading" id="I_DROP"><code>drop(n) -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/drop.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-drop">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/drop.html">Enumerable#drop</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
要素数を指定します。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
n に負の数を指定した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">drop</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator: 1:step&gt;&gt;:drop(3)&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">drop</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [4, 5, 6, 7, 8, 9, 10, 11, 12, 13]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/drop.html">Enumerable#drop</a>
</p>
</dd>


<dt class="method-heading" id="I_DROP_WHILE"><code>drop_while {|item| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/drop_while.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-drop_while">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/drop_while.html">Enumerable#drop_while</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">drop_while</span> <span class="p">{</span> <span class="o">|</span>i<span class="o">|</span> i <span class="o">&lt;</span> <span class="mi">42</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator: 1:step&gt;&gt;:drop_while&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">drop_while</span> <span class="p">{</span> <span class="o">|</span>i<span class="o">|</span> i <span class="o">&lt;</span> <span class="mi">42</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [42, 43, 44, 45, 46, 47, 48, 49, 50, 51]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/drop_while.html">Enumerable#drop_while</a>
</p>
</dd>


<dt class="method-heading" id="I_EAGER"><code>eager -&gt; Enumerator</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/eager.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-eager">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自身を遅延評価しない Enumerator に変換して返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
lazy_enum <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="p">)</span><span class="p">.</span><span class="nf">each</span><span class="p">.</span><span class="nf">lazy</span>

<span class="c1"># select が遅延評価されるので終了する
</span><span class="nb">p</span> lazy_enum<span class="p">.</span><span class="nf">class</span> <span class="c1"># =&gt; Enumerator::Lazy
</span><span class="nb">p</span> lazy_enum<span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span>n<span class="o">|</span> n<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span><span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># =&gt; [2, 4, 6, 8, 10]
</span>
<span class="c1"># select が遅延評価されないので終了しない
</span>enum <span class="o">=</span> lazy_enum<span class="p">.</span><span class="nf">eager</span>
<span class="nb">p</span> enum<span class="p">.</span><span class="nf">class</span> <span class="c1"># =&gt; Enumerator
</span><span class="nb">p</span> enum<span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span>n<span class="o">|</span> n<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span><span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre>
</dd>


<dt class="method-heading" id="I_ENUM_FOR"><code>to_enum(method = :each, *args) -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/enum_for.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-enum_for">rdoc</a>]</span></dt>
<dt class="method-heading"><code>enum_for(method = :each, *args) -&gt; Enumerator::Lazy</code></dt>
<dt class="method-heading"><code>to_enum(method = :each, *args) {|*args| block} -&gt; Enumerator::Lazy</code></dt>
<dt class="method-heading"><code>enum_for(method = :each, *args) {|*args| block} -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
<a href="../method/-object/i/to_enum.html">Object#to_enum</a> と同じですが、Enumerator::Lazy を返します。
</p>
<p>
to_enum は「ブロック付きで呼ぶとループを実行し、ブロックを省略した場合は
Enumerator を返す」ようなメソッドを定義するときによく使われます。このときに lazy 性が正しく引き継がれるように、Lazy#to_enum は素のEnumerator ではなく Enumerator::Lazy を返すようになっています。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="k">module</span> <span class="nn">Enumerable</span>
  <span class="c1"># 要素をn回ずつ繰り返すメソッド
</span>  <span class="c1"># 例：[1,2,3].repeat(2)  #=&gt; [1,1,2,2,3,3]
</span>  <span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span>n<span class="p">)</span>
    <span class="nb">raise</span> <span class="no">ArgumentError</span> <span class="k">if</span> n <span class="o">&lt;</span> <span class="mi">0</span>
    <span class="k">if</span> block_given?
      each <span class="k">do</span> <span class="o">|</span><span class="o">*</span>val<span class="o">|</span>
        n<span class="p">.</span><span class="nf">times</span> <span class="p">{</span> <span class="k">yield</span> <span class="o">*</span>val <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">else</span>
      to_enum<span class="p">(</span><span class="ss">:repeat</span>, n<span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

r <span class="o">=</span> <span class="mi">1</span><span class="o">..</span><span class="mi">10</span>
<span class="nb">p</span> r<span class="p">.</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span>n<span class="o">|</span> n<span class="o">**</span><span class="mi">2</span><span class="p">}</span><span class="p">.</span><span class="nf">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">#=&gt; [1, 1, 4, 4, 9]
</span>
r <span class="o">=</span> <span class="mi">1</span><span class="o">..</span><span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span>
<span class="nb">p</span> r<span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span>n<span class="o">|</span> n<span class="o">**</span><span class="mi">2</span><span class="p">}</span><span class="p">.</span><span class="nf">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">#=&gt; [1, 1, 4, 4, 9]
</span>
<span class="c1"># Lazy#to_enum のおかげで、repeat の返り値は
</span><span class="c1"># もとが Enumerator のときは Enumerator に、
</span><span class="c1"># もとが Lazy のときは Lazy になる
</span></code></pre>
</dd>


<dt class="method-heading" id="I_FILTER"><code>select {|item| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/filter.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-filter">rdoc</a>]</span></dt>
<dt class="method-heading"><code>find_all {|item| ... } -&gt; Enumerator::Lazy</code></dt>
<dt class="method-heading"><code>filter {|item| ... } -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/select.html">Enumerable#select</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
ブロックを指定しなかった場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">find_all</span> <span class="p">{</span> <span class="o">|</span>i<span class="o">|</span> i<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator: 1:step&gt;&gt;:find_all&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span>i<span class="o">|</span> i<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/select.html">Enumerable#select</a>
</p>
</dd>


<dt class="method-heading" id="I_FILTER_MAP"><code>filter_map {|item| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/filter_map.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-filter_map">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/filter_map.html">Enumerable#filter_map</a> と同じですが、配列ではなく Enumerator::Lazy を返します。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
ブロックを指定しなかった場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">filter_map</span> <span class="p">{</span> <span class="o">|</span>n<span class="o">|</span> n <span class="o">*</span> <span class="mi">2</span> <span class="k">if</span> n<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: (1.step)&gt;:filter_map&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">filter_map</span> <span class="p">{</span> <span class="o">|</span>n<span class="o">|</span> n <span class="o">*</span> <span class="mi">2</span> <span class="k">if</span> n<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [4, 8, 12, 16, 20, 24, 28, 32, 36, 40]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/filter_map.html">Enumerable#filter_map</a>
</p>
</dd>


<dt class="method-heading" id="I_FORCE"><code>force(*args) -&gt; [object]</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/force.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-force">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
全ての要素を含む配列を返します。Lazy から実際に値を取り出すのに使います。
</p>
<p>
<a href="../method/-enumerable/i/to_a.html">Enumerable#to_a</a> のエイリアスです。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">to_a</span>
<span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
</span></code></pre>
</dd>


<dt class="method-heading" id="I_GREP"><code>grep(pattern) {|item| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/grep.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-grep">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/grep.html">Enumerable#grep</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">100</span><span class="o">..</span><span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span><span class="p">)</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span><span class="p">.</span><span class="nf">grep</span><span class="p">(</span><span class="sr">/\A(\d)\1+\z/</span><span class="p">)</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: 100..Infinity&gt;:map&gt;:grep(/\A(\d)\1+\z/)&gt;
</span><span class="p">(</span><span class="mi">100</span><span class="o">..</span><span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span><span class="p">)</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span><span class="p">.</span><span class="nf">grep</span><span class="p">(</span><span class="sr">/\A(\d)\1+\z/</span><span class="p">)</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [&quot;111&quot;, &quot;222&quot;, &quot;333&quot;, &quot;444&quot;, &quot;555&quot;, &quot;666&quot;, &quot;777&quot;, &quot;888&quot;, &quot;999&quot;, &quot;1111&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/grep.html">Enumerable#grep</a>, <a href="../method/-enumerable/i/grep_v.html">Enumerable#grep_v</a>, <a href="../method/-enumerator=3a=3a-lazy/i/grep_v.html">Enumerator::Lazy#grep_v</a>
</p>
</dd>


<dt class="method-heading" id="I_GREP_V"><code>grep_v(pattern) {|item| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/grep_v.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-grep_v">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/grep_v.html">Enumerable#grep_v</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="p">(</span><span class="mi">100</span><span class="o">..</span><span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span><span class="p">)</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span><span class="p">.</span><span class="nf">grep_v</span><span class="p">(</span><span class="sr">/(\d).*\1/</span><span class="p">)</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: 100..Infinity&gt;:map&gt;:grep_v(/(\d).*\1/)&gt;
</span><span class="p">(</span><span class="mi">100</span><span class="o">..</span><span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span><span class="p">)</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span><span class="p">.</span><span class="nf">grep_v</span><span class="p">(</span><span class="sr">/(\d).*\1/</span><span class="p">)</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [&quot;102&quot;, &quot;103&quot;, &quot;104&quot;, &quot;105&quot;, &quot;106&quot;, &quot;107&quot;, &quot;108&quot;, &quot;109&quot;, &quot;120&quot;, &quot;123&quot;, &quot;124&quot;, &quot;125&quot;, &quot;126&quot;, &quot;127&quot;, &quot;128&quot;]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/grep_v.html">Enumerable#grep_v</a>, <a href="../method/-enumerable/i/grep.html">Enumerable#grep</a>, <a href="../method/-enumerator=3a=3a-lazy/i/grep.html">Enumerator::Lazy#grep</a>
</p>
</dd>


<dt class="method-heading" id="I_LAZY"><code>lazy -&gt; self</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/lazy.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-lazy">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
self を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
lazy <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="o">..</span><span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span><span class="p">)</span><span class="p">.</span><span class="nf">lazy</span>
<span class="nb">p</span> lazy<span class="p">.</span><span class="nf">lazy</span>         <span class="c1"># =&gt; #&lt;Enumerator::Lazy: 100..Infinity&gt;
</span><span class="nb">p</span> lazy <span class="o">==</span> lazy<span class="p">.</span><span class="nf">lazy</span> <span class="c1"># =&gt; true
</span></code></pre>
</dd>


<dt class="method-heading" id="I_REJECT"><code>reject {|item| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/reject.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-reject">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/reject.html">Enumerable#reject</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
ブロックを指定しなかった場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">reject</span> <span class="p">{</span> <span class="o">|</span>i<span class="o">|</span> i<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator: 1:step&gt;&gt;:reject&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">reject</span> <span class="p">{</span> <span class="o">|</span>i<span class="o">|</span> i<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/reject.html">Enumerable#reject</a>
</p>
</dd>


<dt class="method-heading" id="I_SLICE_AFTER"><code>slice_after(pattern) -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/slice_after.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-slice_after">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice_after {|elt| bool } -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/slice_after.html">Enumerable#slice_after</a> と同じですが、配列ではなく Enumerator::Lazy を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">slice_after</span> <span class="p">{</span> <span class="o">|</span>e<span class="o">|</span> e <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator: #&lt;Enumerator::Generator:0x007fd73980e6f8&gt;:each&gt;&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">slice_after</span> <span class="p">{</span> <span class="o">|</span>e<span class="o">|</span> e <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12], [13, 14, 15]]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/slice_after.html">Enumerable#slice_after</a>
</p>
</dd>


<dt class="method-heading" id="I_SLICE_BEFORE"><code>slice_before(pattern) -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/slice_before.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-slice_before">rdoc</a>]</span></dt>
<dt class="method-heading"><code>slice_before {|elt| bool } -&gt; Enumerator::Lazy</code></dt>
<dt class="method-heading"><code>slice_before(initial_state) {|elt, state| bool } -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/slice_before.html">Enumerable#slice_before</a> と同じですが、配列ではなく Enumerator::Lazy を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">slice_before</span> <span class="p">{</span> <span class="o">|</span>e<span class="o">|</span> e<span class="p">.</span><span class="nf">even?</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator: #&lt;Enumerator::Generator:0x00007f9f31844ce8&gt;:each&gt;&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">slice_before</span> <span class="p">{</span> <span class="o">|</span>e<span class="o">|</span> e <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [[1, 2], [3, 4, 5], [6, 7, 8], [9, 10, 11], [12, 13, 14]]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/slice_before.html">Enumerable#slice_before</a>
</p>
</dd>


<dt class="method-heading" id="I_SLICE_WHEN"><code>slice_when {|elt_before, elt_after| bool } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/slice_when.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-slice_when">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/slice_when.html">Enumerable#slice_when</a> と同じですが、配列ではなく Enumerator::Lazy を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">slice_when</span> <span class="p">{</span> <span class="o">|</span>i, j<span class="o">|</span> <span class="p">(</span>i <span class="o">+</span> j<span class="p">)</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator: #&lt;Enumerator::Generator:0x00007fce84118348&gt;:each&gt;&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">slice_when</span> <span class="p">{</span> <span class="o">|</span>i, j<span class="o">|</span> <span class="p">(</span>i <span class="o">+</span> j<span class="p">)</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [[1, 2], [3, 4, 5, 6, 7], [8, 9, 10, 11, 12], [13, 14, 15, 16, 17], [18, 19, 20, 21, 22]]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/slice_when.html">Enumerable#slice_when</a>
</p>
</dd>


<dt class="method-heading" id="I_TAKE"><code>take(n) -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/take.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-take">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/take.html">Enumerable#take</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<p>
n が大きな数 (100000とか) の場合に備えて再定義されています。配列が必要な場合は <a href="../method/-enumerable/i/first.html">Enumerable#first</a> を使って下さい。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
要素数を指定します。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
n に負の数を指定した場合に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator: 1:step&gt;&gt;:take(5)&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; [1, 2, 3, 4, 5]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/take.html">Enumerable#take</a>
</p>
</dd>


<dt class="method-heading" id="I_TAKE_WHILE"><code>take_while -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/take_while.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-take_while">rdoc</a>]</span></dt>
<dt class="method-heading"><code>take_while {|item| ... } -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/take_while.html">Enumerable#take_while</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="p">(</span><span class="s1">'a'</span><span class="o">..</span><span class="s1">'z'</span><span class="p">)</span><span class="p">.</span><span class="nf">cycle</span><span class="p">)</span><span class="p">.</span><span class="nf">take_while</span> <span class="p">{</span> <span class="o">|</span>e<span class="o">|</span> e<span class="p">.</span><span class="nf">first</span> <span class="o">&lt;</span> <span class="mi">100_000</span> <span class="p">}</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator: 1:step&gt;&gt;:zip(#&lt;Enumerator: &quot;a&quot;..&quot;z&quot;:cycle&gt;)&gt;:take_while&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="p">(</span><span class="s1">'a'</span><span class="o">..</span><span class="s1">'z'</span><span class="p">)</span><span class="p">.</span><span class="nf">cycle</span><span class="p">)</span><span class="p">.</span><span class="nf">take_while</span> <span class="p">{</span> <span class="o">|</span>e<span class="o">|</span> e<span class="p">.</span><span class="nf">first</span> <span class="o">&lt;</span> <span class="mi">100_000</span> <span class="p">}</span><span class="p">.</span><span class="nf">force</span><span class="p">.</span><span class="nf">last</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># =&gt; [[99995, &quot;y&quot;], [99996, &quot;z&quot;], [99997, &quot;a&quot;], [99998, &quot;b&quot;], [99999, &quot;c&quot;]]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/take_while.html">Enumerable#take_while</a>
</p>
</dd>


<dt class="method-heading" id="I_UNIQ"><code>uniq -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/uniq.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-uniq">rdoc</a>]</span></dt>
<dt class="method-heading"><code>uniq {|item| ... } -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/uniq.html">Enumerable#uniq</a> と同じですが、配列ではなく Enumerator::Lazy を返します。
</p>
</dd>


<dt class="method-heading" id="I_WITH_INDEX"><code>with_index(offset = 0) {|(*args), idx| ... } -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/with_index.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-with_index">rdoc</a>]</span></dt>
<dt class="method-heading"><code>with_index(offset = 0) -&gt; Enumerator::Lazy</code></dt>
<dd class="method-description">
<p>
生成時のパラメータに従って、要素にインデックスを添えて繰り返します。インデックスは offset から始まります。
</p>
<p>
ブロックを指定した場合の戻り値は生成時に指定したレシーバ自身です。
</p>
<pre class="highlight ruby">
<code>
<span class="p">(</span><span class="s2">"</span><span class="s2">a</span><span class="s2">"</span><span class="o">..</span><span class="p">)</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">with_index</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span>it, index<span class="o">|</span> <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">index</span><span class="si">}</span><span class="s2">:</span><span class="si">#{</span><span class="n">it</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span>
<span class="c1"># =&gt; 1:a
</span><span class="c1">#    2:b
</span><span class="c1">#    3:c
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerator/i/with_index.html">Enumerator#with_index</a>
</p>
</dd>


<dt class="method-heading" id="I_ZIP"><code>zip(*lists) -&gt; Enumerator::Lazy</code><span class="permalink">[<a href="../method/-enumerator=3a=3a-lazy/i/zip.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/Enumerator/Lazy.html#method-i-zip">rdoc</a>]</span></dt>
<dt class="method-heading"><code>zip(*lists) {|v1, v2, ...| ... } -&gt; nil</code></dt>
<dd class="method-description">
<p>
<a href="../method/-enumerable/i/zip.html">Enumerable#zip</a> と同じですが、配列ではなくEnumerator::Lazy を返します。
</p>
<p>
ただし一貫性のため、ブロック付きで呼び出した場合は Enumerable#zip と同じ挙動になります。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="p">(</span><span class="s1">'a'</span><span class="o">..</span><span class="s1">'z'</span><span class="p">)</span><span class="p">.</span><span class="nf">cycle</span><span class="p">)</span>
<span class="c1"># =&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator::Lazy: #&lt;Enumerator: 1:step&gt;&gt;:zip(#&lt;Enumerator: &quot;a&quot;..&quot;z&quot;:cycle&gt;)&gt;
</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">step</span><span class="p">.</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="p">(</span><span class="s1">'a'</span><span class="o">..</span><span class="s1">'z'</span><span class="p">)</span><span class="p">.</span><span class="nf">cycle</span><span class="p">)</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="p">.</span><span class="nf">force</span><span class="p">.</span><span class="nf">last</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="c1"># =&gt; [[25, &quot;y&quot;], [26, &quot;z&quot;], [27, &quot;a&quot;], [28, &quot;b&quot;], [29, &quot;c&quot;], [30, &quot;d&quot;]]
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-enumerable/i/zip.html">Enumerable#zip</a>
</p>
</dd>


</dl>

</main>

<footer id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>

  <a href="https://github.com/rurema/doctree/issues/new" id="feedback-link">フィードバックを送る</a>
  
  <script>if (window.URLSearchParams) { document.getElementById("feedback-link").search = new URLSearchParams({'body': document.location}); }</script>
</footer>
</body>
</html>
