<!DOCTYPE html>
<html lang="ja-JP">
<head>

<meta name="robots" content="noindex">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="../syntax-highlight.css">
<link rel="icon" type="image/png" href="../rurema.png">

<title>class StringScanner (Ruby 3.1.2 リファレンスマニュアル)</title>
<meta name="description" content="StringScanner は文字列スキャナクラスです。
簡単に高速なスキャナを記述できます。">
<script src="../script.js"></script>
</head>
<body>


<header>
  <nav>
    <ol class="inline-breadcrumb-list">
      <li>
        <a href="../doc/index.html">Ruby 3.1.2 リファレンスマニュアル</a>
      </li>
      <li>
        <a href="../library/index.html">ライブラリ一覧</a>
      </li>
      <li>
        <a href="../library/strscan.html">strscanライブラリ</a>
      </li>
      <li>
        StringScannerクラス
      </li>
    </ol>
  </nav>

<h1>class StringScanner</h1>
</header>

<main>



  <nav>
    クラス・モジュールの継承リスト:
    <ol class="inline-ancestors-list">
      
        <li>
          <a href="../class/-basic-object.html">BasicObject</a>
        </li>
        
      
        <li>
          <a href="../class/-kernel.html">Kernel</a>
        </li>
        
      
        <li>
          <a href="../class/-object.html">Object</a>
        </li>
        
      
      <li>
        StringScanner
      </li>
    </ol>
  </nav>











<h2>要約</h2>
<p>
StringScanner は文字列スキャナクラスです。簡単に高速なスキャナを記述できます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'This is an example string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">eos?</span>            <span class="c1">#=&gt; false
</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;This&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot; &quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;is&quot;
</span>s<span class="p">.</span><span class="nf">eos?</span>            <span class="c1">#=&gt; false
</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot; &quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;an&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot; &quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;example&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot; &quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;string&quot;
</span>s<span class="p">.</span><span class="nf">eos?</span>            <span class="c1">#=&gt; true
</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span></code></pre>
<p>
StringScanner オブジェクトはスキャンする文字列と「スキャンポインタ」のセットです。スキャンポインタとはスキャンしおわったところを示すインデックスのことです。オブジェクト作成直後にはスキャンポインタは文字列先頭にあり、その地点でのみマッチを試します。マッチしたらその後ろにポインタを進めます。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

<span class="c1">## a string and a scan pointer   (&quot;_&quot; = scan pointer)
</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'This is an example string'</span><span class="p">)</span>
<span class="c1"># _This is an example string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
<span class="c1"># This_ is an example string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>
<span class="c1"># This _is an example string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
<span class="c1"># This is_ an example string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>
<span class="c1"># This is _an example string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
<span class="c1"># This is an_ example string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>
<span class="c1"># This is an _example string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
<span class="c1"># This is an example_ string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>
<span class="c1"># This is an example _string     s.eos? = false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
<span class="c1"># This is an example string_     s.eos? = true
</span></code></pre>
<p>
現在のスキャンポインタがさす地点以外でもマッチしたい場合は、<a href="../method/-string-scanner/i/scan_until.html">StringScanner#scan_until</a>などを使ってください。
</p>
<pre class="highlight ruby">
<span class="caption">例: scan, scan_until の動作の違い</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

<span class="k">def</span> <span class="nf">case1</span>
  s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/t/</span><span class="p">)</span>       <span class="c1">#=&gt; &quot;t&quot;
</span>  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>     <span class="c1">#=&gt; &quot;est&quot;
</span>  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/string/</span><span class="p">)</span>  <span class="c1">#=&gt; nil
</span>  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>     <span class="c1">#=&gt; &quot; &quot;
</span>  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/string/</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;string&quot;
</span><span class="k">end</span>

<span class="k">def</span> <span class="nf">case2</span>
  s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_until</span><span class="p">(</span><span class="sr">/t/</span><span class="p">)</span>       <span class="c1">#=&gt; &quot;t&quot;
</span>  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_until</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>     <span class="c1">#=&gt; &quot;est&quot;
</span>  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_until</span><span class="p">(</span><span class="sr">/string/</span><span class="p">)</span>  <span class="c1">#=&gt; &quot; string&quot;
</span>  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_until</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>     <span class="c1">#=&gt; nil
</span>  <span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_until</span><span class="p">(</span><span class="sr">/string/</span><span class="p">)</span>  <span class="c1">#=&gt; nil
</span><span class="k">end</span>

<span class="nb">p</span> <span class="s2">"</span><span class="s2">case1</span><span class="s2">"</span>
case1
<span class="nb">p</span> <span class="s2">"</span><span class="s2">case2</span><span class="s2">"</span>
case2
</code></pre>
<p>
スキャンポインタの位置は文字単位でなくバイト単位となります。
</p>
<pre class="highlight ruby">
<span class="caption">例:</span>
<code>
<span class="c1"># 次の行以降の内容を EUC-JP として保存して試してください
</span><span class="c1"># vim:set fileencoding=euc-jp:
</span><span class="nb">require</span> <span class="s1">'strscan'</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">るびい</span><span class="s2">"</span><span class="p">)</span> <span class="c1"># 文字コードはEUC-JPとします
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">exist?</span><span class="p">(</span><span class="sr">/び/</span><span class="p">)</span> <span class="c1">#=&gt; 4
</span></code></pre>
<p>
StringScanner は $~ $&amp; $1 $2 …… などの正規表現関連変数をセットしません。代わりに <a href="../method/-string-scanner/i/=5b=5d.html">StringScanner#[]</a>, <a href="../method/-string-scanner/i/matched=3f.html">StringScanner#matched?</a> などのマッチデータ関連メソッドを使ってください。
</p>



<h2>目次</h2>
<dl>

<dt>特異メソッド</dt>
<dd>
<ul class="class-toc">

<li><a href="#S_MUST_-C_VERSION">must_C_version</a></li>

<li><a href="#S_NEW">new</a></li>

</ul>
</dd>

<dt>インスタンスメソッド</dt>
<dd>
<ul class="class-toc">

<li><a href="#I_--3C--3C">&lt;&lt;</a></li>

<li><a href="#I_--5B--5D">[]</a></li>

<li><a href="#I_BEGINNING_OF_LINE--3F">beginning_of_line?</a></li>

<li><a href="#I_BEGINNING_OF_LINE--3F">bol?</a></li>

<li><a href="#I_CHARPOS">charpos</a></li>

<li><a href="#I_CHECK">check</a></li>

<li><a href="#I_CHECK_UNTIL">check_until</a></li>

<li><a href="#I_CLEAR">clear</a></li>

<li><a href="#I_--3C--3C">concat</a></li>

<li><a href="#I_EMPTY--3F">empty?</a></li>

<li><a href="#I_EMPTY--3F">eos?</a></li>

<li><a href="#I_EXIST--3F">exist?</a></li>

<li><a href="#I_GET_BYTE">get_byte</a></li>

<li><a href="#I_GET_BYTE">getbyte</a></li>

<li><a href="#I_GETCH">getch</a></li>

<li><a href="#I_INSPECT">inspect</a></li>

<li><a href="#I_MATCH--3F">match?</a></li>

<li><a href="#I_MATCHED">matched</a></li>

<li><a href="#I_MATCHED--3F">matched?</a></li>

<li><a href="#I_MATCHED_SIZE">matched_size</a></li>

<li><a href="#I_MATCHEDSIZE">matchedsize</a></li>

<li><a href="#I_PEEK">peek</a></li>

<li><a href="#I_PEEK">peep</a></li>

<li><a href="#I_POINTER">pointer</a></li>

<li><a href="#I_POINTER--3D">pointer=</a></li>

<li><a href="#I_POINTER">pos</a></li>

<li><a href="#I_POINTER--3D">pos=</a></li>

<li><a href="#I_POST_MATCH">post_match</a></li>

<li><a href="#I_PRE_MATCH">pre_match</a></li>

<li><a href="#I_RESET">reset</a></li>

<li><a href="#I_REST">rest</a></li>

<li><a href="#I_REST--3F">rest?</a></li>

<li><a href="#I_REST_SIZE">rest_size</a></li>

<li><a href="#I_REST_SIZE">restsize</a></li>

<li><a href="#I_SCAN">scan</a></li>

<li><a href="#I_SCAN_FULL">scan_full</a></li>

<li><a href="#I_SCAN_UNTIL">scan_until</a></li>

<li><a href="#I_SEARCH_FULL">search_full</a></li>

<li><a href="#I_SKIP">skip</a></li>

<li><a href="#I_SKIP_UNTIL">skip_until</a></li>

<li><a href="#I_STRING">string</a></li>

<li><a href="#I_STRING--3D">string=</a></li>

<li><a href="#I_CLEAR">terminate</a></li>

<li><a href="#I_UNSCAN">unscan</a></li>

</ul>
</dd>

<dt>定数</dt>
<dd>
<ul class="class-toc">

<li><a href="#C_-ID">Id</a></li>

<li><a href="#C_-VERSION">Version</a></li>

</ul>
</dd>

</dl>




</dl>


<h2>特異メソッド</h2>
<dl>

<dt class="method-heading" id="S_MUST_-C_VERSION"><code>must_C_version -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/s/must_-c_version.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-c-must_C_version">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
このメソッドは後方互換性のために定義されています。
</p>
</dd>


<dt class="method-heading" id="S_NEW"><code>new(str, dup = false) -&gt; StringScanner</code><span class="permalink">[<a href="../method/-string-scanner/s/new.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-c-new">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
新しい StringScanner オブジェクトを生成します。
</p>
<dl>
<dt class='method-param'>[PARAM] str:</dt>
<dd>
スキャン対象の文字列を指定します。
</dd>
<dt class='method-param'>[PARAM] dup:</dt>
<dd>
dup は単に無視します。引数の文字列は複製も freeze もされず、そのまま使います。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'This is an example string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">eos?</span>            <span class="c1">#=&gt; false
</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;This&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot; &quot;
</span></code></pre>
</dd>


</dl>

<h2>インスタンスメソッド</h2>
<dl>

<dt class="method-heading" id="I_--3C--3C"><code>self &lt;&lt; str -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/i/=3c=3c.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-3C-3C">rdoc</a>]</span></dt>
<dt class="method-heading"><code>concat(str) -&gt; self</code></dt>
<dd class="method-description">
<p>
操作対象の文字列に対し str を破壊的に連結します。マッチ記録は変更されません。
</p>
<p>
selfを返します。
</p>
<dl>
<dt class='method-param'>[PARAM] str:</dt>
<dd>
操作対象の文字列に対し str を破壊的に連結します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span> <span class="c1"># =&gt; #&lt;StringScanner 0/4 @ &quot;test&quot;&gt;
</span>s<span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sr">/\w(\w*)/</span><span class="p">)</span>            <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>                          <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">[</span><span class="mi">1</span><span class="p">]</span>                          <span class="c1"># =&gt; &quot;est&quot;
</span>s <span class="o">&lt;&lt;</span> <span class="s1">' string'</span>                <span class="c1"># =&gt; #&lt;StringScanner 4/11 &quot;test&quot; @ &quot; stri...&quot;&gt;
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>                          <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">[</span><span class="mi">1</span><span class="p">]</span>                          <span class="c1"># =&gt; &quot;est&quot;
</span>s<span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>                <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>                <span class="c1"># =&gt; &quot;string&quot;
</span></code></pre>
<p>
この操作は StringScanner.new に渡した文字列にも影響することがあります。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

str <span class="o">=</span> <span class="s1">'test'</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>str<span class="p">)</span> <span class="c1"># =&gt; #&lt;StringScanner 0/4 @ &quot;test&quot;&gt;
</span>s <span class="o">&lt;&lt;</span> <span class="s1">' string'</span>             <span class="c1"># =&gt; #&lt;StringScanner 0/11 @ &quot;test ...&quot;&gt;
</span>str                        <span class="c1"># =&gt; &quot;test string&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_--5B--5D"><code>self[nth] -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/=5b=5d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-5B-5D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチした正規表現の nth 番目のかっこに対応する部分文字列を返します。インデックス 0 はマッチした部分全体です。前回のマッチが失敗していると常に nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] nth:</dt>
<dd>
前回マッチした正規表現の nth 番目のかっこに対応する部分文字列を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w(\w)(\w*)/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>                  <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">[</span><span class="mi">1</span><span class="p">]</span>                  <span class="c1"># =&gt; &quot;e&quot;
</span>s<span class="p">[</span><span class="mi">2</span><span class="p">]</span>                  <span class="c1"># =&gt; &quot;st&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>         <span class="c1"># =&gt; nil
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>                  <span class="c1"># =&gt; nil
</span>s<span class="p">[</span><span class="mi">1</span><span class="p">]</span>                  <span class="c1"># =&gt; nil
</span>s<span class="p">[</span><span class="mi">2</span><span class="p">]</span>                  <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>         <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>                  <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">[</span><span class="mi">1</span><span class="p">]</span>                  <span class="c1"># =&gt; nil
</span>s<span class="p">[</span><span class="mi">2</span><span class="p">]</span>                  <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w(\w)(\w*)/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;string&quot;
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>                  <span class="c1"># =&gt; &quot;string&quot;
</span>s<span class="p">[</span><span class="mi">1</span><span class="p">]</span>                  <span class="c1"># =&gt; &quot;t&quot;
</span>s<span class="p">[</span><span class="mi">2</span><span class="p">]</span>                  <span class="c1"># =&gt; &quot;ring&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_BEGINNING_OF_LINE--3F"><code>beginning_of_line? -&gt; bool</code><span class="permalink">[<a href="../method/-string-scanner/i/beginning_of_line=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-beginning_of_line-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>bol? -&gt; bool</code></dt>
<dd class="method-description">
<p>
スキャンポインタが行頭を指しているなら true を、行頭以外を指しているなら false を返します。
</p>
<p>
行頭の定義は、文字列先頭かまたは \n の直後を指していることです。文字列末尾は必ずしも行頭ではありません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">test\nstring</span><span class="s2">"</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">bol?</span>        <span class="c1"># =&gt; true
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">bol?</span>        <span class="c1"># =&gt; false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\n/</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">bol?</span>        <span class="c1"># =&gt; true
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">bol?</span>        <span class="c1"># =&gt; false
</span></code></pre>
</dd>


<dt class="method-heading" id="I_CHARPOS"><code>charpos -&gt; Integer</code><span class="permalink">[<a href="../method/-string-scanner/i/charpos.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-charpos">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスキャンポインタのインデックスを文字単位で返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"</span><span class="s2">abcädeföghi</span><span class="s2">"</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">charpos</span>           <span class="c1"># =&gt; 0
</span>s<span class="p">.</span><span class="nf">scan_until</span><span class="p">(</span><span class="sr">/ä/</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;abcä&quot;
</span>s<span class="p">.</span><span class="nf">pos</span>               <span class="c1"># =&gt; 5
</span>s<span class="p">.</span><span class="nf">charpos</span>           <span class="c1"># =&gt; 4
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/pos.html">StringScanner#pos</a>
</p>
</dd>


<dt class="method-heading" id="I_CHECK"><code>check(regexp) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/check.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-check">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在位置から regexp とのマッチを試みます。マッチに成功したらマッチした部分文字列を返します。マッチに失敗したら nil を返します。
</p>
<p>
このメソッドはマッチが成功してもスキャンポインタを進めません。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">check</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">pos</span>          <span class="c1"># =&gt; 0
</span>s<span class="p">.</span><span class="nf">matched</span>      <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">check</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">matched</span>      <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_CHECK_UNTIL"><code>check_until(regexp) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/check_until.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-check_until">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp が一致するまで文字列をスキャンします。マッチに成功したらスキャン開始位置からマッチ部分の末尾までの部分文字列を返します。マッチに失敗したら nil を返します。
</p>
<p>
このメソッドはマッチが成功してもスキャンポインタを進めません。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">check_until</span><span class="p">(</span><span class="sr">/str/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test str&quot;
</span>s<span class="p">.</span><span class="nf">matched</span>            <span class="c1"># =&gt; &quot;str&quot;
</span>s<span class="p">.</span><span class="nf">pos</span>                <span class="c1"># =&gt; 0
</span>s<span class="p">.</span><span class="nf">pre_match</span>          <span class="c1"># =&gt; &quot;test &quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_CLEAR"><code>terminate -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/i/clear.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-clear">rdoc</a>]</span></dt>
<dt class="method-heading"><code>clear -&gt; self</code></dt>
<dd class="method-description">
<p>
スキャンポインタを文字列末尾後まで進め、マッチ記録を捨てます。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
self を返します。
</dd>
</dl>
<p>
pos = self.string.size と同じ動作です。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">matched</span>     <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">pos</span>         <span class="c1"># =&gt; 4
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>          <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">terminate</span>
s<span class="p">.</span><span class="nf">matched</span>     <span class="c1"># =&gt; nil
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>          <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">pos</span>         <span class="c1"># =&gt; 11
</span></code></pre>
<p>
<a href="../method/-string-scanner/i/clear.html">StringScanner#clear</a> は将来のバージョンで削除される予定です。代わりに <a href="../method/-string-scanner/i/terminate.html">StringScanner#terminate</a> を使ってください。
</p>
</dd>


<dt class="method-heading" id="I_EMPTY--3F"><code>eos? -&gt; bool</code><span class="permalink">[<a href="../method/-string-scanner/i/empty=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-empty-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>empty? -&gt; bool</code></dt>
<dd class="method-description">
<p>
スキャンポインタが文字列の末尾を指しているなら true を、末尾以外を指しているなら false を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">eos?</span>        <span class="c1"># =&gt; false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">eos?</span>        <span class="c1"># =&gt; true
</span></code></pre>
<p>
<a href="../method/-string-scanner/i/empty=3f.html">StringScanner#empty?</a> は将来のバージョンで削除される予定です。代わりに <a href="../method/-string-scanner/i/eos=3f.html">StringScanner#eos?</a> を使ってください。
</p>
</dd>


<dt class="method-heading" id="I_EXIST--3F"><code>exist?(regexp) -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/exist=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-exist-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの位置から，次にマッチする文字列の末尾までの長さを返します。
</p>
<p>
マッチに失敗したら nil を返します。
</p>
<p>
このメソッドはマッチが成功してもスキャンポインタを進めません。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">exist?</span><span class="p">(</span><span class="sr">/s/</span><span class="p">)</span> <span class="c1"># =&gt; 3
</span>s<span class="p">.</span><span class="nf">exist?</span><span class="p">(</span><span class="sr">//</span><span class="p">)</span>  <span class="c1"># =&gt; 0
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">exist?</span><span class="p">(</span><span class="sr">/s/</span><span class="p">)</span> <span class="c1"># =&gt; 2
</span>s<span class="p">.</span><span class="nf">exist?</span><span class="p">(</span><span class="sr">/e/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_GET_BYTE"><code>get_byte -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/get_byte.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-get_byte">rdoc</a>]</span></dt>
<dt class="method-heading"><code>getbyte -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
1 バイトスキャンして文字列で返します。スキャンポインタをその後ろに進めます。スキャンポインタが文字列の末尾を指すなら nil を返します。
</p>
<p>
<a href="../method/-string-scanner/i/getbyte.html">StringScanner#getbyte</a> は将来のバージョンで削除される予定です。代わりに <a href="../method/-string-scanner/i/get_byte.html">StringScanner#get_byte</a> を使ってください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

utf8 <span class="o">=</span> <span class="s2">"</span><span class="s2">\u{308B 3073 3044}</span><span class="s2">"</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>utf8<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">get_byte</span>       <span class="c1">#=&gt; &quot;\xA4&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">get_byte</span>       <span class="c1">#=&gt; &quot;\xEB&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">get_byte</span>       <span class="c1">#=&gt; &quot;\xA4&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">get_byte</span>       <span class="c1">#=&gt; &quot;\xD3&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">get_byte</span>       <span class="c1">#=&gt; &quot;\xA4&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">get_byte</span>       <span class="c1">#=&gt; &quot;\xA4&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">get_byte</span>       <span class="c1">#=&gt; nil   
</span></code></pre>
</dd>


<dt class="method-heading" id="I_GETCH"><code>getch -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/getch.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-getch">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
一文字スキャンして文字列で返します。スキャンポインタをその後ろに進めます。スキャンポインタが文字列の末尾を指すならnilを返します。
</p>
<p>
一文字の定義は、与えた文字列のエンコードに依存します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

utf8 <span class="o">=</span> <span class="s2">"</span><span class="s2">\u{308B 3073 3044}</span><span class="s2">"</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>utf8<span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span><span class="p">)</span> 
<span class="nb">p</span> s<span class="p">.</span><span class="nf">getch</span>                         <span class="c1"># =&gt; &quot;る&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">getch</span>                         <span class="c1"># =&gt; &quot;び&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">getch</span>                         <span class="c1"># =&gt; &quot;い&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">getch</span>                         <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_INSPECT"><code>inspect -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/i/inspect.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-inspect">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
StringScannerオブジェクトを表す文字列を返します。
</p>
<p>
文字列にはクラス名の他、以下の情報が含まれます。
</p>
<ul>
<li>スキャナポインタの現在位置。</li>
<li>スキャン対象の文字列の長さ。</li>
<li>スキャンポインタの前後にある文字。上記実行例の @ がスキャンポインタを表します。</li>
</ul>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">inspect</span>                            <span class="c1"># =&gt; &quot;#&lt;StringScanner 0/11 @ \&quot;test ...\&quot;&gt;&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>                        <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">inspect</span>                            <span class="c1"># =&gt; &quot;#&lt;StringScanner 4/11 \&quot;test\&quot; @ \&quot; stri...\&quot;&gt;&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>                        <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">.</span><span class="nf">inspect</span>                            <span class="c1"># =&gt; &quot;#&lt;StringScanner 5/11 \&quot;test \&quot; @ \&quot;strin...\&quot;&gt;&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>                        <span class="c1"># =&gt; &quot;string&quot;
</span>s<span class="p">.</span><span class="nf">inspect</span>                            <span class="c1"># =&gt; &quot;#&lt;StringScanner fin&gt;&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_MATCH--3F"><code>match?(regexp) -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/match=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-match-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの地点だけで regexp と文字列のマッチを試します。マッチしたら、スキャンポインタは進めずにマッチした部分文字列の長さを返します。マッチしなかったら nil を返します。
</p>
<p>
マッチしたサイズは文字単位でなくバイト単位となります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>
<span class="k">def</span> <span class="nf">case1</span><span class="p">(</span>encode<span class="p">)</span>
  utf8 <span class="o">=</span> <span class="s2">"</span><span class="s2">\u{308B 3073 3044}</span><span class="s2">"</span>
  s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>utf8<span class="p">.</span><span class="nf">encode</span><span class="p">(</span>encode<span class="p">)</span><span class="p">)</span>
  s<span class="p">.</span><span class="nf">match?</span><span class="p">(</span><span class="sr">/<span class="si">#{</span><span class="s2">"</span><span class="s2">\u{308B}</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">encode</span><span class="p">)</span><span class="si">}</span>/</span><span class="p">)</span>
<span class="k">end</span>

<span class="nb">p</span> case1<span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; 2
</span></code></pre>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">match?</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; 4
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">match?</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; 4
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">match?</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_MATCHED"><code>matched -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/matched.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-matched">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチした部分文字列を返します。前回のマッチに失敗していると nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">matched</span>     <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">matched</span>     <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">matched</span>     <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">.</span><span class="nf">matched</span>     <span class="c1"># =&gt; &quot; &quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_MATCHED--3F"><code>matched? -&gt; bool</code><span class="permalink">[<a href="../method/-string-scanner/i/matched=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-matched-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回のマッチが成功していたら true を、失敗していたら false を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">matched?</span>    <span class="c1"># =&gt; false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">matched?</span>    <span class="c1"># =&gt; true
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">matched?</span>    <span class="c1"># =&gt; false
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">.</span><span class="nf">matched?</span>    <span class="c1"># =&gt; true
</span></code></pre>
</dd>


<dt class="method-heading" id="I_MATCHED_SIZE"><code>matched_size -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/matched_size.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-matched_size">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチした部分文字列の長さを返します。前回マッチに失敗していたら nil を返します。
</p>
<p>
マッチしたサイズは文字単位でなくバイト単位となります。
</p>
<pre class="highlight ruby">
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">(</span>encode<span class="p">)</span>
  utf8 <span class="o">=</span> <span class="s2">"</span><span class="s2">\u{308B 3073 3044}</span><span class="s2">"</span> <span class="c1"># るびい
</span>  s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>utf8<span class="p">.</span><span class="nf">encode</span><span class="p">(</span>encode<span class="p">)</span><span class="p">)</span>
  s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/<span class="si">#{</span><span class="s2">"</span><span class="s2">\u{308B}</span><span class="s2">"</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">encode</span><span class="p">)</span><span class="si">}</span>/</span><span class="p">)</span>
  s<span class="p">.</span><span class="nf">matched_size</span>
<span class="k">end</span>

<span class="nb">p</span> run<span class="p">(</span><span class="s2">"</span><span class="s2">UTF-8</span><span class="s2">"</span><span class="p">)</span>     <span class="c1">#=&gt; 3
</span><span class="nb">p</span> run<span class="p">(</span><span class="s2">"</span><span class="s2">EUC-JP</span><span class="s2">"</span><span class="p">)</span>    <span class="c1">#=&gt; 2
</span><span class="nb">p</span> run<span class="p">(</span><span class="s2">"</span><span class="s2">Shift_Jis</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#=&gt; 2
</span>
</code></pre>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">matched_size</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">matched_size</span> <span class="c1"># =&gt; 4
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>  <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">matched_size</span> <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_MATCHEDSIZE"><code>matchedsize -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/matchedsize.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-matchedsize">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-string-scanner/i/matched_size.html">StringScanner#matched_size</a> と同じです。
</p>
<p>
このメソッドは は将来のバージョンで削除される予定です。代わりに <a href="../method/-string-scanner/i/matched_size.html">StringScanner#matched_size</a> を使ってください。
</p>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/matched_size.html">StringScanner#matched_size</a>
</p>
</dd>


<dt class="method-heading" id="I_PEEK"><code>peek(bytes) -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/i/peek.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-peek">rdoc</a>]</span></dt>
<dt class="method-heading"><code>peep(bytes) -&gt; String</code></dt>
<dd class="method-description">
<p>
スキャンポインタから長さ bytes バイト分だけ文字列を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>   <span class="c1"># =&gt; &quot;test&quot;
</span></code></pre>
<p>
また、このメソッドを実行してもスキャンポインタは移動しません。
</p>
<p>
<a href="../method/-string-scanner/i/peep.html">StringScanner#peep</a> は将来のバージョンでは削除される予定です。代わりに <a href="../method/-string-scanner/i/peek.html">StringScanner#peek</a> を使ってください。
</p>
<dl>
<dt class='method-param'>[PARAM] bytes:</dt>
<dd>
0 以上の整数を指定します。ただし、スキャン対象の文字列の長さを超える分は無視されます。
bytes が 0 のとき、またはスキャンポインタが文字列の末尾を指しているときは空文字列 (&quot;&quot;) を返します。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
bytes に負数を与えると発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>    <span class="c1"># =&gt; &quot;test string&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;&quot;
</span><span class="k">begin</span>
  s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">rescue</span> <span class="no">ArgumentError</span> <span class="o">=&gt;</span> err
  <span class="nb">puts</span> err <span class="c1"># negative string size (or size too big)
</span><span class="k">end</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot; &quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;string&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;&quot;
</span>
<span class="c1"># このメソッドを実行してもスキャンポインタは移動しません。
</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>     <span class="c1"># =&gt; &quot; str&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>     <span class="c1"># =&gt; &quot; str&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_POINTER"><code>pointer -&gt; Integer</code><span class="permalink">[<a href="../method/-string-scanner/i/pointer.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-pointer">rdoc</a>]</span></dt>
<dt class="method-heading"><code>pos -&gt; Integer</code></dt>
<dd class="method-description">
<p>
現在のスキャンポインタのインデックスを返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">pos</span>         <span class="c1"># =&gt; 0
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">pos</span>         <span class="c1"># =&gt; 4
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">pos</span>         <span class="c1"># =&gt; 4
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">.</span><span class="nf">pos</span>         <span class="c1"># =&gt; 5
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/charpos.html">StringScanner#charpos</a>
</p>
</dd>


<dt class="method-heading" id="I_POINTER--3D"><code>pointer=(n)</code><span class="permalink">[<a href="../method/-string-scanner/i/pointer=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-pointer-3D">rdoc</a>]</span></dt>
<dt class="method-heading"><code>pos=(n)</code></dt>
<dd class="method-description">
<p>
スキャンポインタのインデックスを n にセットします。
</p>
<dl>
<dt class='method-param'>[PARAM] n:</dt>
<dd>
整数で、バイト単位で指定します。負数を指定すると文字列の末尾からのオフセットとして扱います。
</dd>
<dt>[EXCEPTION] RangeError:</dt>
<dd>
マッチ対象の文字列の長さを超える値を指定すると発生します。
</dd>
<dt>[RETURN]</dt>
<dd>
n を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">pos</span> <span class="o">=</span> <span class="mi">1</span>     <span class="c1"># =&gt; 1
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;est&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">pos</span> <span class="o">=</span> <span class="mi">7</span>     <span class="c1"># =&gt; 7
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;ring&quot;
</span>
<span class="k">begin</span>
  s<span class="p">.</span><span class="nf">pos</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">rescue</span> <span class="no">RangeError</span> <span class="o">=&gt;</span> err
  <span class="nb">puts</span> err <span class="c1">#=&gt; index out of range
</span><span class="k">end</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">pos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span>    <span class="c1"># =&gt; -4
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;ring&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_POST_MATCH"><code>post_match -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/post_match.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-post_match">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチを行った文字列のうち、マッチしたところよりも後ろの部分文字列を返します。前回のマッチが失敗していると常に nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">post_match</span>  <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">post_match</span>  <span class="c1"># =&gt; &quot; string&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">post_match</span>  <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">.</span><span class="nf">post_match</span>  <span class="c1"># =&gt; &quot;string&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;string&quot;
</span>s<span class="p">.</span><span class="nf">post_match</span>  <span class="c1"># =&gt; &quot;&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">post_match</span>  <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_PRE_MATCH"><code>pre_match -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/pre_match.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-pre_match">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
前回マッチを行った文字列のうち、マッチしたところよりも前の部分文字列を返します。前回のマッチが失敗していると常に nil を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">pre_match</span>   <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">pre_match</span>   <span class="c1"># =&gt; &quot;&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">pre_match</span>   <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">.</span><span class="nf">pre_match</span>   <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;string&quot;
</span>s<span class="p">.</span><span class="nf">pre_match</span>   <span class="c1"># =&gt; &quot;test &quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">pre_match</span>   <span class="c1"># =&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_RESET"><code>reset -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/i/reset.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-reset">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタを文字列の先頭 (インデックス 0) に戻し、マッチ記録を捨てます。
</p>
<p>
pos = 0と同じ動作です。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
self を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">matched</span>     <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">pos</span>         <span class="c1"># =&gt; 4
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>          <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">reset</span>
s<span class="p">.</span><span class="nf">matched</span>     <span class="c1"># =&gt; nil
</span>s<span class="p">[</span><span class="mi">0</span><span class="p">]</span>          <span class="c1"># =&gt; nil
</span>s<span class="p">.</span><span class="nf">pos</span>         <span class="c1"># =&gt; 0
</span></code></pre>
</dd>


<dt class="method-heading" id="I_REST"><code>rest -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/i/rest.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-rest">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列の残り (rest) を返します。具体的には、スキャンポインタが指す位置からの文字列を返します。
</p>
<p>
スキャンポインタが文字列の末尾を指していたら空文字列 (&quot;&quot;) を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">rest</span>         <span class="c1"># =&gt; &quot;test string&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">rest</span>         <span class="c1"># =&gt; &quot; string&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>  <span class="c1"># =&gt; &quot; &quot;
</span>s<span class="p">.</span><span class="nf">rest</span>         <span class="c1"># =&gt; &quot;string&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;string&quot;
</span>s<span class="p">.</span><span class="nf">rest</span>         <span class="c1"># =&gt; &quot;&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_REST--3F"><code>rest? -&gt; bool</code><span class="permalink">[<a href="../method/-string-scanner/i/rest=3f.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-rest-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字列が残っているならば trueを、残っていないならば false を返します。
</p>
<p>
<a href="../method/-string-scanner/i/eos=3f.html">StringScanner#eos?</a> と逆の結果を返します。
</p>
<p>
<a href="../method/-string-scanner/i/rest=3f.html">StringScanner#rest?</a> は将来のバージョンで削除される予定です。代わりに <a href="../method/-string-scanner/i/eos=3f.html">StringScanner#eos?</a> を使ってください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">eos?</span>        <span class="c1"># =&gt; false
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">rest?</span>       <span class="c1"># =&gt; true
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">eos?</span>        <span class="c1"># =&gt; true
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">rest?</span>       <span class="c1"># =&gt; false
</span></code></pre>
</dd>


<dt class="method-heading" id="I_REST_SIZE"><code>rest_size -&gt; Integer</code><span class="permalink">[<a href="../method/-string-scanner/i/rest_size.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-rest_size">rdoc</a>]</span></dt>
<dt class="method-heading"><code>restsize -&gt; Integer</code></dt>
<dd class="method-description">
<p>
文字列の残りの長さを返します。
stringscanner.rest.size と同じです。
</p>
<p>
<a href="../method/-string-scanner/i/restsize.html">StringScanner#restsize</a> は将来のバージョンで削除される予定です。代わりに<a href="../method/-string-scanner/i/rest_size.html">StringScanner#rest_size</a> を使ってください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">rest_size</span> <span class="c1"># =&gt; 11
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">rest</span><span class="p">.</span><span class="nf">size</span> <span class="c1"># =&gt; 11
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SCAN"><code>scan(regexp) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/scan.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-scan">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの地点だけで regexp と文字列のマッチを試します。マッチしたら、スキャンポインタを進めて正規表現にマッチした部分文字列を返します。マッチしなかったら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot; &quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; &quot;string&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/./</span><span class="p">)</span>     <span class="c1">#=&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SCAN_FULL"><code>scan_full(regexp, s, f) -&gt; object</code><span class="permalink">[<a href="../method/-string-scanner/i/scan_full.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-scan_full">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの位置から regexp と文字列のマッチを試します。
</p>
<p>
マッチに成功すると、s と f の値によって以下のように動作します。
</p>
<ul>
<li>s が true ならばスキャンポインタを進めます。</li>
<li>s が false ならばスキャンポインタを進めません。</li>
<li>f が true ならばマッチした部分文字列を返します。</li>
<li>f が false ならばマッチした部分文字列の長さを返します。</li>
</ul>
<p>
マッチに失敗すると s や f に関係なく nil を返します。
</p>
<p>
このメソッドは s と f の組み合わせにより、他のメソッドと同等の動作になります。
</p>
<ul>
<li>scan_full(regexp, true, true) は <a href="../method/-string-scanner/i/scan.html">StringScanner#scan</a> と同等。</li>
<li>scan_full(regexp, true, false) は <a href="../method/-string-scanner/i/skip.html">StringScanner#skip</a> と同等。</li>
<li>scan_full(regexp, false, true) は <a href="../method/-string-scanner/i/check.html">StringScanner#check</a> と同等。</li>
<li>scan_full(regexp, false, false) は <a href="../method/-string-scanner/i/match=3f.html">StringScanner#match?</a> と同等。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
<dt class='method-param'>[PARAM] s:</dt>
<dd>
true ならばスキャンポインタを進めます。
false ならばスキャンポインタを進めません。
</dd>
<dt class='method-param'>[PARAM] f:</dt>
<dd>
true ならばマッチした部分文字列を返します。
false ならばマッチした部分文字列の長さを返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_full</span><span class="p">(</span><span class="sr">/\w+/</span>, <span class="k">true</span>, <span class="k">true</span><span class="p">)</span>     <span class="c1">#=&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_full</span><span class="p">(</span><span class="sr">/\s+/</span>, <span class="k">false</span>, <span class="k">true</span><span class="p">)</span>    <span class="c1">#=&gt; &quot; &quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_full</span><span class="p">(</span><span class="sr">/\s+/</span>, <span class="k">true</span>, <span class="k">false</span><span class="p">)</span>    <span class="c1">#=&gt; 1
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_full</span><span class="p">(</span><span class="sr">/\w+/</span>, <span class="k">false</span>, <span class="k">false</span><span class="p">)</span>   <span class="c1">#=&gt; 6
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan_full</span><span class="p">(</span><span class="sr">/\w+/</span>, <span class="k">true</span>, <span class="k">true</span><span class="p">)</span>     <span class="c1">#=&gt; &quot;string&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/scan.html">StringScanner#scan</a> <a href="../method/-string-scanner/i/skip.html">StringScanner#skip</a> <a href="../method/-string-scanner/i/check.html">StringScanner#check</a>  <a href="../method/-string-scanner/i/match=3f.html">StringScanner#match?</a>
</p>
</dd>


<dt class="method-heading" id="I_SCAN_UNTIL"><code>scan_until(regexp) -&gt; String | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/scan_until.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-scan_until">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp で指定された正規表現とマッチするまで文字列をスキャンします。マッチに成功したらスキャンポインタを進めて、スキャン開始位置からマッチ部分の末尾までの部分文字列を返します。マッチに失敗したら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan_until</span><span class="p">(</span><span class="sr">/str/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test str&quot;
</span>s<span class="p">.</span><span class="nf">matched</span>           <span class="c1"># =&gt; &quot;str&quot;
</span>s<span class="p">.</span><span class="nf">pos</span>               <span class="c1"># =&gt; 8
</span>s<span class="p">.</span><span class="nf">pre_match</span>         <span class="c1"># =&gt; &quot;test &quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SEARCH_FULL"><code>search_full(regexp, s, f) -&gt; object</code><span class="permalink">[<a href="../method/-string-scanner/i/search_full.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-search_full">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp で指定された正規表現とマッチするまで文字列をスキャンします。
</p>
<p>
マッチに成功すると、s と f の値によって以下のように動作します。
</p>
<ul>
<li>s が true ならばスキャンポインタを進めます。</li>
<li>s が false ならばスキャンポインタを進めません。</li>
<li>f が true ならばスキャン開始位置からマッチした部分の末尾までの部分文字列を返します。</li>
<li>f が false ならばスキャン開始位置からマッチした部分の末尾までの部分文字列の長さを返します。</li>
</ul>
<p>
マッチに失敗すると s や f に関係なく nil を返します。
</p>
<p>
このメソッドは s と f の組み合わせにより、他のメソッドと同等の動作になります。
</p>
<ul>
<li>search_full(regexp, true, true) は <a href="../method/-string-scanner/i/scan_until.html">StringScanner#scan_until</a> と同等。</li>
<li>search_full(regexp, true, false) は <a href="../method/-string-scanner/i/skip_until.html">StringScanner#skip_until</a> と同等。</li>
<li>search_full(regexp, false, true) は <a href="../method/-string-scanner/i/check_until.html">StringScanner#check_until</a> と同等。</li>
<li>search_full(regexp, false, false) は <a href="../method/-string-scanner/i/exist=3f.html">StringScanner#exist?</a> と同等。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに用いる正規表現を指定します。
</dd>
<dt class='method-param'>[PARAM] s:</dt>
<dd>
true ならばスキャンポインタを進めます。
false ならばスキャンポインタを進めません。
</dd>
<dt class='method-param'>[PARAM] f:</dt>
<dd>
true ならばマッチした部分文字列を返します。
false ならばマッチした部分文字列の長さを返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>   
<span class="nb">p</span> s<span class="p">.</span><span class="nf">search_full</span><span class="p">(</span><span class="sr">/t/</span>, <span class="k">true</span>, <span class="k">true</span><span class="p">)</span>       <span class="c1">#=&gt; &quot;t&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">search_full</span><span class="p">(</span><span class="sr">/str/</span>, <span class="k">false</span>, <span class="k">true</span><span class="p">)</span>    <span class="c1">#=&gt; &quot;est str&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">search_full</span><span class="p">(</span><span class="sr">/string/</span>, <span class="k">true</span>, <span class="k">true</span><span class="p">)</span>  <span class="c1">#=&gt; &quot;est string&quot;
</span></code></pre>
<p>
[SEE_ALSO] <a href="../method/-string-scanner/i/scan_until.html">StringScanner#scan_until</a> <a href="../method/-string-scanner/i/skip_until.html">StringScanner#skip_until</a> <a href="../method/-string-scanner/i/check_until.html">StringScanner#check_until</a> <a href="../method/-string-scanner/i/exist=3f.html">StringScanner#exist?</a>
</p>
</dd>


<dt class="method-heading" id="I_SKIP"><code>skip(regexp) -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/skip.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-skip">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタの地点だけで regexp と文字列のマッチを試します。マッチしたらスキャンポインタを進めマッチした部分文字列の長さを返します。マッチしなかったら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに使用する正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">skip</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; 4
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">skip</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; nil
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">skip</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span>   <span class="c1">#=&gt; 1
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">skip</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>   <span class="c1">#=&gt; 6
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">skip</span><span class="p">(</span><span class="sr">/./</span><span class="p">)</span>     <span class="c1">#=&gt; nil
</span></code></pre>
</dd>


<dt class="method-heading" id="I_SKIP_UNTIL"><code>skip_until(regexp) -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-string-scanner/i/skip_until.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-skip_until">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
regexp が一致するまで文字列をスキャンします。マッチに成功したらスキャンポインタを進めて、スキャン開始位置からマッチ部分の末尾までの部分文字列の長さを返します。マッチに失敗したら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] regexp:</dt>
<dd>
マッチに使用する正規表現を指定します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan_until</span><span class="p">(</span><span class="sr">/str/</span><span class="p">)</span> <span class="c1"># =&gt; 8
</span>s<span class="p">.</span><span class="nf">matched</span>           <span class="c1"># =&gt; &quot;str&quot;
</span>s<span class="p">.</span><span class="nf">pos</span>               <span class="c1"># =&gt; 8
</span>s<span class="p">.</span><span class="nf">pre_match</span>         <span class="c1"># =&gt; &quot;test &quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_STRING"><code>string -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/i/string.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-string">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャン対象にしている文字列を返します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">string</span> <span class="c1"># =&gt; &quot;test string&quot;
</span></code></pre>
<p>
返り値は freeze されていません。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">string</span><span class="p">.</span><span class="nf">frozen?</span> <span class="c1"># =&gt; false
</span></code></pre>
<p>
なお、このメソッドは StringScanner.new に渡した文字列をそのまま返しますが、この仕様が将来に渡って保証されるわけではありません。この仕様に依存したコードを書かないようにしましょう。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

str <span class="o">=</span> <span class="s1">'test string'</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>str<span class="p">)</span>
s<span class="p">.</span><span class="nf">string</span> <span class="o">==</span> str    <span class="c1"># =&gt; true
</span>s<span class="p">.</span><span class="nf">string</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span>str<span class="p">)</span> <span class="c1"># =&gt; true (将来は false になる可能性がある)
</span></code></pre>
<p>
また、返り値の文字列に対して破壊的な変更もできますが、この操作がスキャン対象の文字列を変更することも保証されません。この仕様に依存したコードを書かないでください。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

str <span class="o">=</span> <span class="s1">'test string'</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>str<span class="p">)</span>
s<span class="p">.</span><span class="nf">string</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="s2">"</span><span class="s2">0123</span><span class="s2">"</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>     <span class="c1"># =&gt; &quot;0123&quot; (将来は &quot;test&quot; が返る可能性あり)
</span>str               <span class="c1"># =&gt; &quot;0123&quot; (将来は &quot;test string&quot; が返る可能性あり)
</span></code></pre>
</dd>


<dt class="method-heading" id="I_STRING--3D"><code>string=(str)</code><span class="permalink">[<a href="../method/-string-scanner/i/string=3d.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-string-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャン対象の文字列を str に変更して、マッチ記録を捨てます。
</p>
<dl>
<dt class='method-param'>[PARAM] str:</dt>
<dd>
スキャン対象の文字列を str に変更して、マッチ記録を捨てます。
</dd>
<dt>[RETURN]</dt>
<dd>
str を返します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

str <span class="o">=</span> <span class="s1">'0123'</span>
s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">string</span> <span class="o">=</span> str     <span class="c1"># =&gt; &quot;0123&quot;
</span>s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>      <span class="c1"># =&gt; &quot;0123&quot;
</span></code></pre>
</dd>


<dt class="method-heading" id="I_UNSCAN"><code>unscan -&gt; self</code><span class="permalink">[<a href="../method/-string-scanner/i/unscan.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-i-unscan">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
スキャンポインタを前回のマッチの前の位置に戻します。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">unscan</span>
s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span></code></pre>
<dl>
<dt>[RETURN]</dt>
<dd>
selfを返します。
</dd>
</dl>
<p>
このメソッドでポインタを戻せるのは 1 回分だけです。
2 回分以上戻そうとしたときは例外 StringScanner::Error が発生します。また、まだマッチを一度も行っていないときや、前回のマッチが失敗していたときも例外 StringScanner::Error が発生します。
</p>
<dl>
<dt>[EXCEPTION] StringScanner::Error:</dt>
<dd>
2 回分以上戻そうとした時や、まだマッチを一度も行っていない時、前回のマッチが失敗していた時に発生します。
</dd>
</dl>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

s <span class="o">=</span> <span class="no">StringScanner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'test string'</span><span class="p">)</span>
<span class="k">begin</span>
  <span class="c1"># マッチを一度も行っていないので、例外が発生する。
</span>  s<span class="p">.</span><span class="nf">unscan</span>
<span class="k">rescue</span> <span class="no">StringScanner</span><span class="o">::</span><span class="no">Error</span> <span class="o">=&gt;</span> err
  <span class="nb">puts</span> err
  <span class="c1"># 出力例
</span>  <span class="c1">#=&gt; unscan failed: previous match had failed
</span><span class="k">end</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span>s<span class="p">.</span><span class="nf">unscan</span>
<span class="k">begin</span>
  <span class="c1"># 二回以上戻そうとしたので、例外が発生する。
</span>  s<span class="p">.</span><span class="nf">unscan</span>
<span class="k">rescue</span> <span class="no">StringScanner</span><span class="o">::</span><span class="no">Error</span> <span class="o">=&gt;</span> err
  <span class="nb">puts</span> err
  <span class="c1"># 出力例
</span>  <span class="c1">#=&gt; unscan failed: previous match had failed
</span><span class="k">end</span>
<span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; &quot;test&quot;
</span><span class="nb">p</span> s<span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; nil
</span><span class="k">begin</span>
  <span class="c1"># 前回のマッチが失敗しているので、例外が発生する。
</span>  s<span class="p">.</span><span class="nf">unscan</span>
<span class="k">rescue</span> <span class="o">=&gt;</span> err
  <span class="nb">puts</span> err
  <span class="c1"># 出力例
</span>  <span class="c1">#=&gt; unscan failed: previous match had failed
</span><span class="k">end</span>
</code></pre>
</dd>


</dl>

<h2>定数</h2>
<dl>

<dt class="method-heading" id="C_-ID"><code>Id -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/c/-id.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-c-Id">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-string-scanner.html">StringScanner</a> クラスの詳しいバージョンを文字列で返します。この文字列は <a href="../method/-object/i/freeze.html">Object#freeze</a> されています。
</p>
</dd>


<dt class="method-heading" id="C_-VERSION"><code>Version -&gt; String</code><span class="permalink">[<a href="../method/-string-scanner/c/-version.html">permalink</a>][<a href="https://docs.ruby-lang.org/en/3.1.2/StringScanner.html#method-c-Version">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-string-scanner.html">StringScanner</a> クラスのバージョンを文字列で返します。この文字列は <a href="../method/-object/i/freeze.html">Object#freeze</a> されています。
</p>
<pre class="highlight ruby">
<span class="caption">例</span>
<code>
<span class="nb">require</span> <span class="s1">'strscan'</span>

<span class="no">StringScanner</span><span class="o">::</span><span class="no">Version</span>           <span class="c1"># =&gt; &quot;0.7.0&quot;
</span><span class="no">StringScanner</span><span class="o">::</span><span class="no">Version</span><span class="p">.</span><span class="nf">frozen?</span>   <span class="c1"># =&gt; true
</span></code></pre>
</dd>


</dl>

</main>

<footer id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>

  <a href="https://github.com/rurema/doctree/issues/new" id="feedback-link">フィードバックを送る</a>
  
  <script>if (window.URLSearchParams) { document.getElementById("feedback-link").search = new URLSearchParams({'body': document.location}); }</script>
</footer>
</body>
</html>
