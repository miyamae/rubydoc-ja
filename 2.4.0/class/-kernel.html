<!DOCTYPE html>
<html lang="ja-JP">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="ja-JP">
  <link rel="stylesheet" type="text/css" href="../style.css">
  <link rel="icon" type="image/png" href="../rurema.png">
  
  <title>module Kernel (Ruby 2.4.0)</title>
</head>
<body>

<p>
<a href="../doc/index.html">Ruby 2.4.0 リファレンスマニュアル</a>
&gt; <a href="../library/index.html">ライブラリ一覧</a>
&gt; <a href="../library/_builtin.html">組み込みライブラリ</a>
&gt; Kernelモジュール
</p>


<h1>module Kernel</h1>
<p>


クラスの継承リスト: Kernel






<br> dynamic include:
 <a href="../class/-rake-file-utils.html">RakeFileUtils</a> (by <a href="../library/rake.html">rake</a>)


</p>

<h2>要約</h2>
<p>
全てのクラスから参照できるメソッドを定義しているモジュール。
<a href="../class/-object.html">Object</a> クラスはこのモジュールをインクルードしています。
</p>
<p>
<a href="../class/-object.html">Object</a> クラスのメソッドは実際にはこのモジュールで定義されていま
す。これはトップレベルでのメソッドの再定義に対応するためです。
</p>



<h2>目次</h2>
<dl>

<dt>モジュール関数</dt>
<dd>

<a href="#M_-ARRAY">Array</a>

<a href="#M_-COMPLEX">Complex</a>

<a href="#M_-FLOAT">Float</a>

<a href="#M_-HASH">Hash</a>

<a href="#M_-INTEGER">Integer</a>

<a href="#M_-RATIONAL">Rational</a>

<a href="#M_-STRING">String</a>

<a href="#M___CALLEE__">__callee__</a>

<a href="#M___DIR__">__dir__</a>

<a href="#M___METHOD__">__method__</a>

<a href="#M_--60">`</a>

<a href="#M_ABORT">abort</a>

<a href="#M_AT_EXIT">at_exit</a>

<a href="#M_AUTOLOAD">autoload</a>

<a href="#M_AUTOLOAD--3F">autoload?</a>

<a href="#M_BINDING">binding</a>

<a href="#M_BLOCK_GIVEN--3F">block_given?</a>

<a href="#M_BLOCK_GIVEN--3F">iterator?</a>

<a href="#M_CALLER">caller</a>

<a href="#M_CALLER_LOCATIONS">caller_locations</a>

<a href="#M_CATCH">catch</a>

<a href="#M_CHOMP">chomp</a>

<a href="#M_CHOP">chop</a>

<a href="#M_EVAL">eval</a>

<a href="#M_EXEC">exec</a>

<a href="#M_EXIT">exit</a>

<a href="#M_EXIT--21">exit!</a>

<a href="#M_FAIL">fail</a>

<a href="#M_FAIL">raise</a>

<a href="#M_FORK">fork</a>

<a href="#M_FORMAT">format</a>

<a href="#M_FORMAT">sprintf</a>

<a href="#M_GETS">gets</a>

<a href="#M_GLOBAL_VARIABLES">global_variables</a>

<a href="#M_GSUB">gsub</a>

<a href="#M_LAMBDA">lambda</a>

<a href="#M_LAMBDA">proc</a>

<a href="#M_LOAD">load</a>

<a href="#M_LOCAL_VARIABLES">local_variables</a>

<a href="#M_LOOP">loop</a>

<a href="#M_OPEN">open</a>

<a href="#M_OPEN">open</a>

<a href="#M_P">p</a>

<a href="#M_PRINT">print</a>

<a href="#M_PRINTF">printf</a>

<a href="#M_PUTC">putc</a>

<a href="#M_PUTS">puts</a>

<a href="#M_RAND">rand</a>

<a href="#M_READLINE">readline</a>

<a href="#M_READLINES">readlines</a>

<a href="#M_REQUIRE">require</a>

<a href="#M_REQUIRE_RELATIVE">require_relative</a>

<a href="#M_SELECT">select</a>

<a href="#M_SET_TRACE_FUNC">set_trace_func</a>

<a href="#M_SLEEP">sleep</a>

<a href="#M_SPAWN">spawn</a>

<a href="#M_SRAND">srand</a>

<a href="#M_SUB">sub</a>

<a href="#M_SYSCALL">syscall</a>

<a href="#M_SYSTEM">system</a>

<a href="#M_TEST">test</a>

<a href="#M_THROW">throw</a>

<a href="#M_TRACE_VAR">trace_var</a>

<a href="#M_TRAP">trap</a>

<a href="#M_UNTRACE_VAR">untrace_var</a>

<a href="#M_WARN">warn</a>

</dd>

<dt>特殊変数</dt>
<dd>

<a href="#V_--21">$!</a>

<a href="#V_--22">$"</a>

<a href="#V_--22">$LOADED_FEATURES</a>

<a href="#V_--24">$$</a>

<a href="#V_--26">$&</a>

<a href="#V_--27">$'</a>

<a href="#V_--2A">$*</a>

<a href="#V_--2B">$+</a>

<a href="#V_--2C">$,</a>

<a href="#V_--2D0">$-0</a>

<a href="#V_--2D0">$/</a>

<a href="#V_--2D-F">$-F</a>

<a href="#V_--2D-F">$;</a>

<a href="#V_--2D-I">$-I</a>

<a href="#V_--2D-I">$:</a>

<a href="#V_--2D-I">$LOAD_PATH</a>

<a href="#V_--2D-K">$-K</a>

<a href="#V_--2D-K">$KCODE</a>

<a href="#V_--2D-W">$-W</a>

<a href="#V_--2DA">$-a</a>

<a href="#V_--2DD">$-d</a>

<a href="#V_--2DD">$DEBUG</a>

<a href="#V_--2DI">$-i</a>

<a href="#V_--2DL">$-l</a>

<a href="#V_--2DP">$-p</a>

<a href="#V_--2DV">$-v</a>

<a href="#V_--2DV">$-w</a>

<a href="#V_--2DV">$VERBOSE</a>

<a href="#V_--2E">$.</a>

<a href="#V_0">$0</a>

<a href="#V_0">$PROGRAM_NAME</a>

<a href="#V_1">$1</a>

<a href="#V_1">$10</a>

<a href="#V_1">$11</a>

<a href="#V_1">$2</a>

<a href="#V_1">$3</a>

<a href="#V_1">$4</a>

<a href="#V_1">$5</a>

<a href="#V_1">$6</a>

<a href="#V_1">$7</a>

<a href="#V_1">$8</a>

<a href="#V_1">$9</a>

<a href="#V_--3C">$<</a>

<a href="#V_--3D">$=</a>

<a href="#V_--3E">$></a>

<a href="#V_--3E">$stdout</a>

<a href="#V_--3F">$?</a>

<a href="#V_--40">$@</a>

<a href="#V_-F-I-L-E-N-A-M-E">$FILENAME</a>

<a href="#V_-S-A-F-E">$SAFE</a>

<a href="#V_--5C">$\</a>

<a href="#V__">$_</a>

<a href="#V_--60">$`</a>

<a href="#V_STDERR">$stderr</a>

<a href="#V_STDIN">$stdin</a>

<a href="#V_--7E">$~</a>

</dd>

</dl>


<h2>モジュール関数</h2>
<dl>

<dt class="method-heading" id="M_-ARRAY"><code>Array(arg) -&gt; Array</code><span class="permalink">[<a href="../method/-kernel/m/-array.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-Array">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を配列(<a href="../class/-array.html">Array</a>)に変換した結果を返します。
</p>
<p>
arg.to_ary と arg.to_a をこの順に呼び出して、返ってきた配列を変換結果とします。
</p>
<p>
arg に to_ary, to_a のいずれのメソッドも定義されていない場合は
一要素の配列 [arg] を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
to_ary, to_a の返り値が配列でなければ発生します
</dd>
</dl>
<pre>
p Array({:it =&gt; 3}) #=&gt; [[:it, 3]]
p Array(nil) #=&gt; []
p Array(&quot;fefe&quot;) #=&gt; [&quot;fefe&quot;]
</pre>
<p>
[SEE_ALSO] <a href="../method/-object/i/to_a.html">Object#to_a</a>,<a href="../method/-object/i/to_ary.html">Object#to_ary</a>,<a href="../class/-array.html">Array</a>
</p>
</dd>


<dt class="method-heading" id="M_-COMPLEX"><code>Complex(r, i = 0) -&gt; Complex</code><span class="permalink">[<a href="../method/-kernel/m/-complex.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-Complex">rdoc</a>]</span></dt>
<dt class="method-heading"><code>Complex(s) -&gt; Complex</code></dt>
<dd class="method-description">
<p>
実部が r、虚部が i である <a href="../class/-complex.html">Complex</a> クラスのオブジェクトを生成します。
</p>
<dl>
<dt class='method-param'>[PARAM] r:</dt>
<dd>
生成する複素数の実部。
</dd>
<dt class='method-param'>[PARAM] i:</dt>
<dd>
生成する複素数の虚部。省略した場合は 0 です。
</dd>
<dt class='method-param'>[PARAM] s:</dt>
<dd>
生成する複素数を表す文字列。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
変換できないオブジェクトを指定した場合に発生します。
</dd>
</dl>
<p>
例:
</p>
<pre>
Complex(1)       # =&gt; (1+0i)
Complex(1, 2)    # =&gt; (1+2i)
Complex('1+1i')  # =&gt; (1+1i)
Complex('1+1j')  # =&gt; (1+1i)
# Complex.polar(10, 10) と同一。
Complex('10@10') # =&gt; (-8.390715290764524-5.440211108893697i)
Complex('_')     # =&gt; ArgumentError
</pre>
<p>
r にも i にも複素数と解釈されるオブジェクトを指定した場合には、
Complex(a, b) を a+bi として計算した <a href="../class/-complex.html">Complex</a> オブジェクトを返しま
す。
</p>
<pre>
Complex('1+1i', '2+3i')                          # =&gt; (-2+3i)
Complex('1+1i') + Complex('2+3i') * Complex('i') # =&gt; (-2+3i)
</pre>
<p>
[SEE_ALSO] <a href="../method/-complex/s/rect.html">Complex.rect</a>、<a href="../method/-complex/s/rectangular.html">Complex.rectangular</a>
</p>
<p>
[注意] Complex.new、Complex.new! は 1.9 系では廃止されました。
</p>
</dd>


<dt class="method-heading" id="M_-FLOAT"><code>Float(arg) -&gt; Float</code><span class="permalink">[<a href="../method/-kernel/m/-float.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-Float">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を浮動小数点数(<a href="../class/-float.html">Float</a>)に変換した結果を返します。
</p>
<p>
引数が数値の場合は素直に変換し、文字列の場合
は整数や浮動小数点数と見なせるもののみ変換します。
</p>
<p>
メソッド Float は文字列に対し <a href="../method/-string/i/to_f.html">String#to_f</a> よりも厳密な変換を行います。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
整数や浮動小数点数と見なせない文字列を引数に指定した場合に発生します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
nil またはメソッド to_f を持たないオブジェクトを引数に指定したか、
to_f が浮動小数点数を返さなかった場合に発生します。
</dd>
</dl>
<pre>
p Float(4)            #=&gt; 4.0
p Float(4_000)        #=&gt; 4000.0
p Float(9.88)         #=&gt; 9.88

p Float(Time.gm(1986)) #=&gt; 504921600.0
p Float(Object.new)   # can't convert Object into Float (TypeError)
p Float(nil)          # can't convert nil into Float (TypeError)

p Float(&quot;10&quot;)         #=&gt; 10.0
p Float(&quot;10e2&quot;)       #=&gt; 1000.0
p Float(&quot;1e-2&quot;)       #=&gt; 0.01
p Float(&quot;.1&quot;)         #=&gt; 0.1
p Float(&quot;0xa&quot;)        #=&gt; 10.0

p Float(&quot;nan&quot;)        # invalid value for Float(): &quot;nan&quot; (ArgumentError)
p Float(&quot;INF&quot;)        # invalid value for Float(): &quot;INF&quot; (ArgumentError)
p Float(&quot;-Inf&quot;)       # invalid value for Float(): &quot;-Inf&quot; (ArgumentError)
p Float((&quot;10&quot; * 1000)) #=&gt; Infinity
p Float(&quot;0xa.a&quot;)      # invalid value for Float(): &quot;0xa.a&quot; (ArgumentError)
p Float(&quot; \n10\s \t&quot;) #=&gt; 10.0 # 先頭と末尾の空白類は無視される
p Float(&quot;1\n0&quot;)       # invalid value for Float(): &quot;1\n0&quot; (ArgumentError)
p Float(&quot;&quot;)           # invalid value for Float(): &quot;&quot; (ArgumentError)
</pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/to_f.html">String#to_f</a>,<a href="../class/-float.html">Float</a>
</p>
</dd>


<dt class="method-heading" id="M_-HASH"><code>Hash(arg) -&gt; Hash</code><span class="permalink">[<a href="../method/-kernel/m/-hash.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-Hash">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数 arg で指定したオブジェクトを to_hash メソッドを呼び出す事で
<a href="../class/-hash.html">Hash</a> オブジェクトに変換します。nil か [] を指定した場合は空の
<a href="../class/-hash.html">Hash</a> オブジェクトを返します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトを指定します。
</dd>
</dl>
<pre>
Hash([])          # =&gt; {}
Hash(nil)         # =&gt; {}
Hash(key: :value) # =&gt; {:key =&gt; :value}
Hash([1, 2, 3])   # =&gt; TypeError
</pre>
<dl>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
変換できないオブジェクトを指定した場合に発生します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="M_-INTEGER"><code>Integer(arg) -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/-integer.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-Integer">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を整数(<a href="../class/-fixnum.html">Fixnum</a>,<a href="../class/-bignum.html">Bignum</a>)に変換した結果を返します。
</p>
<p>
引数が数値の場合は直接変換し（小数点以下切り落とし）、
文字列の場合は、進数を表す接頭辞を含む整数表現とみなせる文字列のみ
変換します。
</p>
<p>
数値と文字列以外のオブジェクトに対しては arg.to_int, arg.to_i を
この順に使用して変換します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
整数と見なせない文字列を引数に指定した場合に発生します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
メソッド to_int, to_i を持たないオブジェクトを引数に指定したか、to_int, to_i
が整数(<a href="../class/-integer.html">Integer</a>のサブクラス)を返さなかった場合に発生します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
引数に nil を指定した場合に発生します。
</dd>
</dl>
<pre>
p Integer(4)          #=&gt; 4
p Integer(4_000)      #=&gt; 4000
p Integer(9.88)       #=&gt; 9

p Integer(nil)        # can't convert nil into Integer (TypeError)
p Integer(Object.new) # cannot convert Object into Integer (TypeError)

p Integer(&quot;10&quot;)       #=&gt; 10
p Integer(&quot;0d10&quot;)     #=&gt; 10
p Integer(&quot;010&quot;)      #=&gt; 8
p Integer(&quot;0o10&quot;)     #=&gt; 8
p Integer(&quot;0x10&quot;)     #=&gt; 16
p Integer(&quot;0b10&quot;)     #=&gt; 2
p Integer(&quot; \n10\t &quot;) #=&gt; 10 # 先頭と末尾の空白類は無視される
p Integer(&quot;1\n0&quot;)     # `Integer': invalid value for Integer: &quot;1\n0&quot; (ArgumentError)
p Integer(&quot;hoge&quot;)     # `Integer': invalid value for Integer: &quot;hoge&quot; (ArgumentError)
p Integer(&quot;&quot;)         # `Integer': invalid value for Integer: &quot;&quot; (ArgumentError)
</pre>
<p>
[SEE_ALSO] <a href="../method/-string/i/hex.html">String#hex</a>,<a href="../method/-string/i/oct.html">String#oct</a>,<a href="../method/-string/i/to_i.html">String#to_i</a>,<a href="../class/-integer.html">Integer</a>
</p>
</dd>


<dt class="method-heading" id="M_-RATIONAL"><code>Rational(x, y = 1) -&gt; Rational</code><span class="permalink">[<a href="../method/-kernel/m/-rational.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-Rational">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を有理数(<a href="../class/-rational.html">Rational</a>)に変換した結果を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] x:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt class='method-param'>[PARAM] y:</dt>
<dd>
変換対象のオブジェクトです。省略した場合は x だけを用いて
<a href="../class/-rational.html">Rational</a> オブジェクトを作成します。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
変換できないオブジェクトを指定した場合に発生します。
</dd>
</dl>
<p>
引数 x、y の両方を指定した場合、x/y した <a href="../class/-rational.html">Rational</a> オブジェクトを
返します。
</p>
<pre>
Rational(&quot;1/3&quot;)           # =&gt; (1/3)
Rational(1, 3)            # =&gt; (1/3)
Rational(&quot;0.1&quot;, &quot;0.3&quot;)    # =&gt; (1/3)
Rational(Complex(1,2), 2) # =&gt; ((1/2)+(1/1)*i)
</pre>
<p>
ただし、1.8系とは異なり、<a href="../class/-rational.html">Rational</a> オブジェクトは常に既約(それ以上
約分できない状態)である事に注意してください。
</p>
<pre>
Rational(2, 6)         # =&gt; (1/3)
Rational(1, 3) * 3     # =&gt; (1/1)
</pre>
<p>
引数に文字列を指定する場合、以下のいずれかの形式で指定します。
</p>
<ul>
<li>&quot;1/3&quot; のような分数の形式</li>
<li>&quot;0.3&quot; のような10進数の形式</li>
<li>&quot;0.3E0&quot; のような x.xEn の形式</li>
<li>数字をアンダースコアで繋いだ形式</li>
</ul>
<p>
&quot;1.2/3&quot; のように、分子を実数にする事も可能ですが、分母には指定できませ
ん。また、<a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a> とは違い &quot;0x10&quot; のような進数を表す接頭
辞を含めた指定は行えません。
</p>
<p>
例:
</p>
<pre>
Rational(&quot;1/3&quot;)        # =&gt; (1/3)
Rational(&quot;0.3&quot;)        # =&gt; (3/10)
Rational('0.3E0')      # =&gt; (3/10)
Rational('0.1E1/3')    # =&gt; (1/3)
Rational('1.2/3')      # =&gt; (2/5)
Rational('1/3.1')      # =&gt; ArgumentError
Rational('3.0', '3.0') # =&gt; (1/1)
Rational('3/3', '3/3') # =&gt; (1/1)
Rational('1_234_567')  # =&gt; (1234567/1)
Rational(&quot; \n10\t &quot;)   # =&gt; (10/1) # 空白類は無視される
Rational(&quot;0x10&quot;)       # =&gt; ArgumentError
</pre>
<p>
引数に変換できないオブジェクトを指定した場合には <a href="../class/-argument-error.html">ArgumentError</a> が
発生します。
</p>
<pre>
Rational(Object.new)   # =&gt; ArgumentError
Rational(&quot;&quot;)           # =&gt; ArgumentError
Rational(nil)          # =&gt; ArgumentError
</pre>
<p>
また、Rational('0.3') と Rational(0.3) は異なるオブジェクトを返す事に注
意してください。前者は正確に 3/10 ですが、後者はそうではありません。
</p>
<pre>
Rational('0.3')        # =&gt; (3/10)
Rational(0.3)          # =&gt; (5404319552844595/18014398509481984)
</pre>
<p>
[SEE_ALSO] <a href="../class/-rational.html">Rational</a>
</p>
</dd>


<dt class="method-heading" id="M_-STRING"><code>String(arg) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/-string.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-String">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を文字列(<a href="../class/-string.html">String</a>)に変換した結果を返します。
</p>
<p>
arg.to_s を呼び出して文字列に変換します。
arg が文字列の場合、何もせず arg を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
変換対象のオブジェクトです。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
to_s の返り値が文字列でなければ発生します。
</dd>
</dl>
<pre>
class Foo
 def to_s
   &quot;hogehoge&quot;
 end
end

arg = Foo.new
p String(arg) #=&gt; &quot;hogehoge&quot;
</pre>
<p>
[SEE_ALSO] <a href="../method/-object/i/to_s.html">Object#to_s</a>,<a href="../class/-string.html">String</a>
</p>
</dd>


<dt class="method-heading" id="M___CALLEE__"><code>__callee__ -&gt; Symbol | nil</code><span class="permalink">[<a href="../method/-kernel/m/__callee__.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-__callee__">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のメソッド名を返します。
メソッドの外で呼ばれると nil を返します。
</p>
<pre>
def foo
  p __callee__
end
alias :bar :foo
foo # =&gt; :foo
bar # =&gt; :bar
p __callee__ # =&gt; nil
</pre>
<p>
<a href="../method/-kernel/m/__method__.html">Kernel.#__method__</a> とは異なり、現在のメソッド名が alias されたメ
ソッドの場合には alias 先のメソッド名を返します。
</p>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/__method__.html">Kernel.#__method__</a>
</p>
</dd>


<dt class="method-heading" id="M___DIR__"><code>__dir__ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/m/__dir__.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-__dir__">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のソースファイル(__FILE__)のあるディレクトリ名を正規化された絶対パ
スで返します。シンボリックリンクも解決されます。また、__FILE__ が nil
の場合は nil を返します。
</p>
</dd>


<dt class="method-heading" id="M___METHOD__"><code>__method__ -&gt; Symbol | nil</code><span class="permalink">[<a href="../method/-kernel/m/__method__.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-__method__">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のメソッド名を返します。
メソッドの外で呼ばれると nil を返します。
</p>
<pre>
def foo
  p __method__
end
alias :bar :foo
foo #=&gt; :foo
bar #=&gt; :foo
p __method__ #=&gt; nil
</pre>
<p>
現在のメソッド名が alias されたメソッドの場合でも alias 元のメソッド名
を返します。
</p>
</dd>


<dt class="method-heading" id="M_--60"><code>`command` -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/=60.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-60">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
command を外部コマンドとして実行し、その標準出力を文字列として
返します。このメソッドは `command` の形式で呼ばれます。
</p>
<p>
引数 command に対しダブルクォートで囲まれた文字列と同様の解釈と式展開を行った後、
コマンドとして実行します。
コマンドは評価されるたびに実行されます。コマンドの終了ステータスを得るには、<a href="../method/-kernel/v/=3f.html">$?</a> を参照します。
</p>
<p>
コマンドの出力を得る必要がなく、単にコマンドを実行したいだけなら
<a href="../method/-kernel/m/system.html">Kernel.#system</a> を使います。特に端末を制御するコマンドでは
`command` は失敗するかもしれません。
</p>
<p>
<a href="../doc/spec=2fliteral.html#command">リテラル/コマンド出力</a> も参照。
</p>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
コマンドとして実行する引数です。そのまま評価されるのではなく、
ダブルクォート文字列と同様のバックスラッシュ記法の解釈と式展開が行われます。
</dd>
<dt>[RETURN]</dt>
<dd>
コマンドの出力を文字列で返します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
コマンドを実行できないときや失敗した場合に発生します。
</dd>
</dl>
<pre>
puts `ruby -v` #=&gt; ruby 1.8.6 (2007-03-13 patchlevel 0) [i386-mswin32]
puts $?.inspect #=&gt; #&lt;Process::Status: pid=3580,exited(0)&gt;
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/system.html">Kernel.#system</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>,<a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a>
</p>
</dd>


<dt class="method-heading" id="M_ABORT"><code>abort(message = $!.message) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/abort.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-abort">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Ruby プログラムをエラーメッセージ付きで終了します。終了ステータスは 1 固定です。
</p>
<p>
このメソッドと <a href="../method/-kernel/m/exit.html">Kernel.#exit</a> との違いは、プログラムの終了ステー
タスが 1 (正確にはCレベルの定数 EXIT_FAILURE の値)固定であることと、
引数を省略した呼び出し時に <a href="../method/-kernel/v/=21.html">$!</a> が nil でなければその例外のメッセー
ジを標準エラー出力 <a href="../method/-kernel/v/stderr.html">$stderr</a> に出力することです。
</p>
<p>
引数 message を指定すると SystemExit クラスの
<a href="../method/-exception/i/message.html">Exception#message</a> に message を設定し
て標準エラー出力に出力します。
</p>
<dl>
<dt class='method-param'>[PARAM] message:</dt>
<dd>
エラーメッセージ文字列です。
</dd>
</dl>
<pre>
puts 'start'
begin
  puts 'start1...'
  abort &quot;error1&quot;
rescue SystemExit =&gt; err
  puts &quot;end1 with #{err.inspect}&quot;
end

begin
  puts 'start2...'
  $! = RuntimeError.new
  abort
ensure
  puts 'end2...'
end
puts 'end' #実行されない

#=&gt; start
#   start1...
#   end1 with #&lt;SystemExit: error1&gt;
#   start2...
#   end2...
#終了ステータス:1
#(標準エラー出力)
#=&gt; error1
#   ..:12: RuntimeError (RuntimeError)
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/exit.html">Kernel.#exit</a>,<a href="../method/-kernel/m/exit=21.html">Kernel.#exit!</a>
</p>
</dd>


<dt class="method-heading" id="M_AT_EXIT"><code>at_exit { ... } -&gt; Proc</code><span class="permalink">[<a href="../method/-kernel/m/at_exit.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-at_exit">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
与えられたブロックをインタプリタ終了時に実行します。
</p>
<p>
at_exitがメソッドである点を除けば、END ブロックによる終了
処理の登録と同等です。登録した処理を取り消すことはできません。
<a href="../doc/spec=2fterminate.html">終了処理</a>も参照してください。
</p>
<dl>
<dt>[RETURN]</dt>
<dd>
登録した処理を <a href="../class/-proc.html">Proc</a> オブジェクトで返します。
</dd>
</dl>
<pre>
3.times do |i|
  at_exit{puts &quot;at_exit#{i}&quot;}
end
END{puts &quot;END&quot;}
at_exit{puts &quot;at_exit&quot;}
puts &quot;main_end&quot;

#=&gt; main_end
#   at_exit
#   END
#   at_exit2
#   at_exit1
#   at_exit0
</pre>
<p>
[SEE_ALSO] <a href="../doc/spec=2fcontrol.html#END">制御構造/END</a>
</p>
</dd>


<dt class="method-heading" id="M_AUTOLOAD"><code>autoload(const_name, feature) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/autoload.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-autoload">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
定数 const_name を最初に参照した時に feature を
<a href="../method/-kernel/m/require.html">Kernel.#require</a> するように設定します。
</p>
<p>
const_name には、 &quot;::&quot; 演算子を含めることはできません
（ネストした定数を指定する方法は後述）。
</p>
<dl>
<dt class='method-param'>[PARAM] const_name:</dt>
<dd>
定数をString または Symbol で指定します。
</dd>
<dt class='method-param'>[PARAM] feature:</dt>
<dd>
require と同様な方法で autoload する対象を指定します。
</dd>
<dt>[EXCEPTION] LoadError:</dt>
<dd>
featureのロードに失敗すると発生します。
</dd>
</dl>
<pre>
------- /tmp/foo.rb ---------
class Bar
end
----- end of /tmp/foo.rb ----

autoload :Bar, '/tmp/foo'
p Bar #=&gt; Bar
</pre>
<h4 >ネストした定義内の定数</h4>
<p>
const_name には、 &quot;::&quot; 演算子を含めることはできないので、 Kernel.#autoload
ではトップレベルの定数しか指定できません。
</p>
<p>
<a href="../method/-module/i/autoload.html">Module#autoload</a> と組み合わせることで、任意のクラス／モジュールの定数を autoload できます。
やはりconst_name に &quot;::&quot; 演算子を含めることはで
きませんが、以下のように定義する事ができます。
</p>
<pre>
------- /tmp/foo.rb ---------
class Foo
  class Bar
  end
end
----- end of /tmp/foo.rb ----

class Foo
  autoload :Bar, '/tmp/foo'
end
p Foo::Bar #=&gt; Foo::Bar
</pre>
<p>
あるいは、以下のようにもできます。
</p>
<pre>
class Foo
end
Foo.autoload :Bar, '/tmp/foo'
p Foo::Bar #=&gt; Foo::Bar
</pre>
<p>
以下のように、autoload したライブラリがネストした定数を定義しない場
合、一見、正常に動作しているように見えるので注意が必要です(警告メッ
セージが出ています)。
</p>
<pre>
------- /tmp/bar.rb ---------
class Bar
end
----- end of /tmp/bar.rb ----

class Foo
  autoload :Bar, '/tmp/bar.rb'
end
p Foo::Bar
p Foo.autoload?(:Bar)
#=&gt; -:4: warning: toplevel constant Bar referenced by Foo::Bar
#   Bar
#   nil
</pre>
<p>
これは以下のようにネストせずに定義したのと同じことです。
</p>
<pre>
class Foo
end
class Bar
end
p Foo::Bar
#=&gt; -:5: warning: toplevel constant Bar referenced by Foo::Bar
#   Bar
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/autoload=3f.html">Kernel.#autoload?</a>,<a href="../method/-module/i/autoload.html">Module#autoload</a>,<a href="../method/-kernel/m/require.html">Kernel.#require</a>
</p>
</dd>


<dt class="method-heading" id="M_AUTOLOAD--3F"><code>autoload?(const_name) -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/m/autoload=3f.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-autoload-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
const_name が <a href="../method/-kernel/m/autoload.html">Kernel.#autoload</a> 設定されているか調べます。
</p>
<p>
autoload 設定されていて、autoload 定数がまだ定義されてない(ロードされていない)
ときにそのパス名を返します。
</p>
<p>
autoload 設定されていないか、ロード済みなら nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] const_name:</dt>
<dd>
定数をString または Symbol で指定します。
</dd>
</dl>
<pre>
------- /tmp/foo.rb ---------
class Foo
  class Bar
  end
end
----- end of /tmp/foo.rb ----

class Foo
end
p Foo.autoload?(:Bar)         #=&gt; nil
Foo.autoload :Bar, '/tmp/foo'
p Foo.autoload?(:Bar)         #=&gt; &quot;/tmp/foo&quot;
p Foo::Bar                    #=&gt; Foo::Bar
p Foo.autoload?(:Bar)         #=&gt; nil
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/autoload.html">Kernel.#autoload</a>
</p>
</dd>


<dt class="method-heading" id="M_BINDING"><code>binding -&gt; Binding</code><span class="permalink">[<a href="../method/-kernel/m/binding.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-binding">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
変数・メソッドなどの環境情報を含んだ <a href="../class/-binding.html">Binding</a> オブジェクトを
生成して返します。通常、<a href="../method/-kernel/m/eval.html">Kernel.#eval</a> の第二引数として使います。
</p>
<pre>
def foo
  a = 1
  binding
end

eval(&quot;p a&quot;, foo)  #=&gt; 1
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/eval.html">Kernel.#eval</a>,<a href="../method/-object/c/-t-o-p-l-e-v-e-l_-b-i-n-d-i-n-g.html">Object::TOPLEVEL_BINDING</a>
</p>
</dd>


<dt class="method-heading" id="M_BLOCK_GIVEN--3F"><code>block_given? -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/m/block_given=3f.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-block_given-3F">rdoc</a>]</span></dt>
<dt class="method-heading"><code>iterator? -&gt; bool</code></dt>
<dd class="method-description">
<p>
メソッドにブロックが与えられていれば真を返します。
</p>
<p>
このメソッドはカレントコンテキストにブロックが与えられているかを調べるので、
メソッド内部以外で使っても単に false を返します。
</p>
<p>
iterator? は （ブロックが必ずイテレートするとはいえないので）推奨されていないの
で block_given? を使ってください。
</p>
<pre>
def check
  if block_given?
    puts &quot;Block is given.&quot;
  else
    puts &quot;Block isn't given.&quot;
  end
end
check{} #=&gt; Block is given.
check #=&gt; Block isn't given.
</pre>
</dd>


<dt class="method-heading" id="M_CALLER"><code>caller(start = 1) -&gt; [String] | nil</code><span class="permalink">[<a href="../method/-kernel/m/caller.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-caller">rdoc</a>]</span></dt>
<dt class="method-heading"><code>caller(start, length) -&gt; [String] | nil</code></dt>
<dt class="method-heading"><code>caller(range) -&gt; [String] | nil</code></dt>
<dd class="method-description">
<p>
start 段上の呼び出し元の情報を <a href="../method/-kernel/v/=40.html">$@</a>
の形式のバックトレース(文字列の配列)として返します。
</p>
<p>
トップレベルでは空の配列を返します。caller の戻り値を <a href="../method/-kernel/v/=40.html">$@</a> に代入することで
例外の発生位置を設定できます。
</p>
<p>
引数で指定した値が範囲外の場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] start:</dt>
<dd>
long の範囲を超えない正の整数でスタックレベルを指定します。
</dd>
<dt class='method-param'>[PARAM] length:</dt>
<dd>
取得するスタックの個数を指定します。
</dd>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
取得したいスタックの範囲を示す <a href="../class/-range.html">Range</a> オブジェクトを指定します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/set_trace_func.html">Kernel.#set_trace_func</a>,<a href="../method/-kernel/m/raise.html">Kernel.#raise</a>,
     <a href="../method/-kernel/m/caller_locations.html">Kernel.#caller_locations</a>
</p>
<pre>
def foo
  p caller(0)
  p caller(1)
  p caller(2)
  p caller(3)
  p caller(4)
end

def bar
  foo
end

bar

#=&gt; [&quot;-:2:in `foo'&quot;, &quot;-:10:in `bar'&quot;, &quot;-:13:in `&lt;main&gt;'&quot;]
#   [&quot;-:10:in `bar'&quot;, &quot;-:13:in `&lt;main&gt;'&quot;]
#   [&quot;-:13:in `&lt;main&gt;'&quot;]
#   []
#   nil
</pre>
<p>
以下の関数は、caller の要素から [ファイル名, 行番号, メソッド名]
を取り出して返します。
</p>
<pre>
def parse_caller(at)
  if /^(.+?):(\d+)(?::in `(.*)')?/ =~ at
    file = $1
    line = $2.to_i
    method = $3
    [file, line, method]
  end
end

def foo
  p parse_caller(caller.first)
end

def bar
  foo
  p parse_caller(caller.first)
end

bar
p parse_caller(caller.first)

#=&gt; [&quot;-&quot;, 15, &quot;bar&quot;]
#   [&quot;-&quot;, 19, nil]
#   nil
</pre>
<p>
以下は、<a href="../method/-kernel/v/-d-e-b-u-g.html">$DEBUG</a> が真の場合に役に立つ debug 関数
のサンプルです。
</p>
<pre>
$DEBUG = true

def debug(*args)
  p [caller.first, *args] if $DEBUG
end

debug &quot;debug information&quot;

#=&gt; [&quot;-:7&quot;, &quot;debug information&quot;]
</pre>
</dd>


<dt class="method-heading" id="M_CALLER_LOCATIONS"><code>caller_locations(start = 1, length = nil) -&gt; [Thread::Backtrace::Location] | nil</code><span class="permalink">[<a href="../method/-kernel/m/caller_locations.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-caller_locations">rdoc</a>]</span></dt>
<dt class="method-heading"><code>caller_locations(range) -&gt; [Thread::Backtrace::Location] | nil</code></dt>
<dd class="method-description">
<p>
現在のフレームを <a href="../class/-thread=3a=3a-backtrace=3a=3a-location.html">Thread::Backtrace::Location</a> の配列で返します。引
数で指定した値が範囲外の場合は nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] start:</dt>
<dd>
開始フレームの位置を数値で指定します。
</dd>
<dt class='method-param'>[PARAM] length:</dt>
<dd>
取得するフレームの個数を指定します。
</dd>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
取得したいフレームの範囲を示す <a href="../class/-range.html">Range</a> オブジェクトを指定します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../class/-thread=3a=3a-backtrace=3a=3a-location.html">Thread::Backtrace::Location</a>, <a href="../method/-kernel/m/caller.html">Kernel.#caller</a>
</p>
</dd>


<dt class="method-heading" id="M_CATCH"><code>catch {|tag| .... } -&gt; object</code><span class="permalink">[<a href="../method/-kernel/m/catch.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-catch">rdoc</a>]</span></dt>
<dt class="method-heading"><code>catch(tag) {|tag| .... } -&gt; object</code></dt>
<dd class="method-description">
<p>
<a href="../method/-kernel/m/throw.html">Kernel.#throw</a>との組み合わせで大域脱出を行います。 catch はブロックを実行します。
</p>
<p>
ブロックの実行中に tag と同一のオブジェクトを引数とする <a href="../method/-kernel/m/throw.html">Kernel.#throw</a> が行われた
場合は、その throw の第二引数を戻り値として、ブロックの実行を終了します。
</p>
<p>
主にネストしたループから一気に脱出するのに使用します。
</p>
<p>
引数を省略した場合、タグとなるオブジェクトが内部で生成され、ブロックパラメータ tag に
渡されます。
</p>
<dl>
<dt class='method-param'>[PARAM] tag:</dt>
<dd>
タグとなる任意のオブジェクトです。
</dd>
<dt>[RETURN]</dt>
<dd>
ブロックの返り値か、対応するthrowの第二引数を返り値として返します。
</dd>
</dl>
<pre>
result = catch do |tag|
  for i in 1..2
    for j in 1..2
      for k in 1..2
        throw tag, k
      end
    end
  end
end

p result #=&gt; 1
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/throw.html">Kernel.#throw</a>
</p>
</dd>


<dt class="method-heading" id="M_CHOMP"><code>chomp(rs = $/) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/chomp.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-chomp">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
$_.chomp とほぼ同じですが、置換が発生したときは、$_の内容を置き換える点が異なります。
コマンドラインオプションで -p または -n を指定した時のみ定義されます。
</p>
<p>
暗号的になりすぎるきらいがあるため、このメソッドの使用は推奨されていません。
今後はより明示的な $_.chomp を使ってください。
</p>
<p>
$_.chomp とこのメソッド chomp は以下の点で違いがあります。
</p>
<ul>
<li>chomp は $_ の値をコピーして、コピーの方を更新し、
$_ に再代入します。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
末尾から削除する改行コードを指定します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-string/i/chomp.html">String#chomp</a>,<a href="../method/-kernel/v/_.html">$_</a>,<a href="../method/-kernel/v/=2f.html">$/</a>
</p>
</dd>


<dt class="method-heading" id="M_CHOP"><code>chop -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/chop.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-chop">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
$_.chop とほぼ同じですが、置換が発生したときは、$_の内容を置き換える点が異なります。
コマンドラインオプションで -p または -n を指定した時のみ定義されます。
</p>
<p>
暗号的になりすぎるきらいがあるため、このメソッドの使用は推奨されていません。
今後はより明示的な $_.chop を使ってください。
</p>
<p>
$_.chopとこのメソッド chop は以下の点で違いがあります。
</p>
<ul>
<li>chop は $_ の値をコピーして、コピーの方を更新し、
$_ に再代入します。</li>
</ul>
<p>
[SEE_ALSO] <a href="../method/-string/i/chop.html">String#chop</a>,<a href="../method/-kernel/v/_.html">$_</a>
</p>
</dd>


<dt class="method-heading" id="M_EVAL"><code>eval(expr) -&gt; object</code><span class="permalink">[<a href="../method/-kernel/m/eval.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-eval">rdoc</a>]</span></dt>
<dt class="method-heading"><code>eval(expr, bind, fname = &quot;(eval)&quot;, lineno = 1) -&gt; object</code></dt>
<dd class="method-description">
<p>
文字列 expr を Ruby プログラムとして評価してその結果を返しま
す。第2引数に
<a href="../class/-binding.html">Binding</a> オブジェクトを与えた場合、
そのオブジェクトを生成したコンテキストで文字列を評価します。
</p>
<p>
expr の中のローカル変数の扱いはブロックの場合と同じです。すなわち、eval
実行前に補足されていた変数は eval 実行後にブロック外に持ち出せます。
</p>
<p>
fname と lineno が与えられた場合には、ファイル
fname の行番号 lineno から文字列 expr が書かれているかのように
コンパイルされます。スタックトレースの表示などを差し替えることが
できます。
</p>
<p>
bind によらずに特定のオブジェクトのコンテキストで expr を評価したい場合、
<a href="../method/-module/i/module_eval.html">Module#module_eval</a>, <a href="../method/-basic-object/i/instance_eval.html">BasicObject#instance_eval</a> が使えます。
</p>
<dl>
<dt class='method-param'>[PARAM] expr:</dt>
<dd>
評価する文字列です。
</dd>
<dt class='method-param'>[PARAM] bind:</dt>
<dd>
評価コンテキストです。
</dd>
<dt class='method-param'>[PARAM] fname:</dt>
<dd>
スタックトレースに表示するファイル名です。
</dd>
<dt class='method-param'>[PARAM] lineno:</dt>
<dd>
文字列 expr が書かれていると想定する先頭の行番号を整数で指定します。
</dd>
</dl>
<pre>
a = nil
eval('a = RUBY_RELEASE_DATE')
p a #=&gt; &quot;2007-03-13&quot;

eval('def fuga;p 777 end')
fuga #=&gt; 777

eval('raise RuntimeError', binding, 'XXX.rb', 4)
#=&gt; XXX.rb:4: RuntimeError (RuntimeError)
#       from ..:9
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/binding.html">Kernel.#binding</a>,<a href="../method/-module/i/module_eval.html">Module#module_eval</a>,<a href="../method/-basic-object/i/instance_eval.html">BasicObject#instance_eval</a>,<a href="../method/-object/i/method.html">Object#method</a>,<a href="../method/-object/i/send.html">Object#send</a>
</p>
</dd>


<dt class="method-heading" id="M_EXEC"><code>exec(command, options={}) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/exec.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-exec">rdoc</a>]</span></dt>
<dt class="method-heading"><code>exec(env, command, options={}) -&gt; ()</code></dt>
<dd class="method-description">
<p>
引数で指定されたコマンドを実行します。
</p>
<p>
プロセスの実行コードはそのコマンド(あるいは shell)になるので、
起動に成功した場合、このメソッドからは戻りません。
</p>
<h4 >引数の解釈</h4>
<p>
この形式では command が shell のメタ文字
</p>
<pre>
  * ? {} [] &lt;&gt; () ~ &amp; | \ $ ; ' ` &quot; \n
</pre>
<p>
を含む場合、shell 経由で実行されます。
そうでなければインタプリタから直接実行されます。
</p>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
コマンドを文字列で指定します。
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
起動に失敗し、ruby インタプリタに制御が戻った場合に発生します。
</dd>
</dl>
<pre>
# a.rb
puts '実行前'
exec 'echo &quot;実行中&quot;'
puts '実行後'
</pre>
<p>
上記のスクリプトを実行すると以下のようになります。
</p>
<pre>
$ ruby a.rb
実行前
実行中
# '実行後' は表示されない
</pre>
</dd>
<dt class="method-heading" id="M_EXEC"><code>exec(program, *args, options={}) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/exec.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-exec">rdoc</a>]</span></dt>
<dt class="method-heading"><code>exec(env, program, *args, options={}) -&gt; ()</code></dt>
<dd class="method-description">
<p>
引数で指定されたコマンドを実行します。
</p>
<p>
プロセスの実行コードはそのコマンド(あるいは shell)になるので、
起動に成功した場合、このメソッドからは戻りません。
</p>
<p>
この形式では、常に shell を経由せずに実行されます。
</p>
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/exec.html">exec(3)</a> でコマンドを実行すると、
元々のプログラムの環境をある程度(ファイルデスクリプタなど)引き継ぎます。
Hash を options として渡すことで、この挙動を変更できます。
詳しくは <a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a> を参照してください。
</p>
<h4 >引数の解釈</h4>
<p>
この形式で呼び出した場合、空白や shell のメタキャラクタも
そのまま program の引数に渡されます。
先頭の引数が2要素の配列であった場合、第1要素の文字列が実際に
起動するプログラムのパスであり、第2要素が「みせかけ」のプロ
グラム名になります。
また、第1要素はフルパスで指定しなくても環境変数 PATH から探します。
</p>
<dl>
<dt class='method-param'>[PARAM] program:</dt>
<dd>
文字列か2要素の配列を指定します。
</dd>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
渡される引数です。0 個以上の文字列を指定します。
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
第一引数が配列かつ要素数が 2 でない場合に発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
起動に失敗し、ruby インタプリタに制御が戻った場合に発生します。
</dd>
</dl>
<p>
例
</p>
<pre>
# a.rb
exec ['sleep', 'mysleep'], '600'
</pre>
<p>
上記スクリプトを実行すると以下のようになります。
</p>
<pre>
$ ruby a.rb
## sleep してるので制御が戻ってこない。別の仮想端末に切替えて以下を実行
$ ps aux|grep sleep
xxxx    32754  0.0  0.0   2580   468 pts/3    S+   22:01   0:00 mysleep 600
xxxx    32761  0.0  0.0   2824   792 pts/6    S+   22:01   0:00 grep sleep
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/system.html">Kernel.#system</a>,<a href="../method/-kernel/m/=60.html">Kernel.#`</a>,<a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a>,<a href="../method/-kernel/m/fork.html">Kernel.#fork</a>,<a href="../method/-i-o/s/popen.html">IO.popen</a>,<a href="../method/-i-o/s/pipe.html">IO.pipe</a>,<a href="../method/-kernel/m/open.html">Kernel.#open</a>,<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/exec.html">exec(3)</a>
</p>
</dd>


<dt class="method-heading" id="M_EXIT"><code>exit(status = true) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/exit.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-exit">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Rubyプログラムの実行を終了します。status として整
数が与えられた場合、その値を Ruby コマンドの終了ステータスとします。
デフォルトの終了ステータスは 0(正常終了)です。
</p>
<p>
status が true の場合 0、 false の場合 1 を引数に指定したとみなされます。この値はCレベルの定数
EXIT_SUCCESS、EXIT_FAILURE の値なので、正確には環境依存です。
</p>
<p>
exit は例外 <a href="../class/-system-exit.html">SystemExit</a> を発生させ
ることによってプログラムの実行を終了させますので、
必要に応じて begin 節で捕捉することができます。
</p>
<dl>
<dt class='method-param'>[PARAM] status:</dt>
<dd>
終了ステータスを整数か true または false で与えます。
</dd>
</dl>
<pre>
puts 'start'
begin
  puts 'start1...'
  exit
rescue SystemExit =&gt; err
  puts &quot;end1 with #{err.inspect}&quot;
end

begin
  puts 'start2...'
  exit
ensure
  puts 'end2...'
end
puts 'end' #実行されない

#=&gt; start
#   start1...
#   end1 with #&lt;SystemExit: exit&gt;
#   start2...
#   end2...
#終了ステータス:0
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/exit=21.html">Kernel.#exit!</a>,<a href="../method/-kernel/m/abort.html">Kernel.#abort</a>, <a href="../doc/spec=2fcontrol.html#begin">制御構造/begin</a>
</p>
</dd>


<dt class="method-heading" id="M_EXIT--21"><code>exit!(status = false) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/exit=21.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-exit-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Rubyプログラムの実行を即座に終了します。
status として整数が与えられた場合、その値を Ruby コマンドの終了ステータスとします。
デフォルトの終了ステータスは 1 です。
</p>
<p>
status が true の場合 0、 false の場合 1 を引数に指定したとみなされます。この値はCレベルの定数
EXIT_SUCCESS、EXIT_FAILURE の値なので、正確には環境依存です。
</p>
<p>
exit! は exit とは違って、例外処理などは一切行ないませ
ん。 <a href="../method/-kernel/m/fork.html">Kernel.#fork</a> の後、子プロセスを終了させる時などに用
いられます。
</p>
<dl>
<dt class='method-param'>[PARAM] status:</dt>
<dd>
終了ステータスを整数か true または false で与えます。
</dd>
</dl>
<pre>
STDOUT.sync = true #表示前に終了しないようにする
puts 'start'
begin
  puts 'start1...'
  exit!
ensure
  puts 'end1...' #実行されない
end
puts 'end' #実行されない

#=&gt; start
#   start1...
#終了ステータス:1
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/exit.html">Kernel.#exit</a>,<a href="../method/-kernel/m/abort.html">Kernel.#abort</a>
</p>
</dd>


<dt class="method-heading" id="M_FAIL"><code>raise -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/fail.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-fail">rdoc</a>]</span></dt>
<dt class="method-heading"><code>fail -&gt; ()</code></dt>
<dt class="method-heading"><code>raise(message) -&gt; ()</code></dt>
<dt class="method-heading"><code>fail(message) -&gt; ()</code></dt>
<dt class="method-heading"><code>raise(error_type, message = nil, backtrace = caller(0)) -&gt; ()</code></dt>
<dt class="method-heading"><code>fail(error_type, message = nil, backtrace = caller(0)) -&gt; ()</code></dt>
<dd class="method-description">
<p>
例外を発生させます。
発生した例外は変数 <a href="../method/-kernel/v/=21.html">$!</a> に格納されます。また例外が
発生した時のスタックトレースは変数 <a href="../method/-kernel/v/=40.html">$@</a> に格納され
ます。発生した例外は rescue 節で捕捉できます。
</p>
<p>
引数無しの場合は、同スレッドの同じブロック内で最後に rescue された
例外オブジェクト (<a href="../method/-kernel/v/=21.html">$!</a>) を再発生させます。そのような
例外が存在しないが自身は捕捉されている時には例外 <a href="../class/-runtime-error.html">RuntimeError</a> を発生させます。
</p>
<pre>
begin
  open(&quot;nonexist&quot;)
rescue
  raise   #=&gt; `open': No such file or directory - &quot;nonexist&quot; (Errno::ENOENT)
end
</pre>
<p>
引数を渡した場合は、例外メッセージ message を持った error_type の示す例外(省略時 RuntimeError)を
発生させます。
</p>
<p>
error_type として例外ではないクラスやオブジェクトを指定した場合、
そのオブジェクトの exception メソッドが返す値を発生する例外にします。
その際、exception メソッドに引数として変数 message を渡すことができます。
</p>
<dl>
<dt class='method-param'>[PARAM] error_type:</dt>
<dd>
発生させる例外を例外クラスまたは例外クラスのインスタンスで指定します。
</dd>
<dt class='method-param'>[PARAM] message:</dt>
<dd>
例外のメッセージとなる文字列です。
</dd>
<dt class='method-param'>[PARAM] backtrace:</dt>
<dd>
例外発生時のスタックトレースで、<a href="../method/-kernel/m/caller.html">Kernel.#caller</a> の戻り値と同じ
形式で指定しなければいけません。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
exception メソッドが例外オブジェクトを返さなかった場合に発生します。
</dd>
</dl>
<p>
例外の捕捉の例を示します。
</p>
<pre>
#例1
begin
  raise NameError,&quot;!!error!!&quot;
rescue ArgumentError =&gt; err
rescue NameError =&gt; err
rescue TypeError =&gt; err
ensure
  p err #=&gt; #&lt;NameError: !!error!!&gt;
end

#例2
def foo num
  print 'in method.'
  raise &quot;error!!&quot; if num &lt;= 9
rescue RuntimeError
  num += 10
  print 'in rescue.'
  retry
else
  print 'in else.'
ensure
  print &quot;in ensure.\n&quot;
end

foo(4) #=&gt; in method.in rescue.in method.in else.in ensure.

#例3
class MyException
  def exception(mesg=nil)
    SecurityError.new(mesg)
  end
end

begin
  raise MyException.new
rescue SecurityError
  p $! #=&gt; #&lt;SecurityError: SecurityError&gt;
end
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/caller.html">Kernel.#caller</a>
</p>
</dd>


<dt class="method-heading" id="M_FORK"><code>fork -&gt; Integer | nil</code><span class="permalink">[<a href="../method/-kernel/m/fork.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-fork">rdoc</a>]</span></dt>
<dt class="method-heading"><code>fork { ... } -&gt; Integer | nil</code></dt>
<dd class="method-description">
<p>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fork.html">fork(2)</a> システムコールを使ってプロセスの複製を作
ります。親プロセスでは子プロセスのプロセスIDを、子プロセスでは
nil を返します。ブロックを指定して呼び出した場合には、生成し
た子プロセスでブロックを評価します。
</p>
<p>
fork 前に STDOUT と STDERR を <a href="../method/-i-o/i/flush.html">IO#flush</a> します。
</p>
<dl>
<dt>[EXCEPTION] NotImplementedError:</dt>
<dd>
実行環境がこのメソッドに対応していないとき発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-i-o/s/popen.html">IO.popen</a>,<a href="../method/-i-o/s/pipe.html">IO.pipe</a>, <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/fork.html">fork(2)</a>
</p>
</dd>


<dt class="method-heading" id="M_FORMAT"><code>sprintf(format, *arg) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/format.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-format">rdoc</a>]</span></dt>
<dt class="method-heading"><code>format(format, *arg) -&gt; String</code></dt>
<dd class="method-description">
<p>
format 文字列を C 言語の sprintf と同じように解釈し、
引数をフォーマットした文字列を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] format:</dt>
<dd>
フォーマット文字列です。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
フォーマットされる引数です。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/printf.html">Kernel.#printf</a>,<a href="../method/-time/i/strftime.html">Time#strftime</a>,<a href="../method/-date/s/strptime.html">Date.strptime</a>
</p>
<h4 >sprintf フォーマット</h4>
<p>
Ruby の sprintf フォーマットは基本的に C 言語の <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/sprintf.html">sprintf(3)</a>
のものと同じです。ただし、short や long などの C 特有の型に対する修飾子が
ないこと、2進数の指示子(%b, %B)が存在すること、sprintf のすべての方言をサ
ポートしていないこと(%': 3桁区切り)などの違いがあります。
</p>
<p>
Ruby には整数の大きさに上限がないので、%b, %B, %o, %x, %X
に負の数を与えると (左側に無限に1が続くとみなせるので)
..f のような表示をします。絶対値に符号を付けた形式
で出力するためには %+x、% x のように指定します。
</p>
<p>
以下は sprintf フォーマットの書式です。[] で囲まれた部分は省略可
能であることを示しています。
</p>
<pre>
%[nth$][フラグ][幅][.精度]指示子
%[&lt;name&gt;][フラグ][幅][.精度]指示子
</pre>
<p>
`%' 自身を出力するには `%%' とします。
</p>
<p>
以下それぞれの要素に関して説明します。
</p>
<h4 >フラグ</h4>
<p>
フラグには #, +, ' '(スペース), -, 0 の5種類があります。
</p>
<dl>
<dt>#</dt>
<dd>
<p>
2進、8進、16進の指示子(b, B, o, x, X) ではそれぞれプレフィック
スとして &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; を付加します。
C 言語と同様引数が 0 の場合にはプレフィックスが付加されません。
</p>
<pre>
  p sprintf(&quot;%#b&quot;, 10) #=&gt; &quot;0b1010&quot;
  p sprintf(&quot;%#B&quot;, 10) #=&gt; &quot;0B1010&quot;
  p sprintf(&quot;%#b&quot;, 0)  #=&gt; &quot;0&quot;
  p sprintf(&quot;%#o&quot;, 10) #=&gt; &quot;012&quot;
  p sprintf(&quot;%#x&quot;, 10) #=&gt; &quot;0xa&quot;
  p sprintf(&quot;%#X&quot;, 10) #=&gt; &quot;0XA&quot;
</pre>
<p>
浮動小数点数 (f, e, E, g, G) に対しては必ず出力に&quot;.&quot;をつけます。
</p>
<pre>
  p sprintf(&quot;%.0f&quot;, 10) #=&gt; &quot;10&quot;
  p sprintf(&quot;%#.0f&quot;, 10) #=&gt; &quot;10.&quot;
  p sprintf(&quot;%.0e&quot;, 10) #=&gt; &quot;1e+01&quot;
  p sprintf(&quot;%#.0e&quot;, 10) #=&gt; &quot;1.e+01&quot;
</pre>
<p>
また g, G では上記に加えて末尾の余分な0が残ります。
</p>
<pre>
  p sprintf(&quot;%.05g&quot;, 10) #=&gt; &quot;10&quot;
  p sprintf(&quot;%#.05g&quot;, 10) #=&gt; &quot;10.000&quot;
</pre>
</dd>
<dt>+</dt>
<dd>
<p>
出力文字列を符号付きにします。特に正の数では`+'が付加されます。
数値の指示子
(d, i, b, B, o, x, X, u, f, e, E, g, G)
に対してだけ意味を持ちます。
また、特に b, B, o, x, X, u に対しては、負数に対して &quot;-&quot;
を付加することを示します。
</p>
<pre>
  p sprintf(&quot;%d&quot;, 1)   #=&gt; &quot;1&quot;
  p sprintf(&quot;%+d&quot;, 1)  #=&gt; &quot;+1&quot;

  p sprintf(&quot;%x&quot;, -1)  #=&gt; &quot;..f&quot;  # &quot;..&quot; は無限に f が続くことを表している
  p sprintf(&quot;%+x&quot;, -1) #=&gt; &quot;-1&quot;
</pre>
</dd>
<dt>' '(スペース)</dt>
<dd>
<p>
`+' と同じですが正の符号 `+' の代わりに空白を用います。数値の指示子
(d, i, b, B, o, x, X, u, f, e, E, g, G)
に対してだけ意味を持ちます。
</p>
<pre>
  p sprintf(&quot;%d&quot;, 1)   #=&gt; &quot;1&quot;
  p sprintf(&quot;%+d&quot;, 1)  #=&gt; &quot;+1&quot;
  p sprintf(&quot;% d&quot;, 1)  #=&gt; &quot; 1&quot;

  p sprintf(&quot;%x&quot;, -1)  #=&gt; &quot;..f&quot;
  p sprintf(&quot;% x&quot;, 1)  #=&gt; &quot; 1&quot;
  p sprintf(&quot;% x&quot;, -1) #=&gt; &quot;-1&quot;
</pre>
</dd>
<dt>-</dt>
<dd>
<p>
出力を左詰めにします幅の指定がなければ
意味がありません。
</p>
</dd>
<dt>0</dt>
<dd>
<p>
出力が右詰めの場合に余った部分に空白の代わりに &quot;0&quot; を詰めます。
</p>
<p>
数値の指示子の一部(d, i, b, B, o, x, X, u, f, g, G)に対し
てだけ意味を持ちます(e, E には意味がない)
</p>
<pre>
  p sprintf(&quot;%010d&quot;, 10)   #=&gt; &quot;0000000010&quot;
</pre>
<p>
`#' と一緒に指定した場合の出力は以下のようになります。
</p>
<pre>
  p sprintf(&quot;%#010x&quot;, 10)  #=&gt; &quot;0x0000000a&quot;
  p sprintf(&quot;%#010o&quot;, 10)  #=&gt; &quot;0000000012&quot;
  p sprintf(&quot;%#010b&quot;, 10)  #=&gt; &quot;0b00001010&quot;
</pre>
<p>
これは、以下と同じです。
</p>
<pre>
  p sprintf(&quot;%#10.8x&quot;, 10) #=&gt; &quot;0x0000000a&quot;
  p sprintf(&quot;%#10.9o&quot;, 10) #=&gt; &quot;0000000012&quot;
  p sprintf(&quot;%#10.8b&quot;, 10) #=&gt; &quot;0b00001010&quot;
</pre>
<p>
通常は、以下のようになります。
</p>
<pre>
  p sprintf(&quot;%#10x&quot;, 10)   #=&gt; &quot;       0xa&quot;
  p sprintf(&quot;%#10o&quot;, 10)   #=&gt; &quot;       012&quot;
  p sprintf(&quot;%#10b&quot;, 10)   #=&gt; &quot;    0b1010&quot;
</pre>
</dd>
</dl>
<h4 >幅</h4>
<p>
0以外の数字で始まる数字列は幅指定になります。幅は生成文字列の長さを示
します。後述の精度の値によらずこの幅分だ
けの文字列が生成されます。
</p>
<p>
幅の指定はフラグで付与される &quot; &quot;, &quot;+&quot;,
&quot;-&quot;, &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; の長さも考慮されます。
</p>
<pre>
p sprintf(&quot;%+5d&quot;, 11)  #=&gt; &quot;  +11&quot;
p sprintf(&quot;%+-5d&quot;, 11) #=&gt; &quot;+11  &quot;
p sprintf(&quot;%+05d&quot;, 11) #=&gt; &quot;+0011&quot;
</pre>
<p>
幅は「最低限必要な幅」の指定になります。結果の文字列が指定した幅を超
える場合は幅の指定は無効になります。
</p>
<p>
幅として `*' を指定すると幅の値を引数から得ることになります。
</p>
<pre>
p sprintf(&quot;%#05x&quot;, 10)    #=&gt; &quot;0x00a&quot;
p sprintf(&quot;%#0*x&quot;, 5, 10) #=&gt; &quot;0x00a&quot;
</pre>
<h4 >精度</h4>
<p>
&quot;.&quot; の後に続く数字列は精度を表します(&quot;.&quot; のみの場合 &quot;.0&quot; と同じです)。精度は
整数の指示子
(d, i, b, B, o, x, X, u)
に対しては、数値列部分の長さを意味します。
</p>
<pre>
p sprintf(&quot;%10.5d&quot;, 1)  #=&gt; &quot;     00001&quot;
p sprintf(&quot;%#10.5x&quot;, 1) #=&gt; &quot;   0x00001&quot;
p sprintf(&quot;%+10.5x&quot;, 1) #=&gt; &quot;    +00001&quot;
</pre>
<p>
浮動小数点数の指示子
(f)
に対しては小数部の桁数を意味します。
</p>
<pre>
p sprintf(&quot;%10.5f&quot;, 1)   #=&gt; &quot;   1.00000&quot;
p sprintf(&quot;%10.5f&quot;, 10)  #=&gt; &quot;  10.00000&quot;
</pre>
<p>
浮動小数点数の指示子
(e, E, g, G)
に対しては有効桁数を意味します。
</p>
<pre>
p sprintf(&quot;%10.5e&quot;, 1)   #=&gt; &quot;1.00000e+00&quot;
p sprintf(&quot;%10.5e&quot;, 10)  #=&gt; &quot;1.00000e+01&quot;
p sprintf(&quot;%10.5g&quot;,  10)  #=&gt; &quot;        10&quot;
p sprintf(&quot;%#10.5G&quot;, 10)  #=&gt; &quot;    10.000&quot;
</pre>
<p>
文字列の指示子(s, p)
に対しては引数の文字列のうち指定した数を超える分を切り捨てます。
幅と精度を同じ値にすれば、どのような引数に対してもその
長さだけの出力を行うことになります。
</p>
<pre>
p sprintf(&quot;%10.2s&quot;, &quot;foo&quot;)  #=&gt; &quot;        fo&quot;

p sprintf(&quot;%5.5s&quot;, &quot;foo&quot;)     #=&gt; &quot;  foo&quot;
p sprintf(&quot;%5.5s&quot;, &quot;foobar&quot;)  #=&gt; &quot;fooba&quot;
</pre>
<p>
精度として `*' を指定すると精度の値を引数から得ることになります。
</p>
<pre>
p sprintf(&quot;%.5s&quot;, &quot;foobar&quot;)    #=&gt; &quot;fooba&quot;
p sprintf(&quot;%.*s&quot;, 5, &quot;foobar&quot;) #=&gt; &quot;fooba&quot;
</pre>
<h4 >指示子</h4>
<p>
指示子は引数の型の解釈を示します。指示子を省略することはできません。
指示子には大きく分けて
</p>
<ul>
<li>文字列を表す指示子: c, s, p</li>
<li>整数を表す指示子: d, i, u, b, B, o, x, X,</li>
<li>浮動小数点数を表す指示子: f, g, e, E, G</li>
</ul>
<p>
があります
</p>
<dl>
<dt>c</dt>
<dd>
<p>
引数の数値(0〜255)を文字コードとみなして対応する文字を出力します。
引数が数値以外のオブジェクトの場合 to_int メソッドによる変換を試みます。
引数として範囲内の一文字の文字列も受けつけます。文字そのものを出力します。
</p>
<pre>
  p sprintf(&quot;%c&quot;, 97)  #=&gt; &quot;a&quot;
  p sprintf(&quot;%c&quot;, 'a') #=&gt; &quot;a&quot;
</pre>
<p>
フラグ `-' と幅 の指定だけが意味を持ちます。
</p>
</dd>
<dt>s</dt>
<dd>
<p>
文字列を出力します。
</p>
<p>
引数が <a href="../class/-string.html">String</a> オブジェクトでなければ to_s メソッドにより文字列化
したものを引数として扱います。
</p>
</dd>
<dt>p</dt>
<dd>
<p>
<a href="../method/-object/i/inspect.html">Object#inspect</a> の結果を出力します。
</p>
<pre>
  p sprintf(&quot;%s&quot;, /e+/)  #=&gt; &quot;(?-mix:e+)&quot;
  p sprintf(&quot;%p&quot;, /e+/)  #=&gt; &quot;/e+/&quot;
</pre>
</dd>
<dt>d</dt>
<dt>i</dt>
<dd>
<p>
引数の数値を10進表現の整数として出力します。
</p>
<p>
引数が整数でなければ関数 <a href="../method/-kernel/m/-integer.html">Kernel.#Integer</a> と同じ規則で整数に
変換されます。
</p>
<pre>
  p sprintf(&quot;%d&quot;, -1) #=&gt; &quot;-1&quot;
  p sprintf(&quot;%d&quot;, 3.1) #=&gt; &quot;3&quot;
  p sprintf(&quot;%d&quot;, '0b1010') #=&gt; &quot;10&quot;
</pre>
</dd>
<dt>u</dt>
<dd>
<p>
引数の数値を符号なし整数とみなして10進表現の整数として出力します。
</p>
<pre>
  p sprintf(&quot;%u&quot;, '0b1010') #=&gt; &quot;10&quot;
  p sprintf(&quot;%u&quot;, -1) #=&gt; &quot;-1&quot;
</pre>
</dd>
<dt>b</dt>
<dt>B</dt>
<dt>o</dt>
<dt>x</dt>
<dt>X</dt>
<dd>
<p>
整数をそれぞれ2進、2進(大文字)、8進、16進、16進(大文字)表現の文字列で出力します。
</p>
<p>
`#' フラグを指定すれば &quot;0b&quot;, &quot;0B&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;0X&quot; を先頭に付加します。
</p>
<p>
`+', ` ' フラグがない場合、負の数には &quot;..&quot; が先頭(`#' フラグがあれば
&quot;0x&quot; などの後)に付加されます。これは最上位桁の文字が無限に続くことを
意味し、2の補数表現で負の数を表しています。
</p>
<pre>
   p sprintf(&quot;%#b&quot;, 10)    #=&gt; &quot;0b1010&quot;
   p sprintf(&quot;%#B&quot;, 10)    #=&gt; &quot;0B1010&quot;
   p sprintf(&quot;%#o&quot;, 10)    #=&gt; &quot;012&quot;
   p sprintf(&quot;%#x&quot;, 10)    #=&gt; &quot;0xa&quot;
   p sprintf(&quot;%#X&quot;, 10)    #=&gt; &quot;0XA&quot;

   # 負の数に対して &quot;..&quot; が付加されます
   p sprintf(&quot;%#b&quot;, -1)    #=&gt; &quot;0b..1&quot;
   p sprintf(&quot;%#o&quot;, -1)    #=&gt; &quot;0..7&quot;
   p sprintf(&quot;%#x&quot;, -1)    #=&gt; &quot;0x..f&quot;

   p sprintf(&quot;%10x&quot;, -1)   #=&gt; &quot;       ..f&quot;
   p sprintf(&quot;%-10x&quot;, -1)  #=&gt; &quot;..f       &quot;

   # ruby 1.9.1 以降では「精度」を指定した場合も、&quot;..&quot; は付加されます
   p sprintf(&quot;%.10x&quot;, -1) #=&gt; &quot;..ffffffff&quot;
</pre>
</dd>
<dt>f</dt>
<dt>e</dt>
<dt>E</dt>
<dt>g</dt>
<dt>G</dt>
<dt>a</dt>
<dt>A</dt>
<dd>
<p>
f は小数点表現(xxx.xxx)で数値を出力します。
</p>
<p>
e は指数表現(x.xxxe+xx)で数値を出力します。
</p>
<p>
g は 指数が -4 より小さいか精度以上の場合に e と同じ出力を、それ以
外では f と同じ出力を行います。ただし、小数部の末尾の0は取り除かれ
ます。
</p>
<p>
a, A は指数表現の16進数(&quot;-h.hhh±pd&quot;) で数値を出力します。ただし、<a href="../method/-float/c/-i-n-f-i-n-i-t-y.html">Float::INFINITY</a>、<a href="../method/-float/c/-n-a-n.html">Float::NAN</a> はそれぞれ 'Inf'、'NaN' になります。詳しくは <a class="external" href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/40650">[ruby-dev:40650]</a> を参照してください。
</p>
<pre>
  p sprintf(&quot;%a&quot;, -0.0)            # =&gt; &quot;-0x0p+0&quot;
  p sprintf(&quot;%a&quot;, 729.0/10)        # =&gt; &quot;0x1.239999999999ap+6&quot;
  p sprintf(&quot;%a&quot;, Float::INFINITY) # =&gt; &quot;Inf&quot;
</pre>
<p>
大文字の指示子(E, G)は出力のアルファベットを大文字にします。
</p>
<pre>
  p sprintf(&quot;%f&quot;, 1.0) #=&gt; &quot;1.000000&quot;
  p sprintf(&quot;%e&quot;, 1.0) #=&gt; &quot;1.000000e+00&quot;
  p sprintf(&quot;%g&quot;, 1.0) #=&gt; &quot;1&quot;

  p sprintf(&quot;%f&quot;, 10.1) #=&gt; &quot;10.100000&quot;
  p sprintf(&quot;%e&quot;, 10.1) #=&gt; &quot;1.010000e+01&quot;
  p sprintf(&quot;%g&quot;, 10.1) #=&gt; &quot;10.1&quot;

  p sprintf(&quot;%g&quot;, 10 ** 6)  #=&gt; &quot;1e+06&quot;
  p sprintf(&quot;%g&quot;, 10 ** -5) #=&gt; &quot;1e-05&quot;
</pre>
<p>
精度の省略値は 6 です。
</p>
<p>
無限大、NaN(Not a Number) に対する出力は以下のとおりです。
</p>
<pre>
  p sprintf(&quot;%f&quot;,  1.0/0)  #=&gt; &quot;inf&quot;
  p sprintf(&quot;%f&quot;, -1.0/0)  #=&gt; &quot;-inf&quot;
  p sprintf(&quot;%f&quot;,  0.0/0)  #=&gt; &quot;nan&quot;

  p sprintf(&quot;%E&quot;,  1.0/0)  #=&gt; &quot;INF&quot;
  p sprintf(&quot;%E&quot;, -1.0/0)  #=&gt; &quot;-INF&quot;
  p sprintf(&quot;%E&quot;,  0.0/0)  #=&gt; &quot;NAN&quot;
</pre>
<p>
f, e, E, g, G に関しては <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/sprintf.html">sprintf(3)</a> の結果を利用しています。従って出力結果は
実際にはシステムに依存することになります。
</p>
</dd>
</dl>
<h4 >引数指定</h4>
<p>
利用頻度が低いので最後に説明します。
</p>
<dl>
<dt>nth$</dt>
<dd>
<p>
nth 番目の引数のフォーマットを行うことを示します。
</p>
<pre>
  p sprintf(&quot;%d, %x, %o&quot;, 1, 2, 3) #=&gt; &quot;1, 2, 3&quot;
  p sprintf(&quot;%3$d, %2$x, %1$o&quot;, 1, 2, 3) #=&gt; &quot;3, 2, 1&quot;

  p sprintf(&quot;%1$d, %1$x, %1$o&quot;, 10) #=&gt; &quot;10, a, 12&quot;
</pre>
<p>
状況によってフォーマットを変えたいが引数の順序を変えたくない場合に使
用します。
</p>
<pre>
  case ENV['LC_TIME']
  when /^ja_JP/
    fmt = &quot;%1$d年%2$d月%3$d日&quot;
  else
    fmt = &quot;%2$02d/%03$2d/%1$02d&quot;
  end

  p sprintf(fmt, 1, 4, 22) #=&gt; &quot;04/22/01&quot;
</pre>
<p>
&quot;*&quot; の後に指定することで幅や
精度を引数で指定することもできます。
</p>
<pre>
  p sprintf(&quot;%5.2f&quot;, 1)              #=&gt; &quot; 1.00&quot;
  p sprintf(&quot;%*.*f&quot;, 5, 2, 1)        #=&gt; &quot; 1.00&quot;
  p sprintf(&quot;%1$*2$.*3$f&quot;, 1, 5, 2)  #=&gt; &quot; 1.00&quot;
</pre>
</dd>
<dt>%&lt;name&gt;</dt>
<dd>
<p>
Symbol のインスタンス name をキーとする Hash を引数にした場合、
対応する値をフォーマットして参照します。
</p>
<pre>
  p sprintf('%&lt;foo&gt;f : %&lt;bar&gt;+d', foo: 1, bar: 2) #=&gt; &quot;1.000000 : +2&quot;
</pre>
</dd>
<dt>%{name}</dt>
<dd>
<p>
Symbol のインスタンス name をキーとする Hash を引数にした場合、
対応する値をフォーマットせずに参照します。
幅や精度を指定するために使用することができます。
</p>
<pre>
  p sprintf('%{foo}f : %{bar}+d', foo: 1, bar: 2) #=&gt; &quot;1f : 2+d&quot;
</pre>
</dd>
</dl>
</dd>


<dt class="method-heading" id="M_GETS"><code>gets(rs = $/) -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/m/gets.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-gets">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-a-r-g-f.html">ARGF</a>から一行読み込んで、それを返します。
行の区切りは引数 rs で指定した文字列になります。
</p>
<p>
rs に nil を指定すると行区切りなしとみなしてファイルの内容を
すべて読み込みます。ARGVに複数のファイル名が存在する場合は1度に1ファイルずつ読み込みます。
空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします
(パラグラフモード)。
</p>
<p>
読み込んだ文字列は組み込み変数 <a href="../method/-kernel/v/_.html">$_</a> にもセットされます。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りとなる文字列です。
</dd>
<dt>[RETURN]</dt>
<dd>
ファイルの終り(EOF)に到達した時、 nil を返します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
読み込みに失敗した場合に発生します。
</dd>
</dl>
<pre>
---main.rb---
ARGV &lt;&lt; 'b.txt' &lt;&lt; 'c.txt'
p gets #=&gt; &quot;hello\n&quot;
p gets(nil) #=&gt; &quot;it\ncommon\n&quot;
p gets(&quot;&quot;) #=&gt; &quot;ARGF\n\n&quot;
p gets('、') #=&gt; &quot;スクリプトに指定した引数 (Object::ARGV を参照) をファイル名と\nみなして、&quot;
p gets #=&gt; &quot;それらのファイルを連結した 1 つの仮想ファイルを表すオブジェクトです。 \n&quot;
p gets #=&gt; nil
p readline # end of file reached (EOFError)
--- b.txt ---
hello
it
common
--- c.txt ---
ARGF

スクリプトに指定した引数 (Object::ARGV を参照) をファイル名と
みなして、それらのファイルを連結した 1 つの仮想ファイルを表すオブジェクトです。
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>,<a href="../class/-a-r-g-f.html">ARGF</a>,<a href="../method/-kernel/m/readlines.html">Kernel.#readlines</a>,<a href="../method/-kernel/m/readline.html">Kernel.#readline</a>
</p>
</dd>


<dt class="method-heading" id="M_GLOBAL_VARIABLES"><code>global_variables -&gt; [Symbol]</code><span class="permalink">[<a href="../method/-kernel/m/global_variables.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-global_variables">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
プログラム中で定義されているグローバル変数(`$'で始まる変数)名の
配列を返します。
</p>
<pre>
p global_variables #=&gt; [:$;, :$-F, :$@, ... ]
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/local_variables.html">Kernel.#local_variables</a>,<a href="../method/-object/i/instance_variables.html">Object#instance_variables</a>,<a href="../method/-module/s/constants.html">Module.constants</a>,<a href="../method/-module/i/constants.html">Module#constants</a>,<a href="../method/-module/i/class_variables.html">Module#class_variables</a>
</p>
</dd>


<dt class="method-heading" id="M_GSUB"><code>gsub(pattern, replace) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/gsub.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-gsub">rdoc</a>]</span></dt>
<dt class="method-heading"><code>gsub(pattern) {|matched| ... } -&gt; String</code></dt>
<dt class="method-heading"><code>gsub(pattern) -&gt; Enumerator</code></dt>
<dd class="method-description">
<p>
$_.gsub とほぼ同じですが、置換が発生したときは、$_の内容を置き換える点が異なります。
コマンドラインオプションで -p または -n を指定した時のみ定義されます。
</p>
<p>
暗号的になりすぎるきらいがあるため、このメソッドの使用は推奨されていません。
今後はより明示的な $_.gsub を使ってください。
</p>
<p>
$_.gsub とこのメソッド gsub は以下の点で違いがあります。
</p>
<ul>
<li>gsub は $_ の値をコピーして、コピーの方を更新し、
$_ に再代入します。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。
文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字列と置き換える文字列
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-string/i/gsub.html">String#gsub</a>,<a href="../method/-kernel/v/_.html">$_</a>
</p>
</dd>


<dt class="method-heading" id="M_LAMBDA"><code>proc { ... } -&gt; Proc</code><span class="permalink">[<a href="../method/-kernel/m/lambda.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-lambda">rdoc</a>]</span></dt>
<dt class="method-heading"><code>lambda { ... } -&gt; Proc</code></dt>
<dt class="method-heading"><code>proc -&gt; Proc</code></dt>
<dt class="method-heading"><code>lambda -&gt; Proc</code></dt>
<dd class="method-description">
<p>
与えられたブロックから手続きオブジェクト (<a href="../class/-proc.html">Proc</a> のインスタンス)
を生成して返します。<a href="../method/-proc/s/new.html">Proc.new</a> に近い働きをします。
</p>
<p>
ブロックが指定されなければ、呼び出し元のメソッドで指定されたブロック
を手続きオブジェクトとして返します。呼び出し元のメソッドがブロックなし
で呼ばれると <a href="../class/-argument-error.html">ArgumentError</a> 例外が発生します。
</p>
<p>
ただし、ブロックを指定しない呼び出しは推奨されていません。呼び出し元のメソッドで指定されたブロック
を得たい場合は明示的に &amp; 引数でうけるべきです。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
スタック上にブロックがないのにブロックを省略した呼び出しを行ったときに発生します。
</dd>
</dl>
<pre>
def foo &amp;block
  lambda(&amp;block)
end

it = foo{p 12}
it.call #=&gt; 12
</pre>
<p>
[SEE_ALSO] <a href="../class/-proc.html">Proc</a>,<a href="../method/-proc/s/new.html">Proc.new</a>
</p>
<h3 id='should_use_next'>手続きを中断して値を返す</h3>
<p>
手続きオブジェクトを中断して、呼出し元(呼び出しブロックでは yield、それ以外では <a href="../method/-proc/i/call.html">Proc#call</a>)
へジャンプし値を返すには next を使います。break や return ではありません。
</p>
<p>
例:
</p>
<pre>
 def foo
   f = Proc.new{
     next 1
     2
   }
 end

p foo().call       #=&gt; 1
</pre>
<h3 id='block'>Proc オブジェクトをブロック付きメソッド呼び出しに使う</h3>
<p>
ブロック付きメソッドに対して Proc オブジェクトを `&amp;' を指定して渡すと
呼び出しブロックのように動作します。
しかし、厳密には以下の違いがあります
これらは、Proc オブジェクトが呼び出しブロックとして振舞う際の制限です。
</p>
<pre>
# 問題なし
(1..5).each { break }

# LocalJumpError が発生します。
pr = Proc.new { break }
(1..5).each(&amp;pr)
</pre>
<h3 id='lambda_proc'>lambda と proc と Proc.new とイテレータの違い</h3>
<p>
<a href="../method/-kernel/m/lambda.html">Kernel.#lambda</a> と <a href="../method/-proc/s/new.html">Proc.new</a> はどちらも <a href="../class/-proc.html">Proc</a> クラスのインスタンス(手続きオブジェクト)を生成しますが、
生成された手続きオブジェクトはいくつかの場面で挙動が異なります。 lambda の生成する手続きオブジェクトのほうが
よりメソッドに近い働きをするように設計されています。
</p>
<p>
<a href="../method/-kernel/m/proc.html">Kernel.#proc</a> は Proc.new と同じになります。
引数に &amp; を付けることで手続きオブジェクト化したブロックは、Proc.new で生成されたそれと
同じにように振る舞います。
</p>
<h4 >引数の扱い</h4>
<p>
lambda のほうがより厳密です。引数の数が違っていると（メソッドのように）エラーになります。
Proc.new は引数を多重代入に近い扱い方をします。
</p>
<p>
例:
</p>
<pre>
b1 = Proc.new{|a,b,c|
  p a,b,c
}
b1.call(2, 4)
#=&gt; 2
    4
    nil

b2 = lambda{|a,b,c|
  p a,b,c
}
b2.call(2, 4)
#=&gt; wrong number of arguments (2 for 3) (ArgumentError)
</pre>
<p>
<a href="../doc/spec=2fcall.html#block_arg">メソッド呼び出し(super・ブロック付き・yield)/ブロックパラメータの挙動</a> も参照してください。
</p>
<h4 >ジャンプ構文の挙動の違い</h4>
<p>
return と break は、lambda と Proc.new では挙動が異なります。
例えば return を行った場合、lambda では手続きオブジェクト自身を抜けますが、
Proc.new では手続きオブジェクトを囲むメソッドを抜けます。
</p>
<p>
例:
</p>
<pre>
def foo
  f = Proc.new { return :foo }
  f.call
  return
end

def bar
  f = lambda { return :bar }
  f.call
  return
end

def h
  yield
end

def hoge
  h{ return :hoge }
  nil
end

p foo()  #=&gt; :foo
p bar()  #=&gt; nil
p hoge() #=&gt; :hoge
</pre>
<p>
以下の表は、手続きオブジェクトの実行を上の例と同じように、手続きオブジェクトが定義されたのと
同じメソッド内で行った場合の結果です。
</p>
<pre>
               return                          next                        break
Proc.new   メソッドを抜ける            手続きオブジェクトを抜ける   例外が発生する
proc       メソッドを抜ける            手続きオブジェクトを抜ける   例外が発生する
lambda     手続きオブジェクトを抜ける  手続きオブジェクトを抜ける   手続きオブジェクトを抜ける
イテレータ メソッドを抜ける            手続きオブジェクトを抜ける   メソッドを抜ける
</pre>
<h3 id='orphan'>orphan な手続きオブジェクトの挙動</h3>
<p>
Proc を生成したメソッドから脱出した後、手続きオブジェクトからの
return, break
は例外 <a href="../class/-local-jump-error.html">LocalJumpError</a> を発生させます。
ただし、上でも説明した通り lambda で生成した手続きオブジェクトはメソッドと同じように振る舞う
ことを意図されているため、例外 <a href="../class/-local-jump-error.html">LocalJumpError</a> は発生しません。
</p>
<p>
例:
</p>
<pre>
def foo
  Proc.new { return }
end

foo.call
# =&gt; in `call': return from proc-closure (LocalJumpError)
</pre>
<p>
以下の表は、手続きオブジェクトの実行を上の例と同じように、手続きオブジェクトが定義されたメソッドを
脱出してから行った場合の結果です。
</p>
<pre>
               return                          next                        break
Proc.new   例外が発生する              手続きオブジェクトを抜ける   例外が発生する
proc       例外が発生する              手続きオブジェクトを抜ける   例外が発生する
lambda     手続きオブジェクトを抜ける  手続きオブジェクトを抜ける   手続きオブジェクトを抜ける
</pre>
</dd>


<dt class="method-heading" id="M_LOAD"><code>load(file, priv = false) -&gt; true</code><span class="permalink">[<a href="../method/-kernel/m/load.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-load">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Ruby プログラム file をロードして実行します。再ロード可能です。
</p>
<p>
file が絶対パスのときは file からロードします。
file が相対パスのときは組み込み変数 <a href="../method/-kernel/v/=3a.html">$:</a>
に示されるパスとカレントディレクトリを順番に探し、最初に見付かったファイルを
ロードします。このとき、<a href="../method/-kernel/v/=3a.html">$:</a> の要素文字列の先頭文字が
`~' (チルダ) だと、環境変数 HOME の値に展開されます。
また `~USER' はそのユーザのホームディレクトリに展開されます。
</p>
<p>
ロードに成功した場合は true を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] file:</dt>
<dd>
ファイル名の文字列です。
</dd>
<dt class='method-param'>[PARAM] priv:</dt>
<dd>
真のとき、ロード・実行は内部的に生成される
無名モジュールをトップレベルとして行われ、
グローバルな名前空間を汚染しません。
</dd>
<dt>[EXCEPTION] LoadError:</dt>
<dd>
ロードに失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/require.html">Kernel.#require</a>
</p>
<h4 >require と load の違い</h4>
<p>
<a href="../method/-kernel/m/require.html">Kernel.#require</a> は同じファイルは一度だけしかロードしませんが、
<a href="../method/-kernel/m/load.html">Kernel.#load</a> は無条件にロードします。
また、require は拡張子.rb や .so を自動的に補完しますが、
load は行いません。
require はライブラリのロード、load は
設定ファイルの読み込みなどに使うのが典型的な用途です。
</p>
<pre>
# 使用例
load &quot;#{ENV['HOME']}/.myapprc&quot;
load &quot;/etc/myapprc&quot;
</pre>
<p>
なお、特定のディレクトリからファイルをロードしたい場合、
load 'filename' とするのは不適切です。必ず絶対パスを
使ってください。
</p>
</dd>


<dt class="method-heading" id="M_LOCAL_VARIABLES"><code>local_variables -&gt; [Symbol]</code><span class="permalink">[<a href="../method/-kernel/m/local_variables.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-local_variables">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで定義されているローカル変数名の配列を返します。
</p>
<pre>
yuyu = 0
p local_variables #=&gt; [:yuyu]
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/global_variables.html">Kernel.#global_variables</a>,<a href="../method/-object/i/instance_variables.html">Object#instance_variables</a>,<a href="../method/-module/s/constants.html">Module.constants</a>,<a href="../method/-module/i/constants.html">Module#constants</a>,<a href="../method/-module/i/class_variables.html">Module#class_variables</a>
</p>
</dd>


<dt class="method-heading" id="M_LOOP"><code>loop -&gt; Enumerator</code><span class="permalink">[<a href="../method/-kernel/m/loop.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-loop">rdoc</a>]</span></dt>
<dt class="method-heading"><code>loop { ... } -&gt; object | nil</code></dt>
<dd class="method-description">
<p>
(中断されない限り)永遠にブロックの評価を繰り返します。
ブロックが指定されなければ、代わりに <a href="../class/-enumerator.html">Enumerator</a> を返します。
</p>
<pre>
loop do
  print &quot;Input: &quot;
  line = gets
  break if !line or line =~ /^qQ/
  # ...
end
</pre>
<p>
与えられたブロック内で <a href="../class/-stop-iteration.html">StopIteration</a> を <a href="../method/-kernel/m/raise.html">Kernel.#raise</a> すると
ループを終了して <a href="../class/-enumerator.html">Enumerator</a> が最後に返した値を返します。
ループを終了させる場合、通常は break を使用してください。
</p>
<pre>
enum = Enumerator.new { |y|
  y &lt;&lt; &quot;one&quot;
  y &lt;&lt; &quot;two&quot;
  :ok
}

result = loop {
  puts enum.next
} # =&gt; :ok
</pre>
<dl>
<dt>[RETURN]</dt>
<dd>
break の引数など、ループ脱出時の値を返します。
</dd>
</dl>
</dd>


<dt class="method-heading" id="M_OPEN"><code>open(name, mode = 'r', perm = nil, options = {}) -&gt; StringIO | File</code><span class="permalink">[<a href="../method/-kernel/m/open.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-open">rdoc</a>]</span> <span class="kindinfo">[redefined by <a href="../library/open=2duri.html">open-uri</a>]</span>
</dt>
<dt class="method-heading"><code>open(name, mode = 'r', perm = nil, options = {}) {|ouri| ...} -&gt; nil</code> <span class="kindinfo">[redefined by <a href="../library/open=2duri.html">open-uri</a>]</span>
</dt>
<dd class="method-description">
<p>
name が http:// や ftp:// で始まっている文字列なら URI のリソースを
取得した上で <a href="../class/-string-i-o.html">StringIO</a> オブジェクトとして返します。
StringIO オブジェクトは <a href="../class/-open-u-r-i=3a=3a-meta.html">OpenURI::Meta</a> モジュールで extend されています。
</p>
<p>
name に open メソッドが定義されている場合は、*rest を引数として渡し
name.open(*rest, &amp;block) のように name の open メソッドが呼ばれます。
</p>
<p>
これ以外の場合は、name はファイル名として扱われ、従来の
<a href="../method/-kernel/m/open.html">Kernel.#open</a>(name, *rest) が呼ばれます。
</p>
<p>
ブロックを与えた場合は上の場合と同様、name が http:// や ftp:// で
始まっている文字列なら URI のリソースを取得した上で <a href="../class/-string-i-o.html">StringIO</a> オブジェクトを
引数としてブロックを評価します。後は同様です。
StringIO オブジェクトは <a href="../class/-open-u-r-i=3a=3a-meta.html">OpenURI::Meta</a> モジュールで extend されています。
</p>
<dl>
<dt class='method-param'>[PARAM] name:</dt>
<dd>
オープンしたいリソースを文字列で与えます。
</dd>
<dt class='method-param'>[PARAM] mode:</dt>
<dd>
モードを文字列で与えます。<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同じです。
</dd>
<dt class='method-param'>[PARAM] perm:</dt>
<dd>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/open.html">open(2)</a> の第 3 引数のように、ファイルを生成する場合のファイルのパーミッションを
整数で指定します。<a href="../method/-kernel/m/open.html">Kernel.#open</a> と同じです
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
ハッシュを与えます。詳しくは <a href="../method/-open-u-r-i/s/open_uri.html">OpenURI.open_uri</a> を参照してください。
</dd>
<dt>[EXCEPTION] OpenURI::HTTPError:</dt>
<dd>
対象となる URI のスキームが http であり、
かつリソースの取得に失敗した時に発生します。
</dd>
<dt>[EXCEPTION] Net::FTPError:</dt>
<dd>
対象となる URI のスキームが ftp であり、かつリソースの取得に失敗した時に
<a href="../class/-net=3a=3a-f-t-p-error.html">Net::FTPError</a> のサブクラスが発生します。詳しくは <a href="../library/net=2fftp.html">net/ftp</a>
を参照して下さい。
</dd>
</dl>
<p>
例:
</p>
<pre>
require 'open-uri'
sio = open('http://www.example.com')
p sio.is_a?(OpenURI::Meta) # =&gt; true
p sio.content_type
puts sio.read
</pre>
<p>
[SEE_ALSO] <a href="../method/-open-u-r-i/s/open_uri.html">OpenURI.open_uri</a>
</p>
</dd>


<dt class="method-heading" id="M_OPEN"><code>open(file, mode_enc = &quot;r&quot;, perm = 0666) -&gt; IO</code><span class="permalink">[<a href="../method/-kernel/m/open.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-open">rdoc</a>]</span></dt>
<dt class="method-heading"><code>open(file, mode_enc = &quot;r&quot;, perm = 0666) {|io| ... } -&gt; object</code></dt>
<dd class="method-description">
<p>
file をオープンして、<a href="../class/-i-o.html">IO</a>（<a href="../class/-file.html">File</a>を含む）クラスのインスタンスを返します。
</p>
<p>
ブロックが与えられた場合、指定されたファイルをオープンし、
生成した <a href="../class/-i-o.html">IO</a> オブジェクトを引数としてブロックを実行します。
ブロックの終了時や例外によりブロックを脱出するとき、
ファイルをクローズします。ブロックを評価した結果を返します。
</p>
<p>
ファイル名 file が `|' で始まる時には続く文字列をコマンドとして起動し、
コマンドの標準入出力に対してパイプラインを生成します
</p>
<p>
ファイル名が &quot;|-&quot; である時、open は Ruby の子プロセス
を生成し、その子プロセスとの間のパイプ(<a href="../class/-i-o.html">IO</a>オブジェクト)を返し
ます。(このときの動作は、<a href="../method/-i-o/s/popen.html">IO.popen</a> と同じです。
<a href="../method/-file/s/open.html">File.open</a> にはパイプラインを生成する機能はありません)。
</p>
<p>
Perlと異なりコマンドは常に `|' で始まります。
</p>
<dl>
<dt class='method-param'>[PARAM] file:</dt>
<dd>
ファイルを文字列で指定します。整数を指定した場合はファイルディスクリプタとして扱います。
</dd>
<dt class='method-param'>[PARAM] mode_enc:</dt>
<dd>
モード・エンコーディングを文字列か定数の論理和で指定します。後述。
</dd>
<dt class='method-param'>[PARAM] perm:</dt>
<dd>
<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/open.html">open(2)</a> の第 3 引数のように、ファイルを生成する場合の
ファイルのパーミッションを整数で指定します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
ファイルのオープンに失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-file/s/open.html">File.open</a>,<a href="../method/-i-o/s/popen.html">IO.popen</a>,<a href="../method/-i-o/s/open.html">IO.open</a>
</p>
<h4 >第二引数のオープンモード・エンコーディング</h4>
<p>
文字列(&quot;mode&quot; か &quot;mode:ext_enc&quot; か &quot;mode:ext_enc:int_enc&quot; という形式)か
整数(<a href="../class/-file=3a=3a-constants.html">File::Constants</a> モジュールの定数の論理和)を組み合わせて指定します。
</p>
<p>
mode は以下の三つのうちのいずれかです。
</p>
<dl>
<dt>&quot;r&quot;, RDONLY</dt>
<dd>
<p>
ファイルを読み込みモードでオープンします。（デフォルトのモード）
</p>
</dd>
<dt>&quot;w&quot;, WRONLY|CREAT|TRUNC</dt>
<dd>
<p>
ファイルを書き込みモードでオープンします。
オープン時にファイルがすでに存在していれば
その内容を空にします。
</p>
</dd>
<dt>&quot;a&quot;, WRONLY|CREAT|APPEND</dt>
<dd>
<p>
ファイルを書き込みモードでオープンします。
出力は 常に ファイルの末尾に追加されます。
例えば、ファイルオープン中にファイルのサイズが小さ
くなってもその末尾に出力されます。
</p>
</dd>
</dl>
<p>
以上の3つの後に &quot;+&quot; があれば、ファイルは読み書き両用モード (RDWR)
でオープンされます。
</p>
<dl>
<dt>&quot;r+&quot;</dt>
<dd>
<p>
ファイルの読み書き位置は先頭にセットされます。
</p>
</dd>
<dt>&quot;w+&quot;</dt>
<dd>
<p>
&quot;r+&quot; と同じですが、オープン時にファイルがすでに
存在していればその内容を空にします。
</p>
</dd>
<dt>&quot;a+&quot;</dt>
<dd>
<p>
&quot;r+&quot;と同様、ファイルの読み込み位置は先頭にセットされますが、
書き込みは常にファイル末尾に行われます。書き込みは
<a href="../method/-i-o/i/seek.html">IO#seek</a> などの影響を受けません。
</p>
</dd>
</dl>
<p>
これらのいずれに対しても &quot;b&quot; フラグを (&quot;r+b&quot;のように) つけることがで
きます (整数なら File::BINARY )。この場合、バイナリモードでオープン
します (ただし、DOS/Windowsのようにシステムがテキスト／バイナリでファイルを区別する場
合に限ります)
</p>
<h4 >Universal Newline</h4>
<p>
改行をLFに揃えます。一言で言えばPEP:278 <a class="external" href="https://www.python.org/dev/peps/pep-0278/">https://www.python.org/dev/peps/pep-0278/</a>のことです。
</p>
<dl>
<dt>&quot;rt&quot;</dt>
<dd>
<p>
CR、LF、CRLFのいずれをもLFとして読み込む。
</p>
</dd>
<dt>&quot;rb&quot;</dt>
<dd>
<p>
CR、LF、CRLFはいずれもそのまま読み込まれる。
</p>
</dd>
<dt>&quot;r&quot;</dt>
<dd>
<p>
&quot;rt&quot;と&quot;rb&quot;のどちらの扱いになるかはプラットフォーム依存。
(Unix系ならばなら&quot;rb&quot;、mswinやmingwなら&quot;rt&quot;扱いとなる)
</p>
</dd>
<dt>&quot;wb&quot;</dt>
<dd>
<p>
LFはそのままLFとして書き込まれる。
</p>
</dd>
<dt>&quot;wt&quot; または &quot;w&quot;</dt>
<dd>
<p>
LFはLFのままか、CR+LFか、どちらかになる。どちらになるかはプラットフォーム依存。
(Unix系ならばLFのまま、mswinやmingwならばCRLFとなる)
</p>
</dd>
</dl>
<p>
なお、以上のCR、LF、CRLFは入力のエンコーディングを解釈した後に処理されます。例えば、UTF-16LEでは、LFはバイト列&quot;\x0a\x00&quot;のことになります。
</p>
<h4 >エンコーディングの指定</h4>
<p>
ext_enc(外部エンコーディング)が指定されている場合、
読み込まれた文字列にはこのエンコーディングが指定され、
出力する文字列はそのエンコーディングに変換されます。
</p>
<p>
ext_encが'BOM|'で始まる場合、その入力に含まれるBOMはあらかじめ削られます。
また、BOMがあった場合、入力された文字列にはそのBOMに対応するエンコーディングが設定されます。
</p>
<pre>
# BOMでUTF-16BEかLEかを判別する例
File.open(&quot;utf16.txt&quot;, &quot;rb:BOM|utf-16&quot;){|file| .... }
</pre>
<p>
int_encも指定されていた場合、入力された文字列をext_encでエンコーディングされた文字列とみなしてint_encへと変換し、その結果にint_encを設定して返します。
</p>
</dd>


<dt class="method-heading" id="M_P"><code>p(*arg) -&gt; object | Array</code><span class="permalink">[<a href="../method/-kernel/m/p.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-p">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を人間に読みやすい形に整形して改行と順番に標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。主にデバッグに使用します。
</p>
<p>
引数の inspect メソッドの返り値と改行を順番に出力します。つまり以下のコードと同じです。
</p>
<pre>
print arg[0].inspect, &quot;\n&quot;, arg[1].inspect, &quot;\n&quot;, ...
</pre>
<p>
整形に用いられる<a href="../method/-object/i/inspect.html">Object#inspect</a>は普通に文字列に変換すると
区別がつかなくなるようなクラス間の差異も表現できるように工夫されています。
</p>
<p>
p に引数を与えずに呼び出した場合は特に何もしません。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
出力するオブジェクトを任意個指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
<dt>[RETURN]</dt>
<dd>
指定された引数 arg を返します。複数の引数が指定された場合はそれらを要素とする配列を返します。
</dd>
</dl>
<pre>
puts &quot;&quot; #=&gt; （空行）
p &quot;&quot; #=&gt; &quot;&quot;

puts 50,&quot;50&quot;
#=&gt; 50
#=&gt; 50
p 50,&quot;50&quot;
#=&gt; 50
#=&gt; &quot;50&quot;
</pre>
<p>
[SEE_ALSO] <a href="../method/-object/i/inspect.html">Object#inspect</a>,<a href="../method/-kernel/m/puts.html">Kernel.#puts</a>,<a href="../method/-kernel/m/print.html">Kernel.#print</a>
</p>
</dd>


<dt class="method-heading" id="M_PRINT"><code>print(*arg) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/print.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-print">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数を順に標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。引数が与えられない時には変数
<a href="../method/-kernel/v/_.html">$_</a> の値を出力します。
</p>
<p>
文字列以外のオブジェクトが引数として与えられた場合には、
to_s メソッドにより文字列に変換してから出力します。
</p>
<p>
変数 <a href="../method/-kernel/v/=2c.html">$,</a> (出力フィールドセパレータ)に nil で
ない値がセットされている時には、各引数の間にその文字列を出力します。
変数 <a href="../method/-kernel/v/=5c.html">$\</a> (出力レコードセパレータ)に nil でな
い値がセットされている時には、最後にそれを出力します。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
出力するオブジェクトを任意個指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre>
print &quot;Hello, world!&quot;
print &quot;Regexp is&quot;,/ant/
print nil
print &quot;\n&quot;
#=&gt; Hello, world!Regexp is(?-mix:ant)

$_ = &quot;input&quot;
$, = &quot;&lt;and&gt;&quot;
$\ = &quot;&lt;end&gt;\n&quot;
print
print &quot;AA&quot;,&quot;BB&quot;
#=&gt; input&lt;end&gt;
#=&gt; AA&lt;and&gt;BB&lt;end&gt;
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/puts.html">Kernel.#puts</a>,<a href="../method/-kernel/m/p.html">Kernel.#p</a>
</p>
</dd>


<dt class="method-heading" id="M_PRINTF"><code>printf(format, *arg) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/printf.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-printf">rdoc</a>]</span></dt>
<dt class="method-heading"><code>printf(port, format, *arg) -&gt; nil</code></dt>
<dd class="method-description">
<p>
C 言語の printf と同じように、format に従い引数を文字列に変
換して port に出力します。
</p>
<p>
port を省略した場合は標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。
</p>
<p>
引数を 1 つも指定しなければ何もしません。
</p>
<p>
Ruby における format 文字列の拡張については
<a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>の項を参照してください。
</p>
<dl>
<dt class='method-param'>[PARAM] port:</dt>
<dd>
出力先になる<a href="../class/-i-o.html">IO</a> のサブクラスのインスタンスです。
</dd>
<dt class='method-param'>[PARAM] format:</dt>
<dd>
フォーマット文字列です。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
フォーマットされる引数です。
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
port を指定したのに format を省略した場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
port が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre>
printf(&quot;calculate%3s%-6s%.15f&quot;, 'PI', '...', Math::PI)
#=&gt; calculate PI...   3.141592653589793

printf(&quot;%d %04x&quot;, 123, 123)               #=&gt; &quot;123 007b&quot;
printf(&quot;%08b '%4s'&quot;, 123, 123)            #=&gt; &quot;01111011 ' 123'&quot;
printf(&quot;%1$*2$s %2$d %1$s&quot;, &quot;hello&quot;, 8)   #=&gt; &quot;   hello 8 hello&quot;
printf(&quot;%1$*2$s %2$d&quot;, &quot;hello&quot;, -8)       #=&gt; &quot;hello    -8&quot;
printf(&quot;%+g:% g:%-g&quot;, 1.23, 1.23, 1.23)   #=&gt; &quot;+1.23: 1.23:1.23&quot;
printf(&quot;%u&quot;, -123)                        #=&gt; &quot;..4294967173&quot;
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/sprintf.html">Kernel.#sprintf</a>,<a href="../method/-i-o/i/printf.html">IO#printf</a>
</p>
</dd>


<dt class="method-heading" id="M_PUTC"><code>putc(ch) -&gt; object</code><span class="permalink">[<a href="../method/-kernel/m/putc.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-putc">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
文字 ch を 標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。
</p>
<p>
ch が数値なら 0 〜 255 の範囲の対応する文字を出力します。
ch が文字列なら、その先頭 1byte を出力します。
どちらでもない場合は、ch.to_int で整数に変換を試みます。
</p>
<dl>
<dt class='method-param'>[PARAM] ch:</dt>
<dd>
出力する文字です。数または文字列で指定します。
</dd>
<dt>[RETURN]</dt>
<dd>
ch を返します
</dd>
<dt>[EXCEPTION] RangeError:</dt>
<dd>
<a href="../class/-bignum.html">Bignum</a> を引数にした場合に発生します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] TypeError:</dt>
<dd>
<a href="../class/-integer.html">Integer</a> に変換できないオブジェクトを引数に
指定した場合に発生します。
</dd>
</dl>
<pre>
putc(&quot;ch&quot;)
putc(?c)
putc(99)
putc(355)
#=&gt; cccc

putc(99.00) #=&gt; c
putc(33333333333333333333333333333333333) # bignum too big to convert into `long' (RangeError)
</pre>
<p>
[SEE_ALSO] <a href="../method/-i-o/i/putc.html">IO#putc</a>
</p>
</dd>


<dt class="method-heading" id="M_PUTS"><code>puts(*arg) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/puts.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-puts">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
引数と改行を順番に 標準出力 <a href="../method/-kernel/v/stdout.html">$stdout</a> に出力します。
引数がなければ改行のみを出力します。
</p>
<p>
引数が配列の場合、その要素と改行を順に出力します。
配列や文字列以外のオブジェクトが引数として与えられた場合には、
当該オブジェクトを最初に to_ary により配列へ、
次に to_s メソッドにより文字列へ変換を試みます。
末尾が改行で終っている引数や配列の要素に対しては puts 自身
は改行を出力しません。
</p>
<dl>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
出力するオブジェクトを任意個指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre>
puts &quot;foo&quot;, &quot;bar\n&quot;, &quot;baz&quot;
puts &quot;&quot;    # 改行のみ出力
puts       # 改行のみ出力
puts nil   # 改行のみ出力
puts [&quot;oui&quot;, &quot;non&quot;]
#=&gt; foo
#   bar
#   baz
#
#
#
#   oui
#   non
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/print.html">Kernel.#print</a>, <a href="../method/-kernel/m/p.html">Kernel.#p</a>, <a href="../method/-i-o/i/puts.html">IO#puts</a>
</p>
</dd>


<dt class="method-heading" id="M_RAND"><code>rand(max = 0) -&gt; Integer | Float</code><span class="permalink">[<a href="../method/-kernel/m/rand.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-rand">rdoc</a>]</span></dt>
<dt class="method-heading"><code>rand(range) -&gt; Integer | Float | nil</code></dt>
<dd class="method-description">
<p>
擬似乱数を発生させます。
</p>
<p>
最初の形式では
max が 0 の場合は 0.0 以上 1.0 未満の実数を、正の整数の場合は 0 以上 max 未満の整数を返します。
それ以外の値を指定した場合は max.to_int の絶対値が指定されたものとして扱います。
</p>
<p>
二番目の形式では range で指定された範囲の値を返します。
range の始端と終端が共に整数の場合は整数を、少なくとも片方が実数の場合は実数を返します。
range に含まれる数が無い場合は nil を返します。
</p>
<p>
まだ <a href="../method/-kernel/m/srand.html">Kernel.#srand</a> が呼ばれていなければ自動的に呼び出します。
</p>
<p>
擬似乱数生成器として <a href="../method/-random/c/-d-e-f-a-u-l-t.html">Random::DEFAULT</a> を使用します。
これは <a href="../method/-random/s/rand.html">Random.rand</a> と共通です。
</p>
<dl>
<dt class='method-param'>[PARAM] max:</dt>
<dd>
乱数値の上限を正の整数で指定します。
max 自体は乱数値の範囲に含まれません。
0 を指定すると実数値の乱数を返します。
</dd>
<dt class='method-param'>[PARAM] range:</dt>
<dd>
発生させる乱数値の範囲を <a href="../class/-range.html">Range</a> オブジェクトで指定します。
range の境界は数値でなければなりません。
</dd>
</dl>
<pre>
srand(1234)     # 乱数の種を設定する。
rand            #=&gt; 0.1915194503788923
rand            #=&gt; 0.6221087710398319
rand(10)        #=&gt; 4
rand(5.5)       #=&gt; 0
                # rand(5) と同じ。 5 が乱数値の範囲に含まれないことに注意。

rand(1..6)      #=&gt; 2                   (1 から 6 までの整数)
rand(0...10)    #=&gt; 1                   (0 から 9 までの整数。終端を含まない)
rand(1.0..1.5)  #=&gt; 1.1362963047752432  (1.0 以上 1.5 以下の実数)
rand(1.0...1.5) #=&gt; 1.1382321275715483  (1.0 以上 1.5 未満の実数)
rand(1..0)      #=&gt; nil
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/srand.html">Kernel.#srand</a>, <a href="../method/-random/i/rand.html">Random#rand</a>, <a href="../class/-random.html">Random</a>
</p>
</dd>


<dt class="method-heading" id="M_READLINE"><code>readline(rs = $/) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/readline.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-readline">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-a-r-g-f.html">ARGF</a>から一行読み込んで、それを返します。
行の区切りは引数 rs で指定した文字列になります。
</p>
<p>
rs に nil を指定すると行区切りなしとみなしてファイルの内容を
すべて読み込みます。ARGVに複数のファイル名が存在する場合は1度に1ファイルずつ読み込みます。
空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします
(パラグラフモード)。
</p>
<p>
読み込んだ文字列は組み込み変数 <a href="../method/-kernel/v/_.html">$_</a> にもセットされます。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りとなる文字列です。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
読み込みに失敗した場合に発生します。
</dd>
<dt>[EXCEPTION] EOFError:</dt>
<dd>
readline でファイル末端(EOF)を検出すると発生します。
</dd>
</dl>
<pre>
---main.rb---
ARGV &lt;&lt; 'b.txt' &lt;&lt; 'c.txt'
p readline #=&gt; &quot;hello\n&quot;
p readline(nil) #=&gt; &quot;it\ncommon\n&quot;
p readline(&quot;&quot;) #=&gt; &quot;ARGF\n\n&quot;
p readline('、') #=&gt; &quot;スクリプトに指定した引数 (Object::ARGV を参照) をファイル名と\nみなして、&quot;
p readline #=&gt; &quot;それらのファイルを連結した 1 つの仮想ファイルを表すオブジェクトです。 \n&quot;
p readline # end of file reached (EOFError)
--- b.txt ---
hello
it
common
--- c.txt ---
ARGF

スクリプトに指定した引数 (Object::ARGV を参照) をファイル名と
みなして、それらのファイルを連結した 1 つの仮想ファイルを表すオブジェクトです。
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>,<a href="../class/-a-r-g-f.html">ARGF</a>,<a href="../method/-kernel/m/readlines.html">Kernel.#readlines</a>,<a href="../method/-kernel/m/gets.html">Kernel.#gets</a>
</p>
</dd>


<dt class="method-heading" id="M_READLINES"><code>readlines(rs = $/) -&gt; [String] | nil</code><span class="permalink">[<a href="../method/-kernel/m/readlines.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-readlines">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../class/-a-r-g-f.html">ARGF</a>を <a href="../method/-kernel/m/gets.html">Kernel.#gets</a>(rs) でEOFまで読み込んで、その各行を要素としてもつ配列を返します。
行の区切りは引数 rs で指定した文字列になります。
</p>
<p>
rs に nil を指定すると行区切りなしとみなします。
空文字列 &quot;&quot; を指定すると連続する改行を行の区切りとみなします
(パラグラフモード)。
</p>
<dl>
<dt class='method-param'>[PARAM] rs:</dt>
<dd>
行の区切りとなる文字列です。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
読み込みに失敗した場合に発生します。
</dd>
</dl>
<pre>
---main.rb---
ARGV &lt;&lt; 'b.txt' &lt;&lt; 'b.txt'
p readlines #=&gt; [&quot;hello\n&quot;, &quot;it\n&quot;, &quot;\n&quot;, &quot;common\n&quot;, &quot;hello\n&quot;, &quot;it\n&quot;, &quot;\n&quot;, &quot;common\n&quot;]

ARGV &lt;&lt; 'b.txt' &lt;&lt; 'b.txt'
p readlines(nil) #=&gt; [&quot;hello\nit\n\ncommon\n&quot;, &quot;hello\nit\n\ncommon\n&quot;]

ARGV &lt;&lt; 'b.txt' &lt;&lt; 'b.txt'
p readlines(&quot;&quot;) #=&gt; [&quot;hello\nit\n\n&quot;, &quot;common\n&quot;, &quot;hello\nit\n\n&quot;, &quot;common\n&quot;]

ARGV &lt;&lt; 'b.txt' &lt;&lt; 'b.txt'
p readlines('it') #=&gt; [&quot;hello\nit&quot;, &quot;\n\ncommon\n&quot;, &quot;hello\nit&quot;, &quot;\n\ncommon\n&quot;]
p readlines #=&gt; nil
--- b.txt ---
hello
it

common
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/=2f.html">$/</a>,<a href="../class/-a-r-g-f.html">ARGF</a>,<a href="../method/-kernel/m/gets.html">Kernel.#gets</a>
</p>
</dd>


<dt class="method-heading" id="M_REQUIRE"><code>require(feature) -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/m/require.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-require">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Ruby ライブラリ feature をロードします。拡張子補完を行い、
同じファイルの複数回ロードはしません。
</p>
<p>
feature が絶対パスのときは feature からロードします。
feature が相対パスのときは組み込み変数 <a href="../method/-kernel/v/=3a.html">$:</a>
に示されるパスを順番に探し、最初に見付かったファイルを
ロードします。このとき、$: の要素文字列の先頭文字が
`~' (チルダ) だと、環境変数 HOME の値に展開されます。
また `~USER' はそのユーザのホームディレクトリに展開されます。
</p>
<p>
Ruby ライブラリとは Ruby スクリプト (*.rb) か拡張ライブラリ
(*.so,*.o,*.dll など) であり、feature の拡張子が省略された場合はその
両方から探します( *.rb が優先されます)。
省略されなかった場合は指定された種別のみを探します。
また、feature の拡張子にはアーキテクチャで実際に使われる拡張子に
関らず拡張ライブラリの拡張子として常に .so を用いることができます（内部で適切に変換されます）。
</p>
<p>
ライブラリのロードに成功した時には true を返し、ロードした feature の名前を(拡
張子も含めて) 変数 <a href="../method/-kernel/v/=22.html">$&quot;</a> に追加します。ただし、feature の名前が既に $&quot;
に含まれていた場合はロードせずに false を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] feature:</dt>
<dd>
ファイル名の文字列です。
</dd>
<dt>[EXCEPTION] LoadError:</dt>
<dd>
ロードに失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/load.html">Kernel.#load</a>,<a href="../method/-kernel/m/autoload.html">Kernel.#autoload</a>,<a href="../method/-kernel/m/require_relative.html">Kernel.#require_relative</a>
</p>
</dd>


<dt class="method-heading" id="M_REQUIRE_RELATIVE"><code>require_relative(relative_feature) -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/m/require_relative.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-require_relative">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のファイルからの相対パスで require します。
</p>
<pre>
require File.expand_path(relative_feature, File.dirname(__FILE__))
</pre>
<p>
とほぼ同じです。
</p>
<p>
<a href="../method/-kernel/m/eval.html">Kernel.#eval</a> などで文字列を評価した場合に、そこから
require_relative を呼出すと必ず失敗します。
</p>
<dl>
<dt class='method-param'>[PARAM] relative_feature:</dt>
<dd>
ファイル名の文字列です。
</dd>
<dt>[EXCEPTION] LoadError:</dt>
<dd>
ロードに失敗した場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/require.html">Kernel.#require</a>
</p>
<h4 >require と load のスコープ</h4>
<p>
ローカル変数はファイル間では共有されません。ですので、
ロードしたライブラリのローカル変数を
ロード元のスクリプトから直接取得することはできません。
このスコープの扱い方は<a href="../method/-kernel/m/load.html">Kernel.#load</a>でも同様です。
</p>
<pre>
---------- some.rb -----------
$a = 1
@a = 1
A = 1
a = 1
---------- end some.rb -------

require 'some'
p $a #=&gt; 1
p @a #=&gt; 1
p A #=&gt; 1
p a # undefined local variable or method `a' for #&lt;Object:0x294f9ec @a=1&gt; (NameError)
</pre>
</dd>


<dt class="method-heading" id="M_SELECT"><code>select(reads, writes = [], excepts = [], timeout = nil) -&gt; [[IO]] | nil</code><span class="permalink">[<a href="../method/-kernel/m/select.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-select">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-i-o/s/select.html">IO.select</a> と同じです。
</p>
<dl>
<dt class='method-param'>[PARAM] reads:</dt>
<dd>
<a href="../method/-i-o/s/select.html">IO.select</a> 参照
</dd>
<dt class='method-param'>[PARAM] writes:</dt>
<dd>
<a href="../method/-i-o/s/select.html">IO.select</a> 参照
</dd>
<dt class='method-param'>[PARAM] excepts:</dt>
<dd>
<a href="../method/-i-o/s/select.html">IO.select</a> 参照
</dd>
<dt class='method-param'>[PARAM] timeout:</dt>
<dd>
<a href="../method/-i-o/s/select.html">IO.select</a> 参照
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-i-o/s/select.html">IO.select</a>
</p>
</dd>


<dt class="method-heading" id="M_SET_TRACE_FUNC"><code>set_trace_func(proc) -&gt; Proc</code><span class="permalink">[<a href="../method/-kernel/m/set_trace_func.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-set_trace_func">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Ruby インタプリタのイベントをトレースする <a href="../class/-proc.html">Proc</a> オブジェクトとして
指定された proc を登録します。 nil を指定するとトレースがオフになります。
</p>
<p>
Ruby インタプリタがプログラムを実行する過程で、メソッドの呼び出しや
式の評価などのイベントが発生する度に、以下で説明する6個の引数とともに
登録された <a href="../class/-proc.html">Proc</a> オブジェクトを実行します。
</p>
<p>
標準添付の <a href="../library/debug.html">debug</a>、<a href="../library/tracer.html">tracer</a>、
<a href="../library/profile.html">profile</a> はこの組み込み関数を利用して実現されています。
</p>
<h4 >ブロックパラメータの意味</h4>
<p>
渡す Proc オブジェクトのパラメータは
</p>
<pre>
proc{|event, file, line, id, binding, klass| ... }
</pre>
<p>
で、意味は以下の通りです。
</p>
<dl>
<dt>event</dt>
<dd>
<p>
実行のタイプを表す、以下のいずれかの文字列。
</p>
<pre>
  &quot;line&quot;:      式の評価。
  &quot;call&quot;:      メソッドの呼び出し。
  &quot;return&quot;:    メソッド呼び出しからのリターン。
  &quot;c-call&quot;:    Cで記述されたメソッドの呼び出し。
  &quot;c-return&quot;:  Cで記述されたメソッド呼び出しからのリターン。
  &quot;class&quot;:     クラス定義、特異クラス定義、モジュール定義への突入。
  &quot;end&quot;:       クラス定義、特異クラス定義、モジュール定義の終了。
  &quot;raise&quot;:     例外の発生。
</pre>
</dd>
<dt>file</dt>
<dd>
<p>
実行中のプログラムのソースファイル名 (文字列)。
</p>
</dd>
<dt>line</dt>
<dd>
<p>
実行中のプログラムのソースファイル上の行番号 (整数)。
</p>
</dd>
<dt>id</dt>
<dd>
<p>
event に応じ、以下のものが渡されます。
第六ブロック引数の klass と対応しています。
</p>
<pre>
    line
        最後に呼び出されたメソッドを表す Symbol オブジェクト。
        トップレベルでは nil。
    call/return/c-call/c-return
        呼び出された/リターンするメソッドを表す Symbol オブジェクト。
    class/end
        nil。
    raise
        最後に呼び出されたメソッドを表す Symbol オブジェクト。
        トップレベルでは nil。
</pre>
</dd>
<dt>binding</dt>
<dd>
<p>
実行中のプログラムのコンテキストを表す <a href="../class/-binding.html">Binding</a> オブジェクト。
</p>
</dd>
<dt>klass</dt>
<dd>
<p>
event に応じ、以下のものが渡されます。
第四ブロック引数の id と対応しています。
</p>
<pre>
    line
        最後に呼び出されたメソッドが属するクラスを表す
        Class オブジェクト。トップレベルでは nil。
    call/return/c-call/c-return
        呼び出された/リターンするメソッドが属するクラス
        を表す Class オブジェクト。
    class/end
        nil。
    raise
        最後に呼び出されたメソッドが属するクラスを表す
        Class オブジェクト。トップレベルでは nil。
</pre>
</dd>
</dl>
<dl>
<dt class='method-param'>[PARAM] proc:</dt>
<dd>
トレース用 <a href="../class/-proc.html">Proc</a> オブジェクトを指定します。nil を指定した場合、トレースをオフにします。
</dd>
<dt>[RETURN]</dt>
<dd>
proc を返します。
</dd>
</dl>
<p>
例:
</p>
<pre>
set_trace_func lambda {|*arg|
  p arg
}
class Foo
end
43.to_s

# ----結果----
# [&quot;c-return&quot;, &quot;..&quot;, 1, :set_trace_func, #&lt;Binding:0xf6ceb8&gt;, Kernel]
# [&quot;line&quot;, &quot;..&quot;, 4, nil, #&lt;Binding:0x10cbcd8&gt;, nil]
# [&quot;c-call&quot;, &quot;..&quot;, 4, :inherited, #&lt;Binding:0x10cba98&gt;, Class]
# [&quot;c-return&quot;, &quot;..&quot;, 4, :inherited, #&lt;Binding:0x10cb858&gt;, Class]
# [&quot;class&quot;, &quot;..&quot;, 4, nil, #&lt;Binding:0x10cb600&gt;, nil]
# [&quot;end&quot;, &quot;..&quot;, 5, nil, #&lt;Binding:0x10cb3f0&gt;, nil]
# [&quot;line&quot;, &quot;..&quot;, 6, nil, #&lt;Binding:0x10cb1e0&gt;, nil]
# [&quot;c-call&quot;, &quot;..&quot;, 6, :to_s, #&lt;Binding:0x10cafd0&gt;, Fixnum]
# [&quot;c-return&quot;, &quot;..&quot;, 6, :to_s, #&lt;Binding:0x10cad78&gt;, Fixnum]
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/caller.html">Kernel.#caller</a>
</p>
</dd>


<dt class="method-heading" id="M_SLEEP"><code>sleep -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/sleep.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-sleep">rdoc</a>]</span></dt>
<dt class="method-heading"><code>sleep(sec) -&gt; Integer</code></dt>
<dd class="method-description">
<p>
sec 秒だけプログラムの実行を停止します。
</p>
<p>
sec が省略された場合、他スレッドからの <a href="../method/-thread/i/run.html">Thread#run</a>
などで明示的に起こさない限り永久にスリープします。Thread#runを呼ぶとその時点で
sleepの実行が中断されます。
</p>
<dl>
<dt class='method-param'>[PARAM] sec:</dt>
<dd>
停止する秒数を非負の数値で指定します。浮動小数点数も指定できます。
省略された場合、永久にスリープします。
</dd>
<dt>[RETURN]</dt>
<dd>
実際に停止していた秒数 (整数に丸められた値) です。
</dd>
</dl>
<pre>
it = Thread.new do
  sleep
  puts 'it_end'
end

re = sleep 2.11
puts re
it.run
re2 = sleep 0.76
puts re2
#=&gt; 2
#   it_end
#   1
</pre>
</dd>


<dt class="method-heading" id="M_SPAWN"><code>spawn(command, options={}) -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/spawn.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-spawn">rdoc</a>]</span></dt>
<dt class="method-heading"><code>spawn(env, command, options={}) -&gt; Integer</code></dt>
<dd class="method-description">
<p>
引数を外部コマンドとして実行しますが、生成した
子プロセスの終了を待ち合わせません。生成した子プロセスのプロセスIDを返します。
</p>
<h4 >引数の解釈</h4>
<p>
この形式では command が shell のメタ文字
</p>
<pre>
  * ? {} [] &lt;&gt; () ~ &amp; | \ $ ; ' ` &quot; \n
</pre>
<p>
を含む場合、shell 経由で実行されます。
そうでなければインタプリタから直接実行されます。
</p>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
コマンドを文字列で指定します。
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
起動に失敗し、ruby インタプリタに制御が戻った場合に発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
コマンドが実行できなかった場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/system.html">Kernel.#system</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>
</p>
</dd>
<dt class="method-heading" id="M_SPAWN"><code>spawn(program, *args) -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/spawn.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-spawn">rdoc</a>]</span></dt>
<dt class="method-heading"><code>spawn(env, program, *args, options={}) -&gt; Integer</code></dt>
<dd class="method-description">
<p>
引数を外部コマンドとして実行しますが、生成した
子プロセスの終了を待ち合わせません。生成した子プロセスのプロセスIDを返します。
</p>
<p>
env に Hash を渡すことで、<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/exec.html">exec(2)</a> で子プロセス内で
ファイルを実行する前に環境変数を変更することができます。
Hash のキーは環境変数名文字列、Hash の値に設定する値とします。
nil とすることで環境変数が削除(<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/unsetenv.html">unsetenv(3)</a>)されます。
</p>
<pre>
# FOO を BAR にして BAZ を削除する
pid = spawn({&quot;FOO&quot;=&gt;&quot;BAR&quot;, &quot;BAZ&quot;=&gt;nil}, command)
</pre>
<p>
親プロセスは <a href="../method/-process/m/waitpid.html">Process.#waitpid</a> で子プロセスの終了を待ち合わせるか
もしくは <a href="../method/-process/m/detach.html">Process.#detach</a> で子プロセスを切り離すかしてください。
そうでないとゾンビプロセスが残る場合があります。
</p>
<h4 >引数の解釈</h4>
<p>
この形式で呼び出した場合、空白や shell のメタキャラクタも
そのまま program の引数に渡されます。
先頭の引数が2要素の配列であった場合、第1要素の文字列が実際に
起動するプログラムのパスであり、第2要素が「みせかけ」のプロ
グラム名になります。
また、第1要素はフルパスで指定しなくても環境変数 PATH から探します。
</p>
<h4 >option引数の概要</h4>
<p>
Hash を options として渡すことで、起動される子プロセスの
</p>
<ul>
<li>プロセスグループ</li>
<li>resource limit</li>
<li>カレントディレクトリ</li>
<li>umask</li>
<li>子プロセスでのリダイレクト</li>
</ul>
<p>
などを変更できます。環境変数のクリアなども指定できます。
</p>
<p>
以下のオプションが指定できます。
</p>
<dl>
<dt>:unsetenv_others</dt>
<dd>
<p>
これを true にすると、envで指定した環境変数以外をすべてクリアします。
false だとクリアしません。false がデフォルトです。
</p>
</dd>
<dt>:pgroup</dt>
<dd>
<p>
引数に true or 0 を渡すと新しいプロセスグループを作成し、そこで動きます。
整数を渡すと、指定したプロセスグループに属します
nil を渡すとプロセスグループを変更しません。デフォルトは nil です。
</p>
</dd>
<dt>:rlimit_core, :rlimit_cpu, etc</dt>
<dd>
<p>
resource limit を設定します。詳しくは <a href="../method/-process/m/setrlimit.html">Process.#setrlimit</a> を見て
ください。引数には整数、もしくは整数2つの配列を渡します。
</p>
</dd>
<dt>:chdir</dt>
<dd>
<p>
指定した文字列をカレントディレクトリにします。
</p>
</dd>
<dt>:umask</dt>
<dd>
<p>
指定した整数を umask に設定します。
</p>
</dd>
<dt>リダイレクト関連</dt>
<dd>
<p>
Hash のキーに子プロセス側のファイルデスクリプタを、
対応する値に親プロセス側のファイルデスクリプタや
ファイル名を指定することでリダイレクトを実現できます。
</p>
</dd>
<dt>:close_others</dt>
<dd>
<p>
これを true に設定すると
リダイレクトされていない、0(stdin), 1(stdout), 2(stderr) 以外の
ファイルデスクリプタをすべて閉じます。
true がデフォルトです。

</p>
</dd>
</dl>
<h4 >option引数によるリダイレクトの概要</h4>
<p>
Hash のキー(子プロセス側)には以下のいずれかが指定できます。
</p>
<ul>
<li>単一のファイルデスクリプタ</li>
<li>ファイルデスクリプタの配列</li>
</ul>
<p>
配列を渡すことで複数のファイルデスクリプタを同時にリダイレクトできます。
</p>
<p>
Hash の値(親プロセス側)には以下のいずれかが指定できます。
</p>
<ul>
<li>単一のファイルデスクリプタ</li>
<li>リダイレクト先のファイル名文字列</li>
<li>[リダイレクト先のファイル名文字列]、配列の要素にすることで
<a href="../method/-file/c/-r-d-o-n-l-y.html">File::RDONLY</a> でファイルを開いてリダイレクトします。</li>
<li>[リダイレクト先のファイル名文字列, モード文字列]
open(ファイル名, モード, 0644) でファイルを開いてリダイレクト
します。</li>
<li>[リダイレクト先のファイル名文字列, モード文字列, パーミション(整数)]
open(ファイル名, モード, パーミッション) でファイルを
開いてリダイレクトします。</li>
<li>[:child, ファイルデスクリプタ]
子プロセス側のファイルデスクリプタを指定できます。</li>
<li>:close キーで指定したファイルデスクリプタを子プロセス側で閉じます</li>
</ul>
<p>
ファイルデスクリプタを表すためには、以下が利用できます。
</p>
<ul>
<li>:in  標準入力, ファイルデスクリプタ0</li>
<li>:out 標準出力, ファイルデスクリプタ1</li>
<li>:err 標準エラー出力, ファイルデスクリプタ2</li>
<li>整数 指定した整数が表すファイルデスクリプタ</li>
<li><a href="../class/-i-o.html">IO</a> <a href="../method/-i-o/i/fileno.html">IO#fileno</a> で表されるファイルデスクリプタ</li>
</ul>
<h4 >option引数の詳細および例</h4>
<p>
「:unsetenv_others」を使うと、envで指定したもの以外の環境変数を
クリアします。
</p>
<pre>
# すべての環境変数をクリア
pid = spawn(command, :unsetenv_others=&gt;true)
# FOO だけ
pid = spawn({&quot;FOO&quot;=&gt;&quot;BAR&quot;}, command, :unsetenv_others=&gt;true)
</pre>
<p>
「:pgroup」でプロセスグループを指定できます。
</p>
<pre>
# true, 0 で新しいプロセスグループを作りそのリーダーになります。
pid = spawn(command, :pgroup =&gt; true)
# 整数を渡すとそのグループに所属します。
pid = spawn(command, :pgroup =&gt; 10)
</pre>
<p>
「:rlimit_core」「:rlimit_cpu」などで、resource limit を指定します。
詳しくは <a href="../method/-process/m/setrlimit.html">Process.#setrlimit</a> を見てください。
このオプションには 整数 or 整数2つの配列、を渡すことができます。
それぞれ <a href="../method/-process/m/setrlimit.html">Process.#setrlimit</a> の引数が2個、3個の場合に対応します。
</p>
<pre>
# 現プロセスの core の resource limit を取得
cur, max = Process.getrlimit(:CORE)
# 一時的に子プロセスの core dump を止める
pid = spawn(command, :rlimit_core=&gt;[0,max]) # disable core temporary.
# 子プロセスで core dump を出せるようにする
pid = spawn(command, :rlimit_core=&gt;max) # enable core dump
# 子プロセスで core dump を出せなくする
pid = spawn(command, :rlimit_core=&gt;0) # never dump core.
</pre>
<p>
「:chdir」で子プロセスのカレントディレクトリを変更できます。
</p>
<pre>
pid = spawn(command, :chdir=&gt;&quot;/var/tmp&quot;)
</pre>
<p>
「:umask」で子プロセスの umask を指定できます。
</p>
<pre>
pid = spawn(command, :umask=&gt;077)
</pre>
<p>
リダイレクトは様々なやりかたが使えます。
Hash のキーが子プロセス側、値が親プロセス側です。
</p>
<pre>
# 以下の例はすべて stderr を stdout にリダイレクトします
pid = spawn(command, :err=&gt;:out)
pid = spawn(command, 2=&gt;1)
pid = spawn(command, STDERR=&gt;:out)
pid = spawn(command, STDERR=&gt;STDOUT)
</pre>
<p>
この例では子プロセス側の stdout には触れていないので、
親プロセスから引き継がれます。
</p>
<p>
Hash の値にはファイル名も指定できます。
</p>
<pre>
pid = spawn(command, :in=&gt;&quot;/dev/null&quot;) # read mode
pid = spawn(command, :out=&gt;&quot;/dev/null&quot;) # write mode
pid = spawn(command, :err=&gt;&quot;log&quot;) # write mode
pid = spawn(command, 3=&gt;&quot;/dev/null&quot;) # read mode
</pre>
<p>
stdout と stderr をリダイレクトした場合は、
ファイルは write mode で open されます。それ以外の場合は
read mode で open されます。
</p>
<p>
ファイルのフラグ(write/read mode)やパーミッションを明示したい
場合は、配列を用います。
</p>
<pre>
# なにも指定がなければデフォルトで read mode が使われる。
pid = spawn(command, :in=&gt;[&quot;file&quot;])
# read mode で file を open し、リダイレクトする。
pid = spawn(command, :in=&gt;[&quot;file&quot;, &quot;r&quot;])
# write mode で file を open し、リダイレクトする。
# パーミッションはデフォルトで 644。
pid = spawn(command, :out=&gt;[&quot;log&quot;, &quot;w&quot;]) # 0644 assumed
# write mode、パーミッション 0600 でファイルをオープンし、リダイレクトする。
pid = spawn(command, :out=&gt;[&quot;log&quot;, &quot;w&quot;, 0600])
# flagを文字列でなくビットで指定する
pid = spawn(command, :out=&gt;[&quot;log&quot;, File::WRONLY|File::EXCL|File::CREAT, 0600])
</pre>
<p>
配列で複数のファイルデスクリプタを同時にリダイレクトできます。
</p>
<pre>
# stdout と stderr を &quot;log&quot; ファイルにリダイレクト
pid = spawn(command, [:out, :err]=&gt;[&quot;log&quot;, &quot;w&quot;])
</pre>
<p>
複数のファイルデスクリプタを合わせてリダイレクトするには、
[ :child, FileDescriptor ] を使うこともできます。
これは子プロセス側で FileDescriptor にリダイレクトすることを意味します。
これはファイルデスクリプタを直接指定するのと異なるということに
注意してください。
例えば、
</p>
<pre>
:err =&gt; :out
</pre>
<p>
とすると、子プロセスの stderr を親プロセスの stdout にリダイレクトします。
</p>
<pre>
:err =&gt; [:child, :out]
</pre>
<p>
とすると、子プロセスの stderr を子プロセスの stdout にリダイレクトします。
これを用いて、<a href="../method/-i-o/s/popen.html">IO.popen</a> で、子プロセスの
stderr と stdout を混ぜる例を以下に示します。
</p>
<pre>
io = IO.popen([&quot;sh&quot;, &quot;-c&quot;, &quot;echo out; echo err &gt;&amp;2&quot;, :err=&gt;[:child, :out]])
p io.read #=&gt; &quot;out\nerr\n
</pre>
<p>
spawn と IO.popen では
デフォルトでは非標準的なファイルデスクリプタ(3以降)をすべて閉じます。
「:close_others」オプションでこの挙動を制御できます。
標準的ファイルデスクリプタ(0,1,2)は :close で明示的に閉じない
限り、このオプションの影響を受けません。
</p>
<pre>
pid = spawn(command, :close_others=&gt;true)  # close 3,4,5,... (default)
pid = spawn(command, :close_others=&gt;false) # don't close 3,4,5,...
</pre>
<p>
これを利用して spawn を <a href="../method/-i-o/s/popen.html">IO.popen</a> のように使うことができます。
</p>
<pre>
# similar to r = IO.popen(command)
r, w = IO.pipe
pid = spawn(command, :out=&gt;w)   # r は子プロセスで閉じられる
w.close
</pre>
<p>
「:close」を使ってファイルデスクリプタを明示的に閉じることもできます。
</p>
<pre>
f = open(foo)
# f は継承されない
# system は :close_others=&gt;false がデフォルトなのでそれ以外は継承される
system(command, f=&gt;:close)        # don't inherit f.
</pre>
<p>
spawn で特定のファイルデスクリプタだけを継承したい場合は、
io =&gt; io という形のオプションを指定します。
</p>
<pre>
# valgrind は --log-fd というオプションでログの出力先を指定できます。
# これで指定したファイルデスクリプタは親プロセスから
# 子プロセスに継承されなければならないため、 log_w=&gt;log_w とします。
log_r, log_w = IO.pipe
pid = spawn(&quot;valgrind&quot;, &quot;--log-fd=#{log_w.fileno}&quot;, &quot;echo&quot;, &quot;a&quot;, log_w=&gt;log_w)
log_w.close
p log_r.read
</pre>
<p>
ファイルデスクリプタを入れ替えることもできます。
</p>
<pre>
# stdout と stderr を入れ替えリダイレクト
pid = spawn(command, :out=&gt;:err, :err=&gt;:out)
</pre>
<p>
このような相互参照を解決するため、spawnの内部で新しい
ファイルデスクリプタを作り、利用します。
</p>
<p>
:close_others と :close オプションが意味を持つのは、
子プロセスに閉じていないファイルデスクリプタが全て渡される環境
(Unix 系統の環境)のみです。
例えば Windows では元々子プロセスにはファイルデスクリプタ 0 1 2 のみ
渡されるので :close_others や :close オプションは意味を持ちません。
</p>
<dl>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] program:</dt>
<dd>
文字列か2要素の配列を指定します。
</dd>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
渡される引数です。0 個以上の文字列を指定します。
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
第一引数が配列かつ要素数が 2 でない場合に発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
コマンドが実行できなかった場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/system.html">Kernel.#system</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>
</p>
</dd>


<dt class="method-heading" id="M_SRAND"><code>srand -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/srand.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-srand">rdoc</a>]</span></dt>
<dt class="method-heading"><code>srand(seed) -&gt; Integer</code></dt>
<dd class="method-description">
<p>
<a href="../method/-kernel/m/rand.html">Kernel.#rand</a> や <a href="../method/-random/s/rand.html">Random.rand</a> で使用される擬似乱数生成器の種を設定し、古い種を返します。
</p>
<p>
seed に整数を指定するとその絶対値を乱数の種に設定します。
それ以外の値を指定した場合は seed.to_int が指定されたものとして扱います。
seed に既知の値を与えると、以前の Kernel.#rand の値を再現できます。
</p>
<p>
seed が省略された時には
現在の時刻やプロセス ID、srand を呼び出した回数、
また可能なら /dev/urandom から読み出したデータなどを元に種を作ります。
</p>
<dl>
<dt class='method-param'>[PARAM] seed:</dt>
<dd>
乱数の種となる整数を指定します。
<a href="../class/-bignum.html">Bignum</a> も指定可能です。
</dd>
</dl>
<pre>
num = 455675
seeds = []

srand(num)

p rand(6) #=&gt; 3
p rand(6) #=&gt; 0
p rand(0) #=&gt; 0.445804380918972
p rand(0) #=&gt; 0.422248634121701

seeds &lt;&lt; srand

p rand(6) #=&gt; 3
p rand(6) #=&gt; 3
p rand(0) #=&gt; 0.938911141393347
p rand(0) #=&gt; 0.915824970865251

seeds &lt;&lt; srand(num)

p rand(6) #=&gt; 3
p rand(6) #=&gt; 0
p rand(0) #=&gt; 0.445804380918972
p rand(0) #=&gt; 0.422248634121701

seeds &lt;&lt; srand

p seeds #=&gt; [455675, 2995620310703489221660585195204777696, 455675]
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/rand.html">Kernel.#rand</a>, <a href="../method/-random/c/-d-e-f-a-u-l-t.html">Random::DEFAULT</a>
</p>
</dd>


<dt class="method-heading" id="M_SUB"><code>sub(pattern, replace) -&gt; String</code><span class="permalink">[<a href="../method/-kernel/m/sub.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-sub">rdoc</a>]</span></dt>
<dt class="method-heading"><code>sub(pattern) {|matched| ... } -&gt; String</code></dt>
<dd class="method-description">
<p>
$_.sub とほぼ同じですが、置換が発生したときは、$_の内容を置き換える点が異なります。
コマンドラインオプションで -p または -n を指定した時のみ定義されます。
</p>
<p>
暗号的になりすぎるきらいがあるため、このメソッドの使用は推奨されていません。
今後はより明示的な $_.sub を使ってください。
</p>
<dl>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
replace を指定しなかった場合に発生します。
</dd>
</dl>
<p>
$_.sub とこのメソッド sub は以下の点で違いがあります。
</p>
<ul>
<li>sub は $_ の値をコピーして、コピーの方を更新し、
$_ に再代入します。</li>
</ul>
<dl>
<dt class='method-param'>[PARAM] pattern:</dt>
<dd>
置き換える文字列のパターンを表す文字列か正規表現。
文字列を指定した場合は全く同じ文字列にだけマッチする
</dd>
<dt class='method-param'>[PARAM] replace:</dt>
<dd>
pattern で指定した文字列と置き換える文字列
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-string/i/sub.html">String#sub</a>,<a href="../method/-kernel/v/_.html">$_</a>
</p>
</dd>


<dt class="method-heading" id="M_SYSCALL"><code>syscall(num, *arg) -&gt; Integer</code><span class="permalink">[<a href="../method/-kernel/m/syscall.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-syscall">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
numで指定された番号のシステムコールを実行します。
第2引数以降をシステムコールの引数として渡します。
</p>
<p>
どの数値がどのシステムコールに対応するかは、
syscall(2) や
/usr/include/sys/syscall.h を参照してください。
</p>
<p>
システムコールの慣習に従い、syscall(2)
が -1 を返す場合には例外 <a href="../class/-errno=3a=3a-e-x-x-x.html">Errno::EXXX</a> が発生します。
それ以外では、返した値をそのまま数値で返します。
</p>
<p>
ライブラリ <a href="../library/fiddle.html">fiddle</a> を使えばより高レベルな操作ができます。
</p>
<dl>
<dt class='method-param'>[PARAM] num:</dt>
<dd>
システムコール番号です。
</dd>
<dt class='method-param'>[PARAM] arg:</dt>
<dd>
文字列か、整数です。最大 9 個まで渡すことができます。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
syscall(2) が -1 を返した場合に発生します。
</dd>
<dt>[EXCEPTION] NotImplementedError:</dt>
<dd>
実行環境がこのメソッドに対応していないとき発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../library/fiddle.html">fiddle</a>, <a class="external" href="http://www.freebsd.org/cgi/man.cgi?query=syscall&amp;sektion=2&amp;manpath=FreeBSD+9.0-RELEASE">syscall(2freebsd)</a>, <a class="external" href="http://man7.org/linux/man-pages/man2/syscall.2.html">syscall(2linux)</a>
</p>
</dd>


<dt class="method-heading" id="M_SYSTEM"><code>system(command, options={}) -&gt; bool | nil</code><span class="permalink">[<a href="../method/-kernel/m/system.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-system">rdoc</a>]</span></dt>
<dt class="method-heading"><code>system(env, command, options={}) -&gt; bool | nil</code></dt>
<dd class="method-description">
<p>
引数を外部コマンドとして実行して、成功した時に真を返します。
</p>
<p>
子プロセスが終了ステータス 0 で終了すると成功とみなし true を返します。
それ以外の終了ステータスの場合は false を返します。
コマンドを実行できなかった場合は nil を返します。
</p>
<p>
終了ステータスは変数 <a href="../method/-kernel/v/=3f.html">$?</a> で参照できます。
</p>
<p>
コマンドを実行することができなかった場合、多くのシェルはステータス
127 を返します。(したがって <a href="../method/-kernel/v/=3f.html">$?</a> の数値は、0x7f00)、シェルを介
さない場合は Ruby の子プロセスがステータス 127 で終了します。
コマンドが実行できなかったのか、コマンドが失敗したのかは、普通
<a href="../method/-kernel/v/=3f.html">$?</a> を参照することで判別可能です。
</p>
<h4 >引数の解釈</h4>
<p>
この形式では command が shell のメタ文字
</p>
<pre>
  * ? {} [] &lt;&gt; () ~ &amp; | \ $ ; ' ` &quot; \n
</pre>
<p>
を含む場合、shell 経由で実行されます。
そうでなければインタプリタから直接実行されます。
</p>
<dl>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
command コマンドを文字列で指定します。
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/=60.html">Kernel.#`</a>,<a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>,<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/system.html">system(3)</a>
</p>
</dd>
<dt class="method-heading" id="M_SYSTEM"><code>system(program, *args, options={}) -&gt; bool | nil</code><span class="permalink">[<a href="../method/-kernel/m/system.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-system">rdoc</a>]</span></dt>
<dt class="method-heading"><code>system(env, program, *args, options={}) -&gt; bool | nil</code></dt>
<dd class="method-description">
<p>
引数を外部コマンドとして実行して、成功した時に真を返します。
</p>
<p>
子プロセスが終了ステータス 0 で終了すると成功とみなし true を返します。
それ以外の終了ステータスの場合
(コマンドを実行できなかった場合も含む)は false を返します。
</p>
<p>
終了ステータスは変数 <a href="../method/-kernel/v/=3f.html">$?</a> で参照できます。
</p>
<p>
コマンドを実行することができなかった場合、多くのシェルはステータス
127 を返します。(したがって $? の数値は、0x7f00)、シェルを介
さない場合は Ruby の子プロセスがステータス 127 で終了します。
コマンドが実行できなかったのか、コマンドが失敗したのかは、普通
$? を参照することで判別可能です。
</p>
<p>
Hash を options として渡すことで、起動される子プロセスの
</p>
<ul>
<li>プロセスグループ</li>
<li>resource limit</li>
<li>カレントディレクトリ</li>
<li>umask</li>
<li>子プロセスでのリダイレクト</li>
</ul>
<p>
などを変更できます。環境変数のクリアなども指定できます。
詳しくは <a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a> を参照してください。
</p>
<h4 >引数の解釈</h4>
<p>
この形式で呼び出した場合、空白や shell のメタキャラクタも
そのまま program の引数に渡されます。
先頭の引数が2要素の配列であった場合、第1要素の文字列が実際に
起動するプログラムのパスであり、第2要素が「みせかけ」のプロ
グラム名になります。
また、第1要素はフルパスで指定しなくても環境変数 PATH から探します。
</p>
<dl>
<dt class='method-param'>[PARAM] program:</dt>
<dd>
文字列か2要素の配列です。
</dd>
<dt class='method-param'>[PARAM] args:</dt>
<dd>
program に渡す引数を 0 個以上指定する
</dd>
<dt class='method-param'>[PARAM] env:</dt>
<dd>
更新する環境変数を表す Hash
</dd>
<dt class='method-param'>[PARAM] options:</dt>
<dd>
オプションパラメータ Hash
</dd>
<dt>[EXCEPTION] ArgumentError:</dt>
<dd>
第一引数が配列かつ要素数が 2 でない場合に発生します。
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/=60.html">Kernel.#`</a>,<a href="../method/-kernel/m/spawn.html">Kernel.#spawn</a>,<a href="../method/-kernel/m/exec.html">Kernel.#exec</a>,<a class="external" href="http://www.opengroup.org/onlinepubs/009695399/functions/system.html">system(3)</a>
</p>
</dd>


<dt class="method-heading" id="M_TEST"><code>test(cmd, file) -&gt; bool | Time | Integer | nil</code><span class="permalink">[<a href="../method/-kernel/m/test.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-test">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
単体のファイルでファイルテストを行います。
</p>
<dl>
<dt class='method-param'>[PARAM] cmd:</dt>
<dd>
以下に示す数値リテラルか文字列です(文字列の場合はその先頭の文字だけをコマンドとみなします)。
</dd>
<dt class='method-param'>[PARAM] file:</dt>
<dd>
テストするファイルオブジェクトです。
</dd>
<dt>[RETURN]</dt>
<dd>
下表に特に明記していないものは、真偽値を返します。
</dd>
</dl>
<p>
以下は cmd として指定できる数値リテラルとその意味です。
</p>
<dl>
<dt>?r</dt>
<dd>
<p>
ファイルを実効 uid で読むことができる
</p>
</dd>
<dt>?w</dt>
<dd>
<p>
ファイルに実効 uid で書くことができる
</p>
</dd>
<dt>?x</dt>
<dd>
<p>
ファイルを実効 uid で実行することができる
</p>
</dd>
<dt>?o</dt>
<dd>
<p>
ファイルの所有者が実効 uid である
</p>
</dd>
<dt>?G</dt>
<dd>
<p>
ファイルのグループ所有者が実効 gid である
</p>
</dd>
<dt>?R</dt>
<dd>
<p>
ファイルを実 uid で読むことができる
</p>
</dd>
<dt>?W</dt>
<dd>
<p>
ファイルに実 uid で書くことができる
</p>
</dd>
<dt>?X</dt>
<dd>
<p>
ファイルを実 uid で実行することができる
</p>
</dd>
<dt>?O</dt>
<dd>
<p>
ファイルの所有者が実 uid である
</p>
</dd>
<dt>?e</dt>
<dd>
<p>
ファイルが存在する
</p>
</dd>
<dt>?z</dt>
<dd>
<p>
ファイルサイズが 0 である
</p>
</dd>
<dt>?s</dt>
<dd>
<p>
ファイルサイズが 0 でない (ファイルサイズを返す、0 ならば nil) -&gt; Integer|nil
</p>
</dd>
<dt>?f</dt>
<dd>
<p>
ファイルはプレーンファイルである
</p>
</dd>
<dt>?d</dt>
<dd>
<p>
ファイルはディレクトリである
</p>
</dd>
<dt>?l</dt>
<dd>
<p>
ファイルはシンボリックリンクである
</p>
</dd>
<dt>?p</dt>
<dd>
<p>
ファイルは名前つきパイプ(FIFO)である
</p>
</dd>
<dt>?S</dt>
<dd>
<p>
ファイルはソケットである
</p>
</dd>
<dt>?b</dt>
<dd>
<p>
ファイルはブロック特殊ファイルである
</p>
</dd>
<dt>?c</dt>
<dd>
<p>
ファイルはキャラクター特殊ファイルである
</p>
</dd>
<dt>?u</dt>
<dd>
<p>
ファイルに setuid ビットがセットされている
</p>
</dd>
<dt>?g</dt>
<dd>
<p>
ファイルに setgid ビットがセットされている
</p>
</dd>
<dt>?k</dt>
<dd>
<p>
ファイルに sticky ビットがセットされている
</p>
</dd>
<dt>?M</dt>
<dd>
<p>
ファイルの最終更新時刻を返す -&gt; Time
</p>
</dd>
<dt>?A</dt>
<dd>
<p>
ファイルの最終アクセス時刻を返す -&gt; Time
</p>
</dd>
<dt>?C</dt>
<dd>
<p>
ファイルの inode 変更時刻を返す -&gt; Time
</p>
</dd>
</dl>
</dd>
<dt class="method-heading" id="M_TEST"><code>test(cmd, file1, file2) -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/m/test.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-test">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
２ファイル間のファイルテストを行います。
</p>
<dl>
<dt class='method-param'>[PARAM] cmd:</dt>
<dd>
以下に示す数値リテラルか文字列です(文字列の場合はその先頭の文字だけをコマンドとみなします)。
</dd>
<dt class='method-param'>[PARAM] file1:</dt>
<dd>
テストするファイルオブジェクトです。
</dd>
<dt class='method-param'>[PARAM] file2:</dt>
<dd>
テストするファイルオブジェクトです。
</dd>
<dt>[RETURN]</dt>
<dd>
真偽値を返します。
</dd>
</dl>
<p>
以下は cmd として指定できる数値リテラルとその意味です。
</p>
<dl>
<dt>?=</dt>
<dd>
<p>
ファイル1とファイル2の最終更新時刻が等しい
</p>
</dd>
<dt>?&gt;</dt>
<dd>
<p>
ファイル1の方がファイル2より最終更新時刻が新しい
</p>
</dd>
<dt>?&lt;</dt>
<dd>
<p>
ファイル1の方がファイル2より最終更新時刻が古い
</p>
</dd>
<dt>?-</dt>
<dd>
<p>
ファイル1とファイル2が同一のファイルである
</p>
</dd>
</dl>
</dd>


<dt class="method-heading" id="M_THROW"><code>throw(tag, value = nil) -&gt; ()</code><span class="permalink">[<a href="../method/-kernel/m/throw.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-throw">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
<a href="../method/-kernel/m/catch.html">Kernel.#catch</a>との組み合わせで大域脱出を行います。 throw
は同じ tag を指定した catch のブロックの終わりまでジャンプします。
</p>
<p>
throw は探索時に呼び出しスタックをさかのぼるので、
ジャンプ先は同じメソッド内にあるとは限りません。
もし ensure節 が存在するならジャンプ前に実行します。
</p>
<p>
同じ tag で待っている catch が存在しない場合は、例外で
スレッドが終了します。
</p>
<p>
同じ tag であるとは <a href="../method/-object/i/object_id.html">Object#object_id</a> が同じであるという意味です。
</p>
<dl>
<dt class='method-param'>[PARAM] tag:</dt>
<dd>
catch の引数に対応する任意のオブジェクトです。
</dd>
<dt class='method-param'>[PARAM] value:</dt>
<dd>
catch の戻り値になります。
</dd>
<dt>[EXCEPTION] UncaughtThrowError:</dt>
<dd>
同じ tag で待っている catch が存在しない場合に発生します。
</dd>
</dl>
<pre>
def foo
  throw :exit, 25
end

ret = catch(:exit) do
  begin
    foo
    some_process()    # 絶対に実行されない
    10
  ensure
    puts &quot;ensure&quot;
  end
end
puts ret
#=&gt; ensure
#   25
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/catch.html">Kernel.#catch</a>
</p>
</dd>


<dt class="method-heading" id="M_TRACE_VAR"><code>trace_var(varname, hook) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/trace_var.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-trace_var">rdoc</a>]</span></dt>
<dt class="method-heading"><code>trace_var(varname) {|new_val| .... } -&gt; nil</code></dt>
<dt class="method-heading"><code>trace_var(varname, hook) -&gt; [String|Proc]</code></dt>
<dd class="method-description">
<p>
グローバル変数 varname への代入のフックを登録します。
</p>
<p>
ここでの「グローバル変数」は、特殊変数
(<a href="../doc/spec=2fvariables.html#builtin">変数と定数/組み込み変数</a> を参照)も含めた `$' で始まる変数のこ
とです。
</p>
<p>
この呼び出し以降、varname で指定したグローバル変数に
値が代入されるたびに hook かブロックが評価されます。hook が Proc オブジェクトの場合
代入された値がブロック引数に渡されます。文字列の場合はRubyコードとして評価されます。
</p>
<p>
trace_var がフックするのは明示的な代入だけです。
フックは複数登録できます。
</p>
<p>
フックを解除するには、hook に nil を
指定するか、<a href="../method/-kernel/m/untrace_var.html">Kernel.#untrace_var</a> を用います。
</p>
<p>
hook が nil ならば、設定されていた
hook をすべて解除してその配列を返します(ブロックで登録されていれば
<a href="../class/-proc.html">Proc</a> オブジェクトで返されます)
それ以外は、nil を返します。
</p>
<dl>
<dt class='method-param'>[PARAM] varname:</dt>
<dd>
グローバル変数名を文字列か <a href="../class/-symbol.html">Symbol</a> で指定します。
</dd>
<dt class='method-param'>[PARAM] hook:</dt>
<dd>
フックになる文字列または <a href="../class/-proc.html">Proc</a> オブジェクトです。
</dd>
<dt>[RETURN]</dt>
<dd>
フックを登録した場合は nil を返します。解除した場合は解除した
フックを並べた配列を返します。
</dd>
</dl>
<pre>
trace_var(:$v){|val| puts &quot;hook: $v=#{val.inspect}&quot; }
$v = 1       #=&gt; hook: $v=1
$v = &quot;foo&quot;   #=&gt; hook: $v=&quot;foo&quot;
$v.upcase!
p $v         #=&gt; &quot;FOO&quot;
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/untrace_var.html">Kernel.#untrace_var</a>
</p>
</dd>


<dt class="method-heading" id="M_TRAP"><code>trap(signal, command) -&gt; String | Proc | nil</code><span class="permalink">[<a href="../method/-kernel/m/trap.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-trap">rdoc</a>]</span></dt>
<dt class="method-heading"><code>trap(signal) { ... } -&gt; String | Proc | nil</code></dt>
<dd class="method-description">
<p>
signal で指定された割り込みにたいするハンドラとして
command を登録します。<a href="../method/-signal/m/trap.html">Signal.#trap</a>と同じです。
</p>
<p>
<a href="../method/-signal/m/trap.html">Signal.#trap</a>の使用を推奨します。
</p>
<dl>
<dt class='method-param'>[PARAM] signal:</dt>
<dd>
<a href="../method/-signal/m/trap.html">Signal.#trap</a> 参照
</dd>
<dt class='method-param'>[PARAM] command:</dt>
<dd>
<a href="../method/-signal/m/trap.html">Signal.#trap</a> 参照
</dd>
</dl>
<p>
[SEE_ALSO] <a href="../method/-signal/m/trap.html">Signal.#trap</a>,<a href="../class/-signal.html">Signal</a>
</p>
</dd>


<dt class="method-heading" id="M_UNTRACE_VAR"><code>untrace_var(varname, hook = nil) -&gt; [String|Proc]</code><span class="permalink">[<a href="../method/-kernel/m/untrace_var.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-untrace_var">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
グローバル変数 varname に関連付けられたフックを解除します。
</p>
<p>
hook が指定された場合にはそのフックだけを解除します。
省略するか nil を与えた場合は
varname のフックを全て解除します。
</p>
<dl>
<dt class='method-param'>[PARAM] varname:</dt>
<dd>
グローバル変数名を文字列か <a href="../class/-symbol.html">Symbol</a> で指定します。
</dd>
<dt class='method-param'>[PARAM] hook:</dt>
<dd>
文字列または <a href="../class/-proc.html">Proc</a> オブジェクトです。
</dd>
<dt>[RETURN]</dt>
<dd>
解除されたフックの配列を返します。
</dd>
</dl>
<pre>
trace_var(:$v){|val| print &quot;hookA.#{val.inspect},\n&quot; }
block = proc{|val| print &quot;hookB.#{val.inspect},&quot; }
trace_var(:$v,&amp;block)
$v = 'str'        #=&gt; hookB.&quot;str&quot;,hookA.&quot;str&quot;,

untrace_var(:$v,block)
$v = 'str'        #=&gt; hookA.&quot;str&quot;,

trace_var(:$v){|val| print &quot;hookC.#{val.inspect},&quot; }
p untrace_var(:$v) #=&gt; [#&lt;Proc:0x02b68f58@..:9&gt;, #&lt;Proc:0x02b6978c@..:3&gt;]
$v = 'str'        # なにも出力されない
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/trace_var.html">Kernel.#trace_var</a>
</p>
</dd>


<dt class="method-heading" id="M_WARN"><code>warn(*message) -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/m/warn.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-warn">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
message を 標準エラー出力 <a href="../method/-kernel/v/stderr.html">$stderr</a> に出力します。 <a href="../method/-kernel/v/-v-e-r-b-o-s-e.html">$VERBOSE</a>
フラグ が nil のときは何も出力しません。
</p>
<p>
文字列以外のオブジェクトが引数として与えられた場合には、
to_s メソッドにより文字列に変換してから出力します。
</p>
<p>
このメソッドは以下と同じです。
</p>
<pre>
$stderr.puts(*message) if !$VERBOSE.nil? &amp;&amp; !message.empty?
nil
</pre>
<dl>
<dt class='method-param'>[PARAM] message:</dt>
<dd>
出力するオブジェクトを任意個指定します。
</dd>
<dt>[EXCEPTION] IOError:</dt>
<dd>
標準エラー出力が書き込み用にオープンされていなければ発生します。
</dd>
<dt>[EXCEPTION] Errno::EXXX:</dt>
<dd>
出力に失敗した場合に発生します。
</dd>
</dl>
<pre>
warn &quot;caution!&quot; #=&gt; caution!
$VERBOSE = nil
warn &quot;caution!&quot; # 何もしない
</pre>
<p>
[SEE_ALSO] <a href="../method/-kernel/v/stderr.html">$stderr</a>,<a href="../method/-kernel/v/-v-e-r-b-o-s-e.html">$VERBOSE</a>
</p>
</dd>


</dl>

<h2>特殊変数</h2>
<dl>

<dt class="method-heading" id="V_--21"><code>$! -&gt; Exception | nil</code><span class="permalink">[<a href="../method/-kernel/v/=21.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-21">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
最後に例外が発生したときの <a href="../class/-exception.html">Exception</a> オブジェクトです。
該当する例外がないときは nil です。
</p>
<p>
<a href="../method/-kernel/m/raise.html">Kernel.#raise</a> によって設定されます。
</p>
<p>
この変数はスレッドローカル、読み取り専用です。
</p>
</dd>


<dt class="method-heading" id="V_--22"><code>$&quot; -&gt; [String]</code><span class="permalink">[<a href="../method/-kernel/v/=22.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-22">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$LOADED_FEATURES -&gt; [String]</code></dt>
<dd class="method-description">
<p>
<a href="../method/-kernel/m/require.html">Kernel.#require</a> でロードされたファイル名を含む配列です。
</p>
<p>
<a href="../method/-kernel/m/require.html">Kernel.#require</a> で同じファイルを
複数回ロードしないようにするためのロックとして使われます。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--24"><code>$$ -&gt; Fixnum</code><span class="permalink">[<a href="../method/-kernel/v/=24.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-24">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在実行中の Ruby プロセスのプロセス ID です。
<a href="../method/-process/m/pid.html">Process.#pid</a> と同じです。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--26"><code>$&amp; -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=26.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-26">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功した正規表現のパターンマッチでマッチした文字列です。
最後のマッチが失敗していた場合には nil となります。
</p>
<p>
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>[0] と同じです。
</p>
<p>
この変数はローカルスコープかつスレッドローカル、読み取り専用です。
Ruby起動時の初期値は nil です。
</p>
<h3 >例</h3>
<pre>
str = '&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'
if %r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;] =~ str
  p $&amp;
end
#=&gt; &quot;&lt;a href=\&quot;http://example.com\&quot;&gt;example.com&lt;/a&gt;&quot;
</pre>
</dd>


<dt class="method-heading" id="V_--27"><code>$' -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=27.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-27">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功した正規表現のパターンマッチでマッチした
部分より後ろの文字列です。
最後のマッチが失敗していた場合には nil となります。
</p>
<p>
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>.post_match と同じです。
</p>
<p>
この変数はローカルスコープかつスレッドローカル、読み取り専用です。
Ruby起動時の初期値は nil です。
</p>
<h3 >例</h3>
<pre>
str = '&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'
if %r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;] =~ str
  p $'
end
#=&gt; &quot;&lt;/p&gt;&quot;
</pre>
</dd>


<dt class="method-heading" id="V_--2A"><code>$* -&gt; [String]</code><span class="permalink">[<a href="../method/-kernel/v/=2a.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2A">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
Rubyスクリプトに与えられた引数を表す配列です。
組み込み定数 <a href="../method/-object/c/-a-r-g-v.html">Object::ARGV</a> の別名です。
</p>
<p>
Ruby 自身に対する引数は取り除かれています。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--2B"><code>$+ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2b.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2B">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功した正規表現のパターンマッチで
マッチした中で最後の括弧に対応する部分文字列です。
</p>
<p>
最後のマッチが失敗していた場合には nil。
いくつかある選択型のパターンのどれがマッチしたのか分からない時に便利です。
</p>
<p>
この変数はローカルスコープかつスレッドローカルです。
</p>
</dd>


<dt class="method-heading" id="V_--2C"><code>$, -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2c.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2C">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
デフォルトの出力フィールド区切り文字列です。
<a href="../method/-array/i/join.html">Array#join</a> で引数を省略した場合と、
<a href="../method/-kernel/m/print.html">Kernel.#print</a> の各引数の間で出力されます。
</p>
<p>
デフォルト値は nil で、空文字列と同じ結果になります。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--2D0"><code>$/ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2d0.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2D0">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-0 -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
入力レコード区切りを表す文字列です。
awk の RS 変数のように働きます。
</p>
<p>
<a href="../method/-kernel/m/gets.html">Kernel.#gets</a> のような「行」単位の読み込みメソッドが「行」の区切りとして使用します。
Rubyがコマンドオプション -0 付きで起動されたときには -0 で指定された値が規定値となります。そうでないとき、規定値は &quot;\n&quot; です。
</p>
<p>
この変数に nil を設定すると読み込みメソッドはファイル全体を一度に読み込みます。
空文字列 &quot;&quot; を設定するとパラグラフモードとみなされ、
2 つ以上連続した改行が「行」の区切りになります。
</p>
<p>
$/ には正規表現は使えません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2D-F"><code>$; -&gt; Regexp | String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2d-f.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2DF">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-F -&gt; Regexp | String | nil</code></dt>
<dd class="method-description">
<p>
<a href="../method/-string/i/split.html">String#split</a> で引数を省略した場合の区切り文字です。
</p>
<p>
nilを設定すると特殊な分割を行います。
詳細は <a href="../method/-string/i/split.html">String#split</a> を参照してください。
</p>
<p>
コマンドラインオプション -F を指定して Ruby を起動した場合、
初期値は -F で指定した値です。
それ以外の時には初期値は nil です。
</p>
<p>
$; には任意のオブジェクトを代入できます。
ただし、<a href="../method/-string/i/split.html">String#split</a> の仕様変更を考慮すると
常に正規表現を指定すべきです。
</p>
<p>
Ruby のバージョンによらず動作するプログラムを書くときは
$; に頼らないコードを書くべきです。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2D-I"><code>$: -&gt; [String]</code><span class="permalink">[<a href="../method/-kernel/v/=2d-i.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2DI">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$LOAD_PATH -&gt; [String]</code></dt>
<dt class="method-heading"><code>$-I -&gt; [String]</code></dt>
<dd class="method-description">
<p>
Rubyライブラリをロードするときの検索パスです。
</p>
<p>
<a href="../method/-kernel/m/load.html">Kernel.#load</a> や <a href="../method/-kernel/m/require.html">Kernel.#require</a>
がファイルをロードする時に検索するディレクトリのリストを含む配列です。
</p>
<p>
起動時にはコマンドラインオプション -I で指定したディレクトリ、
環境変数 RUBYLIB の値、
コンパイル時に指定したデフォルト値
をこの順番で含みます。
</p>
<p>
以下に典型的な UNIX システム上でのロードパスを示します。
</p>
<pre>
-I で指定したパス
環境変数 RUBYLIB の値
/usr/local/lib/ruby/site_ruby/VERSION        サイト固有、バージョン依存のライブラリ
/usr/local/lib/ruby/site_ruby/VERSION/ARCH   サイト固有、システム依存、拡張ライブラリ
/usr/local/lib/ruby/site_ruby                サイト固有ライブラリ
/usr/local/lib/ruby/VERSION                  標準ライブラリ
/usr/local/lib/ruby/VERSION/ARCH             標準、システム依存、拡張ライブラリ
</pre>
<p>
上記表中の VERSION は Ruby のバージョンを表す文字列で、
「1.6」や「1.8」です。
ARCH はハードウェアと OS を表す文字列で、
「i686-linux」や「alpha-osf5.1」などです。
ARCH の値は Config::CONFIG['arch'] で得られます。
</p>
<p>
コンパイル時のデフォルトパスは
多くの UNIX システムでは &quot;/usr/local/lib/ruby&quot; です。
<a href="../doc/platform=2fmswin32.html">mswin32</a>、<a href="../doc/platform=2fmingw32.html">mingw32</a>、<a href="../doc/platform=2f-cygwin.html">Cygwin</a>、
<a href="../doc/platform=2fbccwin32.html">bccwin32</a>、<a href="../doc/platform=2fmswince.html">mswince</a> 環境では
ruby.dll の位置からの相対で決まります。
<a href="../doc/platform=2f-d-j-g-p-p.html">DJGPP</a> と <a href="../doc/platform=2femx.html">emx</a> (OS/2) では
ruby.exe の位置からの相対で決まります。
</p>
<p>
require 'foo' を実行すると、
以下のように foo.rb と foo.so が交互に探索されます。
</p>
<pre>
/usr/local/lib/ruby/site_ruby/VERSION/foo.rb
/usr/local/lib/ruby/site_ruby/VERSION/foo.so
/usr/local/lib/ruby/site_ruby/VERSION/ARCH/foo.rb
/usr/local/lib/ruby/site_ruby/VERSION/ARCH/foo.so
  :
  :
</pre>
<p>
なお、共有ライブラリの拡張子が .so でないシステムでは
「.so」が適切な拡張子に変更されます。
例えば HP-UX では require 'foo.so' とすると foo.sl を検索します。
したがって Ruby で記述されたコードでは常に .so を使うべきです。
</p>
<p>
なお、ロードパスをコマンドラインから調べるには
</p>
<pre>
$ ruby -e 'puts $:'
</pre>
<p>
とします。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>, <a href="../doc/spec=2fenvvars.html">環境変数</a>
</p>
</dd>


<dt class="method-heading" id="V_--2D-K"><code>$KCODE -&gt; nil</code><span class="permalink">[<a href="../method/-kernel/v/=2d-k.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2DK">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-K -&gt; nil</code></dt>
<dd class="method-description">
<p>
この特殊変数は何の影響も持たなくなりました。
</p>
<p>
値を代入しても無視され、参照すると常に nil です。
</p>
<pre>
&gt;&gt; $KCODE = true
(irb):1: warning: variable $KCODE is no longer effective; ignored
=&gt; true
&gt;&gt; $KCODE
(irb):2: warning: variable $KCODE is no longer effective
=&gt; nil
</pre>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2D-W"><code>$-W -&gt; 0 | 1 | 2</code><span class="permalink">[<a href="../method/-kernel/v/=2d-w.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2DW">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
コマンドラインオプション -W を指定したとき、
そのコマンドライン引数の値が設定されます。
</p>
<p>
つまり、<a href="../method/-kernel/v/-v-e-r-b-o-s-e.html">$VERBOSE</a> の値によって以下の値を返します。
</p>
<dl>
<dt>nil</dt>
<dd>
<p>
0。警告を出力しない。
</p>
</dd>
<dt>false</dt>
<dd>
<p>
1。重要な警告のみ出力する。(デフォルト)
</p>
</dd>
<dt>true</dt>
<dd>
<p>
2。すべての警告を出力する。
</p>
</dd>
</dl>
<p>
この変数には代入できません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DA"><code>$-a -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2da.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2Da">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
自動 split モードを表すフラグです。
</p>
<p>
コマンドラインオプション -a を使ったとき true に設定されます。
この変数には代入できません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DD"><code>$DEBUG -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2dd.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2Dd">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-d -&gt; bool</code></dt>
<dd class="method-description">
<p>
この値が真のときはインタプリタがデバッグモードになります。
</p>
<p>
コマンドラインオプション -d でセットされます。
スクリプトから代入することもできます。
</p>
<p>
デバッグモードでは、通常モードに比べて以下の違いがあります。
</p>
<ul>
<li>通常時はいずれかのスレッドが例外によって終了しても
他のスレッドは実行を続けますが、デバッグモードでは
いずれかのスレッドが例外によって終了した時に
インタプリタ全体が中断されるようになります。
<a href="../method/-thread/s/abort_on_exception.html">Thread.abort_on_exception</a> を
true にセットするのと同じ効果です。</li>
<li>Thread.abort_on_exception= の効果がなくなります。</li>
<li>例外を捕捉しているかどうかに関係なく、
例外が発生した時点で <a href="../method/-kernel/v/stderr.html">$stderr</a> にそれが出力されます。
スクリプトの処理は続行されます。</li>
</ul>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DI"><code>$-i -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2di.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2Di">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
in-place 置換モードで用いられます。
</p>
<p>
コマンドラインオプション -i を指定したとき、空文字列になります。
-i オプションに拡張子を渡した場合にはその拡張子が文字列として格納されます。
</p>
<p>
-i オプションが指定されていない時の値は nil です。
</p>
<p>
スクリプト内で $-i に代入することもでき、
その場合は <a href="../method/-object/c/-a-r-g-v.html">Object::ARGV</a> の次の
ファイルを読み込み始めるタイミングで in-place 置換を開始します。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DL"><code>$-l -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2dl.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2Dl">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
コマンドラインオプション -l を指定したとき true に設定されます。
この変数には代入できません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DP"><code>$-p -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=2dp.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2Dp">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
コマンドラインオプション -p を指定したとき true に設定されます。
この変数には代入できません。
</p>
<p>
この変数はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2DV"><code>$VERBOSE -&gt; bool | nil</code><span class="permalink">[<a href="../method/-kernel/v/=2dv.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-2Dv">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$-v -&gt; bool | nil</code></dt>
<dt class="method-heading"><code>$-w -&gt; bool | nil</code></dt>
<dd class="method-description">
<p>
冗長メッセージフラグです。Rubyインタプリタへの
コマンドラインオプション -v でセットされます。
</p>
<p>
警告レベルは三段階あり、それぞれ以下の通りです。
</p>
<dl>
<dt>nil</dt>
<dd>
<p>
警告を出力しない
</p>
</dd>
<dt>false</dt>
<dd>
<p>
重要な警告のみ出力 (デフォルト)
</p>
</dd>
<dt>true</dt>
<dd>
<p>
すべての警告を出力する
</p>
</dd>
</dl>
<p>
$VERBOSE に nil, false 以外を代入すると値は true になります。
</p>
<p>
$VERBOSE の値はコマンドラインオプション
-W でも設定できます。
-W0 オプションで nil、
-W1 オプションで false、
-W2, -W オプションで true が設定されます。
-v オプションや
-w オプションを指定した場合は
true が設定されます。
</p>
<p>
$VERBOSE はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--2E"><code>$. -&gt; Fixnum</code><span class="permalink">[<a href="../method/-kernel/v/=2e.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-.">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
いずれかの <a href="../class/-i-o.html">IO</a> オブジェクトが最後に読んだ行の行番号です。
<a href="../method/-object/c/-a-r-g-f.html">Object::ARGF</a> などの IO 互換のオブジェクトも $. を更新します。
</p>
<p>
IO からの読み込みが起きるタイミングが予測不能であるような複雑なプログラムでは使用すべきではありません。特に、マルチスレッドプログラムではスレッド間で競合を起こす可能性があります。
そのような場合には、 <a href="../method/-i-o/i/lineno.html">IO#lineno</a> を使用してください。
</p>
<p>
この変数はグローバルスコープです。
Ruby起動時の初期値は 0 です。
</p>
</dd>


<dt class="method-heading" id="V_0"><code>$0 -&gt; String</code><span class="permalink">[<a href="../method/-kernel/v/0.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-0">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$PROGRAM_NAME -&gt; String</code></dt>
<dd class="method-description">
<p>
現在実行中の Ruby スクリプトの名前を表す文字列です。
</p>
<p>
OS と Ruby のバージョンによっては、この変数に代入すると <a class="external" href="http://www.opengroup.org/onlinepubs/009695399/utilities/ps.html">ps(1)</a> の出力が変化します。
この機能はプログラムの現在の状態を表示するのに便利です。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_1"><code>$1 -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/1.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-1">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$2 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$3 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$4 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$5 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$6 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$7 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$8 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$9 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$10 -&gt; String | nil</code></dt>
<dt class="method-heading"><code>$11 -&gt; String | nil</code></dt>
<dd class="method-description">
<p>
最後に成功したパターンマッチで n 番目の括弧にマッチした値が格納されます。
該当する括弧がなければ nil が入っています。(覚え方: \数字 のようなもの)
</p>
<p>
番号 n はいくらでも大きな正整数を利用できます。
</p>
<p>
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>[1],
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>[2], ... と同じ。
</p>
<p>
これらの変数はローカルスコープかつスレッドローカル、読み取り専用です。
</p>
<h3 >例</h3>
<pre>
str = '&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'
if %r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;] =~ str
  print $1
  print $2
end
#=&gt; &quot;http://example.com&quot;
#=&gt; &quot;example.com&quot;
</pre>
</dd>


<dt class="method-heading" id="V_--3C"><code>$&lt; -&gt; IO</code><span class="permalink">[<a href="../method/-kernel/v/=3c.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-3C">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
すべての引数または標準入力で構成される仮想ファイルです。
定数 <a href="../method/-object/c/-a-r-g-f.html">Object::ARGF</a> の別名です。
</p>
<p>
この変数はグローバルスコープ、読み取り専用です。
</p>
</dd>


<dt class="method-heading" id="V_--3D"><code>$= -&gt; bool</code><span class="permalink">[<a href="../method/-kernel/v/=3d.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-3D">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
過去との互換性のために残されていますが、もはや何の意味もありません。
</p>
<p>
値は常に false です。代入しても無視されます。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--3E"><code>$&gt; -&gt; object</code><span class="permalink">[<a href="../method/-kernel/v/=3e.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-3E">rdoc</a>]</span></dt>
<dt class="method-heading"><code>$stdout -&gt; object</code></dt>
<dd class="method-description">
<p>
標準出力です。
</p>
<p>
組み込み関数 <a href="../method/-kernel/m/print.html">Kernel.#print</a>、<a href="../method/-kernel/m/puts.html">Kernel.#puts</a> や
<a href="../method/-kernel/m/p.html">Kernel.#p</a> などのデフォルトの出力先となります。
初期値は <a href="../method/-object/c/-s-t-d-o-u-t.html">Object::STDOUT</a> です。
コマンドラインオプションオプション -i を指定した場合には
読み込み元と同じ名前のファイルを表します。
</p>
<p>
$stdout に代入するオブジェクトには
write という名前のメソッドが定義されていなければいけません。
</p>
<p>
自プロセスの標準出力をリダイレクトしたいときには、
以下のように $stdout に代入すれば十分です。
</p>
<pre>
# 標準出力の出力先を /tmp/foo に変更
$stdout = File.open(&quot;/tmp/foo&quot;, &quot;w&quot;)
puts &quot;foo&quot;         # 出力する
$stdout = STDOUT   # 元に戻す
</pre>
<p>
自プロセスだけでなく、子プロセスの標準出力もリダイレクトしたいときは
以下のように <a href="../method/-i-o/i/reopen.html">IO#reopen</a> を使います。
</p>
<pre>
STDOUT.reopen(&quot;/tmp/foo&quot;, &quot;w&quot;)
</pre>
<p>
また、リダイレクトしたあと
出力先をまた元に戻したい場合は以下のようにします。
</p>
<pre>
stdout_old = $stdout.dup        # 元の $stdout を保存する
$stdout.reopen(&quot;/tmp/foo&quot;)      # $stdout を /tmp/foo にリダイレクトする
puts &quot;foo&quot;                      # /tmp/foo に出力
$stdout.flush                   # 念のためフラッシュする
$stdout.reopen stdout_old       # 元に戻す
</pre>
<p>
$stdout はグローバルスコープです。
</p>
<p>
[SEE_ALSO] <a href="../doc/spec=2frubycmd.html">Rubyの起動</a>
</p>
</dd>


<dt class="method-heading" id="V_--3F"><code>$? -&gt; Process::Status | nil</code><span class="permalink">[<a href="../method/-kernel/v/=3f.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-3F">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
このスレッドで最後に終了した子プロセスのステータスです。
</p>
<p>
<a href="../class/-process=3a=3a-status.html">Process::Status</a> オブジェクトが入っています。
子プロセスの終了時ステータスは <a href="../method/-process=3a=3a-status/i/exitstatus.html">Process::Status#exitstatus</a> で得られます。
</p>
<p>
この変数はスレッドローカルで読み取り専用です。
</p>
<p>
[SEE_ALSO] <a href="../method/-process/m/wait.html">Process.#wait</a>
</p>
</dd>


<dt class="method-heading" id="V_--40"><code>$@ -&gt; [String] | nil</code><span class="permalink">[<a href="../method/-kernel/v/=40.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-40">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
最後に例外が発生した時のバックトレースを表す配列です。
<a href="../method/-kernel/m/raise.html">Kernel.#raise</a> によって設定されます。
</p>
<p>
配列の各要素はメソッドの呼び出し位置を示す文字列で形式は
</p>
<pre>
&quot;filename:line&quot;
</pre>
<p>
または
</p>
<pre>
&quot;filename:line:in `methodname'&quot;
</pre>
<p>
です。これは <a href="../method/-kernel/m/caller.html">Kernel.#caller</a> が返す値と同じ形式です。
</p>
<p>
$@ へ値を代入するときは、<a href="../method/-kernel/v/=21.html">$!</a> が nil であってはいけません。
$@ の値は、<a href="../method/-kernel/v/=21.html">$!</a>.backtrace の値と同じです。
また、$@ への代入は <a href="../method/-kernel/v/=21.html">$!</a>.set_backtrace 呼び出しと同じです。
</p>
<p>
文字列の配列でも nil でもない値を代入しようとすると、 <a href="../class/-type-error.html">TypeError</a> 例外が発生します。
</p>
<p>
この変数はスレッドローカルです。
</p>
</dd>


<dt class="method-heading" id="V_-F-I-L-E-N-A-M-E"><code>$FILENAME -&gt; String</code><span class="permalink">[<a href="../method/-kernel/v/-f-i-l-e-n-a-m-e.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-FILENAME">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
仮想ファイル <a href="../method/-object/c/-a-r-g-f.html">Object::ARGF</a> で現在読み込み中のファイル名です。
<a href="../method/-a-r-g-f=2eclass/i/filename.html">ARGF.class#filename</a> と同じです。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_-S-A-F-E"><code>$SAFE -&gt; Fixnum</code><span class="permalink">[<a href="../method/-kernel/v/-s-a-f-e.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-SAFE">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
カレントスレッドのセーフレベルを表す整数です。セーフレベルについては
<a href="../doc/spec=2fsafelevel.html">セキュリティモデル</a> を参照してください。
</p>
<p>
Thread.current.safe_level と同じです。
非整数を代入しようとすると <a href="../class/-type-error.html">TypeError</a> が発生します。
</p>
<p>
この変数はスレッドローカルです。
Ruby起動時の初期値は 0 です。
</p>
</dd>


<dt class="method-heading" id="V_--5C"><code>$\ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=5c.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-5C">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
出力レコード区切りを表す文字列です。
<a href="../method/-kernel/m/print.html">Kernel.#print</a> が最後にこの文字列を出力します。
</p>
<p>
デフォルトは nil で、何も出力しません。
</p>
<p>
この変数はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V__"><code>$_ -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/_.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-_">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
最後に <a href="../method/-kernel/m/gets.html">Kernel.#gets</a> または <a href="../method/-kernel/m/readline.html">Kernel.#readline</a> で読み込んだ文字列です。
EOF に達した場合には、 nil になります。
(覚え方: Perlと同じ)
</p>
<p>
<a href="../method/-kernel/m/print.html">Kernel.#print</a> のような Perl 由来の幾つかのメソッドは、引数を省略すると代わりに $_ を利用します。
</p>
<p>
この変数はローカルスコープかつスレッドローカルです。
Ruby起動時の初期値は nil です。
</p>
<p>
[SEE_ALSO] <a href="../method/-kernel/m/print.html">Kernel.#print</a>, <a href="../method/-kernel/m/gets.html">Kernel.#gets</a>, <a href="../method/-kernel/m/readline.html">Kernel.#readline</a>, <a href="../method/-object/c/-a-r-g-f.html">Object::ARGF</a>
</p>
<h3 >例</h3>
<p>
example.txt:
</p>
<pre>
foo
bar
baz
</pre>
<p>
このとき、コマンド ruby -e 'print while gets' example.txt は次を出力します
</p>
<pre>
foo
bar
baz
</pre>
<p>
ただし、このプログラムは次のように書く方がよりRuby的です。
</p>
<pre>
ARGF.each do |line|
  print line
end
</pre>
</dd>


<dt class="method-heading" id="V_--60"><code>$` -&gt; String | nil</code><span class="permalink">[<a href="../method/-kernel/v/=60.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-60">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功した正規表現のパターンマッチでマッチした
部分より前の文字列です。
最後のマッチが失敗していた場合には nil となります。
</p>
<p>
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a>.pre_match と同じです。
</p>
<p>
この変数はローカルスコープかつスレッドローカル、読み取り専用です。
Ruby起動時の初期値は nil です。
</p>
<h3 >例</h3>
<pre>
str = '&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'
if %r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;] =~ str
  p $`
end
#=&gt; &quot;&lt;p&gt;&quot;
</pre>
</dd>


<dt class="method-heading" id="V_STDERR"><code>$stderr -&gt; object</code><span class="permalink">[<a href="../method/-kernel/v/stderr.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-stderr">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
標準エラー出力です。
</p>
<p>
Ruby インタプリタが出力するエラーメッセージや
警告メッセージ、<a href="../method/-kernel/m/warn.html">Kernel.#warn</a> の出力先となります。
初期値は <a href="../method/-object/c/-s-t-d-e-r-r.html">Object::STDERR</a> です。
</p>
<p>
$stderr に代入するオブジェクトには
write という名前のメソッドが定義されていなければいけません。
</p>
<p>
自プロセスの標準エラー出力をリダイレクトしたいときには、
$stderr に代入すれば十分です。
</p>
<pre>
# 標準エラー出力の出力先を /tmp/foo に変更
$stderr = File.open(&quot;/tmp/foo&quot;, &quot;w&quot;)
puts &quot;foo&quot;         # 出力する
$stderr = STDERR   # 元に戻す
</pre>
<p>
自プロセスだけでなく、子プロセスの標準エラー出力も
リダイレクトしたいときは以下のように <a href="../method/-i-o/i/reopen.html">IO#reopen</a> を使います。
</p>
<pre>
$stderr.reopen(&quot;/tmp/foo&quot;, &quot;w&quot;)
</pre>
<p>
また、リダイレクトしたあと
出力先をまた元に戻したい場合は以下のようにします。
</p>
<pre>
stderr_old = $stderr.dup        # 元の $stderr を保存する
$stderr.reopen(&quot;/tmp/foo&quot;)      # $stderr を /tmp/foo にリダイレクトする
puts &quot;foo&quot;                      # /tmp/foo に出力
$stderr.flush                   # 念のためフラッシュする
$stderr.reopen stderr_old       # 元に戻す
</pre>
<p>
$stderr はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_STDIN"><code>$stdin -&gt; object</code><span class="permalink">[<a href="../method/-kernel/v/stdin.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-stdin">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
標準入力です。
</p>
<p>
自プロセスの標準入力をリダイレクトしたいときは
$stdin に代入すれば十分です。
</p>
<pre>
# 標準入力の入力元 /tmp/foo に変更
$stdin = File.open(&quot;/tmp/foo&quot;, &quot;w&quot;)
gets               # 入力する
$stdin = STDIN     # 元に戻す
</pre>
<p>
ただし、<a href="../method/-kernel/m/gets.html">Kernel.#gets</a> など、特定の組み込みメソッドは
$stdin オブジェクトにメソッドを転送して実装されています。
従って、<a href="../method/-kernel/m/gets.html">Kernel.#gets</a> などが正しく動作するには、
$stdin オブジェクトに代入したオブジェクトが以下のメソッドを
正しく実装していなければいけません。
</p>
<pre>
gets, readline, readlines, getc, readchar, tell, seek,
pos=, rewind, fileno, to_io, eof, each_line, each_byte,
binmode, closed?
</pre>
<p>
例:
</p>
<pre>
$stdin = Object.new
def $stdin.gets
  &quot;foo&quot;
end
p gets()  # =&gt; &quot;foo&quot;
</pre>
<p>
自プロセスだけでなく、子プロセスの標準入力もリダイレクトしたいときは
以下のように <a href="../method/-i-o/i/reopen.html">IO#reopen</a> を使います。
</p>
<pre>
$stdin.reopen(&quot;/tmp/foo&quot;)
</pre>
<p>
また、リダイレクトしたあと
出力先をまた元に戻したい場合は以下のようにします。
</p>
<pre>
stdin_old = $stdin.dup       # 元の $stdin を保存する
$stdout.reopen(&quot;/tmp/foo&quot;)   # $stdin を /tmp/foo にリダイレクトする
gets                         # /tmp/foo から入力
$stdin.reopen stdin_old      # 元に戻す
</pre>
<p>
$stdin はグローバルスコープです。
</p>
</dd>


<dt class="method-heading" id="V_--7E"><code>$~ -&gt; MatchData | nil</code><span class="permalink">[<a href="../method/-kernel/v/=7e.html">permalink</a>][<a href="http://docs.ruby-lang.org/en/2.4.0/Kernel.html#method-c-7E">rdoc</a>]</span></dt>
<dd class="method-description">
<p>
現在のスコープで最後に成功したマッチに関する <a href="../class/-match-data.html">MatchData</a>オブジェクトです。
<a href="../method/-regexp/s/last_match.html">Regexp.last_match</a> の別名です。
</p>
<p>
このデータから n 番目のマッチ ($n) を取り出すためには $~[n] を使います。
</p>
<p>
この値に代入すると Regexp.last_match や、 <a href="../method/-kernel/v/=26.html">$&amp;</a>, <a href="../method/-kernel/v/1.html">$1</a>, <a href="../method/-kernel/v/2.html">$2</a>, ... などの関連する組み込み変数の値が変化します。
MatchData オブジェクトでも nil でもない値を代入しようとすると <a href="../class/-type-error.html">TypeError</a> が発生します。
</p>
<p>
この変数はローカルスコープかつスレッドローカルです。
Ruby起動時の初期値は nil です。
</p>
<h3 >例</h3>
<pre>
str = '&lt;p&gt;&lt;a href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/p&gt;'
if %r[&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;] =~ str
  p $~[1]
end
#=&gt; &quot;http://example.com&quot;
</pre>
</dd>


</dl>



<div id="footer">
  <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" />
  </a>
</div>
</body>
</html>
